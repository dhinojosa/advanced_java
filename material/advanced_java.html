<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<meta name="author" content="Daniel Hinojosa">
<title>Advanced Java</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article">
<div id="header">
<h1>Advanced Java</h1>
<div class="details">
<span id="author" class="author">Daniel Hinojosa</span><br>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_jshell">JShell</a>
<ul class="sectlevel2">
<li><a href="#_introducing_jshell">Introducing JShell</a></li>
<li><a href="#_reasons_for_jshell">Reasons for JShell</a></li>
<li><a href="#_jshell_prerequisites">JShell Prerequisites</a></li>
<li><a href="#_starting_jshell">Starting JShell</a></li>
<li><a href="#_jshell_in_verbose_mode">JShell in verbose mode</a></li>
<li><a href="#_trying_out_jshell">Trying out JShell</a></li>
<li><a href="#_replacing_variables_in_jshell">Replacing Variables in JShell</a></li>
<li><a href="#_final_is_ignored"><code>final</code> is ignored</a></li>
<li><a href="#_scratch_variable">Scratch Variable</a></li>
<li><a href="#_creating_methods">Creating methods</a></li>
<li><a href="#_changing_method_definitions">Changing method definitions</a></li>
<li><a href="#_creating_a_class">Creating a <code>class</code></a></li>
<li><a href="#_making_a_mistake">Making a mistake</a></li>
<li><a href="#_analyzing_an_exception">Analyzing an <code>Exception</code></a></li>
<li><a href="#_running_an_editor">Running an Editor</a></li>
<li><a href="#_running_your_own_editor">Running your own editor</a></li>
<li><a href="#_resetting_your_editor">Resetting your editor</a></li>
<li><a href="#_typical_commands">Typical Commands</a></li>
<li><a href="#_viewing_commands">Viewing Commands</a></li>
<li><a href="#_typical_commands_2">Typical Commands</a></li>
<li><a href="#_tab_completion">Tab Completion</a></li>
<li><a href="#_snippet_transformation">Snippet Transformation</a></li>
<li><a href="#_input_line_navigation">Input Line Navigation</a></li>
<li><a href="#_setting_the_classpath">Setting the Classpath</a></li>
<li><a href="#_scripting">Scripting</a></li>
<li><a href="#_loading_scripts">Loading Scripts</a></li>
<li><a href="#_exiting_jshell">Exiting JShell</a></li>
<li><a href="#_where_to_find_more_information">Where to find more information</a></li>
<li><a href="#_lab_jshell">Lab: JShell</a></li>
</ul>
</li>
<li><a href="#_setup">Setup</a>
<ul class="sectlevel2">
<li><a href="#_project_check">Project Check</a></li>
<li><a href="#_download_the_project">Download the Project</a></li>
<li><a href="#_opening_project_in_intellij">Opening Project in IntelliJ</a></li>
<li><a href="#_opening_the_project_in_eclipse">Opening the project in Eclipse</a></li>
<li><a href="#_opening_the_project_in_vscode">Opening the project in VSCode</a></li>
</ul>
</li>
<li><a href="#_lambdas">Lambdas</a>
<ul class="sectlevel2">
<li><a href="#_about_java_8_lambdas">About Java 8 Lambdas</a></li>
<li><a href="#_default_methods">Default Methods</a></li>
<li><a href="#_defining_mypredicate">Defining <code>MyPredicate</code></a></li>
<li><a href="#_functional_filter">Functional <code>filter</code></a></li>
<li><a href="#_functional_filter_by_example">Functional <code>filter</code> by example</a></li>
<li><a href="#_using_mypredicate">Using <code>MyPredicate</code></a></li>
<li><a href="#_testing_mypredicate">Testing <code>MyPredicate</code></a></li>
<li><a href="#_convert_mypredicate_into_a_lambda">Convert <code>MyPredicate</code> into a Lambda</a></li>
<li><a href="#_defining_myfunction">Defining <code>MyFunction</code></a></li>
<li><a href="#_functional_map">Functional <code>map</code></a></li>
<li><a href="#_functional_map_by_example">Functional <code>map</code> by example</a></li>
<li><a href="#_using_myfunction">Using <code>MyFunction</code></a></li>
<li><a href="#_testing_myfunction">Testing <code>MyFunction</code></a></li>
<li><a href="#_convert_myfunction_into_a_lambda">Convert <code>MyFunction</code> into a Lambda</a></li>
<li><a href="#_functional_flatmap">Functional <code>flatMap</code></a></li>
<li><a href="#_functional_flatmap_by_example">Functional <code>flatMap</code> by example</a></li>
<li><a href="#_using_myfunction_with_flatmap">Using <code>MyFunction</code> with <code>flatMap</code></a></li>
<li><a href="#_testing_myfunction_with_flatmap">Testing <code>MyFunction</code> with <code>flatMap</code></a></li>
<li><a href="#_defining_myconsumer">Defining <code>MyConsumer</code></a></li>
<li><a href="#_functional_foreach">Functional <code>forEach</code></a></li>
<li><a href="#_functional_foreach_by_example">Functional <code>forEach</code> by example</a></li>
<li><a href="#_using_myconsumer">Using <code>MyConsumer</code></a></li>
<li><a href="#_testing_myconsumer">Testing <code>MyConsumer</code></a></li>
<li><a href="#_convert_myconsumer_into_a_lambda">Convert <code>MyConsumer</code> into a Lambda</a></li>
<li><a href="#_a_detour_with_method_references">A Detour with Method References</a></li>
<li><a href="#_types_of_method_references">Types of Method References</a></li>
<li><a href="#_foreach_with_a_method_reference"><code>forEach</code> with a method reference</a></li>
<li><a href="#_static_method_with_a_method_reference">Static method with a method reference</a></li>
<li><a href="#_containing_type_as_a_method_reference">Containing Type as a Method Reference</a></li>
<li><a href="#_owner_of_the_method_reference">Owner of the Method Reference</a></li>
<li><a href="#_method_reference_with_an_instance">Method Reference with an Instance</a></li>
<li><a href="#_method_reference_with_an_new_type">Method Reference with an New Type</a></li>
<li><a href="#_create_mysupplier">Create <code>MySupplier</code></a></li>
<li><a href="#_create_a_mygenerate_in_functions_java">Create a <code>myGenerate</code> in <strong><em>Functions.java</em></strong></a></li>
<li><a href="#_use_mygenerate_in_functionstest_java">Use <code>myGenerate</code> in <strong><em>FunctionsTest.java</em></strong></a></li>
<li><a href="#_viewing_consumer_supplier_predicate_function_in_the_official_javadoc">Viewing Consumer, Supplier, Predicate, Function, in the official Javadoc.</a></li>
<li><a href="#_multi_line_lambdas">Multi-line Lambdas</a></li>
<li><a href="#_closure">Closure</a></li>
<li><a href="#_lexical_scoping_restrictions">Lexical Scoping Restrictions</a></li>
<li><a href="#_closure_error">Closure Error</a></li>
<li><a href="#_create_duplicated_code">Create Duplicated Code</a></li>
<li><a href="#_refactor_duplicated_code_with_a_closure">Refactor Duplicated Code with a Closure</a></li>
<li><a href="#_lab_functions">Lab: Functions</a></li>
</ul>
</li>
<li><a href="#_optional"><code>Optional</code></a>
<ul class="sectlevel2">
<li><a href="#_optional_defined_in_java_8"><code>Optional</code> Defined in Java 8</a></li>
<li><a href="#_optional_empty"><code>Optional</code> Empty</a></li>
<li><a href="#_optional_non_empty"><code>Optional</code> Non Empty</a></li>
<li><a href="#_trapping_something_possibly_null">Trapping Something Possibly <code>null</code></a></li>
<li><a href="#_optional_get"><code>Optional.get</code></a></li>
<li><a href="#_responsible_retrieval_using_orelse">Responsible retrieval using <code>orElse</code></a></li>
<li><a href="#_lazy_retrieval_with_a_supplier">Lazy Retrieval with a <code>Supplier</code></a></li>
<li><a href="#_ifpresentorelse"><code>ifPresentOrElse</code></a></li>
<li><a href="#_optional_and_map"><code>Optional</code> and <code>map</code></a></li>
<li><a href="#_optional_and_flatmap"><code>Optional</code> and <code>flatMap</code></a></li>
<li><a href="#_optional_is_not_serializable"><code>Optional</code> is not <code>Serializable</code></a></li>
<li><a href="#_lab_optional">Lab: <code>Optional</code></a></li>
</ul>
</li>
<li><a href="#_junit_5">JUnit 5</a>
<ul class="sectlevel2">
<li><a href="#_running_tests_on_the_command_line">Running Tests on the Command Line</a></li>
<li><a href="#_simple_test">Simple Test</a></li>
<li><a href="#_standard_assertions">Standard Assertions</a></li>
<li><a href="#_grouped_assertions">Grouped Assertions</a></li>
<li><a href="#_dependent_assertions">Dependent Assertions</a></li>
<li><a href="#_exception_testing">Exception Testing</a></li>
<li><a href="#_timeout_testing">Timeout Testing</a></li>
<li><a href="#_disabling_tests">Disabling Tests</a></li>
<li><a href="#_lab_junit_5">Lab: JUnit 5</a></li>
</ul>
</li>
<li><a href="#_streams">Streams</a>
<ul class="sectlevel2">
<li><a href="#_streams_overview">Streams Overview</a></li>
<li><a href="#_streams_overview_with_code">Streams Overview With Code</a></li>
<li><a href="#_creation">Creation</a></li>
<li><a href="#_specialized_streams">Specialized Streams</a></li>
<li><a href="#_converting">Converting</a></li>
<li><a href="#_intermediate_operators">Intermediate Operators</a></li>
<li><a href="#_terminal_operators">Terminal Operators</a></li>
<li><a href="#_specialized_streams_terminal_operations">Specialized Streams Terminal Operations</a></li>
<li><a href="#_infinite_streams">Infinite Streams</a></li>
<li><a href="#_common_collectors">Common Collectors</a></li>
<li><a href="#_custom_collectors">Custom Collectors</a></li>
<li><a href="#_converting_collect_with_lambdas">Converting <code>collect</code> with Lambdas</a></li>
<li><a href="#_parallelizing_streams">Parallelizing Streams</a></li>
<li><a href="#_lab_streams">Lab: Streams</a></li>
</ul>
</li>
<li><a href="#_java_date_time_api">Java Date Time API</a>
<ul class="sectlevel2">
<li><a href="#_iso_8601_standard">ISO 8601 Standard</a></li>
<li><a href="#_iso_8601_formats">ISO 8601 Formats</a></li>
<li><a href="#_java_util_date"><code>java.util.Date</code></a></li>
<li><a href="#_java_util_calendar"><code>java.util.Calendar</code></a></li>
<li><a href="#_terrible_readability_of_java_util_calendar">Terrible Readability of <code>java.util.Calendar</code></a></li>
<li><a href="#_what_was_cool_about_joda_time">What was cool about Joda Time?</a></li>
<li><a href="#_about_the_java_8_date_time_api">About the Java 8 Date Time API</a></li>
<li><a href="#_the_java_date_time_packaging">The Java Date Time Packaging</a></li>
<li><a href="#_date_time_conventions">Date Time Conventions</a></li>
<li><a href="#_instant"><code>Instant</code></a></li>
<li><a href="#_instant_resolution"><code>Instant</code> Resolution!</a></li>
<li><a href="#_instant_exemplified"><code>Instant</code> Exemplified</a></li>
<li><a href="#_enum"><code>Enum</code></a></li>
<li><a href="#_chronofield"><code>ChronoField</code></a></li>
<li><a href="#_chronofield_exemplified"><code>ChronoField</code> Exemplified</a></li>
<li><a href="#_local_dates_and_times">Local Dates and Times</a></li>
<li><a href="#_zoneddatetime"><code>ZonedDateTime</code></a></li>
<li><a href="#_daylight_saving_time_begins">Daylight Saving Time Begins</a></li>
<li><a href="#_daylight_saving_time_using_java_date_time_api">Daylight Saving Time using Java Date Time API</a></li>
<li><a href="#_daylight_saving_time_using_the_java_date_time_api">Daylight Saving Time using the Java Date Time API</a></li>
<li><a href="#_standard_time_using_the_java_date_time_api">Standard Time using the Java Date Time API</a></li>
<li><a href="#_which_130_am">Which 1:30 AM?</a></li>
<li><a href="#_shifting_time">Shifting Time</a></li>
<li><a href="#_shifting_dates_and_time">Shifting Dates and Time</a></li>
<li><a href="#_temporal_adjusters">Temporal Adjusters</a></li>
<li><a href="#_overly_simplified_temporal_adjuster">Overly Simplified Temporal Adjuster</a></li>
<li><a href="#_lambda_capable_temporaladjuster">Lambda Capable <code>TemporalAdjuster</code></a></li>
<li><a href="#_refactoring_and_inlining">Refactoring and inlining</a></li>
<li><a href="#_parsing_and_formatting">Parsing and Formatting</a></li>
<li><a href="#_formatting_localdate">Formatting <code>LocalDate</code></a></li>
<li><a href="#_formatting_localtime">Formatting <code>LocalTime</code></a></li>
<li><a href="#_formatting_localdatetime">Formatting <code>LocalDateTime</code></a></li>
<li><a href="#_formatting_customized_patterns">Formatting Customized Patterns</a></li>
<li><a href="#_formatting_with_localization">Formatting with Localization</a></li>
<li><a href="#_shifting_time_zones">Shifting Time Zones</a></li>
<li><a href="#_temporal_querying">Temporal Querying</a></li>
<li><a href="#_a_festive_example">A Festive Example</a></li>
<li><a href="#_simple_parsing_example">Simple Parsing Example</a></li>
<li><a href="#_interoperabilility_with_legacy_code">Interoperabilility with Legacy Code</a></li>
<li><a href="#_lab_date_time">Lab: Date Time</a></li>
</ul>
</li>
<li><a href="#_generics">Generics</a>
<ul class="sectlevel2">
<li><a href="#_static_vs_dynamic">Static vs. Dynamic</a></li>
<li><a href="#_generics_2">Generics</a></li>
<li><a href="#_effective_java_item_26">Effective Java Item 26</a></li>
<li><a href="#_generic_terms">Generic Terms</a></li>
<li><a href="#_before_generics">Before Generics</a></li>
<li><a href="#_effective_java_item_23">Effective Java Item 23</a></li>
<li><a href="#_before_generics_another_example">Before Generics Another Example</a></li>
<li><a href="#_eliminating_casting">Eliminating Casting</a></li>
<li><a href="#_diamond_operator">Diamond Operator</a></li>
<li><a href="#_boxing_before_generics">Boxing Before Generics</a></li>
<li><a href="#_boxing_after_generics">Boxing After Generics</a></li>
<li><a href="#_container_of_a_container">Container of a Container</a></li>
<li><a href="#_using_generics_with_static_methods">Using Generics with static methods</a></li>
<li><a href="#_type_erasure">Type Erasure</a></li>
<li><a href="#_assignment_of_generic_types">Assignment of Generic Types</a></li>
<li><a href="#_variant_relationships">Variant Relationships</a></li>
<li><a href="#_variant_relationships_2">Variant Relationships</a></li>
<li><a href="#_method_return_types_vs_parameters">Method Return Types Vs. Parameters</a></li>
<li><a href="#_pecs">PECS</a></li>
<li><a href="#_consumer_and_producer">Consumer and Producer</a></li>
<li><a href="#_consumer_and_producer_2">Consumer and Producer</a></li>
<li><a href="#_graph_relationship">Graph Relationship</a></li>
<li><a href="#_invariant">Invariant</a></li>
<li><a href="#_invariant_chart">Invariant Chart</a></li>
<li><a href="#_invariant_american_method_parameter">Invariant <code>American</code> Method Parameter</a></li>
<li><a href="#_invariant_american_assignment">Invariant <code>American</code> Assignment</a></li>
<li><a href="#_covariant">Covariant</a></li>
<li><a href="#_covariant_chart_extends_american_with_stlouisan_container">Covariant Chart <code>&lt;? extends American&gt;</code> with <code>StLouisan</code> Container</a></li>
<li><a href="#_covariant_chart_extends_person_with_missourian_container">Covariant Chart <code>&lt;? extends Person&gt;</code> with <code>Missourian</code> Container</a></li>
<li><a href="#_covariant_chart_extends_object_with_stlouisan_container">Covariant Chart <code>&lt;? extends Object&gt;</code> with <code>StLouisan</code> Container</a></li>
<li><a href="#_covariant_chart_with_stlouisan_container">Covariant Chart <code>&lt;?&gt;</code> with <code>StLouisan</code> Container</a></li>
<li><a href="#_covariant_northamerican_method_parameter">Covariant <code>NorthAmerican</code> Method Parameter</a></li>
<li><a href="#_covariant_north_american_assignment">Covariant <code>North American</code> Assignment</a></li>
<li><a href="#_covariant_object_method_parameter">Covariant <code>Object</code> Method Parameter</a></li>
<li><a href="#_contravariant_super_american_with_person_container">Contravariant <code>&lt;? super American&gt;</code> with <code>Person</code> Container</a></li>
<li><a href="#_contravariant_chart_super_stlouisan_with_person_container">Contravariant Chart <code>&lt;? super StLouisan&gt;</code> with <code>Person</code> Container</a></li>
<li><a href="#_contravariant_chart_super_stlouisan_with_american_container">Contravariant Chart <code>&lt;? super StLouisan&gt;</code> with <code>American</code> Container</a></li>
<li><a href="#_contravariant_american_method">Contravariant <code>American</code> Method</a></li>
<li><a href="#_contravariant_american_assignment">Contravariant <code>American</code> Assignment</a></li>
<li><a href="#_array_covariance">Array Covariance</a></li>
<li><a href="#_array_covariance_example">Array Covariance Example</a></li>
<li><a href="#_safe_varargs_heap_pollution">Safe VarArgs Heap Pollution</a></li>
<li><a href="#_heap_pollution">Heap Pollution</a></li>
<li><a href="#_heap_pollution_example">Heap Pollution Example</a></li>
<li><a href="#_safe_varargs">Safe Varargs</a></li>
<li><a href="#_vararg_non_safety">Vararg Non-Safety</a></li>
<li><a href="#_the_varargs_annotation">The <code>@Varargs</code> Annotation</a></li>
<li><a href="#_subclassing_generics_bridge_method">Subclassing Generics &amp; Bridge Method</a></li>
<li><a href="#_subclassing_generics">Subclassing Generics</a></li>
<li><a href="#_subclassing">Subclassing</a></li>
<li><a href="#_bridge_method">Bridge Method</a></li>
<li><a href="#_multiple_type_bounds">Multiple Type Bounds</a></li>
<li><a href="#_multiple_type_bound_example">Multiple Type Bound Example</a></li>
<li><a href="#_recursive_type_bound">Recursive Type Bound</a></li>
<li><a href="#_recursive_type_bound_example">Recursive Type Bound Example</a></li>
<li><a href="#_lab_generics">Lab: Generics</a></li>
</ul>
</li>
<li><a href="#_collection_interface">Collection interface</a>
<ul class="sectlevel2">
<li><a href="#_collections">Collections</a></li>
<li><a href="#_iterator_iterable_and_enumeration"><code>Iterator</code>, <code>Iterable</code>, and <code>Enumeration</code></a></li>
<li><a href="#_using_iterator">Using <code>Iterator</code></a></li>
<li><a href="#_using_iterable">Using <code>Iterable</code></a></li>
<li><a href="#_using_listiterator">Using <code>ListIterator</code></a></li>
<li><a href="#_enumeration"><code>Enumeration</code></a></li>
<li><a href="#_queue_and_deque"><code>Queue</code> and <code>Deque</code></a></li>
<li><a href="#_queue"><code>Queue</code></a></li>
<li><a href="#_queue_operations"><code>Queue</code> Operations</a></li>
<li><a href="#_queue_addition_operations"><code>Queue</code> Addition Operations</a></li>
<li><a href="#_queue_removal_operations"><code>Queue</code> Removal Operations</a></li>
<li><a href="#_queue_examination_operations"><code>Queue</code> Examination Operations</a></li>
<li><a href="#_linkedlist_as_a_queue"><code>LinkedList</code> as a <code>Queue</code></a></li>
<li><a href="#_priorityqueue"><code>PriorityQueue</code></a></li>
<li><a href="#_priorityqueue_2"><code>PriorityQueue</code></a></li>
<li><a href="#_priorityqueue_3"><code>PriorityQueue</code></a></li>
<li><a href="#_priorityqueue_4"><code>PriorityQueue</code></a></li>
<li><a href="#_deque"><code>Deque</code></a></li>
<li><a href="#_stack"><code>Stack</code></a></li>
<li><a href="#_deque_operations"><code>Deque</code> Operations</a></li>
</ul>
</li>
<li><a href="#_threads">Threads</a>
<ul class="sectlevel2">
<li><a href="#_threads_2">Threads</a></li>
<li><a href="#_creating_a_basic_thread">Creating a Basic <code>Thread</code></a></li>
<li><a href="#_extending_thread">Extending <code>Thread</code></a></li>
<li><a href="#_threads_with_runnable">Threads with <code>Runnable</code></a></li>
<li><a href="#_create_a_thread_with_runnable">Create a <code>Thread</code> with <code>Runnable</code></a></li>
<li><a href="#_common_thread_methods">Common <code>Thread</code> methods</a></li>
<li><a href="#_thread_states">Thread states</a></li>
<li><a href="#_thread_priorities">Thread priorities</a></li>
<li><a href="#_join"><code>join</code></a></li>
<li><a href="#_join_threads"><code>join</code> Threads</a></li>
<li><a href="#_daemon_threads">Daemon Threads</a></li>
<li><a href="#_daemon_thread_example">Daemon Thread Example</a></li>
<li><a href="#_immutability">Immutability</a></li>
<li><a href="#_race_conditions">Race Conditions</a></li>
<li><a href="#_locks">Locks</a></li>
<li><a href="#_intrinsic_locks">Intrinsic Locks</a></li>
<li><a href="#_intrinsic_lock_on_a_method">Intrinsic Lock on a Method</a></li>
<li><a href="#_intrinsic_lock_on_this">Intrinsic Lock on <code>this</code></a></li>
<li><a href="#_intrinsic_lock_on_an_external_object">Intrinsic Lock on an external object</a></li>
<li><a href="#_intrinsic_lock_on_a_class">Intrinsic Lock on a <code>class</code></a></li>
<li><a href="#_wait_notify_notifyall"><code>wait</code>, <code>notify</code>, <code>notifyAll</code></a></li>
<li><a href="#_volatile_fields">Volatile Fields</a></li>
<li><a href="#_volatile_field_first_guarantee"><code>volatile</code> field first guarantee</a></li>
<li><a href="#_atomics">Atomics</a></li>
<li><a href="#_atomic_values_arrays_and_fields">Atomic Values, Arrays, and Fields</a></li>
<li><a href="#_atomic_references">Atomic References</a></li>
<li><a href="#_without_atomic_variables">Without Atomic Variables</a></li>
<li><a href="#_with_atomic_variables">With Atomic Variables</a></li>
<li><a href="#_deadlocks">Deadlocks</a></li>
<li><a href="#_alphonse_and_gaston_example"><code>Alphonse</code> and <code>Gaston</code> Example</a></li>
<li><a href="#_livelock">Livelock</a></li>
<li><a href="#_the_criminal_and_police">The <code>Criminal</code> and <code>Police</code></a></li>
<li><a href="#_first_the_criminal">First the <code>Criminal</code></a></li>
<li><a href="#_then_the_police">Then the <code>Police</code></a></li>
<li><a href="#_running_the_livelock">Running the Livelock</a></li>
<li><a href="#_starvation">Starvation</a></li>
<li><a href="#_starvation_by_never_finishing_the_job">Starvation by never finishing the job</a></li>
<li><a href="#_remedy_for_starvation">Remedy for Starvation</a></li>
<li><a href="#_reentrant_locks">Reentrant Locks</a></li>
<li><a href="#_thread_safe_collections">Thread safe collections</a></li>
<li><a href="#_cyclic_barrier">Cyclic Barrier</a></li>
<li><a href="#_phaser">Phaser</a></li>
<li><a href="#_countdown_latch">Countdown Latch</a></li>
<li><a href="#_countdown_latch_listener">Countdown Latch Listener</a></li>
<li><a href="#_countdown_latch_command">Countdown Latch Command</a></li>
<li><a href="#_lab_threads">Lab: Threads</a></li>
</ul>
</li>
<li><a href="#_futures">Futures</a>
<ul class="sectlevel2">
<li><a href="#_thread_pools">Thread Pools</a></li>
<li><a href="#_basic_future_blocking_jdk_5">Basic Future Blocking (JDK 5)</a></li>
<li><a href="#_basic_future_asynchronous_jdk_5">Basic Future Asynchronous (JDK 5)</a></li>
<li><a href="#_futures_with_parameters">Futures with Parameters</a></li>
<li><a href="#_retrieving_the_future">Retrieving the <code>Future</code></a></li>
<li><a href="#_completable_future">Completable Future</a></li>
<li><a href="#_implementation_for_the_futures">Implementation for the Futures</a></li>
<li><a href="#_simply_accepting_the_answer">Simply Accepting the Answer</a></li>
<li><a href="#_functional_map_with_thenapply">Functional <code>map</code> with <code>thenApply</code></a></li>
<li><a href="#_asynchronous_functional_map_with_thenapplyasync">Asynchronous Functional <code>map</code> with <code>thenApplyAsync</code></a></li>
<li><a href="#_trigger_a_final_action_with_thenrun">Trigger a final action with <code>thenRun</code></a></li>
<li><a href="#_trapping_errors_with_exceptionally">Trapping Errors with <code>exceptionally</code></a></li>
<li><a href="#_trapping_errors_with_handle">Trapping Errors with <code>handle</code></a></li>
<li><a href="#_flatmap_with_compose_but_first_a_composablefuture_with_a_parameter"><code>flatMap</code> with <code>compose</code>, but first a <code>ComposableFuture</code> with a parameter</a></li>
<li><a href="#_using_compose_to_compose_two_completablefuture">Using <code>compose</code> to compose two <code>CompletableFuture</code></a></li>
<li><a href="#_using_combine_to_combine_two_unrelated_completeablefuture">Using <code>combine</code> to combine two unrelated <code>CompleteableFuture</code></a></li>
<li><a href="#_a_promise_is_a_promise">A Promise is a <code>Promise</code></a></li>
<li><a href="#_creating_a_promise_using_completablefuture">Creating a Promise using <code>CompletableFuture</code></a></li>
</ul>
</li>
<li><a href="#_flow_api">Flow API</a>
<ul class="sectlevel2">
<li><a href="#_components">Components</a></li>
<li><a href="#_publisher"><code>Publisher</code></a></li>
<li><a href="#_subscriber"><code>Subscriber</code></a></li>
<li><a href="#_subscription"><code>Subscription</code></a></li>
<li><a href="#_push_model">Push Model</a></li>
<li><a href="#_processor"><code>Processor</code></a></li>
<li><a href="#_physical_backpressure">Physical Backpressure</a></li>
<li><a href="#_data_backpressure">Data Backpressure</a></li>
<li><a href="#_flow_api_request_and_backpressure">Flow API Request and Backpressure</a></li>
<li><a href="#_flow_api_backpressure">Flow API Backpressure</a></li>
<li><a href="#_publisher_2"><code>Publisher</code></a></li>
<li><a href="#_subscriber_and_subscription"><code>Subscriber</code> and <code>Subscription</code></a></li>
<li><a href="#_a_second_subscriber">A Second Subscriber</a></li>
<li><a href="#_reactive_streams">Reactive Streams</a></li>
<li><a href="#_interconnecting_reactive_projects">Interconnecting Reactive Projects</a></li>
<li><a href="#_lab_reactive">Lab: Reactive</a></li>
</ul>
</li>
<li><a href="#_design_patterns">Design Patterns</a>
<ul class="sectlevel2">
<li><a href="#_creational_patterns">Creational Patterns</a></li>
<li><a href="#_factory_method_pattern">Factory Method Pattern</a></li>
<li><a href="#_builder_pattern">Builder Pattern</a></li>
<li><a href="#_singleton_pattern">Singleton Pattern</a></li>
<li><a href="#_factory_method_pattern_2">Factory Method Pattern</a></li>
<li><a href="#_abstract_factory_pattern">Abstract Factory Pattern</a></li>
<li><a href="#_behavioral_patterns">Behavioral Patterns</a></li>
<li><a href="#_state_pattern">State Pattern</a></li>
<li><a href="#_strategy_pattern">Strategy Pattern</a></li>
<li><a href="#_chain_of_responsibility_pattern">Chain of Responsibility Pattern</a></li>
<li><a href="#_command_pattern">Command Pattern</a></li>
<li><a href="#_iterator_pattern">Iterator Pattern</a></li>
<li><a href="#_template_method_pattern">Template Method Pattern</a></li>
<li><a href="#_mediator_pattern">Mediator Pattern</a></li>
<li><a href="#_memento_pattern">Memento Pattern</a></li>
<li><a href="#_observer_pattern">Observer Pattern</a></li>
<li><a href="#_structural_patterns">Structural Patterns</a></li>
<li><a href="#_adapter_pattern">Adapter Pattern</a></li>
<li><a href="#_bridge_pattern">Bridge Pattern</a></li>
<li><a href="#_composite_pattern">Composite Pattern</a></li>
<li><a href="#_decorator_pattern">Decorator Pattern</a></li>
<li><a href="#_facade_pattern">Facade Pattern</a></li>
<li><a href="#_proxy_pattern">Proxy Pattern</a></li>
<li><a href="#_flyweight_pattern">Flyweight Pattern</a></li>
</ul>
</li>
<li><a href="#_what_is_new_in_java">What is new in Java</a>
<ul class="sectlevel2">
<li><a href="#_jdk_9">JDK 9</a></li>
<li><a href="#_jdk_10">JDK 10</a></li>
<li><a href="#_jdk_11">JDK 11</a></li>
<li><a href="#_jdk_12">JDK 12</a></li>
<li><a href="#_jdk_13">JDK 13</a></li>
</ul>
</li>
<li><a href="#_thank_you">Thank You</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1 slide_section">
<h2 id="_jshell">JShell</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_introducing_jshell">Introducing JShell</h3>
<div class="ulist">
<ul>
<li>
<p>Java Shell tool (JShell) is an interactive tool for learning the Java programming language and prototyping Java code</p>
</li>
<li>
<p>Read-Evaluate-Print Loop (REPL)</p>
</li>
<li>
<p>Evaluates Expressions as they are entered</p>
</li>
<li>
<p>JShell accepts Java</p>
<div class="ulist">
<ul>
<li>
<p>statements</p>
</li>
<li>
<p>variables</p>
</li>
<li>
<p>methods</p>
</li>
<li>
<p><code>class</code> definitions</p>
</li>
<li>
<p><code>import</code> definitions</p>
</li>
<li>
<p>expressions</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_reasons_for_jshell">Reasons for JShell</h3>
<div class="ulist">
<ul>
<li>
<p>Trial of code before implementation</p>
</li>
<li>
<p>Establish and communicate ideas with code</p>
</li>
<li>
<p>Bring production code and dissect problems</p>
</li>
<li>
<p>Take ideas or fixes back to the IDE</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_jshell_prerequisites">JShell Prerequisites</h3>
<div class="ulist">
<ul>
<li>
<p>JDK 9 or higher</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_starting_jshell">Starting JShell</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sh"><span></span>% jshell</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="jshell"><span></span>|  Welcome to JShell -- Version 10
|  For an introduction type: /help intro

jshell&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jshell_in_verbose_mode">JShell in verbose mode</h3>
<div class="ulist">
<ul>
<li>
<p><code>-v</code> will enter you in verbose mode</p>
</li>
<li>
<p>Full description of actions performed within JShell</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sh"><span></span>% jshell -v</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_trying_out_jshell">Trying out JShell</h3>
<div class="ulist">
<ul>
<li>
<p>Notice there are no semicolons in using JShell when it deals with <em>some</em> assignments</p>
</li>
<li>
<p>Later versions of Java can make using of <code>var</code> same in JShell</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="jshell"><span></span>jshell&gt; var list = List.of(3,4,5,6)
list ==&gt; [3, 4, 5, 6]

jshell&gt; var mapped = list.stream().map(x -&gt; x + 1).collect(Collectors.toList())
mapped ==&gt; [4, 5, 6, 7]

jshell&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_replacing_variables_in_jshell">Replacing Variables in JShell</h3>
<div class="paragraph">
<p>In this mode you have the availability to reassign a variable in JShell</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="jshell"><span></span>jshell&gt; var x = List.of(1,2,3,4)
x ==&gt; [1, 2, 3, 4]
|  created variable x : List&lt;Integer&gt;

jshell&gt; var x = 30
x ==&gt; 30
|  replaced variable x : int
|    update overwrote variable x : List&lt;Integer&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_final_is_ignored"><code>final</code> is ignored</h3>
<div class="ulist">
<ul>
<li>
<p>The keyword <code>final</code> is ignored as a top level assignment within JShell</p>
</li>
<li>
<p>If the verbose is turned on in JShell using <code>-v</code> you can review the message</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="jshell"><span></span>jshell&gt; final var d = 30
|  Warning:
|  Modifier &#39;final&#39;  not permitted in top-level declarations, ignored
|  final var d = 30;
|  ^---^
d ==&gt; 30
|  created variable d : int</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_scratch_variable">Scratch Variable</h3>
<div class="ulist">
<ul>
<li>
<p>If you do not create a variable name, one will be created for you</p>
</li>
<li>
<p>This is called a <em>scratch variable</em></p>
</li>
<li>
<p>It is assigned with a variable <code>$n</code> where n is a monotonically increasing integer</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="jshell"><span></span>jshell&gt; 2 + 2
$3 ==&gt; 4
|  created scratch variable $3 : int</code></pre>
</div>
</div>
<div class="paragraph">
<p>It can then be subsequently called by that variable</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="jshell"><span></span>jshell&gt; $3 + 2
$4 ==&gt; 6
|  created scratch variable $4 : int</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_creating_methods">Creating methods</h3>
<div class="ulist">
<ul>
<li>
<p>Methods can also be created <em>without</em> a surrounding <code>class</code></p>
</li>
<li>
<p>They can then be invoked afterwards by name with a surrounding <code>class</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="jshell"><span></span>jshell&gt; public String times(int n, String s) {
   ...&gt;    StringBuilder sb = new StringBuilder();
   ...&gt;    for (int i = 0; i &lt; n; i++) {
   ...&gt;       sb.append(s);
   ...&gt;    }
   ...&gt;    return sb.toString();
   ...&gt; }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Invocation can then be invoked using standard Java:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="jshell"><span></span>jshell&gt; times(3, &quot;Foo&quot;)
$6 ==&gt; &quot;FooFooFoo&quot;
|  created scratch variable $6 : String</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_changing_method_definitions">Changing method definitions</h3>
<div class="ulist">
<ul>
<li>
<p>If you want to rewrite a method, you can do so by just creating a different implementation</p>
</li>
<li>
<p>If you have <code>-v</code> verbose mode on, this will show that you are replacing the definition</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="jshell"><span></span>jshell&gt; public String times(int n, String s) {
   ...&gt;   return IntStream.range(0, n).boxed()
   ...&gt;          .map(x -&gt; s).collect(Collectors.joining());
   ...&gt; }
|  modified method times(int,String)
|    update overwrote method times(int,String)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_creating_a_class">Creating a <code>class</code></h3>
<div class="ulist">
<ul>
<li>
<p>Much like a method, a <code>class</code> can be creating in JShell</p>
</li>
<li>
<p>Merely type in the declaration and use the class at will</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="jshell"><span></span>jshell&gt; public class Country {
   ...&gt;    private String name;
   ...&gt;    private String capital;
   ...&gt;    public Country (String name, String capital) {
   ...&gt;      this.name = name;
   ...&gt;      this.capital = capital;
   ...&gt;    }
   ...&gt;    public String toString() {
   ...&gt;      return &quot;Country {&quot; + name + &quot;, &quot; + capital + &quot;}&quot;;
   ...&gt;    }
   ...&gt; }
|  created class Country</code></pre>
</div>
</div>
<div class="paragraph">
<p>Subsequently, you can then instantiate the class</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="jshell"><span></span>jshell&gt; var china = new Country(&quot;China&quot;, &quot;Beijing&quot;);
china ==&gt; Country {China, Beijing}
|  created variable china : Country

jshell&gt; var poland = new Country(&quot;Poland&quot;, &quot;Warsaw&quot;);
poland ==&gt; Country {Poland, Warsaw}
|  created variable poland : Country</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_making_a_mistake">Making a mistake</h3>
<div class="paragraph">
<p>If you make a mistake, you can hit <strong>&lt;UP-arrow&gt;</strong> and edit the previous unrunnable code</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="jshell"><span></span>jshell&gt; public String times(int n, String s) {
   ...&gt;    StringBuilder sb = new StringBuilder()
   ...&gt;    for (int i = 0; i &lt; n; i++) {
   ...&gt;       sb.append(s);
   ...&gt;    }
   ...&gt;    return sb.toString()
   ...&gt; }
|  Error:
|  &#39;;&#39; expected
|     StringBuilder sb = new StringBuilder()
|                                           ^
|  Error:
|  &#39;;&#39; expected
|     return sb.toString()
|</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Hitting the <strong>&lt;UP-arrow&gt;</strong> key, it gives you the ability to edit again</p>
</li>
<li>
<p>Typing <strong>&lt;Return&gt;</strong> anywhere in the code edit section will execute the method</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="jshell"><span></span>jshell&gt; public String times(int n, String s) {
   ...&gt;    StringBuilder sb = new StringBuilder();
   ...&gt;    for (int i = 0; i &lt; n; i++) {
   ...&gt;       sb.append(s);
   ...&gt;    }
   ...&gt;    return sb.toString()
   ...&gt; }
| created method times(int,String)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_analyzing_an_exception">Analyzing an <code>Exception</code></h3>
<div class="ulist">
<ul>
<li>
<p>You can trace the root of the <code>Exception</code> by:</p>
<div class="ulist">
<ul>
<li>
<p>Reading the stack trace</p>
</li>
<li>
<p>Tracing the stack trace</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>In an exception back-trace, a location within REPL entered code is
displayed as the <code>#id/linenumber</code>, where snippet id is the number displayed
 in <code>/list</code> and line-number is the line-number within the snippet.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>jshell&gt; int divide(int a, int b) {
...&gt; return a / b;
}

jshell&gt; divide(5, 0);
| java.lang.ArithmeticException thrown: / by zero
| at divide (#1:2)
| at (#2:1)</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_running_an_editor">Running an Editor</h3>
<div class="ulist">
<ul>
<li>
<p>You can edit any code using <code>/edit</code> command along with a declaration.</p>
</li>
<li>
<p>Declarations can either be <code>class</code>, method, or variable</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Edit <code>Country</code>, in this case it is a <code>class</code></div>
<div class="content">
<pre class="pygments highlight"><code data-lang="jshell"><span></span>jshell&gt; /edit Country</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will in turn open an editor so that you can edit fully with full cursor support</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/jshell_edit.png" alt="jshell edit">
</div>
<div class="title">Figure 1. Standard Editor in JShell</div>
</div>
</div>
<div class="sect2">
<h3 id="_running_your_own_editor">Running your own editor</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sh"><span></span>jshell&gt; /set editor vi</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_resetting_your_editor">Resetting your editor</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="jshell"><span></span>jshell&gt; /set editor -default</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_typical_commands">Typical Commands</h3>
<div class="ulist">
<ul>
<li>
<p><code>/vars</code> will show all variables bound</p>
</li>
<li>
<p><code>/methods</code> will show all methods bound</p>
</li>
<li>
<p><code>/types</code> will show all types, e.g. classes</p>
</li>
<li>
<p><code>/list</code> shows a list of entered "snippets"</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_viewing_commands">Viewing Commands</h3>
<div class="ulist">
<ul>
<li>
<p>We can view the possible list of commands by typing <code>/</code> and then <strong>&lt;TAB&gt;</strong></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sh"><span></span>jshell&gt; /
/!          /?          /drop       /edit
/env        /exit       /help       /history
/imports    /list       /methods    /open
/reload     /reset      /save       /set
/types      /vars

&lt;press tab again to see synopsis&gt;

jshell&gt; /</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_typical_commands_2">Typical Commands</h3>
<div class="ulist">
<ul>
<li>
<p><code>/vars</code> will show all variables bound</p>
</li>
<li>
<p><code>/methods</code> will show all methods bound</p>
</li>
<li>
<p><code>/types</code> will show all types, e.g. classes</p>
</li>
<li>
<p><code>/list</code> shows a list of entered "snippets"</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_tab_completion">Tab Completion</h3>
<div class="paragraph">
<p>Press <strong>&lt;TAB&gt;</strong> after some code to see some auto-complete alternatives</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="jshell"><span></span>jshell&gt; System.out.
append(        checkError()   close()        equals(
flush()        format(        getClass()     hashCode()
notify()       notifyAll()    print(         printf(
println(       toString()     wait(          write(</code></pre>
</div>
</div>
<div class="paragraph">
<p>Type some more of the signature and get documentation</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="jshell"><span></span>jshell&gt; System.out.format(
Signatures:
PrintStream PrintStream.format(String format, Object... args)
PrintStream PrintStream.format(Locale l, String format, Object... args)

&lt;press tab again to see documentation&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Pressing <strong>&lt;TAB&gt;</strong> again will show the full documentation</p>
</div>
</div>
<div class="sect2">
<h3 id="_snippet_transformation">Snippet Transformation</h3>
<div class="ulist">
<ul>
<li>
<p>When invoking the keys combination of <strong>&lt;SHIFT&gt;+&lt;TAB&gt;</strong>, you can then use the following to transform your line</p>
<div class="ulist">
<ul>
<li>
<p><strong>m</strong> will create a method</p>
</li>
<li>
<p><strong>v</strong> will create a variable</p>
</li>
<li>
<p><strong>i</strong> will provide a selection of <code>import</code> for a <code>package</code> of a class</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_variable_snippet_transformation">Variable Snippet Transformation</h4>
<div class="ulist">
<ul>
<li>
<p>Given that we have already typed the following</p>
</li>
<li>
<p>And our cursor is at the end of the line</p>
</li>
<li>
<p>We can type <strong>&lt;SHIFT&gt;+&lt;TAB&gt;</strong> and then <strong>v</strong> to create a variable</p>
</li>
<li>
<p>The cursor will be in a position to create the variable</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="jshell"><span></span>jshell&gt; new BigInteger(&quot;302021&quot;)</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>After <strong>&lt;SHIFT&gt;+&lt;TAB&gt;</strong> and then <strong>&lt;v&gt;</strong></p>
<div class="ulist">
<ul>
<li>
<p>The cursor will be positioned before the <code>=</code></p>
</li>
<li>
<p>You now have the opportunity to enter a variable name</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="jshell"><span></span>jshell&gt; BigInteger  = new BigInteger(&quot;302021&quot;)</code></pre>
</div>
</div>
<div class="paragraph">
<p>If we named it <code>i</code>, this would result in&#8230;&#8203;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="jshell"><span></span>jshell&gt; BigInteger i = new BigInteger(&quot;302021&quot;)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_method_snippet_transformation">Method Snippet Transformation</h4>
<div class="ulist">
<ul>
<li>
<p>After creating snippet and our cursor is at the end of the line</p>
</li>
<li>
<p>We can type <strong>&lt;SHIFT+TAB&gt;</strong> and then <strong>&lt;m&gt;</strong> to create a method</p>
</li>
<li>
<p>The cursor will be in a position to create the method</p>
</li>
<li>
<p>This will only work if all variables can be resolve</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Establishing a variable</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="jshell"><span></span>jshell&gt; BigInteger i = new BigInteger(&quot;302021&quot;)
i ==&gt; 302021
|  created variable i : BigInteger</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">We reference <code>i</code> and we realize we want as a method</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="jshell"><span></span>jshell&gt; i.add(new BigInteger(&quot;4&quot;)</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>The following will give you the opportunity to name the method</p>
</li>
<li>
<p>It will place the cursor before the <code>()</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">After <strong>&lt;SHIFT+TAB&gt;</strong> and <strong>&lt;m&gt;</strong></div>
<div class="content">
<pre class="pygments highlight"><code data-lang="jshell"><span></span>jshell&gt; BigInteger () { return i.add(new BigInteger(&quot;4&quot;)); }</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_import_snippet_transformation">Import Snippet Transformation</h4>
<div class="ulist">
<ul>
<li>
<p><strong>&lt;SHIFT+TAB&gt;</strong> and <strong>&lt;i&gt;</strong> will provide choices for <code>import</code> if it is not in the <em>java.base</em> module</p>
</li>
<li>
<p>Type the <code>class</code> you need and at the end <strong>&lt;SHIFT+TAB&gt;</strong> and <strong>&lt;i&gt;</strong>.</p>
</li>
<li>
<p>Select the package you wish to import</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title"><strong>&lt;SHIFT+TAB&gt;</strong> and <strong>&lt;i&gt;</strong> after typing <code>DriverManager</code></div>
<div class="content">
<pre class="pygments highlight"><code data-lang="sh"><span></span>jshell&gt; DriverManager
<span class="tok-m">0</span>: Do nothing
<span class="tok-m">1</span>: import: java.sql.DriverManager
Choice:</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_input_line_navigation">Input Line Navigation</h3>
<div class="paragraph">
<p>Editing is supported for editing:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The current line</p>
</li>
<li>
<p>Accessing the history through previous sessions of JShell.</p>
</li>
<li>
<p><strong>&lt;CTRL&gt;</strong> and <strong>&lt;META&gt;</strong> key are used in key combinations.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Meta key is a key like the Windows key or Apple key, if not available, then use the <strong>&lt;ALT&gt;</strong> key
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_editing_navigation">Editing Navigation</h4>
<div class="ulist">
<ul>
<li>
<p>When navigating forwards and backwards within a line:</p>
<div class="ulist">
<ul>
<li>
<p>Use the <strong>&lt;RIGHT-Arrow&gt;</strong> and <strong>&lt;LEFT-Arrow&gt;</strong></p>
</li>
<li>
<p>or, <strong>&lt;CTRL+B&gt;</strong> or  <strong>&lt;CTRL+F&gt;</strong></p>
</li>
</ul>
</div>
</li>
<li>
<p>When bringing up previous snippets and commands use <strong>&lt;UP-Arrow&gt;</strong></p>
</li>
<li>
<p>If the previous commands or snippets contains multiple lines you can edit that line with <strong>&lt;UP-Arrow&gt;</strong> or <strong>&lt;DOWN-Arrow&gt;</strong></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_additional_keys_for_editing_navigation">Additional Keys for Editing Navigation</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Keys</th>
<th class="tableblock halign-left valign-top">Action</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>&lt;Return&gt;</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enters the current line</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>&lt;LEFT-arrow&gt;</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Moves backward one character</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>&lt;RIGHT-arrow&gt;</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Moves forward one character</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>&lt;UP-arrow&gt;</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Moves up one line, backward through history</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>&lt;DOWN-arrow&gt;</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Moves down one line, forward through history</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>&lt;CTRL+A&gt;</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Moves to the beginning of the line</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>&lt;CTRL+E&gt;</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Moves to the end of the line</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>&lt;META+B&gt;</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Moves backward one word</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>&lt;META+F&gt;</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Moves forward one word</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_setting_the_classpath">Setting the Classpath</h3>
<div class="ulist">
<ul>
<li>
<p>You can use external code that is accessible through the class path in your JShell
session.</p>
</li>
<li>
<p>Use <code>--class-path</code> to load external directories and jar files</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sh"><span></span>% jshell --class-path myOwnClassPath</code></pre>
</div>
</div>
<div class="paragraph">
<p>While in an already loaded session you can use <code>/env --class-path</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="jshell"><span></span>jshell&gt; /env --class-path myOwnClassPath
| Setting new options and restoring state.</code></pre>
</div>
</div>
<div class="paragraph">
<p>To view the current classpath:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="jshell"><span></span>jshell&gt; /env
|     --class-path guava-27.0.1-jre.jar</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_scripting">Scripting</h3>
<div class="ulist">
<ul>
<li>
<p>A JShell script is a sequence of snippets and JShell commands in a file, one snippet or
command per line.</p>
</li>
<li>
<p>Scripts can be a local file, or one of the following predefined scripts:</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Script Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Script Contents</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DEFAULT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Includes commonly needed import declarations. This script is used if  no other startup script is provided.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PRINTING</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines JShell methods that redirect to the <code>print</code>, <code>println</code>, and  <code>printf</code> methods in <code>PrintStream</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JAVASE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Imports the core Java SE API defined by the <code>java.se</code> module, which causes a noticeable delay in starting JShell due to the number of packages.</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_startup_scripts">Startup Scripts</h4>
<div class="ulist">
<ul>
<li>
<p>The default startup script has common imports, e.g. <code>java.lang</code></p>
</li>
<li>
<p>You can create custom imports as needed</p>
</li>
<li>
<p>Startup scripts are loaded everytime:</p>
<div class="ulist">
<ul>
<li>
<p>JShell is started</p>
</li>
<li>
<p>When <code>/reset</code>, <code>/reload</code>, or <code>/env</code> commands are invoked</p>
</li>
<li>
<p>The <code>DEFAULT</code> script is used by default</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_setting_up_the_startup_script">Setting up the Startup Script</h4>
<div class="ulist">
<ul>
<li>
<p>You can set the startup script using the following script</p>
</li>
<li>
<p>This will only be active in the current session</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sh"><span></span>jshell&gt; /set start mystartup.jsh
jshell&gt; /reset
<span class="tok-p">|</span> Resetting state.
jshell</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can retain the setup using <code>-retain</code> for subsequent sessions</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="jshell"><span></span>jshell&gt; /set start -retain DEFAULT PRINTING</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_showing_what_has_been_retained">Showing what has been retained</h4>
<div class="paragraph">
<p>Use <code>/set start</code> with no arguments to show startup scripts</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="jshell"><span></span>jshell&gt; /set start
|  /set start -retain DEFAULT PRINTING
|  ---- DEFAULT ----
|  import java.io.&lt;strong&gt;;
|  import java.math.&lt;/strong&gt;;
|  import java.net.&lt;strong&gt;;
|  import java.nio.file.&lt;/strong&gt;;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_start_multiple_scripts_from_command_line">Start Multiple Scripts from Command Line</h4>
<div class="ulist">
<ul>
<li>
<p>If starting from your shell command line, you can use the <code>--startup</code> flag</p>
</li>
<li>
<p>This will establish startup scripts when first running <code>jshell</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sh"><span></span>% jshell --startup DEFAULT --startup PRINTING</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_creating_scripts">Creating Scripts</h4>
<div class="ulist">
<ul>
<li>
<p>Scripts can be created in an editor or generated in JShell</p>
</li>
<li>
<p>To save the JShell session, use either of the following:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="jshell"><span></span>jshell&gt; /save mysnippets.jsh</code></pre>
</div>
</div>
<div class="paragraph">
<p>Saves the history of all of the snippets and commands,
both valid and invalid</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="jshell"><span></span>jshell&gt; /save -history myhistory.jsh</code></pre>
</div>
</div>
<div class="paragraph">
<p>Saves the contents of the current startup script setting to
<em>mystartup.jsh</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="jshell"><span></span>jshell&gt; /save -start mystartup.jsh</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_loading_scripts">Loading Scripts</h3>
<div class="paragraph">
<p>Load a script when first starting JShell</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sh"><span></span>% jshell mysnippets.jsh</code></pre>
</div>
</div>
<div class="paragraph">
<p>Within JShell a script can be loaded with <code>/open</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="jshell"><span></span>jshell&gt; /open mysnippets.jsh</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_exiting_jshell">Exiting JShell</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sh"><span></span>jshell&gt; /exit</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_where_to_find_more_information">Where to find more information</h3>
<div class="ulist">
<ul>
<li>
<p>We covered some of the major functionality of JShell</p>
</li>
<li>
<p>More fine-grained information can be found in the <a href="https://docs.oracle.com/javase/9/jshell/JSHEL.pdf">Official JShell Documentation</a></p>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2 slide_section">
<h3 id="_lab_jshell">Lab: JShell</h3>
<div class="paragraph">
<p><strong>Step 1:</strong> Launch JShell in verbose mode</p>
</div>
<div class="paragraph">
<p><strong>Step 2:</strong> Create a method or <code>class</code> that given a <code>List&lt;String&gt;</code> of people&#8217;s name it would return a random winner. Use <code>java.util.Random</code> for the randomization</p>
</div>
<div class="paragraph">
<p><strong>Step 3:</strong> Create variables <code>thirdPlace</code>, <code>secondPlace</code> and <code>firstPlace</code> that will return the winners from the <code>List</code> of <code>String</code></p>
</div>
<div class="paragraph">
<p><strong>Step 4:</strong> Exit the JShell</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1 slide_section">
<h2 id="_setup">Setup</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_project_check">Project Check</h3>
<div class="paragraph">
<p>Before we begin it is assumed that all of you have the following tools installed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>JDK 12 or 13 (latest java is 13)</p>
</li>
<li>
<p>Maven 3.6.2</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To verify that all your tools work as expected</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sh"><span></span>% javac -version
javac <span class="tok-m">13</span>

% java -version
java version <span class="tok-s2">&quot;13&quot;</span>
Java<span class="tok-o">(</span>TM<span class="tok-o">)</span> SE Runtime Environment <span class="tok-o">(</span>build <span class="tok-m">1</span>.8.0_13-b17<span class="tok-o">)</span>
Java HotSpot<span class="tok-o">(</span>TM<span class="tok-o">)</span> <span class="tok-m">64</span>-Bit Server VM <span class="tok-o">(</span>build <span class="tok-m">25</span>.65-b01, mixed mode<span class="tok-o">)</span>

% mvn -v
Apache Maven <span class="tok-m">3</span>.6.2 <span class="tok-o">(</span>bb52d8502b132ec0a5a3f4c09453c07478323dc5<span class="tok-p">;</span> <span class="tok-m">2015</span>-11-10T09:41:47-07:00<span class="tok-o">)</span>
Maven home: /usr/lib/mvn/apache-maven-3.6.2
Java version: <span class="tok-m">13</span>, vendor: Oracle Corporation
Java home: /usr/lib/jvm/jdk13/jre
Default locale: en_US, platform encoding: UTF-8
OS name: <span class="tok-s2">&quot;linux&quot;</span>, version: <span class="tok-s2">&quot;4.4.0-34-generic&quot;</span>, arch: <span class="tok-s2">&quot;amd64&quot;</span>, family: <span class="tok-s2">&quot;unix&quot;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_download_the_project">Download the Project</h3>
<div class="paragraph">
<p>From <a href="https://github.com/dhinojosa/advanced_java" class="bare">https://github.com/dhinojosa/advanced_java</a> download the project .zip file and extract it into your favorite location or if you know how to use git, then clone the project into your favorite location.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/git_advanced_java.png" alt="git advanced java">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_opening_project_in_intellij">Opening Project in IntelliJ</h3>
<div class="paragraph">
<p>Once <em>advanced_java</em> is downloaded and extracted or cloned to your favorite location,
In IntelliJ Open The Project, IntelliJ will recognize it as a Maven project and you are good to go.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/intellij_advanced_java_open.png" alt="intellij advanced java open">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_opening_the_project_in_eclipse">Opening the project in Eclipse</h3>
<div class="paragraph">
<p>Once downloaded and extracted:</p>
</div>
<div class="paragraph">
<p><strong>Step 1:</strong> Select <em>File</em> &gt; <em>Import Project</em> in the menu.</p>
</div>
<div class="paragraph">
<p><strong>Step 2:</strong> In the following dialog box:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/eclipse_import.png" alt="eclipse import">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Open the <em>Maven</em> category</p>
</li>
<li>
<p>Select <em>Import Existing Maven Projects</em></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Step 3:</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/eclipse_import_maven_proj.png" alt="eclipse import maven proj">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Click the <em>Browse:</em> button next to <em>Root Directory</em></p>
</li>
<li>
<p>Select the location of your <strong><em>advanced_java</em></strong> directory.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Step 4:</strong> Click <em>Finish</em></p>
</div>
</div>
<div class="sect2">
<h3 id="_opening_the_project_in_vscode">Opening the project in VSCode</h3>
<div class="paragraph">
<p>Once downloaded and extracted:</p>
</div>
<div class="paragraph">
<p><strong>Step 1:</strong> In a terminal, go to the <em>advanced_java</em> directory</p>
</div>
<div class="paragraph">
<p><strong>Step 2:</strong> Run <code>code .</code> in the directory</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sh"><span></span>% code .</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/vscode_advanced_java_open.png" alt="vscode advanced java open">
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1 slide_section">
<h2 id="_lambdas">Lambdas</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_about_java_8_lambdas">About Java 8 Lambdas</h3>
<div class="paragraph">
<p>Functional Interface Definition</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>A functional interface is any interface that contains only one abstract method.
(A functional interface may contain one or more default methods or static
methods.) Because a functional
interface contains only one abstract method, you can omit the name
of that method when you implement it.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>(<code>equals</code> is an explicit declaration of a concrete method
 inherited from <code>Object</code> that, without this declaration,
 would otherwise be implicitly declared.)</p>
</div>
</div>
<div class="sect2">
<h3 id="_default_methods">Default Methods</h3>
<div class="ulist">
<ul>
<li>
<p>Enable you to add new functionality to the <code>interface</code> of your libraries</p>
</li>
<li>
<p>Ensure binary compatibility with code written for older versions of those <code>interface</code>.</p>
</li>
<li>
<p>Comes closer to have "concrete" method in an "interface" by composing other <code>abstract</code> methods.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Default Method Arbitrary Example</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">Human</span> <span class="tok-o">{</span>
   <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">getFirstName</span><span class="tok-o">();</span>
   <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">getLastName</span><span class="tok-o">();</span>
   <span class="tok-k">default</span> <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">getFullName</span><span class="tok-o">()</span> <span class="tok-o">{</span>
     <span class="tok-k">return</span> <span class="tok-n">String</span><span class="tok-o">.</span><span class="tok-na">format</span><span class="tok-o">(</span><span class="tok-s">&quot;%s %s&quot;</span><span class="tok-o">,</span>
        <span class="tok-n">getFirstName</span><span class="tok-o">(),</span> <span class="tok-n">getLastName</span><span class="tok-o">());</span>
   <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_defining_mypredicate">Defining <code>MyPredicate</code></h3>
<div class="ulist">
<ul>
<li>
<p>It&#8217;s an interface</p>
</li>
<li>
<p>One <code>abstract</code> method: <code>test</code></p>
</li>
<li>
<p><code>default</code> methods don&#8217;t count (More on that later)</p>
</li>
<li>
<p><code>static</code> methods don&#8217;t count</p>
</li>
<li>
<p>Any methods inherited from <code>Object</code> don&#8217;t count either.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/main/java/com.xyzcorp.demos.functions.MyPredicate</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kn">package</span> <span class="tok-nn">com.xyzcorp</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">MyPredicate</span><span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-o">{</span>
   <span class="tok-kd">public</span> <span class="tok-kt">boolean</span> <span class="tok-nf">test</span><span class="tok-o">(</span><span class="tok-n">T</span> <span class="tok-n">item</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Conclusion: We can omit the name when we implement it.</p>
</div>
</div>
<div class="sect2">
<h3 id="_functional_filter">Functional <code>filter</code></h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Filter is a higher-order function that processes a data structure (usually a list) in some order to produce a new data structure containing exactly those elements of the original data structure for which a given predicate returns the boolean value true.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><a href="https://en.wikipedia.org/wiki/Map_(higher-order_function)">Wikipedia: Map (higher-order function)</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_functional_filter_by_example">Functional <code>filter</code> by example</h3>
<div class="ulist">
<ul>
<li>
<p>Given List of <code>list</code>:  <code>[1,2,3,4]</code></p>
</li>
<li>
<p>Given a function <code>f</code>:  <code>x &#8594; x % 2 == 0</code></p>
</li>
<li>
<p>When calling <code>filter</code> on a <code>list</code> with <code>f</code>: <code>[1,2,3,4].filter(f)</code></p>
</li>
<li>
<p>Then a copy of the <code>list</code> should return: <code>[2,4]</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_using_mypredicate">Using <code>MyPredicate</code></h3>
<div class="listingblock">
<div class="title">src/main/java/com.xyzcorp.functions.Functions#myFilter</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-nf">myFilter</span> <span class="tok-o">(</span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-n">list</span><span class="tok-o">,</span> <span class="tok-n">MyPredicate</span><span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-n">predicate</span><span class="tok-o">)</span> <span class="tok-o">{</span>
    <span class="tok-n">ArrayList</span><span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">ArrayList</span><span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">&gt;();</span>
    <span class="tok-k">for</span> <span class="tok-o">(</span><span class="tok-n">T</span> <span class="tok-n">item</span> <span class="tok-o">:</span> <span class="tok-n">list</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">predicate</span><span class="tok-o">.</span><span class="tok-na">test</span><span class="tok-o">(</span><span class="tok-n">item</span><span class="tok-o">))</span> <span class="tok-o">{</span>
            <span class="tok-n">result</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-n">item</span><span class="tok-o">);</span>
        <span class="tok-o">}</span>
    <span class="tok-o">}</span>
    <span class="tok-k">return</span> <span class="tok-n">result</span><span class="tok-o">;</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This is the functional <code>filter</code>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_testing_mypredicate">Testing <code>MyPredicate</code></h3>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.functions.FunctionsTest#testMyFilter</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">numbers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">9</span><span class="tok-o">,</span> <span class="tok-mi">15</span><span class="tok-o">,</span>
                                      <span class="tok-mi">19</span><span class="tok-o">,</span> <span class="tok-mi">21</span><span class="tok-o">,</span> <span class="tok-mi">33</span><span class="tok-o">,</span> <span class="tok-mi">78</span><span class="tok-o">,</span> <span class="tok-mi">93</span><span class="tok-o">,</span> <span class="tok-mi">10</span><span class="tok-o">);</span>
<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">filtered</span> <span class="tok-o">=</span> <span class="tok-n">Functions</span><span class="tok-o">.</span><span class="tok-na">myFilter</span><span class="tok-o">(</span><span class="tok-n">numbers</span><span class="tok-o">,</span>
   <span class="tok-k">new</span> <span class="tok-n">MyPredicate</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;()</span> <span class="tok-o">{</span>
       <span class="tok-nd">@Override</span>
       <span class="tok-kd">public</span> <span class="tok-kt">boolean</span> <span class="tok-nf">test</span><span class="tok-o">(</span><span class="tok-n">Integer</span> <span class="tok-n">item</span><span class="tok-o">)</span> <span class="tok-o">{</span>
           <span class="tok-k">return</span> <span class="tok-n">item</span> <span class="tok-o">%</span> <span class="tok-mi">2</span> <span class="tok-o">==</span> <span class="tok-mi">0</span><span class="tok-o">;</span>
       <span class="tok-o">}</span>
   <span class="tok-o">});</span>
<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">filtered</span><span class="tok-o">);</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Here we are defining what the <code>Predicate</code> will do when sent into <code>filter</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_convert_mypredicate_into_a_lambda">Convert <code>MyPredicate</code> into a Lambda</h3>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.functions.FunctionsTest#testMyFilter</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">numbers</span> <span class="tok-o">=</span>
   <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">9</span><span class="tok-o">,</span> <span class="tok-mi">15</span><span class="tok-o">,</span>
                 <span class="tok-mi">19</span><span class="tok-o">,</span> <span class="tok-mi">21</span><span class="tok-o">,</span> <span class="tok-mi">33</span><span class="tok-o">,</span> <span class="tok-mi">78</span><span class="tok-o">,</span> <span class="tok-mi">93</span><span class="tok-o">,</span> <span class="tok-mi">10</span><span class="tok-o">);</span>
<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">filtered</span> <span class="tok-o">=</span>
   <span class="tok-n">Functions</span><span class="tok-o">.</span><span class="tok-na">myFilter</span><span class="tok-o">(</span><span class="tok-n">numbers</span><span class="tok-o">,</span>
      <span class="tok-n">item</span> <span class="tok-o">-&gt;</span> <span class="tok-n">item</span> <span class="tok-o">%</span> <span class="tok-mi">2</span> <span class="tok-o">==</span> <span class="tok-mi">0</span><span class="tok-o">);</span>
<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">filtered</span><span class="tok-o">);</span></code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_defining_myfunction">Defining <code>MyFunction</code></h3>
<div class="listingblock">
<div class="title">src/main/java/com.xyzcorp.demos.functions.MyFunction</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">MyFunction</span><span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">,</span> <span class="tok-n">R</span><span class="tok-o">&gt;</span> <span class="tok-o">{</span>
    <span class="tok-kd">public</span> <span class="tok-n">R</span> <span class="tok-nf">apply</span><span class="tok-o">(</span><span class="tok-n">T</span> <span class="tok-n">t</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_functional_map">Functional <code>map</code></h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Applies a given function to each element of a list, returning a list of results in the same order. It is often called apply-to-all when considered in functional form.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><a href="https://en.wikipedia.org/wiki/Map_(higher-order_function)">Wikipedia: Map (higher-order function)</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_functional_map_by_example">Functional <code>map</code> by example</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Given List of <code>list</code>:  <code>[1,2,3,4]</code></p>
</li>
<li>
<p>Given a function <code>f</code>:  <code>x &#8594; x + 1</code></p>
</li>
<li>
<p>When calling <code>map</code> on a <code>list</code> with <code>f</code>: <code>[1,2,3,4].map(f)</code></p>
</li>
<li>
<p>Then a copy of the <code>list</code> should return: <code>[2,3,4,5]</code></p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_using_myfunction">Using <code>MyFunction</code></h3>
<div class="listingblock">
<div class="title">src/main/java/com.xyzcorp.demos.functions.Functions#myMap</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">,</span> <span class="tok-n">R</span><span class="tok-o">&gt;</span> <span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">R</span><span class="tok-o">&gt;</span> <span class="tok-nf">myMap</span><span class="tok-o">(</span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-n">list</span><span class="tok-o">,</span> <span class="tok-n">MyFunction</span><span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">,</span> <span class="tok-n">R</span><span class="tok-o">&gt;</span> <span class="tok-n">myFunction</span><span class="tok-o">)</span> <span class="tok-o">{</span>
    <span class="tok-n">ArrayList</span><span class="tok-o">&lt;</span><span class="tok-n">R</span><span class="tok-o">&gt;</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">ArrayList</span><span class="tok-o">&lt;&gt;();</span>
    <span class="tok-k">for</span> <span class="tok-o">(</span><span class="tok-n">T</span> <span class="tok-n">t</span> <span class="tok-o">:</span> <span class="tok-n">list</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-n">result</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-n">myFunction</span><span class="tok-o">.</span><span class="tok-na">apply</span><span class="tok-o">(</span><span class="tok-n">t</span><span class="tok-o">));</span>
    <span class="tok-o">}</span>
    <span class="tok-k">return</span> <span class="tok-n">result</span><span class="tok-o">;</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_testing_myfunction">Testing <code>MyFunction</code></h3>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.functions.FunctionsTest#testMyMap</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">numbers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">9</span><span class="tok-o">,</span> <span class="tok-mi">15</span><span class="tok-o">,</span> <span class="tok-mi">19</span><span class="tok-o">,</span>
                                      <span class="tok-mi">21</span><span class="tok-o">,</span> <span class="tok-mi">33</span><span class="tok-o">,</span> <span class="tok-mi">78</span><span class="tok-o">,</span> <span class="tok-mi">93</span><span class="tok-o">,</span> <span class="tok-mi">10</span><span class="tok-o">);</span>
<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">mapped</span> <span class="tok-o">=</span> <span class="tok-n">Functions</span><span class="tok-o">.</span><span class="tok-na">myMap</span><span class="tok-o">(</span><span class="tok-n">numbers</span><span class="tok-o">,</span>
  <span class="tok-k">new</span> <span class="tok-n">MyFunction</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">,</span> <span class="tok-n">Integer</span><span class="tok-o">&gt;()</span> <span class="tok-o">{</span>
    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-n">Integer</span> <span class="tok-nf">apply</span><span class="tok-o">(</span><span class="tok-n">Integer</span> <span class="tok-n">item</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-n">item</span> <span class="tok-o">+</span> <span class="tok-mi">2</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>
<span class="tok-o">});</span>
<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">mapped</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_convert_myfunction_into_a_lambda">Convert <code>MyFunction</code> into a Lambda</h3>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.functions.FunctionsTest#testMyMap</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">numbers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">7</span><span class="tok-o">,</span> <span class="tok-mi">8</span><span class="tok-o">);</span>
<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">mapped</span> <span class="tok-o">=</span> <span class="tok-n">Functions</span><span class="tok-o">.</span><span class="tok-na">myMap</span><span class="tok-o">(</span><span class="tok-n">numbers</span><span class="tok-o">,</span> <span class="tok-n">t</span> <span class="tok-o">-&gt;</span> <span class="tok-n">t</span> <span class="tok-o">+</span> <span class="tok-mi">2</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_functional_flatmap">Functional <code>flatMap</code></h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Applies a given function to each element of a list, returning a list of results
in the same order. It is often called bind when considered in functional form.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="_functional_flatmap_by_example">Functional <code>flatMap</code> by example</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Given List of <code>list</code>:  <code>[1,2,3,4]</code></p>
</li>
<li>
<p>Given a function <code>f</code>:  <code>x &#8594; [x - 1, x, x + 1]</code></p>
</li>
<li>
<p>When calling <code>flatMap</code> on a <code>list</code> with <code>f</code>: <code>[1,2,3,4].flatMap(f)</code></p>
</li>
<li>
<p>Then a copy of the <code>list</code> should return: <code>[0, 1, 2, 1, 2, 3, 2, 3, 4, 3, 4, 5]</code></p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_using_myfunction_with_flatmap">Using <code>MyFunction</code> with <code>flatMap</code></h3>
<div class="listingblock">
<div class="title">src/main/java/com.xyzcorp.demos.functions.Functions#myFlatMap</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">,</span> <span class="tok-n">R</span><span class="tok-o">&gt;</span> <span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">R</span><span class="tok-o">&gt;</span> <span class="tok-nf">myFlatMap</span><span class="tok-o">(</span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-n">list</span><span class="tok-o">,</span> <span class="tok-n">MyFunction</span><span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">,</span> <span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">R</span><span class="tok-o">&gt;&gt;</span> <span class="tok-n">myFunction</span><span class="tok-o">)</span> <span class="tok-o">{</span>
    <span class="tok-n">ArrayList</span><span class="tok-o">&lt;</span><span class="tok-n">R</span><span class="tok-o">&gt;</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">ArrayList</span><span class="tok-o">&lt;&gt;();</span>
    <span class="tok-k">for</span> <span class="tok-o">(</span><span class="tok-n">T</span> <span class="tok-n">t</span> <span class="tok-o">:</span> <span class="tok-n">list</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">R</span><span class="tok-o">&gt;</span> <span class="tok-n">application</span> <span class="tok-o">=</span> <span class="tok-n">myFunction</span><span class="tok-o">.</span><span class="tok-na">apply</span><span class="tok-o">(</span><span class="tok-n">t</span><span class="tok-o">);</span>
        <span class="tok-n">result</span><span class="tok-o">.</span><span class="tok-na">addAll</span><span class="tok-o">(</span><span class="tok-n">application</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
    <span class="tok-k">return</span> <span class="tok-n">result</span><span class="tok-o">;</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_testing_myfunction_with_flatmap">Testing <code>MyFunction</code> with <code>flatMap</code></h3>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.functions.FunctionsTest#testMyMap</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">numbers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">7</span><span class="tok-o">,</span> <span class="tok-mi">8</span><span class="tok-o">);</span>
<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">mapped</span> <span class="tok-o">=</span> <span class="tok-n">Functions</span><span class="tok-o">.</span><span class="tok-na">myFlatMap</span><span class="tok-o">(</span><span class="tok-n">numbers</span><span class="tok-o">,</span>
    <span class="tok-n">t</span> <span class="tok-o">-&gt;</span> <span class="tok-n">List</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-n">t</span> <span class="tok-o">-</span> <span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-n">t</span><span class="tok-o">,</span> <span class="tok-n">t</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-o">));</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_defining_myconsumer">Defining <code>MyConsumer</code></h3>
<div class="listingblock">
<div class="title">src/main/java/com.xyzcorp.demos.functions.MyConsumer.java</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kn">package</span> <span class="tok-nn">com.xyzcorp</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">MyConsumer</span><span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-o">{</span>
   <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">accept</span><span class="tok-o">(</span><span class="tok-n">T</span> <span class="tok-n">item</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Notice that it does not return anything, a <code>void</code>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_functional_foreach">Functional <code>forEach</code></h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Performs an action on each element returning nothing or <code>void</code>, a sink</p>
</div>
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="_functional_foreach_by_example">Functional <code>forEach</code> by example</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Given List of <code>list</code>:  <code>[1,2,3,4]</code></p>
</li>
<li>
<p>Given a function <code>f</code>:  <code>x &#8594; System.out.println(x)</code></p>
</li>
<li>
<p>When calling <code>forEach</code> on a <code>list</code> with <code>f</code>: <code>[1,2,3,4].forEach(f)</code></p>
</li>
<li>
<p>Then <code>void</code> is returned. This is called a side effect.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_using_myconsumer">Using <code>MyConsumer</code></h3>
<div class="listingblock">
<div class="title">src/main/java/com.xyzcorp.demos.functions.Functions#myForEach</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-kt">void</span> <span class="tok-nf">myForEach</span><span class="tok-o">(</span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-n">list</span><span class="tok-o">,</span> <span class="tok-n">MyConsumer</span><span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-n">myConsumer</span><span class="tok-o">)</span> <span class="tok-o">{</span>
    <span class="tok-k">for</span> <span class="tok-o">(</span><span class="tok-n">T</span> <span class="tok-n">t</span> <span class="tok-o">:</span> <span class="tok-n">list</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-n">myConsumer</span><span class="tok-o">.</span><span class="tok-na">accept</span><span class="tok-o">(</span><span class="tok-n">t</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_testing_myconsumer">Testing <code>MyConsumer</code></h3>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.functions.FunctionsTest#testMyForEach</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">numbers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">7</span><span class="tok-o">,</span> <span class="tok-mi">8</span><span class="tok-o">);</span>
<span class="tok-n">Functions</span><span class="tok-o">.</span><span class="tok-na">myForEach</span><span class="tok-o">(</span><span class="tok-n">numbers</span><span class="tok-o">,</span> <span class="tok-k">new</span> <span class="tok-n">MyConsumer</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;()</span> <span class="tok-o">{</span>
    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">accept</span><span class="tok-o">(</span><span class="tok-n">Integer</span> <span class="tok-n">x</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">x</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">});</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_convert_myconsumer_into_a_lambda">Convert <code>MyConsumer</code> into a Lambda</h3>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.functions.FunctionsTest#testMyForEach</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">numbers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">7</span><span class="tok-o">,</span> <span class="tok-mi">8</span><span class="tok-o">);</span>
<span class="tok-n">Functions</span><span class="tok-o">.</span><span class="tok-na">myForEach</span><span class="tok-o">(</span><span class="tok-n">numbers</span><span class="tok-o">,</span> <span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">x</span><span class="tok-o">));</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_a_detour_with_method_references">A Detour with Method References</h3>
<div class="ulist">
<ul>
<li>
<p>When a lambda expression does nothing but call an existing method</p>
</li>
<li>
<p>It&#8217;s often clearer to refer to the existing method by name.</p>
</li>
<li>
<p>Works with lambda expressions for methods that already have a name.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_types_of_method_references">Types of Method References</h3>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Types of Method References</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Kind</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reference to a static method</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ContainingClass::staticMethodName</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reference to an instance method of a particular object</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>containingObject::instanceMethodName</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reference to an instance method of an arbitrary object of a particular type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ContainingType::methodName</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reference to a constructor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ClassName::new</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_foreach_with_a_method_reference"><code>forEach</code> with a method reference</h3>
<div class="paragraph">
<p>Before:</p>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.functions.FunctionsTest#testMyForEach</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">numbers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">7</span><span class="tok-o">,</span> <span class="tok-mi">8</span><span class="tok-o">);</span>
<span class="tok-n">Functions</span><span class="tok-o">.</span><span class="tok-na">myForEach</span><span class="tok-o">(</span><span class="tok-n">numbers</span><span class="tok-o">,</span> <span class="tok-k">new</span> <span class="tok-n">MyConsumer</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;()</span> <span class="tok-o">{</span>
    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">accept</span><span class="tok-o">(</span><span class="tok-n">Integer</span> <span class="tok-n">x</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">x</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">});</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>With a lambda:</p>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.functions.FunctionsTest#testMyForEach</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">numbers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">7</span><span class="tok-o">,</span> <span class="tok-mi">8</span><span class="tok-o">);</span>
<span class="tok-n">Functions</span><span class="tok-o">.</span><span class="tok-na">myForEach</span><span class="tok-o">(</span><span class="tok-n">numbers</span><span class="tok-o">,</span> <span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">x</span><span class="tok-o">));</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>After:</p>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.functions.FunctionsTest#testMyForEach</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">numbers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">7</span><span class="tok-o">,</span> <span class="tok-mi">8</span><span class="tok-o">);</span>
<span class="tok-n">Functions</span><span class="tok-o">.</span><span class="tok-na">myForEach</span><span class="tok-o">(</span><span class="tok-n">numbers</span><span class="tok-o">,</span> <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">::</span><span class="tok-n">println</span><span class="tok-o">);</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Although confusing, in <code>System.out</code>, <code>out</code> is a <code>public final static</code> variable. Therefore, <code>println</code> is a non-static method of <code>java.io.PrintStream</code>. This is an instance method of an object.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_static_method_with_a_method_reference">Static method with a method reference</h3>
<div class="paragraph">
<p>Before:</p>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.functions.FunctionsTest#testMethodReferenceAStaticMethod</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">numbers</span> <span class="tok-o">=</span>
   <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">9</span><span class="tok-o">,</span> <span class="tok-mi">15</span><span class="tok-o">,</span> <span class="tok-mi">19</span><span class="tok-o">,</span>
                 <span class="tok-mi">21</span><span class="tok-o">,</span> <span class="tok-mi">33</span><span class="tok-o">,</span> <span class="tok-mi">78</span><span class="tok-o">,</span> <span class="tok-mi">93</span><span class="tok-o">,</span> <span class="tok-mi">10</span><span class="tok-o">);</span>
<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">Functions</span><span class="tok-o">.</span><span class="tok-na">myMap</span><span class="tok-o">(</span><span class="tok-n">numbers</span><span class="tok-o">,</span>
    <span class="tok-k">new</span> <span class="tok-n">MyFunction</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">,</span> <span class="tok-n">Integer</span><span class="tok-o">&gt;()</span> <span class="tok-o">{</span>
       <span class="tok-nd">@Override</span>
       <span class="tok-kd">public</span> <span class="tok-n">Integer</span> <span class="tok-nf">apply</span><span class="tok-o">(</span><span class="tok-n">Integer</span> <span class="tok-n">a</span><span class="tok-o">)</span> <span class="tok-o">{</span>
           <span class="tok-k">return</span> <span class="tok-n">Math</span><span class="tok-o">.</span><span class="tok-na">abs</span><span class="tok-o">(</span><span class="tok-n">a</span><span class="tok-o">);</span>
       <span class="tok-o">}</span>
<span class="tok-o">}));</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>With a Lambda:</p>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.functions.FunctionsTest#testMethodReferenceAStaticMethod</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">numbers</span> <span class="tok-o">=</span>
   <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">9</span><span class="tok-o">,</span> <span class="tok-mi">15</span><span class="tok-o">,</span> <span class="tok-mi">19</span><span class="tok-o">,</span>
                 <span class="tok-mi">21</span><span class="tok-o">,</span> <span class="tok-mi">33</span><span class="tok-o">,</span> <span class="tok-mi">78</span><span class="tok-o">,</span> <span class="tok-mi">93</span><span class="tok-o">,</span> <span class="tok-mi">10</span><span class="tok-o">);</span>

<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">Functions</span><span class="tok-o">.</span><span class="tok-na">myMap</span><span class="tok-o">(</span><span class="tok-n">numbers</span><span class="tok-o">,</span> <span class="tok-n">a</span> <span class="tok-o">-&gt;</span> <span class="tok-n">Math</span><span class="tok-o">.</span><span class="tok-na">abs</span><span class="tok-o">(</span><span class="tok-n">a</span><span class="tok-o">)));</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>With a Method Reference:</p>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.functions.FunctionsTest#testMethodReferenceAStaticMethod</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">numbers</span> <span class="tok-o">=</span>
   <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">9</span><span class="tok-o">,</span> <span class="tok-mi">15</span><span class="tok-o">,</span> <span class="tok-mi">19</span><span class="tok-o">,</span>
                 <span class="tok-mi">21</span><span class="tok-o">,</span> <span class="tok-mi">33</span><span class="tok-o">,</span> <span class="tok-mi">78</span><span class="tok-o">,</span> <span class="tok-mi">93</span><span class="tok-o">,</span> <span class="tok-mi">10</span><span class="tok-o">);</span>

<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">Functions</span><span class="tok-o">.</span><span class="tok-na">myMap</span><span class="tok-o">(</span><span class="tok-n">numbers</span><span class="tok-o">,</span> <span class="tok-n">Math</span><span class="tok-o">::</span><span class="tok-n">abs</span><span class="tok-o">));</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_containing_type_as_a_method_reference">Containing Type as a Method Reference</h3>
<div class="paragraph">
<p>Before:</p>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.functions.FunctionsTest#testMethodReferenceAContainingType</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">words</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-s">&quot;One&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Two&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Three&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Four&quot;</span><span class="tok-o">);</span>
<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">Functions</span><span class="tok-o">.</span><span class="tok-na">myMap</span><span class="tok-o">(</span><span class="tok-n">words</span><span class="tok-o">,</span> <span class="tok-k">new</span> <span class="tok-n">MyFunction</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">,</span>
    <span class="tok-n">Integer</span><span class="tok-o">&gt;()</span> <span class="tok-o">{</span>
    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-n">Integer</span> <span class="tok-nf">apply</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">s</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-n">s</span><span class="tok-o">.</span><span class="tok-na">length</span><span class="tok-o">();</span>
    <span class="tok-o">}</span>
<span class="tok-o">});</span>
<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">result</span><span class="tok-o">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>With a Lambda:</p>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.functions.FunctionsTest#testMethodReferenceAContainingType</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">words</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-s">&quot;One&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Two&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Three&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Four&quot;</span><span class="tok-o">);</span>
<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">Functions</span><span class="tok-o">.</span><span class="tok-na">myMap</span><span class="tok-o">(</span><span class="tok-n">words</span><span class="tok-o">,</span> <span class="tok-n">s</span> <span class="tok-o">-&gt;</span> <span class="tok-n">s</span><span class="tok-o">.</span><span class="tok-na">length</span><span class="tok-o">());</span>
<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">result</span><span class="tok-o">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>With a Method Reference:</p>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.functions.FunctionsTest#testMethodReferenceAContainingType</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">words</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-s">&quot;One&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Two&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Three&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Four&quot;</span><span class="tok-o">);</span>
<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">Functions</span><span class="tok-o">.</span><span class="tok-na">myMap</span><span class="tok-o">(</span><span class="tok-n">words</span><span class="tok-o">,</span> <span class="tok-n">String</span><span class="tok-o">::</span><span class="tok-n">length</span><span class="tok-o">);</span>
<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">result</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_owner_of_the_method_reference">Owner of the Method Reference</h3>
<div class="ulist">
<ul>
<li>
<p>The owner of the method might be any super type</p>
</li>
<li>
<p>Not always the type that you are using</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Before:</p>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.functions.FunctionsTest#testMethodReferenceAContainingTypeTrickQuestion</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">numbers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">9</span><span class="tok-o">,</span> <span class="tok-mi">15</span><span class="tok-o">,</span> <span class="tok-mi">19</span><span class="tok-o">,</span>
        <span class="tok-mi">21</span><span class="tok-o">,</span> <span class="tok-mi">33</span><span class="tok-o">,</span> <span class="tok-mi">78</span><span class="tok-o">,</span> <span class="tok-mi">93</span><span class="tok-o">,</span> <span class="tok-mi">10</span><span class="tok-o">);</span>
<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">Functions</span><span class="tok-o">.</span><span class="tok-na">myMap</span><span class="tok-o">(</span><span class="tok-n">numbers</span><span class="tok-o">,</span> <span class="tok-k">new</span> <span class="tok-n">MyFunction</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">,</span>
    <span class="tok-n">String</span><span class="tok-o">&gt;()</span> <span class="tok-o">{</span>
    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">apply</span><span class="tok-o">(</span><span class="tok-n">Integer</span> <span class="tok-n">integer</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-n">integer</span><span class="tok-o">.</span><span class="tok-na">toString</span><span class="tok-o">();</span>
    <span class="tok-o">}</span>
<span class="tok-o">}));</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>With a Lambda:</p>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.functions.FunctionsTest#testMethodReferenceAContainingType</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">numbers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">9</span><span class="tok-o">,</span> <span class="tok-mi">15</span><span class="tok-o">,</span> <span class="tok-mi">19</span><span class="tok-o">,</span>
        <span class="tok-mi">21</span><span class="tok-o">,</span> <span class="tok-mi">33</span><span class="tok-o">,</span> <span class="tok-mi">78</span><span class="tok-o">,</span> <span class="tok-mi">93</span><span class="tok-o">,</span> <span class="tok-mi">10</span><span class="tok-o">);</span>
<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">Functions</span><span class="tok-o">.</span><span class="tok-na">myMap</span><span class="tok-o">(</span><span class="tok-n">numbers</span><span class="tok-o">,</span> <span class="tok-n">integer</span> <span class="tok-o">-&gt;</span> <span class="tok-n">integer</span><span class="tok-o">.</span><span class="tok-na">toString</span><span class="tok-o">()));</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>With a Method Reference:</p>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.functions.FunctionsTest#testMethodReferenceAContainingType</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">numbers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">9</span><span class="tok-o">,</span> <span class="tok-mi">15</span><span class="tok-o">,</span> <span class="tok-mi">19</span><span class="tok-o">,</span>
        <span class="tok-mi">21</span><span class="tok-o">,</span> <span class="tok-mi">33</span><span class="tok-o">,</span> <span class="tok-mi">78</span><span class="tok-o">,</span> <span class="tok-mi">93</span><span class="tok-o">,</span> <span class="tok-mi">10</span><span class="tok-o">);</span>
<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">Functions</span><span class="tok-o">.</span><span class="tok-na">myMap</span><span class="tok-o">(</span><span class="tok-n">numbers</span><span class="tok-o">,</span> <span class="tok-n">Object</span><span class="tok-o">::</span><span class="tok-n">toString</span><span class="tok-o">));</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Use your IDE to guide you. It&#8217;s easier that way.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_method_reference_with_an_instance">Method Reference with an Instance</h3>
<div class="paragraph">
<p>Given a custom TaxRate class:</p>
</div>
<div class="listingblock">
<div class="title">src/main/java/com.xyzcorp.demos.functions.TaxRate</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kn">package</span> <span class="tok-nn">com.xyzcorp</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">TaxRate</span> <span class="tok-o">{</span>
    <span class="tok-kd">private</span> <span class="tok-kd">final</span> <span class="tok-kt">int</span> <span class="tok-n">year</span><span class="tok-o">;</span>
    <span class="tok-kd">private</span> <span class="tok-kd">final</span> <span class="tok-kt">double</span> <span class="tok-n">taxRate</span><span class="tok-o">;</span>

    <span class="tok-kd">public</span> <span class="tok-nf">TaxRate</span><span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">year</span><span class="tok-o">,</span> <span class="tok-kt">double</span> <span class="tok-n">taxRate</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">year</span> <span class="tok-o">=</span> <span class="tok-n">year</span><span class="tok-o">;</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">taxRate</span> <span class="tok-o">=</span> <span class="tok-n">taxRate</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-kt">double</span> <span class="tok-nf">apply</span><span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">subtotal</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-o">(</span><span class="tok-n">subtotal</span> <span class="tok-o">*</span> <span class="tok-n">taxRate</span><span class="tok-o">)</span> <span class="tok-o">+</span> <span class="tok-n">subtotal</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-c1">//Getters, toString, equals elided</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Before:</p>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.functions.FunctionsTest#testMethodReferenceAnInstance</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">numbers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">9</span><span class="tok-o">,</span> <span class="tok-mi">15</span><span class="tok-o">,</span> <span class="tok-mi">19</span><span class="tok-o">,</span>
        <span class="tok-mi">21</span><span class="tok-o">,</span> <span class="tok-mi">33</span><span class="tok-o">,</span> <span class="tok-mi">78</span><span class="tok-o">,</span> <span class="tok-mi">93</span><span class="tok-o">,</span> <span class="tok-mi">10</span><span class="tok-o">);</span>
<span class="tok-n">TaxRate</span> <span class="tok-n">taxRate2016</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">TaxRate</span><span class="tok-o">(</span><span class="tok-mi">2016</span><span class="tok-o">,</span> <span class="tok-mf">.085</span><span class="tok-o">);</span>
<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">Functions</span><span class="tok-o">.</span><span class="tok-na">myMap</span><span class="tok-o">(</span><span class="tok-n">numbers</span><span class="tok-o">,</span>
  <span class="tok-k">new</span> <span class="tok-n">MyFunction</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">,</span> <span class="tok-n">Double</span><span class="tok-o">&gt;()</span> <span class="tok-o">{</span>
    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-n">Double</span> <span class="tok-nf">apply</span><span class="tok-o">(</span><span class="tok-n">Integer</span> <span class="tok-n">subtotal</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-n">taxRate2016</span><span class="tok-o">.</span><span class="tok-na">apply</span><span class="tok-o">(</span><span class="tok-n">subtotal</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">}));</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>With a Lambda:</p>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.functions.FunctionsTest#testMethodReferenceAnInstance</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">numbers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">9</span><span class="tok-o">,</span> <span class="tok-mi">15</span><span class="tok-o">,</span> <span class="tok-mi">19</span><span class="tok-o">,</span>
        <span class="tok-mi">21</span><span class="tok-o">,</span> <span class="tok-mi">33</span><span class="tok-o">,</span> <span class="tok-mi">78</span><span class="tok-o">,</span> <span class="tok-mi">93</span><span class="tok-o">,</span> <span class="tok-mi">10</span><span class="tok-o">);</span>
<span class="tok-n">TaxRate</span> <span class="tok-n">taxRate2016</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">TaxRate</span><span class="tok-o">(</span><span class="tok-mi">2016</span><span class="tok-o">,</span> <span class="tok-mf">.085</span><span class="tok-o">);</span>
<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">Functions</span><span class="tok-o">.</span><span class="tok-na">myMap</span><span class="tok-o">(</span><span class="tok-n">numbers</span><span class="tok-o">,</span> <span class="tok-n">subtotal</span> <span class="tok-o">-&gt;</span> <span class="tok-n">taxRate2016</span><span class="tok-o">.</span><span class="tok-na">apply</span><span class="tok-o">(</span><span class="tok-n">subtotal</span><span class="tok-o">)));</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>After:</p>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.functions.FunctionsTest#testMethodReferenceAnInstance</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">numbers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">9</span><span class="tok-o">,</span> <span class="tok-mi">15</span><span class="tok-o">,</span> <span class="tok-mi">19</span><span class="tok-o">,</span>
        <span class="tok-mi">21</span><span class="tok-o">,</span> <span class="tok-mi">33</span><span class="tok-o">,</span> <span class="tok-mi">78</span><span class="tok-o">,</span> <span class="tok-mi">93</span><span class="tok-o">,</span> <span class="tok-mi">10</span><span class="tok-o">);</span>
<span class="tok-n">TaxRate</span> <span class="tok-n">taxRate2016</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">TaxRate</span><span class="tok-o">(</span><span class="tok-mi">2016</span><span class="tok-o">,</span> <span class="tok-mf">.085</span><span class="tok-o">);</span>
<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">Functions</span><span class="tok-o">.</span><span class="tok-na">myMap</span><span class="tok-o">(</span><span class="tok-n">numbers</span><span class="tok-o">,</span> <span class="tok-n">taxRate2016</span><span class="tok-o">::</span><span class="tok-n">apply</span><span class="tok-o">));</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Use your IDE to guide you. It&#8217;s easier that way.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_method_reference_with_an_new_type">Method Reference with an New Type</h3>
<div class="paragraph">
<p>Before:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">numbers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">9</span><span class="tok-o">,</span> <span class="tok-mi">15</span><span class="tok-o">,</span> <span class="tok-mi">19</span><span class="tok-o">,</span>
    <span class="tok-mi">21</span><span class="tok-o">,</span> <span class="tok-mi">33</span><span class="tok-o">,</span> <span class="tok-mi">78</span><span class="tok-o">,</span> <span class="tok-mi">93</span><span class="tok-o">,</span> <span class="tok-mi">10</span><span class="tok-o">);</span>
<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">Functions</span><span class="tok-o">.</span><span class="tok-na">myMap</span><span class="tok-o">(</span><span class="tok-n">numbers</span><span class="tok-o">,</span>
    <span class="tok-k">new</span> <span class="tok-n">MyFunction</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">,</span> <span class="tok-n">Double</span><span class="tok-o">&gt;()</span> <span class="tok-o">{</span>
        <span class="tok-nd">@Override</span>
        <span class="tok-kd">public</span> <span class="tok-n">Double</span> <span class="tok-nf">apply</span><span class="tok-o">(</span><span class="tok-n">Integer</span> <span class="tok-n">value</span><span class="tok-o">)</span> <span class="tok-o">{</span>
            <span class="tok-k">return</span> <span class="tok-k">new</span> <span class="tok-n">Double</span><span class="tok-o">(</span><span class="tok-n">value</span><span class="tok-o">);</span>
        <span class="tok-o">}</span>
    <span class="tok-o">}));</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>With A Lambda:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">numbers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">9</span><span class="tok-o">,</span> <span class="tok-mi">15</span><span class="tok-o">,</span> <span class="tok-mi">19</span><span class="tok-o">,</span>
            <span class="tok-mi">21</span><span class="tok-o">,</span> <span class="tok-mi">33</span><span class="tok-o">,</span> <span class="tok-mi">78</span><span class="tok-o">,</span> <span class="tok-mi">93</span><span class="tok-o">,</span> <span class="tok-mi">10</span><span class="tok-o">);</span>
<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">Functions</span><span class="tok-o">.</span><span class="tok-na">myMap</span><span class="tok-o">(</span><span class="tok-n">numbers</span><span class="tok-o">,</span>
    <span class="tok-n">value</span> <span class="tok-o">-&gt;</span> <span class="tok-k">new</span> <span class="tok-n">Double</span><span class="tok-o">(</span><span class="tok-n">value</span><span class="tok-o">)));</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>After:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">numbers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">9</span><span class="tok-o">,</span> <span class="tok-mi">15</span><span class="tok-o">,</span> <span class="tok-mi">19</span><span class="tok-o">,</span>
            <span class="tok-mi">21</span><span class="tok-o">,</span> <span class="tok-mi">33</span><span class="tok-o">,</span> <span class="tok-mi">78</span><span class="tok-o">,</span> <span class="tok-mi">93</span><span class="tok-o">,</span> <span class="tok-mi">10</span><span class="tok-o">);</span>
<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">Functions</span><span class="tok-o">.</span><span class="tok-na">myMap</span><span class="tok-o">(</span><span class="tok-n">numbers</span><span class="tok-o">,</span> <span class="tok-n">Double</span><span class="tok-o">::</span><span class="tok-k">new</span><span class="tok-o">));</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Use your IDE to guide you. It&#8217;s easier that way.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>new Double</code> is deprecated in favor of <code>Double.valueOf(..)</code>. This was used for demonstration.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_create_mysupplier">Create <code>MySupplier</code></h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kn">package</span> <span class="tok-nn">com.xyzcorp</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">MySupplier</span><span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-o">{</span>
   <span class="tok-kd">public</span> <span class="tok-n">T</span> <span class="tok-nf">get</span><span class="tok-o">();</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Compare the difference to <code>MyConsumer</code>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_create_a_mygenerate_in_functions_java">Create a <code>myGenerate</code> in <strong><em>Functions.java</em></strong></h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-nf">myGenerate</span><span class="tok-o">(</span><span class="tok-n">MySupplier</span><span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-n">supplier</span><span class="tok-o">,</span> <span class="tok-kt">int</span> <span class="tok-n">count</span><span class="tok-o">)</span> <span class="tok-o">{}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_use_mygenerate_in_functionstest_java">Use <code>myGenerate</code> in <strong><em>FunctionsTest.java</em></strong></h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kn">package</span> <span class="tok-nn">com.xyzcorp</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">org.junit.Test</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.time.LocalDateTime</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">FunctionsTest</span> <span class="tok-o">{</span>

    <span class="tok-o">...</span>

    <span class="tok-nd">@Test</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">testMyGenerate</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">LocalDateTime</span><span class="tok-o">&gt;</span> <span class="tok-n">localDateTimes</span> <span class="tok-o">=</span>
          <span class="tok-n">Functions</span><span class="tok-o">.</span><span class="tok-na">myGenerate</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">MySupplier</span><span class="tok-o">&lt;</span><span class="tok-n">LocalDateTime</span><span class="tok-o">&gt;()</span> <span class="tok-o">{</span>
              <span class="tok-nd">@Override</span>
              <span class="tok-kd">public</span> <span class="tok-n">LocalDateTime</span> <span class="tok-nf">get</span><span class="tok-o">()</span> <span class="tok-o">{</span>
                  <span class="tok-k">return</span> <span class="tok-n">LocalDateTime</span><span class="tok-o">.</span><span class="tok-na">now</span><span class="tok-o">();</span>
              <span class="tok-o">}</span>
          <span class="tok-o">},</span> <span class="tok-mi">10</span><span class="tok-o">);</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">localDateTimes</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>LocalDateTime.now()</code> is from the new Java Date/Time API from Java 8.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_viewing_consumer_supplier_predicate_function_in_the_official_javadoc">Viewing Consumer, Supplier, Predicate, Function, in the official Javadoc.</h3>
<div class="paragraph">
<p><a href="https://docs.oracle.com/javase/8/docs/api/java/util/function/package-summary.html" class="bare">https://docs.oracle.com/javase/8/docs/api/java/util/function/package-summary.html</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_multi_line_lambdas">Multi-line Lambdas</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kn">package</span> <span class="tok-nn">com.xyzcorp</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">org.junit.Test</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.time.LocalDateTime</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">FunctionsTest</span> <span class="tok-o">{</span>

    <span class="tok-o">...</span>

    <span class="tok-nd">@Test</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">testLambdasWithRunnable</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-n">Thread</span> <span class="tok-n">t</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Thread</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Runnable</span><span class="tok-o">()</span> <span class="tok-o">{</span>
            <span class="tok-nd">@Override</span>
            <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">run</span><span class="tok-o">()</span> <span class="tok-o">{</span>
                <span class="tok-n">String</span> <span class="tok-n">threadName</span> <span class="tok-o">=</span>
                        <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">currentThread</span><span class="tok-o">().</span><span class="tok-na">getName</span><span class="tok-o">();</span>
                <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">format</span><span class="tok-o">(</span><span class="tok-s">&quot;%s: %s%n&quot;</span><span class="tok-o">,</span>
                        <span class="tok-n">threadName</span><span class="tok-o">,</span>
                        <span class="tok-s">&quot;Hello from another thread&quot;</span><span class="tok-o">);</span>
            <span class="tok-o">}</span>
        <span class="tok-o">});</span>
        <span class="tok-n">t</span><span class="tok-o">.</span><span class="tok-na">start</span><span class="tok-o">();</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>Runnable</code> is an <code>interface</code> with one <code>abstract</code> method.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_closure">Closure</h3>
<div class="ulist">
<ul>
<li>
<p><em>Lexical scoping</em> caches values provided in one context for use later in another context.</p>
</li>
<li>
<p>If lambda expression closes over the scope of its definition, it is a <em>closure</em>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-n">Integer</span> <span class="tok-nf">foo</span>
        <span class="tok-o">(</span><span class="tok-n">Function</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">,</span> <span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">f</span><span class="tok-o">)</span> <span class="tok-o">{</span>
    <span class="tok-k">return</span> <span class="tok-n">f</span><span class="tok-o">.</span><span class="tok-na">apply</span><span class="tok-o">(</span><span class="tok-mi">5</span><span class="tok-o">);</span>
<span class="tok-o">}</span>

<span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">otherMethod</span><span class="tok-o">()</span> <span class="tok-o">{</span>
    <span class="tok-n">Integer</span> <span class="tok-n">x</span> <span class="tok-o">=</span> <span class="tok-mi">3</span><span class="tok-o">;</span>
    <span class="tok-n">Function</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">,</span> <span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">add3</span> <span class="tok-o">=</span> <span class="tok-n">z</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span> <span class="tok-o">+</span> <span class="tok-n">z</span><span class="tok-o">;</span>
    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">foo</span><span class="tok-o">(</span><span class="tok-n">add3</span><span class="tok-o">));</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_lexical_scoping_restrictions">Lexical Scoping Restrictions</h3>
<div class="ulist">
<ul>
<li>
<p>To avoid any race conditions:</p>
<div class="ulist">
<ul>
<li>
<p>The variable that is being in enclosed must either be:</p>
<div class="ulist">
<ul>
<li>
<p><code>final</code></p>
</li>
<li>
<p><em>Effectively final</em>. No change can be made after used in a closure.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_closure_error">Closure Error</h3>
<div class="paragraph">
<p>The following will not work&#8230;&#8203;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-n">Integer</span> <span class="tok-nf">foo</span>
        <span class="tok-o">(</span><span class="tok-n">Function</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">,</span> <span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">f</span><span class="tok-o">)</span> <span class="tok-o">{</span>
    <span class="tok-k">return</span> <span class="tok-n">f</span><span class="tok-o">.</span><span class="tok-na">apply</span><span class="tok-o">(</span><span class="tok-mi">5</span><span class="tok-o">);</span>
<span class="tok-o">}</span>

<span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">otherMethod</span><span class="tok-o">()</span> <span class="tok-o">{</span>
    <span class="tok-n">Integer</span> <span class="tok-n">x</span> <span class="tok-o">=</span> <span class="tok-mi">3</span><span class="tok-o">;</span>
    <span class="tok-n">Function</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">,</span> <span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">add3</span> <span class="tok-o">=</span> <span class="tok-n">z</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span> <span class="tok-o">+</span> <span class="tok-n">z</span><span class="tok-o">;</span>
    <span class="tok-n">x</span> <span class="tok-o">=</span> <span class="tok-mi">10</span><span class="tok-o">;</span>
    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">foo</span><span class="tok-o">(</span><span class="tok-n">add3</span><span class="tok-o">));</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_create_duplicated_code">Create Duplicated Code</h3>
<div class="paragraph">
<p>An application for a closure is to avoid repetition.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kn">package</span> <span class="tok-nn">com.xyzcorp</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">org.junit.Test</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.time.LocalDateTime</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">FunctionsTest</span> <span class="tok-o">{</span>

    <span class="tok-o">...</span>

    <span class="tok-nd">@Test</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">testClosuresAvoidRepeats</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-n">MyPredicate</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">stringHasSizeOf4</span> <span class="tok-o">=</span>
                <span class="tok-n">str</span> <span class="tok-o">-&gt;</span> <span class="tok-n">str</span><span class="tok-o">.</span><span class="tok-na">length</span><span class="tok-o">()</span> <span class="tok-o">==</span> <span class="tok-mi">4</span><span class="tok-o">;</span>

        <span class="tok-n">MyPredicate</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">stringHasSizeOf2</span> <span class="tok-o">=</span>
                <span class="tok-n">str</span> <span class="tok-o">-&gt;</span> <span class="tok-n">str</span><span class="tok-o">.</span><span class="tok-na">length</span><span class="tok-o">()</span> <span class="tok-o">==</span> <span class="tok-mi">2</span><span class="tok-o">;</span>

        <span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">names</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-s">&quot;Foo&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Ramen&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Naan&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Ravioli&quot;</span><span class="tok-o">);</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">Functions</span><span class="tok-o">.</span><span class="tok-na">myFilter</span><span class="tok-o">(</span><span class="tok-n">names</span><span class="tok-o">,</span> <span class="tok-n">stringHasSizeOf4</span><span class="tok-o">));</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">Functions</span><span class="tok-o">.</span><span class="tok-na">myFilter</span><span class="tok-o">(</span><span class="tok-n">names</span><span class="tok-o">,</span> <span class="tok-n">stringHasSizeOf2</span><span class="tok-o">));</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_refactor_duplicated_code_with_a_closure">Refactor Duplicated Code with a Closure</h3>
<div class="paragraph">
<p>An application for a closure is to avoid repetition.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kn">package</span> <span class="tok-nn">com.xyzcorp</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">org.junit.Test</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.time.LocalDateTime</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">FunctionsTest</span> <span class="tok-o">{</span>

    <span class="tok-o">...</span>

    <span class="tok-kd">public</span> <span class="tok-n">MyPredicate</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-nf">stringHasSizeOf</span><span class="tok-o">(</span><span class="tok-kd">final</span> <span class="tok-kt">int</span> <span class="tok-n">length</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-kc">null</span><span class="tok-o">;</span> <span class="tok-c1">//Create your closure here</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Test</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">testClosuresAvoidRepeats</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">names</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-s">&quot;Foo&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Ramen&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Naan&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Ravioli&quot;</span><span class="tok-o">);</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">Functions</span><span class="tok-o">.</span><span class="tok-na">myFilter</span><span class="tok-o">(</span><span class="tok-n">names</span><span class="tok-o">,</span> <span class="tok-n">stringHasSizeOf</span><span class="tok-o">(</span><span class="tok-mi">4</span><span class="tok-o">)));</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">Functions</span><span class="tok-o">.</span><span class="tok-na">myFilter</span><span class="tok-o">(</span><span class="tok-n">names</span><span class="tok-o">,</span> <span class="tok-n">stringHasSizeOf</span><span class="tok-o">(</span><span class="tok-mi">2</span><span class="tok-o">)));</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2 slide_section">
<h3 id="_lab_functions">Lab: Functions</h3>
<div class="paragraph">
<p><strong>Step 1:</strong> Open <em>src/test/java/com.xycorp.exercises.function.FunctionExercises</em></p>
</div>
<div class="paragraph">
<p><strong>Step 2:</strong> Understand how to write a test with methods, <code>testSampleWithStandardJUnit</code> and
<code>testSampleWithStandardJUnitAndAssertJAssertion</code> in case you are unfamiliar with testing</p>
</div>
<div class="paragraph">
<p><strong>Step 3:</strong> Preferably using Test Driven Development, create a class called <code>MyTimer</code> with a static method
called <code>measureTime</code>. <code>measureTime</code> should take a <code>Supplier</code> that returns an <code>Integer</code> representing how long
the lambda will take when executed.  <code>measureTime</code> should return a custom class called <code>TimeResult</code> that will have two methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>getResult</code> - This will return the result of the lambda</p>
</li>
<li>
<p><code>getTime</code> - This will return the result of how long <code>measureTime</code> took</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Here is an example of what it <em>may</em> look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">var</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">MyTimer</span><span class="tok-o">.</span><span class="tok-na">measureTime</span><span class="tok-o">(()</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>
    <span class="tok-k">try</span> <span class="tok-o">{</span>
        <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">sleep</span><span class="tok-o">(</span><span class="tok-mi">4000</span><span class="tok-o">);</span>
    <span class="tok-o">}</span> <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">InterruptedException</span> <span class="tok-n">e</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-n">e</span><span class="tok-o">.</span><span class="tok-na">printStackTrace</span><span class="tok-o">();</span>
    <span class="tok-o">}</span>
    <span class="tok-k">return</span> <span class="tok-mi">40</span><span class="tok-o">;</span>
<span class="tok-o">});</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Step 4:</strong> Extra Credit. Make it generic! What if the lambda is not returning an <code>Integer</code> can you make this so it uses any type?</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1 slide_section">
<h2 id="_optional"><code>Optional</code></h2>
<div class="sectionbody">
<div class="quoteblock">
<div class="title">Sir Richard Antony Hoare on the <code>null</code> reference</div>
<blockquote>
<div class="paragraph">
<p>I call it my billion-dollar mistake. It was the invention of the null reference in 1965. At that time, I was designing the first comprehensive type system for references in an object oriented language (ALGOL W). My goal was to ensure that all use of references should be absolutely safe, with checking performed automatically by the compiler. But I couldn&#8217;t resist the temptation to put in a null reference, simply because it was so easy to implement. This has led to innumerable errors, vulnerabilities, and system crashes, which have probably caused a billion dollars of pain and damage in the last forty years.</p>
</div>
</blockquote>
</div>
<div class="sect2">
<h3 id="_optional_defined_in_java_8"><code>Optional</code> Defined in Java 8</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>A <strong>container object</strong> which may or may not contain a non-null value. If a value is present, <code>isPresent()</code> will return <code>true</code> and <code>get()</code> will return the value.</p>
</div>
</blockquote>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Optional is <strong>not</strong> <code>Serializable</code>
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This is a value-based class; use of identity-sensitive operations
(including reference equality (<code>==</code>), identity hash code, or synchronization) on instances of <code>Optional</code> may have unpredictable results and should be avoided.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_optional_empty"><code>Optional</code> Empty</h3>
<div class="ulist">
<ul>
<li>
<p>The following represents an absence of value</p>
</li>
<li>
<p>Fully Generic</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Optional</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">middleName</span> <span class="tok-o">=</span> <span class="tok-n">Optional</span><span class="tok-o">.</span><span class="tok-na">empty</span><span class="tok-o">();</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_optional_non_empty"><code>Optional</code> Non Empty</h3>
<div class="ulist">
<ul>
<li>
<p>The following represents an answer, a full representation of value</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Optional</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">middleName</span> <span class="tok-o">=</span> <span class="tok-n">Optional</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-s">&quot;Hello&quot;</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_trapping_something_possibly_null">Trapping Something Possibly <code>null</code></h3>
<div class="ulist">
<ul>
<li>
<p>A commonly used technique to trap something that can possibly be <code>null</code></p>
</li>
<li>
<p>Returns an <code>Optional</code> describing the given value, if non-<code>null</code>, otherwise returns an empty <code>Optional</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.optionals.OptionalsTest#testOptionalFromSomethingPossiblyNull</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">String</span> <span class="tok-n">possibleNull</span> <span class="tok-o">=</span> <span class="tok-n">getSomethingRandomlyNull</span><span class="tok-o">();</span>
<span class="tok-n">Optional</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">optional</span> <span class="tok-o">=</span> <span class="tok-n">Optional</span><span class="tok-o">.</span><span class="tok-na">ofNullable</span><span class="tok-o">(</span><span class="tok-n">possibleNull</span><span class="tok-o">);</span>
<span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">possibleNull</span> <span class="tok-o">==</span> <span class="tok-kc">null</span><span class="tok-o">)</span> <span class="tok-n">assertThat</span><span class="tok-o">(</span><span class="tok-n">optional</span><span class="tok-o">.</span><span class="tok-na">isPresent</span><span class="tok-o">()).</span><span class="tok-na">isFalse</span><span class="tok-o">();</span>
<span class="tok-k">else</span> <span class="tok-n">assertThat</span><span class="tok-o">(</span><span class="tok-n">optional</span><span class="tok-o">.</span><span class="tok-na">isPresent</span><span class="tok-o">()).</span><span class="tok-na">isTrue</span><span class="tok-o">();</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_optional_get"><code>Optional.get</code></h3>
<div class="ulist">
<ul>
<li>
<p>Used to obtain the value of the <code>Optional</code></p>
</li>
<li>
<p>Typically the <em>unsafe way</em> to do so, although can be useful when known that it is present</p>
<div class="ulist">
<ul>
<li>
<p>e.g. after <code>filter(Optional::isPresent)</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following returns <code>40L</code></p>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.optionals.OptionalsTest#testGettingTheValueAndLucky</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Optional</span><span class="tok-o">&lt;</span><span class="tok-n">Long</span><span class="tok-o">&gt;</span> <span class="tok-n">optionalLong</span> <span class="tok-o">=</span> <span class="tok-n">Optional</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">40L</span><span class="tok-o">);</span>
<span class="tok-n">optionalLong</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">();</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following will throw a <code>NoSuchElementException</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Optional</span><span class="tok-o">&lt;</span><span class="tok-n">Long</span><span class="tok-o">&gt;</span> <span class="tok-n">optionalLong</span> <span class="tok-o">=</span> <span class="tok-n">Optional</span><span class="tok-o">.</span><span class="tok-na">empty</span><span class="tok-o">();</span>
<span class="tok-n">optionalLong</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">();</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_responsible_retrieval_using_orelse">Responsible retrieval using <code>orElse</code></h3>
<div class="ulist">
<ul>
<li>
<p>A safe way to retrieve is <code>orElse</code> which will retrieve the value</p>
</li>
<li>
<p>The following will return <code>-1</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.optionals.OptionalsTest#testGettingTheValueTheGoodWayUsingGetOrElse</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Optional</span><span class="tok-o">&lt;</span><span class="tok-n">Long</span><span class="tok-o">&gt;</span> <span class="tok-n">optionalLong</span> <span class="tok-o">=</span> <span class="tok-n">Optional</span><span class="tok-o">.</span><span class="tok-na">empty</span><span class="tok-o">();</span>
<span class="tok-n">Long</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">optionalLong</span><span class="tok-o">.</span><span class="tok-na">orElse</span><span class="tok-o">(-</span><span class="tok-mi">1L</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_lazy_retrieval_with_a_supplier">Lazy Retrieval with a <code>Supplier</code></h3>
<div class="ulist">
<ul>
<li>
<p>Nearly the same as <code>orElse</code></p>
</li>
<li>
<p>Lazy alternative with <code>Supplier</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.optionals.OptionalsTest#testGettingTheValueTheGoodWayUsingOrElseGet</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Optional</span><span class="tok-o">&lt;</span><span class="tok-n">Long</span><span class="tok-o">&gt;</span> <span class="tok-n">optionalLong</span> <span class="tok-o">=</span> <span class="tok-n">Optional</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">40L</span><span class="tok-o">);</span>
<span class="tok-n">Long</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">optionalLong</span><span class="tok-o">.</span><span class="tok-na">orElseGet</span><span class="tok-o">(</span><span class="tok-k">this</span><span class="tok-o">::</span><span class="tok-n">getDefaultAverage</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ifpresentorelse"><code>ifPresentOrElse</code></h3>
<div class="ulist">
<ul>
<li>
<p>Functional conditional handling whether present or empty</p>
</li>
<li>
<p>First argument is a Consumer of the contained type of the <code>Optional</code></p>
</li>
<li>
<p>Second is a <code>Runnable</code> of a side effect for the otherwise case</p>
</li>
<li>
<p>Perfect for test assertions</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.optionals.OptionalsTest#testGettingTheValueWithIfPresentOrElse</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Optional</span><span class="tok-o">&lt;</span><span class="tok-n">Long</span><span class="tok-o">&gt;</span> <span class="tok-n">optionalLong</span> <span class="tok-o">=</span> <span class="tok-n">Optional</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">40L</span><span class="tok-o">);</span>
<span class="tok-n">optionalLong</span>
    <span class="tok-o">.</span><span class="tok-na">ifPresentOrElse</span><span class="tok-o">(</span>
        <span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">assertEquals</span><span class="tok-o">(</span><span class="tok-mi">40L</span><span class="tok-o">,</span> <span class="tok-n">x</span><span class="tok-o">),</span>
        <span class="tok-o">()</span> <span class="tok-o">-&gt;</span> <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Not good&quot;</span><span class="tok-o">));</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_optional_and_map"><code>Optional</code> and <code>map</code></h3>
<div class="ulist">
<ul>
<li>
<p><code>Optional</code> has <code>map</code> functionality</p>
</li>
<li>
<p>Applies function to the value inside of a present <code>Optional</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Optional</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-n">Optional</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">40</span><span class="tok-o">);</span>
<span class="tok-n">Optional</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">i</span><span class="tok-o">.</span><span class="tok-na">map</span><span class="tok-o">(</span><span class="tok-n">a</span> <span class="tok-o">-&gt;</span> <span class="tok-n">a</span> <span class="tok-o">*</span> <span class="tok-mi">20</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_optional_and_flatmap"><code>Optional</code> and <code>flatMap</code></h3>
<div class="ulist">
<ul>
<li>
<p><code>Optional</code> has <code>flatMap</code> functionality</p>
</li>
<li>
<p>Applies a function to the value inside that also returns another <code>Optional</code> of a present <code>Optional</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Optional</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-n">Optional</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">40</span><span class="tok-o">);</span>
<span class="tok-n">Optional</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">j</span> <span class="tok-o">=</span> <span class="tok-n">Optional</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">90</span><span class="tok-o">);</span>
<span class="tok-n">Optional</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">i</span><span class="tok-o">.</span><span class="tok-na">flatMap</span><span class="tok-o">(</span><span class="tok-n">a</span> <span class="tok-o">-&gt;</span> <span class="tok-n">j</span><span class="tok-o">.</span><span class="tok-na">map</span><span class="tok-o">(</span><span class="tok-n">b</span> <span class="tok-o">-&gt;</span> <span class="tok-n">a</span> <span class="tok-o">*</span> <span class="tok-n">b</span><span class="tok-o">));</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_optional_is_not_serializable"><code>Optional</code> is not <code>Serializable</code></h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>This answer is in response to the question in the title, "Shouldn&#8217;t Optional be Serializable?" The short answer is that the Java Lambda (JSR-335) expert group considered and rejected it. That note, and this one and this one indicate that the primary design goal for Optional is to be used as the return value of functions when a return value might be absent. The intent is that the caller immediately check the Optional and extract the actual value if it&#8217;s present. If the value is absent, the caller can substitute a default value, throw an exception, or apply some other policy. This is typically done by chaining fluent method calls off the end of a stream pipeline (or other methods) that return Optional values.</p>
</div>
<div class="paragraph">
<p>It was never intended for Optional to be used other ways, such as for optional method arguments or to be stored as a field in an object. And by extension, making Optional serializable would enable it to be stored persistently or transmitted across a network, both of which encourage uses far beyond its original design goal.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><a href="https://stackoverflow.com/questions/24547673/why-java-util-optional-is-not-serializable-how-to-serialize-the-object-with-suc/24559389">Stack Overflow on <code>Optional</code> Serialization</a></p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2 slide_section">
<h3 id="_lab_optional">Lab: <code>Optional</code></h3>
<div class="paragraph">
<p><strong>Step 1:</strong> Open <em>src/test/java/com.xycorp.exercises.optionals.OptionalExercises</em></p>
</div>
<div class="paragraph">
<p><strong>Step 2:</strong> Read and understand the two <code>Map</code> instances: <code>europeanCountriesCapitals</code> and <code>europeanCapitalPopulation</code></p>
</div>
<div class="paragraph">
<p><strong>Step 3:</strong> In the test <code>testGettingGreeceCapital</code>, use <code>Optional</code> to safely read from <code>europeanCountriesCapitals</code>
using <code>Optional</code>. Assert that the capital of <code>Greece</code> is <code>Athens</code>.
 <em>Do not use plain <code>if</code> statements</em>. This is an exercise for functional programming so use either <code>map</code>, <code>flatMap</code>,
 <code>filter</code>, <code>forEach</code>, or any of the <code>Optional</code> methods</p>
</div>
<div class="paragraph">
<p><strong>Step 4:</strong> In the test <code>testGettingHungaryCapital</code>, use <code>Optional</code> to
safely read from <code>europeanCountriesCapitals</code> using Optional.
Assert that the capital of <code>Hungary</code> is not available. <em>Do not use plain <code>if</code> statements</em>.
This is an exercise for functional programming so use either <code>map</code>, <code>flatMap</code>,
 <code>filter</code>, <code>forEach</code>, or any of the <code>Optional</code> methods.</p>
</div>
<div class="paragraph">
<p><strong>Step 5:</strong> In the test <code>testGettingFromNorwayTheCapitalAndPopulation</code>,
 use <code>Optional</code> to safely read from <code>europeanCountriesCapitals</code> given a <code>String</code> of <code>Norway</code>. Whatever the result
 from the capital, use that capital to query from <code>europeanCapitalPopulation</code> and get the population.
 Return the pairing of the capital and the population.  <em>Do not use plain <code>if</code> statements</em>.
This is an exercise for functional programming so use either <code>map</code>, <code>flatMap</code>,
 <code>filter</code>, <code>forEach</code>, or any of the <code>Optional</code> methods. Consider creating a custom <code>Pair</code> to do so.</p>
</div>
<div class="paragraph">
<p><strong>Step 6:</strong> In the test <code>testGettingFromGreeceTheCapitalAndPopulation</code>,
 use <code>Optional</code> to safely read from <code>europeanCountriesCapitals</code> given a <code>String</code> of <code>Greece</code>. Whatever the result
 from the capital, use that capital to query from <code>europeanCapitalPopulation</code> and get the population.
 Assert that the population of <code>Greece</code> is not available for population. <em>Do not use plain <code>if</code> statements</em>.
This is an exercise for functional programming so use either <code>map</code>, <code>flatMap</code>,
 <code>filter</code>, <code>forEach</code>, or any of the <code>Optional</code> methods. Consider creating a custom <code>Pair</code> class to do so.</p>
</div>
<div class="paragraph">
<p><strong>Step 7:</strong> In the test <code>testGettingFromNorwayTheCountryAndCapital</code>,
use <code>Optional</code> to safely read from <code>europeanCountriesCapitals</code> given a <code>String</code> of <code>Norway</code>. Whatever the result
 from the capital, use that capital to query from <code>europeanCapitalPopulation</code> and get the population.
 Return a <em>triplet</em> of the capital and the population.  <em>Do not use plain <code>if</code> statements</em>.
This is an exercise for functional programming so use either <code>map</code>, <code>flatMap</code>,
 <code>filter</code>, <code>forEach</code>, or any of the <code>Optional</code> methods. Consider creating a custom <code>Triple</code> to do so.</p>
</div>
<div class="paragraph">
<p><strong>Step 8:</strong> Refactor aggressively, make the methods look nice.</p>
</div>
<div class="paragraph">
<p><strong>Step 9:</strong> Identify the closures.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Hint. In IntelliJ the closured variables are in purple
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1 slide_section">
<h2 id="_junit_5">JUnit 5</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Latest project for JUnit 5</p>
</li>
<li>
<p>Built atop JUnit Classic</p>
</li>
<li>
<p>Applies Functional Programming</p>
</li>
<li>
<p>Extension set called Jupiter Provides</p>
<div class="ulist">
<ul>
<li>
<p>Fixtures</p>
</li>
<li>
<p>Parameterized Tests</p>
</li>
<li>
<p>Tagging</p>
</li>
<li>
<p>more&#8230;&#8203;</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_running_tests_on_the_command_line">Running Tests on the Command Line</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sh"><span></span>% mvn <span class="tok-nb">test</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To run a specific test</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sh"><span></span>% mvn -Dtest<span class="tok-o">=</span>MyTest <span class="tok-nb">test</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_simple_test">Simple Test</h3>
<div class="paragraph">
<p>Typical <code>import</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kn">import</span> <span class="tok-nn">org.junit.jupiter.api.Test</span><span class="tok-o">;</span>

<span class="tok-kn">import static</span> <span class="tok-nn">org.junit.jupiter.api.Assertions.assertEquals</span><span class="tok-o">;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">JUnit5SimpleTest</span> <span class="tok-o">{</span>
    <span class="tok-nd">@Test</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">myFirstTest</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-n">assertEquals</span><span class="tok-o">(</span><span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">1</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_standard_assertions">Standard Assertions</h3>
<div class="listingblock">
<div class="title"><em>src/test/java/</em> <code>com.xyzcorp.demos.junit5.JUnit5AssertionsTest#standardAssertions</code></div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@Test</span>
<span class="tok-nd">@DisplayName</span><span class="tok-o">(</span><span class="tok-s">&quot;Standard Assertion Testing&quot;</span><span class="tok-o">)</span>
<span class="tok-kt">void</span> <span class="tok-nf">standardAssertions</span><span class="tok-o">()</span> <span class="tok-o">{</span>
    <span class="tok-n">assertEquals</span><span class="tok-o">(</span><span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">);</span>
    <span class="tok-n">assertEquals</span><span class="tok-o">(</span><span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span>
       <span class="tok-s">&quot;The optional assertion message is now the last parameter.&quot;</span><span class="tok-o">);</span>
    <span class="tok-n">assertTrue</span><span class="tok-o">(</span><span class="tok-mi">2</span> <span class="tok-o">==</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-o">()</span> <span class="tok-o">-&gt;</span>
       <span class="tok-s">&quot;Assertion messages can be lazily evaluated -- &quot;</span>
       <span class="tok-o">+</span> <span class="tok-s">&quot;to avoid constructing complex messages unnecessarily.&quot;</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_grouped_assertions">Grouped Assertions</h3>
<div class="listingblock">
<div class="title"><em>src/test/java/</em> <code>com.xyzcorp.demos.junit5.JUnit5AssertionsTest#groupedAssertions</code></div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@Test</span>
<span class="tok-nd">@DisplayName</span><span class="tok-o">(</span><span class="tok-s">&quot;Grouped Assertion Testing&quot;</span><span class="tok-o">)</span>
<span class="tok-kt">void</span> <span class="tok-nf">groupedAssertions</span><span class="tok-o">()</span> <span class="tok-o">{</span>
    <span class="tok-c1">// In a grouped assertion all assertions are executed, and any</span>
    <span class="tok-c1">// failures will be reported together.</span>

    <span class="tok-n">Employee</span> <span class="tok-n">e</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Employee</span><span class="tok-o">(</span><span class="tok-s">&quot;Douglas&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Adams&quot;</span><span class="tok-o">);</span>
    <span class="tok-n">assertAll</span><span class="tok-o">(</span><span class="tok-s">&quot;person&quot;</span><span class="tok-o">,</span>
            <span class="tok-o">()</span> <span class="tok-o">-&gt;</span> <span class="tok-n">assertEquals</span><span class="tok-o">(</span><span class="tok-s">&quot;Douglas&quot;</span><span class="tok-o">,</span> <span class="tok-n">e</span><span class="tok-o">.</span><span class="tok-na">getFirstName</span><span class="tok-o">()),</span>
            <span class="tok-o">()</span> <span class="tok-o">-&gt;</span> <span class="tok-n">assertEquals</span><span class="tok-o">(</span><span class="tok-s">&quot;Adams&quot;</span><span class="tok-o">,</span> <span class="tok-n">e</span><span class="tok-o">.</span><span class="tok-na">getLastName</span><span class="tok-o">())</span>
    <span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_dependent_assertions">Dependent Assertions</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@Test</span>
<span class="tok-nd">@DisplayName</span><span class="tok-o">(</span><span class="tok-s">&quot;Dependent Assertion Testing&quot;</span><span class="tok-o">)</span>
<span class="tok-kt">void</span> <span class="tok-nf">dependentAssertions</span><span class="tok-o">()</span> <span class="tok-o">{</span>
    <span class="tok-c1">// Within a code block, if an assertion fails the</span>
    <span class="tok-c1">// subsequent code in the same block will be skipped.</span>
    <span class="tok-n">Employee</span> <span class="tok-n">employee</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Employee</span><span class="tok-o">(</span><span class="tok-s">&quot;Douglas&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Adams&quot;</span><span class="tok-o">);</span>
    <span class="tok-n">assertAll</span><span class="tok-o">(</span><span class="tok-s">&quot;Employee Properties&quot;</span><span class="tok-o">,</span>
            <span class="tok-o">()</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>
                <span class="tok-n">String</span> <span class="tok-n">firstName</span> <span class="tok-o">=</span> <span class="tok-n">employee</span><span class="tok-o">.</span><span class="tok-na">getFirstName</span><span class="tok-o">();</span>
                <span class="tok-n">assertNotNull</span><span class="tok-o">(</span><span class="tok-n">firstName</span><span class="tok-o">);</span>

                <span class="tok-c1">// Executed only if the previous assertion is valid.</span>
                <span class="tok-n">assertAll</span><span class="tok-o">(</span><span class="tok-s">&quot;first name&quot;</span><span class="tok-o">,</span>
                        <span class="tok-o">()</span> <span class="tok-o">-&gt;</span> <span class="tok-n">assertTrue</span><span class="tok-o">(</span><span class="tok-n">firstName</span><span class="tok-o">.</span><span class="tok-na">startsWith</span><span class="tok-o">(</span><span class="tok-s">&quot;D&quot;</span><span class="tok-o">)),</span>
                        <span class="tok-o">()</span> <span class="tok-o">-&gt;</span> <span class="tok-n">assertTrue</span><span class="tok-o">(</span><span class="tok-n">firstName</span><span class="tok-o">.</span><span class="tok-na">endsWith</span><span class="tok-o">(</span><span class="tok-s">&quot;s&quot;</span><span class="tok-o">))</span>
                <span class="tok-o">);</span>
            <span class="tok-o">},</span>
            <span class="tok-o">()</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>
                <span class="tok-c1">// Grouped assertion, so processed independently</span>
                <span class="tok-c1">// of results of first name assertions.</span>
                <span class="tok-n">String</span> <span class="tok-n">lastName</span> <span class="tok-o">=</span> <span class="tok-n">employee</span><span class="tok-o">.</span><span class="tok-na">getLastName</span><span class="tok-o">();</span>
                <span class="tok-n">assertNotNull</span><span class="tok-o">(</span><span class="tok-n">lastName</span><span class="tok-o">);</span>

                <span class="tok-c1">// Executed only if the previous assertion is valid.</span>
                <span class="tok-n">assertAll</span><span class="tok-o">(</span><span class="tok-s">&quot;last name&quot;</span><span class="tok-o">,</span>
                        <span class="tok-o">()</span> <span class="tok-o">-&gt;</span> <span class="tok-n">assertTrue</span><span class="tok-o">(</span><span class="tok-n">lastName</span><span class="tok-o">.</span><span class="tok-na">startsWith</span><span class="tok-o">(</span><span class="tok-s">&quot;A&quot;</span><span class="tok-o">)),</span>
                        <span class="tok-o">()</span> <span class="tok-o">-&gt;</span> <span class="tok-n">assertTrue</span><span class="tok-o">(</span><span class="tok-n">lastName</span><span class="tok-o">.</span><span class="tok-na">endsWith</span><span class="tok-o">(</span><span class="tok-s">&quot;s&quot;</span><span class="tok-o">))</span>
                <span class="tok-o">);</span>
            <span class="tok-o">}</span>
    <span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_exception_testing">Exception Testing</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@Test</span>
<span class="tok-kt">void</span> <span class="tok-nf">exceptionTesting</span><span class="tok-o">()</span> <span class="tok-o">{</span>
    <span class="tok-n">Throwable</span> <span class="tok-n">exception</span> <span class="tok-o">=</span> <span class="tok-n">assertThrows</span><span class="tok-o">(</span><span class="tok-n">IllegalArgumentException</span><span class="tok-o">.</span><span class="tok-na">class</span><span class="tok-o">,</span>
        <span class="tok-o">()</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>
           <span class="tok-k">throw</span> <span class="tok-k">new</span> <span class="tok-n">IllegalArgumentException</span><span class="tok-o">(</span><span class="tok-s">&quot;a message&quot;</span><span class="tok-o">);</span>
        <span class="tok-o">}</span>
    <span class="tok-o">);</span>

    <span class="tok-n">assertEquals</span><span class="tok-o">(</span><span class="tok-s">&quot;a message&quot;</span><span class="tok-o">,</span> <span class="tok-n">exception</span><span class="tok-o">.</span><span class="tok-na">getMessage</span><span class="tok-o">());</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_timeout_testing">Timeout Testing</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@Test</span>
<span class="tok-kt">void</span> <span class="tok-nf">timeoutNotExceeded</span><span class="tok-o">()</span> <span class="tok-o">{</span>
    <span class="tok-c1">// The following assertion succeeds.</span>
    <span class="tok-n">assertTimeout</span><span class="tok-o">(</span><span class="tok-n">ofSeconds</span><span class="tok-o">(</span><span class="tok-mi">5</span><span class="tok-o">),</span> <span class="tok-o">()</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>
        <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">sleep</span><span class="tok-o">(</span><span class="tok-mi">4000</span><span class="tok-o">);</span>
    <span class="tok-o">});</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@Test</span>
<span class="tok-kt">void</span> <span class="tok-nf">timeoutNotExceededWithResult</span><span class="tok-o">()</span> <span class="tok-o">{</span>
    <span class="tok-c1">// The following assertion succeeds, and</span>
    <span class="tok-c1">// returns the supplied object.</span>
    <span class="tok-n">String</span> <span class="tok-n">actualResult</span> <span class="tok-o">=</span> <span class="tok-n">assertTimeout</span><span class="tok-o">(</span>
        <span class="tok-n">ofSeconds</span><span class="tok-o">(</span><span class="tok-mi">2</span><span class="tok-o">),</span> <span class="tok-o">()</span> <span class="tok-o">-&gt;</span> <span class="tok-s">&quot;a result&quot;</span><span class="tok-o">);</span>
    <span class="tok-n">assertEquals</span><span class="tok-o">(</span><span class="tok-s">&quot;a result&quot;</span><span class="tok-o">,</span> <span class="tok-n">actualResult</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@Test</span>
<span class="tok-kt">void</span> <span class="tok-nf">timeoutNotExceededWithMethod</span><span class="tok-o">()</span> <span class="tok-o">{</span>
    <span class="tok-n">Employee</span> <span class="tok-n">employee</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Employee</span><span class="tok-o">(</span><span class="tok-s">&quot;Carl&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Sagan&quot;</span><span class="tok-o">);</span>
    <span class="tok-c1">// The following assertion invokes</span>
    <span class="tok-c1">// a method reference and returns an object.</span>
    <span class="tok-n">String</span> <span class="tok-n">lastName</span> <span class="tok-o">=</span> <span class="tok-n">assertTimeout</span><span class="tok-o">(</span><span class="tok-n">ofSeconds</span><span class="tok-o">(</span><span class="tok-mi">2</span><span class="tok-o">),</span>
       <span class="tok-n">employee</span><span class="tok-o">::</span><span class="tok-n">getLastName</span><span class="tok-o">);</span>
    <span class="tok-n">assertEquals</span><span class="tok-o">(</span><span class="tok-s">&quot;Sagan&quot;</span><span class="tok-o">,</span> <span class="tok-n">lastName</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_disabling_tests">Disabling Tests</h3>
<div class="paragraph">
<p>Disabling the Test on the class level</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@Disabled</span>
<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">JUnit5DisabledTest</span> <span class="tok-o">{</span>

    <span class="tok-nd">@Test</span>
    <span class="tok-kt">void</span> <span class="tok-nf">testOne</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-n">fail</span><span class="tok-o">(</span><span class="tok-s">&quot;This will never come to light since the whole test is disabled&quot;</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Test</span>
    <span class="tok-kt">void</span> <span class="tok-nf">testTwo</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-n">fail</span><span class="tok-o">(</span><span class="tok-s">&quot;This will never come to light since the whole test is disabled&quot;</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Disabling the Test on the method level</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span>
<span class="tok-nd">@Test</span>
<span class="tok-nd">@Disabled</span><span class="tok-o">(</span><span class="tok-s">&quot;because I don&#39;t want the test to fail&quot;</span><span class="tok-o">)</span>
<span class="tok-kt">void</span> <span class="tok-nf">failingTest</span><span class="tok-o">()</span> <span class="tok-o">{</span>
    <span class="tok-n">fail</span><span class="tok-o">(</span><span class="tok-s">&quot;a failing test&quot;</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2 slide_section">
<h3 id="_lab_junit_5">Lab: JUnit 5</h3>
<div class="paragraph">
<p><strong>Step 1:</strong> Open <em>src/test/java/com.xycorp.exercises.junit5.FindSmallestIntegerToZeroTest</em></p>
</div>
<div class="paragraph">
<p>Test Driven Development is defined using the following rules:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Quickly add a test.</p>
</li>
<li>
<p>Run all tests and see the new one fail.</p>
</li>
<li>
<p>Make a little change.</p>
</li>
<li>
<p>Run all tests and see them all succeed.</p>
</li>
<li>
<p>Refactor to remove duplication.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Test Driven Development is meant to be done in an incremented fashion, starting small and working your way up in complexity.
The goal of Test Driven Development is seek out red bar tests and not necessarily green bar tests
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Step 2:</strong> Use Test Driven Development and JUnit 5 Parameterized Testing and create a class called <code>FindSmallestIntegerToZero</code>
with the following specification:</p>
</div>
<div class="quoteblock">
<div class="title"><a href="https://cyber-dojo.org" class="bare">https://cyber-dojo.org</a></div>
<blockquote>
<div class="paragraph">
<p>Given a list of integers find the closest to zero.
If there is a tie, choose the positive value.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><strong>Step 3:</strong> Create a test that ensure that the list provided is not <code>null</code> using JUnit 5&#8217;s Exception Handling Assertions</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_streams">Streams</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>Streams</code> differ from Collections in the following ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>No storage. A stream is not a data structure that stores elements; instead</p>
</li>
<li>
<p>It conveys elements from a source through a pipeline of computational operations</p>
</li>
<li>
<p>Sources can include.</p>
<div class="ulist">
<ul>
<li>
<p>Data structure</p>
</li>
<li>
<p>An array</p>
</li>
<li>
<p>Generator function</p>
</li>
<li>
<p>I/O channel</p>
</li>
</ul>
</div>
</li>
<li>
<p>Functional in nature. An operation on a stream produces a result, <strong>but does not modify its source</strong>.</p>
</li>
<li>
<p>Intermediate operations are laziness-seeking exposing opportunities for optimization.</p>
</li>
<li>
<p>Possibly unbounded. While collections have a finite size, streams need not.</p>
</li>
<li>
<p>Short-circuiting operations such as <code>limit(n)</code> or <code>findFirst()</code> can allow computations on infinite streams to complete in finite time.</p>
</li>
<li>
<p>Consumable, The elements of a stream are only visited once during the life of a stream.</p>
</li>
<li>
<p>Like an <code>java.util.Iterator</code>, a new <code>Stream</code> must be generated to revisit the same elements of the source.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_streams_overview">Streams Overview</h3>
<div class="imageblock">
<div class="content">
<img src="./images/FunctionalOperations.png" alt="FunctionalOperations">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_streams_overview_with_code">Streams Overview With Code</h3>
<div class="imageblock">
<div class="content">
<img src="./images/FunctionalOperationsWithCode.png" alt="FunctionalOperationsWithCode">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_creation">Creation</h3>
<div class="sect3">
<h4 id="_creating_a_stream_using_of">Creating a Stream using <code>of</code></h4>
<div class="ulist">
<ul>
<li>
<p><code>of</code> is the fastest way to create a <code>Stream</code></p>
</li>
<li>
<p>Does not require an initial collection</p>
</li>
<li>
<p>Returns a sequential ordered stream whose elements are the specified values</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.streams.StreamsTest#createAStreamFromElements</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Stream</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integerStream</span> <span class="tok-o">=</span> <span class="tok-n">Stream</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>
<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">result</span> <span class="tok-o">=</span>
    <span class="tok-n">integerStream</span>
        <span class="tok-o">.</span><span class="tok-na">map</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span> <span class="tok-o">+</span> <span class="tok-mi">2</span><span class="tok-o">)</span>
        <span class="tok-o">.</span><span class="tok-na">collect</span><span class="tok-o">(</span><span class="tok-n">Collectors</span><span class="tok-o">.</span><span class="tok-na">toList</span><span class="tok-o">());</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Results in:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-o">[</span><span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">6</span><span class="tok-o">,</span> <span class="tok-mi">7</span><span class="tok-o">]</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_creating_a_stream_from_a_collection">Creating a Stream from a <code>Collection</code></h4>
<div class="ulist">
<ul>
<li>
<p>The <code>stream()</code> call converts nearly any <code>Collection</code> into a stream</p>
</li>
<li>
<p>The stream becomes a pipeline that functional operations can be completed.</p>
</li>
<li>
<p><code>map</code> is an intermediate operation</p>
</li>
<li>
<p><code>collect</code> is an terminal operation</p>
</li>
<li>
<p>The terminal operation will convert the <code>stream</code> into a list`</p>
</li>
<li>
<p><code>Collectors</code> offers a wide range of different terminal operations</p>
</li>
<li>
<p><strong><em>The stream is lazily evaluated until you call a terminal operation</em></strong></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_creating_a_basic_stream_from_list">Creating a Basic Stream from <code>List</code></h4>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.streams.StreamsTest#testBasicStreamFromList</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>
<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">()</span>
     <span class="tok-o">.</span><span class="tok-na">map</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-o">).</span><span class="tok-na">collect</span><span class="tok-o">(</span><span class="tok-n">Collectors</span><span class="tok-o">.</span><span class="tok-na">toList</span><span class="tok-o">());</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Results In:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-o">[</span><span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">6</span><span class="tok-o">]</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_creating_a_basic_stream_from_set">Creating a Basic Stream from <code>Set</code></h4>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.streams.StreamsTest#testBasicStreamFromSet</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Set</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Set</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">30</span><span class="tok-o">,</span> <span class="tok-mi">10</span><span class="tok-o">,</span> <span class="tok-mi">12</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">);</span>
<span class="tok-n">Set</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">result</span> <span class="tok-o">=</span>
    <span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">()</span>
            <span class="tok-o">.</span><span class="tok-na">map</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-o">)</span>
            <span class="tok-o">.</span><span class="tok-na">collect</span><span class="tok-o">(</span><span class="tok-n">Collectors</span><span class="tok-o">.</span><span class="tok-na">toSet</span><span class="tok-o">());</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Results In:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Set</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">31</span><span class="tok-o">,</span> <span class="tok-mi">11</span><span class="tok-o">,</span> <span class="tok-mi">13</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">)</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_collectors_dont_need_to_match_to_the_stream"><code>Collectors</code> Don&#8217;t Need to Match to the <code>Stream</code></h4>
<div class="ulist">
<ul>
<li>
<p>Once you have <code>Stream</code> you can collect it to whatever type you&#8217;d like</p>
</li>
<li>
<p>Regardless of how you created the <code>Stream</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.streams.StreamsTest#testBasicStreamFromSetToList</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Set</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Set</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">30</span><span class="tok-o">,</span> <span class="tok-mi">10</span><span class="tok-o">,</span> <span class="tok-mi">12</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">);</span>
<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">result</span> <span class="tok-o">=</span>
    <span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">()</span>
            <span class="tok-o">.</span><span class="tok-na">map</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-o">)</span>
            <span class="tok-o">.</span><span class="tok-na">collect</span><span class="tok-o">(</span><span class="tok-n">Collectors</span><span class="tok-o">.</span><span class="tok-na">toList</span><span class="tok-o">());</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_creating_a_basic_stream_from_map">Creating a Basic Stream from <code>Map</code></h4>
<div class="ulist">
<ul>
<li>
<p>Creating a Stream from <code>Map</code>, call <code>entrySet</code></p>
</li>
<li>
<p>This will return a set of <code>Map.Entry</code> elements</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.streams.StreamsTest#testBasicStreamFromMap</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Map</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">,</span> <span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">countriesAndCapitals</span> <span class="tok-o">=</span>
    <span class="tok-n">Map</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-s">&quot;Denmark&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Copenhagen&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;China&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Beijing&quot;</span><span class="tok-o">);</span>

<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">countriesAndCapitals</span>
    <span class="tok-o">.</span><span class="tok-na">entrySet</span><span class="tok-o">()</span>
    <span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">()</span>
    <span class="tok-o">.</span><span class="tok-na">map</span><span class="tok-o">(</span><span class="tok-n">e</span> <span class="tok-o">-&gt;</span> <span class="tok-n">e</span><span class="tok-o">.</span><span class="tok-na">getKey</span><span class="tok-o">()</span> <span class="tok-o">+</span> <span class="tok-s">&quot;~&quot;</span> <span class="tok-o">+</span> <span class="tok-n">e</span><span class="tok-o">.</span><span class="tok-na">getValue</span><span class="tok-o">())</span>
    <span class="tok-o">.</span><span class="tok-na">collect</span><span class="tok-o">(</span><span class="tok-n">Collectors</span><span class="tok-o">.</span><span class="tok-na">toList</span><span class="tok-o">());</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Results In:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-o">[</span><span class="tok-n">China</span><span class="tok-o">~</span><span class="tok-n">Beijing</span><span class="tok-o">,</span> <span class="tok-n">Denmark</span><span class="tok-o">~</span><span class="tok-n">Copenhagen</span><span class="tok-o">]</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_creating_a_basic_stream_from_an_array_of_objects">Creating a Basic Stream from an Array of Objects</h4>
<div class="ulist">
<ul>
<li>
<p>Creating a Basic Stream from an Array of Objects will yield a <code>Stream&lt;T&gt;</code></p>
</li>
<li>
<p>If they were primitive, they&#8217;d return a <em>Specialized Stream</em> for that type (see later)</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.streams.StreamsTest#testBasicStreamFromArray</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">stringArray</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">String</span><span class="tok-o">[]{</span><span class="tok-s">&quot;Foo&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Bar&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Baz&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Bam&quot;</span><span class="tok-o">};</span>
<span class="tok-n">Stream</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">stream</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">(</span><span class="tok-n">stringArray</span><span class="tok-o">);</span>
<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">result</span> <span class="tok-o">=</span>
    <span class="tok-n">stream</span>
          <span class="tok-o">.</span><span class="tok-na">map</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span> <span class="tok-o">+</span> <span class="tok-s">&quot;!&quot;</span><span class="tok-o">)</span>
          <span class="tok-o">.</span><span class="tok-na">collect</span><span class="tok-o">(</span><span class="tok-n">Collectors</span><span class="tok-o">.</span><span class="tok-na">toList</span><span class="tok-o">());</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The return type ,<em>in this case</em>, from <code>Arrays.stream</code> is a <code>Stream&lt;String&gt;</code>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_specialized_streams">Specialized Streams</h3>
<div class="ulist">
<ul>
<li>
<p>Specific Stream for Primitives (e.g. <code>int</code>)</p>
</li>
<li>
<p>There are a collection of primitive based <code>Stream</code> that support sequential and parallel aggregate operations.</p>
</li>
<li>
<p>These operations are specialized for those primitives and they include</p>
<div class="ulist">
<ul>
<li>
<p><code>IntStream</code></p>
<div class="ulist">
<ul>
<li>
<p>To convert from a <code>Stream&lt;Integer&gt;</code> to a <code>IntStream</code> use <code>mapToInt</code></p>
</li>
<li>
<p>To convert from a <code>IntStream</code> to a <code>Stream&lt;Integer&gt;</code> use <code>boxed()</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>DoubleStream</code></p>
<div class="ulist">
<ul>
<li>
<p>To convert from a <code>Stream&lt;Double&gt;</code> to a <code>DoubleStream</code> use <code>mapToDouble</code></p>
</li>
<li>
<p>To convert from a <code>DoubleStream</code> to a <code>Stream&lt;Double&gt;</code> use <code>boxed()</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>LongStream</code></p>
<div class="ulist">
<ul>
<li>
<p>To convert from a <code>Stream&lt;Long&gt;</code> to a <code>LongStream</code> use <code>mapToLong</code></p>
</li>
<li>
<p>To convert from a <code>LongStream</code> to a <code>Stream&lt;Double&gt;</code> use <code>boxed()</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_specialized_intstream">Specialized <code>IntStream</code></h4>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.streams.StreamsTest#testSpecializedIntStream</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kt">int</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">IntStream</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">30</span><span class="tok-o">,</span> <span class="tok-mi">12</span><span class="tok-o">,</span> <span class="tok-mi">50</span><span class="tok-o">).</span><span class="tok-na">map</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span> <span class="tok-o">*</span> <span class="tok-mi">3</span><span class="tok-o">).</span><span class="tok-na">sum</span><span class="tok-o">();</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_specialized_longstream">Specialized <code>LongStream</code></h4>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.streams.StreamsTest#testSpecializedIntStream</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kt">long</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">LongStream</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">30</span><span class="tok-o">,</span> <span class="tok-mi">12</span><span class="tok-o">,</span> <span class="tok-mi">50</span><span class="tok-o">).</span><span class="tok-na">map</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span> <span class="tok-o">*</span> <span class="tok-mi">3</span><span class="tok-o">).</span><span class="tok-na">sum</span><span class="tok-o">();</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_specialized_doublestream">Specialized <code>DoubleStream</code></h4>
<div class="listingblock">
<div class="title">/src/test/java/com.xyzcorp.demos.streams.StreamsTest#testSpecializedDoubleStream</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kt">double</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">DoubleStream</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">30</span><span class="tok-o">,</span> <span class="tok-mi">12</span><span class="tok-o">,</span> <span class="tok-mi">50</span><span class="tok-o">).</span><span class="tok-na">map</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span> <span class="tok-o">*</span> <span class="tok-mi">3</span><span class="tok-o">).</span><span class="tok-na">sum</span><span class="tok-o">();</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_creating_a_stream_from_an_array_of_primitives">Creating a <code>Stream</code> from an Array of Primitives</h4>
<div class="paragraph">
<p>Recall previously, the following returns a <code>Stream&lt;String&gt;</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">stringArray</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">String</span><span class="tok-o">[]{</span><span class="tok-s">&quot;Foo&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Bar&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Baz&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Bam&quot;</span><span class="tok-o">};</span>
<span class="tok-n">Stream</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">stream</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">(</span><span class="tok-n">stringArray</span><span class="tok-o">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>But when dealing with primitives, the following returns an <code>IntStream</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kt">int</span><span class="tok-o">[]</span> <span class="tok-n">primitiveIntArray</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-kt">int</span><span class="tok-o">[]{</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">};</span>
<span class="tok-n">IntStream</span> <span class="tok-n">stream</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">(</span><span class="tok-n">primitiveIntArray</span><span class="tok-o">);</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Recall <code>IntStream</code> is specialized for integers
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_creating_specialized_streams_with_builder">Creating Specialized Streams with <code>Builder</code></h4>
<div class="ulist">
<ul>
<li>
<p>We can use <code>add</code> continually to add elements to builder</p>
</li>
<li>
<p>Add as many elements</p>
</li>
<li>
<p>Call <code>build</code> when done</p>
</li>
<li>
<p>No calls for <code>add</code> are allowed after <code>build</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">LongStream</span> <span class="tok-n">longStream</span> <span class="tok-o">=</span>
    <span class="tok-n">LongStream</span><span class="tok-o">.</span><span class="tok-na">builder</span><span class="tok-o">().</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-mi">40L</span><span class="tok-o">).</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-mi">10L</span><span class="tok-o">).</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-mi">20L</span><span class="tok-o">).</span><span class="tok-na">build</span><span class="tok-o">();</span>
<span class="tok-n">longStream</span>
    <span class="tok-o">.</span><span class="tok-na">average</span><span class="tok-o">()</span>
    <span class="tok-o">.</span><span class="tok-na">ifPresentOrElse</span><span class="tok-o">(</span><span class="tok-n">avg</span> <span class="tok-o">-&gt;</span> <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">printf</span><span class="tok-o">(</span><span class="tok-s">&quot;Average: %2.2f&quot;</span><span class="tok-o">,</span> <span class="tok-n">avg</span><span class="tok-o">),</span>
        <span class="tok-o">()</span> <span class="tok-o">-&gt;</span> <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;No Average&quot;</span><span class="tok-o">));</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_creating_specialized_streams_with_builder_and_accept">Creating Specialized Streams with <code>Builder</code> and <code>accept</code></h4>
<div class="ulist">
<ul>
<li>
<p><code>add</code> offers the ability to chain calls</p>
</li>
<li>
<p><code>accept</code> returns <code>void</code> and operate one line at a time</p>
</li>
<li>
<p>Use <code>build</code> when done</p>
</li>
<li>
<p>No calls for <code>add</code> and <code>accept</code> are allowed after <code>build</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.streams.StreamsTest#testSpecializedLongStreamWithBuilderAndAccept</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">LongStream</span><span class="tok-o">.</span><span class="tok-na">Builder</span> <span class="tok-n">builder</span> <span class="tok-o">=</span>
    <span class="tok-n">LongStream</span><span class="tok-o">.</span><span class="tok-na">builder</span><span class="tok-o">().</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-mi">40L</span><span class="tok-o">).</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-mi">10L</span><span class="tok-o">).</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-mi">20L</span><span class="tok-o">);</span>
<span class="tok-n">builder</span><span class="tok-o">.</span><span class="tok-na">accept</span><span class="tok-o">(</span><span class="tok-mi">31L</span><span class="tok-o">);</span>
<span class="tok-n">builder</span><span class="tok-o">.</span><span class="tok-na">accept</span><span class="tok-o">(</span><span class="tok-mi">41L</span><span class="tok-o">);</span>
<span class="tok-n">builder</span><span class="tok-o">.</span><span class="tok-na">accept</span><span class="tok-o">(</span><span class="tok-mi">51L</span><span class="tok-o">);</span>
<span class="tok-n">builder</span><span class="tok-o">.</span><span class="tok-na">accept</span><span class="tok-o">(</span><span class="tok-mi">61L</span><span class="tok-o">);</span>
<span class="tok-n">LongStream</span> <span class="tok-n">longStream</span> <span class="tok-o">=</span> <span class="tok-n">builder</span><span class="tok-o">.</span><span class="tok-na">build</span><span class="tok-o">();</span>
<span class="tok-n">String</span> <span class="tok-n">result</span> <span class="tok-o">=</span>
    <span class="tok-n">longStream</span>
        <span class="tok-o">.</span><span class="tok-na">boxed</span><span class="tok-o">()</span>
        <span class="tok-o">.</span><span class="tok-na">map</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">::</span><span class="tok-n">valueOf</span><span class="tok-o">)</span>
        <span class="tok-o">.</span><span class="tok-na">collect</span><span class="tok-o">(</span><span class="tok-n">Collectors</span><span class="tok-o">.</span><span class="tok-na">joining</span><span class="tok-o">(</span><span class="tok-s">&quot;, &quot;</span><span class="tok-o">));</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_specialized_streams_have_range">Specialized Streams have <code>range</code></h4>
<div class="paragraph">
<p><code>range</code> is available in all Specialized Streams</p>
</div>
<div class="listingblock">
<div class="title">src/main/java/com.xyzcorp.demos.streams.StreamsTest#testSpecializedIntStreamRange</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kt">int</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">IntStream</span><span class="tok-o">.</span><span class="tok-na">range</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">).</span><span class="tok-na">sum</span><span class="tok-o">();</span> <span class="tok-c1">//10</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>rangeClosed</code> is also available</p>
</div>
<div class="listingblock">
<div class="title">src/main/java/com.xyzcorp.demos.streams.StreamsTest#testSpecializedLongStreamRangeClosed</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kt">long</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">LongStream</span><span class="tok-o">.</span><span class="tok-na">rangeClosed</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">).</span><span class="tok-na">sum</span><span class="tok-o">();</span> <span class="tok-c1">//15</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_converting">Converting</h3>
<div class="sect3">
<h4 id="_converting_from_specialized_streams_to_general_streams">Converting from Specialized Streams to General Streams</h4>
<div class="ulist">
<ul>
<li>
<p>Use the method <code>mapToObj</code></p>
</li>
<li>
<p>Takes a primitive element and converts it to an <code>Object</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.streams.StreamsTest#testFromSpecializedStreamToGeneralStream</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kt">int</span><span class="tok-o">[]</span> <span class="tok-n">primitiveIntArray</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-kt">int</span><span class="tok-o">[]{</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">};</span>
<span class="tok-n">IntStream</span> <span class="tok-n">stream</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">(</span><span class="tok-n">primitiveIntArray</span><span class="tok-o">);</span>
<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">result</span> <span class="tok-o">=</span>
    <span class="tok-n">stream</span>
          <span class="tok-o">.</span><span class="tok-na">map</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-o">)</span>
          <span class="tok-o">.</span><span class="tok-na">mapToObj</span><span class="tok-o">(</span><span class="tok-n">Integer</span><span class="tok-o">::</span><span class="tok-n">valueOf</span><span class="tok-o">)</span>
          <span class="tok-o">.</span><span class="tok-na">collect</span><span class="tok-o">(</span><span class="tok-n">Collectors</span><span class="tok-o">.</span><span class="tok-na">toList</span><span class="tok-o">());</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_converting_from_specialized_streams_to_general_streams_with_boxed">Converting from Specialized Streams to General Streams with <code>boxed</code></h4>
<div class="ulist">
<ul>
<li>
<p>Offers the same functionality as <code>mapToObj</code></p>
</li>
<li>
<p>Cleaner alternative</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.streams.StreamsTest#testFromSpecializedStreamToGeneralStreamWithBoxed</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kt">int</span><span class="tok-o">[]</span> <span class="tok-n">primitiveIntArray</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-kt">int</span><span class="tok-o">[]{</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">};</span>
<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">result</span> <span class="tok-o">=</span>
    <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">(</span><span class="tok-n">primitiveIntArray</span><span class="tok-o">)</span>
          <span class="tok-o">.</span><span class="tok-na">map</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-o">)</span>
          <span class="tok-o">.</span><span class="tok-na">boxed</span><span class="tok-o">()</span>
          <span class="tok-o">.</span><span class="tok-na">collect</span><span class="tok-o">(</span><span class="tok-n">Collectors</span><span class="tok-o">.</span><span class="tok-na">toList</span><span class="tok-o">());</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_converting_from_general_streams_to_specialized_streams">Converting from General Streams to Specialized Streams</h4>
<div class="paragraph">
<p>Java offers helpful methods to convert to Specialized Streams</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>mapToInt</code></p>
</li>
<li>
<p><code>mapToLong</code></p>
</li>
<li>
<p><code>mapToDouble</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.streams.StreamsTest#testFromGeneralStreamToSpecializedIntStream</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Stream</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integerStream</span> <span class="tok-o">=</span> <span class="tok-n">Stream</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>
<span class="tok-n">IntStream</span> <span class="tok-n">intStream</span> <span class="tok-o">=</span> <span class="tok-n">integerStream</span><span class="tok-o">.</span><span class="tok-na">mapToInt</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span><span class="tok-o">);</span>
<span class="tok-kt">int</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">intStream</span><span class="tok-o">.</span><span class="tok-na">sum</span><span class="tok-o">();</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.streams.StreamsTest#testFromGeneralStreamToSpecializedLongStream</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Stream</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integerStream</span> <span class="tok-o">=</span> <span class="tok-n">Stream</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>
<span class="tok-n">LongStream</span> <span class="tok-n">longStream</span> <span class="tok-o">=</span> <span class="tok-n">integerStream</span><span class="tok-o">.</span><span class="tok-na">mapToLong</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span><span class="tok-o">);</span>
<span class="tok-kt">long</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">longStream</span><span class="tok-o">.</span><span class="tok-na">sum</span><span class="tok-o">();</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.streams.StreamsTest#testFromGeneralStreamToSpecializedDoubleStream</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Stream</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integerStream</span> <span class="tok-o">=</span> <span class="tok-n">Stream</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>
<span class="tok-n">DoubleStream</span> <span class="tok-n">doubleStream</span> <span class="tok-o">=</span> <span class="tok-n">integerStream</span><span class="tok-o">.</span><span class="tok-na">mapToDouble</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span><span class="tok-o">);</span>
<span class="tok-kt">double</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">doubleStream</span><span class="tok-o">.</span><span class="tok-na">sum</span><span class="tok-o">();</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_intermediate_operators">Intermediate Operators</h3>
<div class="sect3">
<h4 id="_mapping_a_stream">Mapping a <code>Stream</code></h4>
<div class="paragraph">
<p><code>map</code> applies a function to everything within a <code>Stream</code></p>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.streams.StreamsTest#testMap</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">Stream</span>
   <span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">)</span>
   <span class="tok-o">.</span><span class="tok-na">map</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span> <span class="tok-o">*</span> <span class="tok-mi">2</span><span class="tok-o">)</span>
   <span class="tok-o">.</span><span class="tok-na">collect</span><span class="tok-o">(</span><span class="tok-n">Collectors</span><span class="tok-o">.</span><span class="tok-na">toList</span><span class="tok-o">());</span> <span class="tok-c1">//List(2,4,6,8)</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_filtering_a_stream">Filtering a <code>Stream</code></h4>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.streams.StreamsTest#testFilter</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">Stream</span>
  <span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">)</span>
  <span class="tok-o">.</span><span class="tok-na">filter</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span> <span class="tok-o">%</span> <span class="tok-mi">2</span> <span class="tok-o">==</span> <span class="tok-mi">0</span><span class="tok-o">)</span>
  <span class="tok-o">.</span><span class="tok-na">collect</span><span class="tok-o">(</span><span class="tok-n">Collectors</span><span class="tok-o">.</span><span class="tok-na">toList</span><span class="tok-o">());</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_flatmapping_a_stream">FlatMapping a <code>Stream</code></h4>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.streams.StreamsTest#testFlatMap</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Stream</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">stream</span> <span class="tok-o">=</span>
    <span class="tok-n">Stream</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">)</span>
          <span class="tok-o">.</span><span class="tok-na">flatMap</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">Stream</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(-</span><span class="tok-n">x</span><span class="tok-o">,</span> <span class="tok-n">x</span><span class="tok-o">,</span> <span class="tok-n">x</span> <span class="tok-o">+</span> <span class="tok-mi">2</span><span class="tok-o">));</span>
<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">result</span> <span class="tok-o">=</span>
    <span class="tok-n">stream</span><span class="tok-o">.</span><span class="tok-na">collect</span><span class="tok-o">(</span><span class="tok-n">Collectors</span><span class="tok-o">.</span><span class="tok-na">toList</span><span class="tok-o">());</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Results in:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(-</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-o">-</span><span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-o">-</span><span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-o">-</span><span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">6</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_flatmap_as_a_cleaner"><code>flatMap</code> as a Cleaner</h4>
<div class="ulist">
<ul>
<li>
<p>We will create a helper method, <code>safeCharAt</code></p>
<div class="ulist">
<ul>
<li>
<p>If we can retrieve the <code>char</code> at index it will return <code>Optional.present</code></p>
</li>
<li>
<p>Otherwise it will be <code>empty</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.streams.StreamsTest#safeCharAt</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">private</span> <span class="tok-kd">static</span> <span class="tok-n">Optional</span><span class="tok-o">&lt;</span><span class="tok-n">Character</span><span class="tok-o">&gt;</span> <span class="tok-nf">safeCharAt</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">s</span><span class="tok-o">,</span> <span class="tok-kt">int</span> <span class="tok-n">index</span><span class="tok-o">)</span> <span class="tok-o">{</span>
    <span class="tok-k">try</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-n">Optional</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-n">s</span><span class="tok-o">.</span><span class="tok-na">charAt</span><span class="tok-o">(</span><span class="tok-n">index</span><span class="tok-o">));</span>
    <span class="tok-o">}</span> <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">java</span><span class="tok-o">.</span><span class="tok-na">lang</span><span class="tok-o">.</span><span class="tok-na">StringIndexOutOfBoundsException</span> <span class="tok-n">e</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-n">Optional</span><span class="tok-o">.</span><span class="tok-na">empty</span><span class="tok-o">();</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Optional.stream</code></p>
<div class="ulist">
<ul>
<li>
<p>Extremely useful</p>
</li>
<li>
<p>Is short for <code>o &#8594; o.stream()</code> where <code>o</code> is an <code>Optional&lt;T&gt;</code></p>
<div class="ulist">
<ul>
<li>
<p><code>o.stream</code> will return Stream of the element inside the <code>Optional</code> if present</p>
</li>
<li>
<p><code>empty</code> if the <code>Optional</code> is empty</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.streams.StreamsTest#testFlatMapAsCleaner</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">var</span> <span class="tok-n">result</span> <span class="tok-o">=</span>
  <span class="tok-n">Stream</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-s">&quot;Apple&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Orange&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Banana&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Tomato&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Grapes&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;&quot;</span><span class="tok-o">)</span>
        <span class="tok-o">.</span><span class="tok-na">map</span><span class="tok-o">(</span><span class="tok-n">s</span> <span class="tok-o">-&gt;</span> <span class="tok-n">safeCharAt</span><span class="tok-o">(</span><span class="tok-n">s</span><span class="tok-o">,</span> <span class="tok-mi">0</span><span class="tok-o">))</span>
        <span class="tok-o">.</span><span class="tok-na">flatMap</span><span class="tok-o">(</span><span class="tok-n">Optional</span><span class="tok-o">::</span><span class="tok-n">stream</span><span class="tok-o">)</span>
        <span class="tok-o">.</span><span class="tok-na">collect</span><span class="tok-o">(</span><span class="tok-n">Collectors</span><span class="tok-o">.</span><span class="tok-na">toList</span><span class="tok-o">());</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This returns:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-sc">&#39;A&#39;</span><span class="tok-o">,</span> <span class="tok-sc">&#39;O&#39;</span><span class="tok-o">,</span> <span class="tok-sc">&#39;B&#39;</span><span class="tok-o">,</span> <span class="tok-sc">&#39;T&#39;</span><span class="tok-o">,</span> <span class="tok-sc">&#39;G&#39;</span><span class="tok-o">)</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_peek_into_your_stream"><code>peek</code> into your <code>Stream</code></h4>
<div class="ulist">
<ul>
<li>
<p><code>peek</code></p>
<div class="ulist">
<ul>
<li>
<p>Accepts a <code>Consumer</code></p>
</li>
<li>
<p>Provides an opportunity to perform a side effect</p>
</li>
<li>
<p>Typically, a log, or <code>System.out.println</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.streams.StreamsTest#testStreamWithPeek</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">result</span> <span class="tok-o">=</span>
   <span class="tok-n">Stream</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">)</span>
         <span class="tok-o">.</span><span class="tok-na">map</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-o">)</span>
         <span class="tok-o">.</span><span class="tok-na">peek</span><span class="tok-o">(</span><span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">::</span><span class="tok-n">println</span><span class="tok-o">)</span>
         <span class="tok-o">.</span><span class="tok-na">filter</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span> <span class="tok-o">%</span> <span class="tok-mi">2</span> <span class="tok-o">==</span> <span class="tok-mi">0</span><span class="tok-o">)</span>
         <span class="tok-o">.</span><span class="tok-na">collect</span><span class="tok-o">(</span><span class="tok-n">Collectors</span><span class="tok-o">.</span><span class="tok-na">toList</span><span class="tok-o">());</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_limiting_the_number_of_elements">Limiting the Number of Elements</h4>
<div class="ulist">
<ul>
<li>
<p>Returns a stream consisting of the elements of this stream</p>
</li>
<li>
<p>Truncated to be no longer than maxSize in length.</p>
</li>
<li>
<p>Particularly useful for <em>infinite</em> streams</p>
</li>
<li>
<p>Optimized to only work on those number of elements</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.streams.StreamsTest#testLimit</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Stream</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integerStream</span> <span class="tok-o">=</span> <span class="tok-n">Stream</span><span class="tok-o">.</span><span class="tok-na">iterate</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">,</span> <span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-o">);</span>
<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">result</span> <span class="tok-o">=</span>
    <span class="tok-n">integerStream</span>
        <span class="tok-o">.</span><span class="tok-na">map</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span> <span class="tok-o">+</span> <span class="tok-mi">4</span><span class="tok-o">)</span>
        <span class="tok-o">.</span><span class="tok-na">limit</span><span class="tok-o">(</span><span class="tok-mi">10</span><span class="tok-o">)</span>
        <span class="tok-o">.</span><span class="tok-na">collect</span><span class="tok-o">(</span><span class="tok-n">Collectors</span><span class="tok-o">.</span><span class="tok-na">toList</span><span class="tok-o">());</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_skipping_elements">Skipping Elements</h4>
<div class="paragraph">
<p><code>skip</code> returns a stream consisting of the remaining elements of this stream
after discarding the first <code>n</code> elements of the stream</p>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.streams.StreamsTest#testSkip</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">result</span> <span class="tok-o">=</span>
<span class="tok-n">IntStream</span><span class="tok-o">.</span><span class="tok-na">range</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">,</span> <span class="tok-mi">20</span><span class="tok-o">).</span><span class="tok-na">boxed</span><span class="tok-o">().</span><span class="tok-na">skip</span><span class="tok-o">(</span><span class="tok-mi">10</span><span class="tok-o">).</span><span class="tok-na">collect</span><span class="tok-o">(</span><span class="tok-n">Collectors</span><span class="tok-o">.</span><span class="tok-na">toList</span><span class="tok-o">());</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Results In:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">10</span><span class="tok-o">,</span> <span class="tok-mi">11</span><span class="tok-o">,</span> <span class="tok-mi">12</span><span class="tok-o">,</span> <span class="tok-mi">13</span><span class="tok-o">,</span> <span class="tok-mi">14</span><span class="tok-o">,</span> <span class="tok-mi">15</span><span class="tok-o">,</span> <span class="tok-mi">16</span><span class="tok-o">,</span> <span class="tok-mi">17</span><span class="tok-o">,</span> <span class="tok-mi">18</span><span class="tok-o">,</span> <span class="tok-mi">19</span><span class="tok-o">)</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_filtering_distinct_elements">Filtering Distinct Elements</h4>
<div class="paragraph">
<p><code>distinct</code> returns a stream consisting of the
distinct elements (according to <code>Object.equals(Object)</code>) of this stream</p>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.streams.StreamsTest#testDistinct</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">distinct</span> <span class="tok-o">=</span> <span class="tok-n">Stream</span>
   <span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-s">&quot;Right&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Left&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Right&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Right&quot;</span><span class="tok-o">)</span>
   <span class="tok-o">.</span><span class="tok-na">distinct</span><span class="tok-o">()</span>
   <span class="tok-o">.</span><span class="tok-na">collect</span><span class="tok-o">(</span><span class="tok-n">Collectors</span><span class="tok-o">.</span><span class="tok-na">toList</span><span class="tok-o">());</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Results In:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-o">[</span><span class="tok-s">&quot;Left&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Right&quot;</span><span class="tok-o">]</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_sorting_a_stream">Sorting a Stream</h4>
<div class="ulist">
<ul>
<li>
<p><code>sorted</code> will use a <code>Comparator&lt;T&gt;</code> to determine how to sort a <code>Stream</code></p>
</li>
<li>
<p>The following example will sort by the length of the <code>String</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.streams.StreamsTest#testSortedWithComparator</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">list</span> <span class="tok-o">=</span>
<span class="tok-n">stream</span>
    <span class="tok-o">.</span><span class="tok-na">sorted</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Comparator</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;()</span> <span class="tok-o">{</span>
        <span class="tok-nd">@Override</span>
        <span class="tok-kd">public</span> <span class="tok-kt">int</span> <span class="tok-nf">compare</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">o1</span><span class="tok-o">,</span> <span class="tok-n">String</span> <span class="tok-n">o2</span><span class="tok-o">)</span> <span class="tok-o">{</span>
            <span class="tok-k">return</span> <span class="tok-n">Integer</span><span class="tok-o">.</span><span class="tok-na">compare</span><span class="tok-o">(</span><span class="tok-n">o1</span><span class="tok-o">.</span><span class="tok-na">length</span><span class="tok-o">(),</span> <span class="tok-n">o2</span><span class="tok-o">.</span><span class="tok-na">length</span><span class="tok-o">());</span>
        <span class="tok-o">}</span>
    <span class="tok-o">})</span>
    <span class="tok-o">.</span><span class="tok-na">collect</span><span class="tok-o">(</span><span class="tok-n">Collectors</span><span class="tok-o">.</span><span class="tok-na">toList</span><span class="tok-o">());</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The result is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-s">&quot;Kiwi&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Apple&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Orange&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Banana&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Tomato&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Grapes&quot;</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_comparator_methods"><code>Comparator</code> methods</h4>
<div class="ulist">
<ul>
<li>
<p><code>Comparator</code> has methods that aid in common tasks</p>
<div class="ulist">
<ul>
<li>
<p>Comparing common types: <code>int</code>, <code>double</code></p>
</li>
<li>
<p>Multiple levels of comparision: first name then last name</p>
</li>
<li>
<p>Extracting certain fields from objects</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.streams.StreamsTest#testSortedWithComparatorUtility</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Stream</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">stream</span> <span class="tok-o">=</span>
    <span class="tok-n">Stream</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-s">&quot;Apple&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Orange&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Banana&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Tomato&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Grapes&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Kiwi&quot;</span><span class="tok-o">);</span>

<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">list</span> <span class="tok-o">=</span> <span class="tok-n">stream</span>
    <span class="tok-o">.</span><span class="tok-na">sorted</span><span class="tok-o">(</span><span class="tok-n">Comparator</span><span class="tok-o">.</span><span class="tok-na">comparingInt</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">::</span><span class="tok-n">length</span><span class="tok-o">))</span>
    <span class="tok-o">.</span><span class="tok-na">collect</span><span class="tok-o">(</span><span class="tok-n">Collectors</span><span class="tok-o">.</span><span class="tok-na">toList</span><span class="tok-o">());</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Advanced editors often help with suggestions
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_identity_function_defined">Identity Function Defined</h4>
<div class="imageblock">
<div class="content">
<img src="./images/Identity.png" alt="Identity">
</div>
</div>
<div class="quoteblock">
<div class="title">Identity Function Definition</div>
<blockquote>
<div class="paragraph">
<p>In mathematics, an identity function, also called an identity relation or identity map or identity transformation, is a function that always returns the same value that was used as its argument.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Source: <a href="https://en.wikipedia.org/wiki/Identity_function">Wikipedia</a></p>
</div>
<div class="paragraph">
<p>Inside of <code>java.util.Function</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">static</span> <span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-n">Function</span><span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">,</span> <span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-nf">identity</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-n">t</span> <span class="tok-o">-&gt;</span> <span class="tok-n">t</span><span class="tok-o">;</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_combination_comparators">Combination Comparators</h4>
<div class="paragraph">
<p><code>thenComparing</code> offers possibility to chained comparisons</p>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.streams.StreamsTest#testSortedWithNestedComparators</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Stream</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">stream</span> <span class="tok-o">=</span>
    <span class="tok-n">Stream</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-s">&quot;Apple&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Orange&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Banana&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Tomato&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Grapes&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Plum&quot;</span>
        <span class="tok-o">,</span> <span class="tok-s">&quot;Kiwi&quot;</span><span class="tok-o">);</span>
<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">stream</span>
    <span class="tok-o">.</span><span class="tok-na">sorted</span><span class="tok-o">(</span><span class="tok-n">Comparator</span>
        <span class="tok-o">.</span><span class="tok-na">comparing</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">::</span><span class="tok-n">length</span><span class="tok-o">)</span>
        <span class="tok-o">.</span><span class="tok-na">thenComparing</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span><span class="tok-o">))</span>
    <span class="tok-o">.</span><span class="tok-na">collect</span><span class="tok-o">(</span><span class="tok-n">Collectors</span><span class="tok-o">.</span><span class="tok-na">toList</span><span class="tok-o">()));</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Using the Identity Function:</p>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.streams.StreamsTest#testSortedWithNestedComparators</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Stream</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">stream</span> <span class="tok-o">=</span>
    <span class="tok-n">Stream</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-s">&quot;Apple&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Orange&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Banana&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Tomato&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Grapes&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Plum&quot;</span>
        <span class="tok-o">,</span> <span class="tok-s">&quot;Kiwi&quot;</span><span class="tok-o">);</span>
<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">stream</span>
    <span class="tok-o">.</span><span class="tok-na">sorted</span><span class="tok-o">(</span><span class="tok-n">Comparator</span>
        <span class="tok-o">.</span><span class="tok-na">comparing</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">::</span><span class="tok-n">length</span><span class="tok-o">)</span>
        <span class="tok-o">.</span><span class="tok-na">thenComparing</span><span class="tok-o">(</span><span class="tok-n">Function</span><span class="tok-o">.</span><span class="tok-na">identity</span><span class="tok-o">()))</span>
    <span class="tok-o">.</span><span class="tok-na">collect</span><span class="tok-o">(</span><span class="tok-n">Collectors</span><span class="tok-o">.</span><span class="tok-na">toList</span><span class="tok-o">()));</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_terminal_operators">Terminal Operators</h3>
<div class="sect3">
<h4 id="_counting_elements">Counting Elements</h4>
<div class="ulist">
<ul>
<li>
<p>Terminal operation</p>
</li>
<li>
<p>Counts the number of elements in <code>Stream</code></p>
</li>
<li>
<p>Supported in both general and specialized streams</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">/src/test/java/com.xyzcorp.demos.streams.StreamsTest#testGeneralStreamCount</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kt">long</span> <span class="tok-n">count</span> <span class="tok-o">=</span> <span class="tok-n">Stream</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">12</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">10</span><span class="tok-o">).</span><span class="tok-na">count</span><span class="tok-o">();</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">/src/test/java/com.xyzcorp.demos.streams.StreamsTest#testSpecializedStreamCount</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kt">long</span> <span class="tok-n">count</span> <span class="tok-o">=</span> <span class="tok-n">Stream</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">12</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">10</span><span class="tok-o">).</span><span class="tok-na">count</span><span class="tok-o">();</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_reducing_without_a_seed">Reducing without a <code>seed</code></h4>
<div class="ulist">
<ul>
<li>
<p>Terminal Operation</p>
</li>
<li>
<p>Reduction iteratively calls a BiFunction to calculate the next iteration</p>
</li>
<li>
<p>Continues until exhausted</p>
</li>
<li>
<p>Returns an <code>Optional</code> in case it received an empty <code>Stream</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.streams.StreamsTest#testReduceWithoutASeed</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Stream</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">stream</span> <span class="tok-o">=</span> <span class="tok-n">Stream</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">6</span><span class="tok-o">);</span>
<span class="tok-n">Optional</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">reduction</span> <span class="tok-o">=</span> <span class="tok-n">stream</span><span class="tok-o">.</span><span class="tok-na">reduce</span><span class="tok-o">((</span><span class="tok-n">total</span><span class="tok-o">,</span> <span class="tok-n">next</span><span class="tok-o">)</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>
    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">format</span><span class="tok-o">(</span><span class="tok-s">&quot;total: %d, next: %d\n&quot;</span><span class="tok-o">,</span> <span class="tok-n">total</span><span class="tok-o">,</span> <span class="tok-n">next</span><span class="tok-o">);</span>
    <span class="tok-k">return</span> <span class="tok-n">total</span> <span class="tok-o">+</span> <span class="tok-n">next</span><span class="tok-o">;</span>
<span class="tok-o">});</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>System.out.println</code> renders:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nl">total:</span> <span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-n">next</span><span class="tok-o">:</span> <span class="tok-mi">2</span>
<span class="tok-nl">total:</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-n">next</span><span class="tok-o">:</span> <span class="tok-mi">3</span>
<span class="tok-nl">total:</span> <span class="tok-mi">6</span><span class="tok-o">,</span> <span class="tok-n">next</span><span class="tok-o">:</span> <span class="tok-mi">4</span>
<span class="tok-nl">total:</span> <span class="tok-mi">10</span><span class="tok-o">,</span> <span class="tok-n">next</span><span class="tok-o">:</span> <span class="tok-mi">5</span>
<span class="tok-nl">total:</span> <span class="tok-mi">15</span><span class="tok-o">,</span> <span class="tok-n">next</span><span class="tok-o">:</span> <span class="tok-mi">6</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The result is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Optional</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">21</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_reduce_with_a_seed">Reduce with a seed</h4>
<div class="ulist">
<ul>
<li>
<p>Reduction has a seed</p>
</li>
<li>
<p>This means that it always has an answer</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.streams.StreamsTest#testReduceWithASeed</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Stream</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">stream</span> <span class="tok-o">=</span> <span class="tok-n">Stream</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">6</span><span class="tok-o">);</span>
<span class="tok-n">Integer</span> <span class="tok-n">reduction</span> <span class="tok-o">=</span> <span class="tok-n">stream</span><span class="tok-o">.</span><span class="tok-na">reduce</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">,</span> <span class="tok-o">(</span><span class="tok-n">total</span><span class="tok-o">,</span> <span class="tok-n">next</span><span class="tok-o">)</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>
    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">format</span><span class="tok-o">(</span><span class="tok-s">&quot;total: %d, next: %d\n&quot;</span><span class="tok-o">,</span> <span class="tok-n">total</span><span class="tok-o">,</span> <span class="tok-n">next</span><span class="tok-o">);</span>
    <span class="tok-k">return</span> <span class="tok-n">total</span> <span class="tok-o">+</span> <span class="tok-n">next</span><span class="tok-o">;</span>
<span class="tok-o">});</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>System.out.println</code> renders:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nl">total:</span> <span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-n">next</span><span class="tok-o">:</span> <span class="tok-mi">2</span>
<span class="tok-nl">total:</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-n">next</span><span class="tok-o">:</span> <span class="tok-mi">3</span>
<span class="tok-nl">total:</span> <span class="tok-mi">6</span><span class="tok-o">,</span> <span class="tok-n">next</span><span class="tok-o">:</span> <span class="tok-mi">4</span>
<span class="tok-nl">total:</span> <span class="tok-mi">10</span><span class="tok-o">,</span> <span class="tok-n">next</span><span class="tok-o">:</span> <span class="tok-mi">5</span>
<span class="tok-nl">total:</span> <span class="tok-mi">15</span><span class="tok-o">,</span> <span class="tok-n">next</span><span class="tok-o">:</span> <span class="tok-mi">6</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The result is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-mi">21</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The above answer is not an <code>Optional</code>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_finding_the_first_element">Finding the First Element</h4>
<div class="ulist">
<ul>
<li>
<p><code>findFirst</code> returns the first element of a <code>Stream</code></p>
</li>
<li>
<p>Returns an <code>Optional&lt;E&gt;</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.streams.StreamsTest#testFindFirstSuccessful</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Optional</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">first</span> <span class="tok-o">=</span> <span class="tok-n">Stream</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">).</span><span class="tok-na">findFirst</span><span class="tok-o">();</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.streams.StreamsTest#testFindFirstUnSuccessful</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Optional</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">first</span> <span class="tok-o">=</span> <span class="tok-n">Stream</span><span class="tok-o">.&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span><span class="tok-n">empty</span><span class="tok-o">().</span><span class="tok-na">findFirst</span><span class="tok-o">();</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_specialized_streams_terminal_operations">Specialized Streams Terminal Operations</h3>
<div class="paragraph">
<p>The major benefit for a specialized stream, like <code>IntStream</code> are the terminal operations</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>average</code></p>
</li>
<li>
<p><code>sum</code></p>
</li>
<li>
<p><code>summaryStatistics</code></p>
</li>
<li>
<p><code>max</code></p>
</li>
<li>
<p><code>min</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Sample of <code>summaryStatistics</code></p>
</div>
<div class="listingblock">
<div class="title">src/test/com.xyzcorp.demos.streams.StreamsTest#testSummaryStatistics</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">IntStream</span> <span class="tok-n">intStream</span> <span class="tok-o">=</span> <span class="tok-n">IntStream</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">12</span><span class="tok-o">,</span> <span class="tok-mi">19</span><span class="tok-o">,</span> <span class="tok-mi">40</span><span class="tok-o">,</span> <span class="tok-mi">60</span><span class="tok-o">,</span> <span class="tok-mi">100</span><span class="tok-o">,</span> <span class="tok-mi">200</span><span class="tok-o">,</span> <span class="tok-mi">15</span><span class="tok-o">,</span> <span class="tok-mi">0</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">);</span>
<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">intStream</span><span class="tok-o">.</span><span class="tok-na">summaryStatistics</span><span class="tok-o">());</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Results in:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">IntSummaryStatistics</span><span class="tok-o">{</span><span class="tok-n">count</span><span class="tok-o">=</span><span class="tok-mi">9</span><span class="tok-o">,</span> <span class="tok-n">sum</span><span class="tok-o">=</span><span class="tok-mi">449</span><span class="tok-o">,</span> <span class="tok-n">min</span><span class="tok-o">=</span><span class="tok-mi">0</span><span class="tok-o">,</span> <span class="tok-n">average</span><span class="tok-o">=</span><span class="tok-mf">49.888889</span><span class="tok-o">,</span> <span class="tok-n">max</span><span class="tok-o">=</span><span class="tok-mi">200</span><span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_infinite_streams">Infinite Streams</h3>
<div class="sect3">
<h4 id="_iterate"><code>iterate</code></h4>
<div class="ulist">
<ul>
<li>
<p>Returns an infinite sequential ordered Stream produced by iterative application of a function <code>f</code></p>
</li>
<li>
<p>First applies to an initial element seed, producing a Stream consisting of <code>seed</code>, <code>f(seed)</code>, <code>f(f(seed))</code></p>
</li>
<li>
<p>The first element (position 0) in the <code>Stream</code> will be the provided <code>seed</code></p>
</li>
<li>
<p>For $n &gt; 0$, the element at position <code>n</code>, will be the result of applying the function <code>f</code> to the element at position <code>n - 1</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.streams.StreamsTest#testIterate</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Stream</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">iterate</span> <span class="tok-o">=</span> <span class="tok-n">Stream</span><span class="tok-o">.</span><span class="tok-na">iterate</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">,</span>
            <span class="tok-n">integer</span> <span class="tok-o">-&gt;</span> <span class="tok-n">integer</span> <span class="tok-o">+</span> <span class="tok-mi">3</span><span class="tok-o">);</span>
<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">iterate</span><span class="tok-o">.</span><span class="tok-na">limit</span><span class="tok-o">(</span><span class="tok-mi">5</span><span class="tok-o">).</span><span class="tok-na">collect</span><span class="tok-o">(</span><span class="tok-n">Collectors</span><span class="tok-o">.</span><span class="tok-na">toList</span><span class="tok-o">());</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Results In:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-o">[</span><span class="tok-mi">0</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">6</span><span class="tok-o">,</span> <span class="tok-mi">9</span><span class="tok-o">,</span> <span class="tok-mi">12</span><span class="tok-o">]</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_iterate_with_a_predicate"><code>iterate</code> with a <code>Predicate</code></h4>
<div class="ulist">
<ul>
<li>
<p>Iterate can also have a predicate as a condition for the next element</p>
</li>
<li>
<p>The resulting sequence may be empty if the <code>hasNext</code> predicate does not hold on the seed value</p>
</li>
<li>
<p>The stream will continue until the <code>Predicate</code> dictates that it should terminate</p>
</li>
<li>
<p>Use Case: Custom ranges</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.streams.StreamsTest#testIterateWithPredicate</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">result</span> <span class="tok-o">=</span>
   <span class="tok-n">Stream</span>
      <span class="tok-o">.</span><span class="tok-na">iterate</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">,</span> <span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span> <span class="tok-o">&lt;=</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-n">integer</span> <span class="tok-o">-&gt;</span> <span class="tok-n">integer</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-o">)</span>
      <span class="tok-o">.</span><span class="tok-na">collect</span><span class="tok-o">(</span><span class="tok-n">Collectors</span><span class="tok-o">.</span><span class="tok-na">toList</span><span class="tok-o">());</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Results In:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-o">[</span><span class="tok-mi">0</span><span class="tok-o">,</span> <span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">]</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_generate"><code>generate</code></h4>
<div class="ulist">
<ul>
<li>
<p><code>generate</code> lazily invokes a function when it requires the next element</p>
</li>
<li>
<p>Suitable for constant streams</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.streams.StreamsTest#testGenerate</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">LocalDateTime</span><span class="tok-o">&gt;</span> <span class="tok-n">result</span> <span class="tok-o">=</span>
            <span class="tok-n">Stream</span><span class="tok-o">.</span><span class="tok-na">generate</span><span class="tok-o">(</span><span class="tok-n">LocalDateTime</span><span class="tok-o">::</span><span class="tok-n">now</span><span class="tok-o">)</span>
                  <span class="tok-o">.</span><span class="tok-na">flatMap</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">Stream</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-n">x</span><span class="tok-o">,</span> <span class="tok-n">x</span><span class="tok-o">.</span><span class="tok-na">plusYears</span><span class="tok-o">(</span><span class="tok-mi">10</span><span class="tok-o">)))</span>
                  <span class="tok-o">.</span><span class="tok-na">limit</span><span class="tok-o">(</span><span class="tok-mi">5</span><span class="tok-o">)</span>
                  <span class="tok-o">.</span><span class="tok-na">collect</span><span class="tok-o">(</span><span class="tok-n">Collectors</span><span class="tok-o">.</span><span class="tok-na">toList</span><span class="tok-o">());</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Results In:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-o">[</span><span class="tok-mi">2017</span><span class="tok-o">-</span><span class="tok-mi">11</span><span class="tok-o">-</span><span class="tok-mo">06</span><span class="tok-n">T12</span><span class="tok-o">:</span><span class="tok-mi">52</span><span class="tok-o">:</span><span class="tok-mf">04.499934</span><span class="tok-o">,</span> <span class="tok-mi">2027</span><span class="tok-o">-</span><span class="tok-mi">11</span><span class="tok-o">-</span><span class="tok-mo">06</span><span class="tok-n">T12</span><span class="tok-o">:</span><span class="tok-mi">52</span><span class="tok-o">:</span><span class="tok-mf">04.499934</span><span class="tok-o">,</span>
 <span class="tok-mi">2017</span><span class="tok-o">-</span><span class="tok-mi">11</span><span class="tok-o">-</span><span class="tok-mo">06</span><span class="tok-n">T12</span><span class="tok-o">:</span><span class="tok-mi">52</span><span class="tok-o">:</span><span class="tok-mf">04.508439</span><span class="tok-o">,</span> <span class="tok-mi">2027</span><span class="tok-o">-</span><span class="tok-mi">11</span><span class="tok-o">-</span><span class="tok-mo">06</span><span class="tok-n">T12</span><span class="tok-o">:</span><span class="tok-mi">52</span><span class="tok-o">:</span><span class="tok-mf">04.508439</span><span class="tok-o">,</span>
 <span class="tok-mi">2017</span><span class="tok-o">-</span><span class="tok-mi">11</span><span class="tok-o">-</span><span class="tok-mo">06</span><span class="tok-n">T12</span><span class="tok-o">:</span><span class="tok-mi">52</span><span class="tok-o">:</span><span class="tok-mf">04.508490</span><span class="tok-o">]</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_common_collectors">Common Collectors</h3>
<div class="sect3">
<h4 id="_grouping">Grouping</h4>
<div class="ulist">
<ul>
<li>
<p>Returns a <code>Collector</code> implementing a "group by" operation on input elements of type T</p>
</li>
<li>
<p>Grouping elements according to a classification function, and returning the results in a <code>Map</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.streams.StreamsTest#testGroupingBy</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">IntStream</span> <span class="tok-n">stream</span> <span class="tok-o">=</span> <span class="tok-n">IntStream</span><span class="tok-o">.</span><span class="tok-na">range</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">,</span> <span class="tok-mi">10</span><span class="tok-o">);</span>
<span class="tok-n">Map</span><span class="tok-o">&lt;</span><span class="tok-n">Boolean</span><span class="tok-o">,</span> <span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;&gt;</span> <span class="tok-n">groups</span> <span class="tok-o">=</span>
    <span class="tok-n">stream</span><span class="tok-o">.</span><span class="tok-na">boxed</span><span class="tok-o">()</span>
          <span class="tok-o">.</span><span class="tok-na">collect</span><span class="tok-o">(</span><span class="tok-n">Collectors</span><span class="tok-o">.</span><span class="tok-na">groupingBy</span><span class="tok-o">(</span><span class="tok-n">i</span> <span class="tok-o">-&gt;</span> <span class="tok-n">i</span> <span class="tok-o">%</span> <span class="tok-mi">2</span> <span class="tok-o">==</span> <span class="tok-mi">0</span><span class="tok-o">));</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The result is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-o">{</span><span class="tok-kc">false</span><span class="tok-o">=[</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">7</span><span class="tok-o">,</span> <span class="tok-mi">9</span><span class="tok-o">],</span> <span class="tok-kc">true</span><span class="tok-o">=[</span><span class="tok-mi">0</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">6</span><span class="tok-o">,</span> <span class="tok-mi">8</span><span class="tok-o">]}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_partitioning">Partitioning</h4>
<div class="ulist">
<ul>
<li>
<p>Returns a <code>Collector</code> which partitions the input elements according to a <code>Predicate</code></p>
</li>
<li>
<p>Organizes them into a <code>Map&lt;Boolean, List&lt;T&gt;&gt;</code></p>
</li>
<li>
<p>The returned Map always contains mappings for both <code>false</code> and <code>true</code> keys.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.streams.StreamsTest#testPartitioning</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Stream</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">stream</span> <span class="tok-o">=</span>
    <span class="tok-n">Stream</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-s">&quot;Apple&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Orange&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Banana&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Tomato&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Grapes&quot;</span><span class="tok-o">);</span>
<span class="tok-n">Map</span><span class="tok-o">&lt;</span><span class="tok-n">Boolean</span><span class="tok-o">,</span> <span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;&gt;</span> <span class="tok-n">partition</span> <span class="tok-o">=</span> <span class="tok-n">stream</span><span class="tok-o">.</span><span class="tok-na">collect</span>
    <span class="tok-o">(</span><span class="tok-n">Collectors</span><span class="tok-o">.</span><span class="tok-na">partitioningBy</span><span class="tok-o">(</span><span class="tok-n">s</span> <span class="tok-o">-&gt;</span> <span class="tok-s">&quot;AEIOU&quot;</span>
        <span class="tok-o">.</span><span class="tok-na">indexOf</span><span class="tok-o">(</span><span class="tok-n">s</span><span class="tok-o">.</span><span class="tok-na">toUpperCase</span><span class="tok-o">().</span><span class="tok-na">charAt</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">))</span> <span class="tok-o">&gt;=</span> <span class="tok-mi">0</span><span class="tok-o">));</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The result is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-o">{</span><span class="tok-kc">false</span><span class="tok-o">=[</span><span class="tok-n">Banana</span><span class="tok-o">,</span> <span class="tok-n">Tomato</span><span class="tok-o">,</span> <span class="tok-n">Grapes</span><span class="tok-o">],</span> <span class="tok-kc">true</span><span class="tok-o">=[</span><span class="tok-n">Apple</span><span class="tok-o">,</span> <span class="tok-n">Orange</span><span class="tok-o">]}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_joining">Joining</h4>
<div class="ulist">
<ul>
<li>
<p>Returns a Collector that concatenates the input elements</p>
</li>
<li>
<p>Separated by the specified delimiter</p>
</li>
<li>
<p>With the specified prefix and suffix, in encounter order</p>
</li>
<li>
<p>Elements must be a subtype of <code>CharSequence</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.streams.StreamsTest#testJoining</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Stream</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">stream</span> <span class="tok-o">=</span>
    <span class="tok-n">Stream</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-s">&quot;Apple&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Orange&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Banana&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Tomato&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Grapes&quot;</span><span class="tok-o">);</span>
<span class="tok-n">String</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">stream</span><span class="tok-o">.</span><span class="tok-na">collect</span><span class="tok-o">(</span><span class="tok-n">Collectors</span><span class="tok-o">.</span><span class="tok-na">joining</span><span class="tok-o">(</span><span class="tok-s">&quot;, &quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;{&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;}&quot;</span><span class="tok-o">));</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The result is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-o">{</span><span class="tok-n">Apple</span><span class="tok-o">,</span> <span class="tok-n">Orange</span><span class="tok-o">,</span> <span class="tok-n">Banana</span><span class="tok-o">,</span> <span class="tok-n">Tomato</span><span class="tok-o">,</span> <span class="tok-n">Grapes</span><span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_tomap"><code>toMap</code></h4>
<div class="ulist">
<ul>
<li>
<p>Just like you can create a <code>List</code> or <code>Set</code> as collector.</p>
</li>
<li>
<p>You can also create a <code>Map</code> using <code>toMap</code></p>
</li>
<li>
<p>Keys and values are the result of applying the provided mapping functions to the input elements</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Given a setup of objects like an <code>Order</code> and <code>OrderItem</code> relationship:</p>
</div>
<div class="listingblock">
<div class="title">/src/main/java/com.xyzcorp.demos.streams.Order</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Order</span> <span class="tok-o">{</span>
    <span class="tok-kd">private</span> <span class="tok-kd">final</span> <span class="tok-n">String</span> <span class="tok-n">firstName</span><span class="tok-o">;</span>
    <span class="tok-kd">private</span> <span class="tok-kd">final</span> <span class="tok-n">String</span> <span class="tok-n">lastName</span><span class="tok-o">;</span>
    <span class="tok-kd">private</span> <span class="tok-kd">final</span> <span class="tok-n">String</span> <span class="tok-n">city</span><span class="tok-o">;</span>
    <span class="tok-kd">private</span> <span class="tok-kd">final</span> <span class="tok-n">String</span> <span class="tok-n">state</span><span class="tok-o">;</span>
    <span class="tok-kd">private</span> <span class="tok-kd">final</span> <span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">OrderItem</span><span class="tok-o">&gt;</span> <span class="tok-n">orderItems</span><span class="tok-o">;</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">/src/main/java/com.xyzcorp.demos.streams.OrderItem</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">OrderItem</span> <span class="tok-o">{</span>
    <span class="tok-kd">private</span> <span class="tok-kd">final</span> <span class="tok-kt">int</span> <span class="tok-n">quantity</span><span class="tok-o">;</span>
    <span class="tok-kd">private</span> <span class="tok-kd">final</span> <span class="tok-n">Product</span> <span class="tok-n">product</span><span class="tok-o">;</span>
    <span class="tok-kd">private</span> <span class="tok-kd">final</span> <span class="tok-n">Order</span> <span class="tok-n">order</span><span class="tok-o">;</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.streams.StreamsTest#testToMap</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Map</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">,</span> <span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">orders</span>
   <span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">()</span>
   <span class="tok-o">.</span><span class="tok-na">collect</span><span class="tok-o">(</span><span class="tok-n">Collectors</span>
       <span class="tok-o">.</span><span class="tok-na">toMap</span><span class="tok-o">(</span><span class="tok-n">Order</span><span class="tok-o">::</span><span class="tok-n">getFirstName</span><span class="tok-o">,</span>
           <span class="tok-n">o</span> <span class="tok-o">-&gt;</span> <span class="tok-n">o</span><span class="tok-o">.</span><span class="tok-na">getOrderItems</span><span class="tok-o">()</span>
                 <span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">()</span>
                 <span class="tok-o">.</span><span class="tok-na">mapToInt</span><span class="tok-o">(</span><span class="tok-n">OrderItem</span><span class="tok-o">::</span><span class="tok-n">getQuantity</span><span class="tok-o">).</span><span class="tok-na">sum</span><span class="tok-o">()));</span></code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
There is a distinct difference between <code>toMap</code> and <code>groupingBy</code>. <code>toMap</code> is intended to hold the same number of entries as the <code>Stream</code>. <code>groupingBy</code> is intended as an aggregation.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_custom_collectors">Custom Collectors</h3>
<div class="paragraph">
<p>When calling <code>collect</code>, you can specify your own functions</p>
</div>
<div class="listingblock">
<div class="title">Java API for the <code>Stream</code> method <code>collect</code>:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-o">&lt;</span><span class="tok-n">R</span><span class="tok-o">&gt;</span> <span class="tok-n">R</span> <span class="tok-nf">collect</span><span class="tok-o">(</span><span class="tok-n">Supplier</span><span class="tok-o">&lt;</span><span class="tok-n">R</span><span class="tok-o">&gt;</span> <span class="tok-n">supplier</span><span class="tok-o">,</span>
              <span class="tok-n">BiConsumer</span><span class="tok-o">&lt;</span><span class="tok-n">R</span><span class="tok-o">,</span> <span class="tok-o">?</span> <span class="tok-kd">super</span> <span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-n">accumulator</span><span class="tok-o">,</span>
              <span class="tok-n">BiConsumer</span><span class="tok-o">&lt;</span><span class="tok-n">R</span><span class="tok-o">,</span> <span class="tok-n">R</span><span class="tok-o">&gt;</span> <span class="tok-n">combiner</span><span class="tok-o">);</span></code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_the_supplier_in_collect">The <code>Supplier</code> in <code>collect</code></h4>
<div class="ulist">
<ul>
<li>
<p><code>Function</code> that creates a new result container.</p>
</li>
<li>
<p>In a parallel execution:</p>
<div class="ulist">
<ul>
<li>
<p>May be called multiple times</p>
</li>
<li>
<p>Must return a fresh value each time.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Java API for the <code>Stream</code> method <code>collect</code>:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-o">&lt;</span><span class="tok-n">R</span><span class="tok-o">&gt;</span> <span class="tok-n">R</span> <span class="tok-nf">collect</span><span class="tok-o">(</span><span class="tok-n">Supplier</span><span class="tok-o">&lt;</span><span class="tok-n">R</span><span class="tok-o">&gt;</span> <span class="tok-n">supplier</span><span class="tok-o">,</span>
              <span class="tok-n">BiConsumer</span><span class="tok-o">&lt;</span><span class="tok-n">R</span><span class="tok-o">,</span> <span class="tok-o">?</span> <span class="tok-kd">super</span> <span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-n">accumulator</span><span class="tok-o">,</span>
              <span class="tok-n">BiConsumer</span><span class="tok-o">&lt;</span><span class="tok-n">R</span><span class="tok-o">,</span> <span class="tok-n">R</span><span class="tok-o">&gt;</span> <span class="tok-n">combiner</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_the_accumulator_in_collect">The <code>Accumulator</code> in <code>collect</code></h4>
<div class="ulist">
<ul>
<li>
<p><code>Function</code> for incorporating an additional element into a result</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Java API for the <code>Stream</code> method <code>collect</code>:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-o">&lt;</span><span class="tok-n">R</span><span class="tok-o">&gt;</span> <span class="tok-n">R</span> <span class="tok-nf">collect</span><span class="tok-o">(</span><span class="tok-n">Supplier</span><span class="tok-o">&lt;</span><span class="tok-n">R</span><span class="tok-o">&gt;</span> <span class="tok-n">supplier</span><span class="tok-o">,</span>
              <span class="tok-n">BiConsumer</span><span class="tok-o">&lt;</span><span class="tok-n">R</span><span class="tok-o">,</span> <span class="tok-o">?</span> <span class="tok-kd">super</span> <span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-n">accumulator</span><span class="tok-o">,</span>
              <span class="tok-n">BiConsumer</span><span class="tok-o">&lt;</span><span class="tok-n">R</span><span class="tok-o">,</span> <span class="tok-n">R</span><span class="tok-o">&gt;</span> <span class="tok-n">combiner</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_the_combiner_in_collect">The <code>Combiner</code> in <code>collect</code></h4>
<div class="ulist">
<ul>
<li>
<p><code>Function</code> for combining two values</p>
</li>
<li>
<p>Must be compatible with the <code>accumulator</code> function</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Java API for the <code>Stream</code> method <code>collect</code>:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-o">&lt;</span><span class="tok-n">R</span><span class="tok-o">&gt;</span> <span class="tok-n">R</span> <span class="tok-nf">collect</span><span class="tok-o">(</span><span class="tok-n">Supplier</span><span class="tok-o">&lt;</span><span class="tok-n">R</span><span class="tok-o">&gt;</span> <span class="tok-n">supplier</span><span class="tok-o">,</span>
              <span class="tok-n">BiConsumer</span><span class="tok-o">&lt;</span><span class="tok-n">R</span><span class="tok-o">,</span> <span class="tok-o">?</span> <span class="tok-kd">super</span> <span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-n">accumulator</span><span class="tok-o">,</span>
              <span class="tok-n">BiConsumer</span><span class="tok-o">&lt;</span><span class="tok-n">R</span><span class="tok-o">,</span> <span class="tok-n">R</span><span class="tok-o">&gt;</span> <span class="tok-n">combiner</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_create_your_own_collect">Create your own <code>collect</code></h4>
<div class="ulist">
<ul>
<li>
<p>The complete custom <code>collect</code>:</p>
<div class="ulist">
<ul>
<li>
<p><code>Supplier</code> for the initial element</p>
</li>
<li>
<p><code>BiConsumer</code> for how to bring in individual elements</p>
</li>
<li>
<p><code>BiConsumer</code> for how to bring in different collections</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@Test</span>
<span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">testCompleteCollector</span><span class="tok-o">()</span> <span class="tok-o">{</span>
   <span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">numbers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">,</span> <span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">6</span><span class="tok-o">,</span> <span class="tok-mi">7</span><span class="tok-o">,</span> <span class="tok-mi">8</span><span class="tok-o">,</span> <span class="tok-mi">9</span><span class="tok-o">);</span>
   <span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">numbers</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">()</span>
                          <span class="tok-o">.</span><span class="tok-na">map</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-o">)</span>
                          <span class="tok-o">.</span><span class="tok-na">collect</span><span class="tok-o">(</span>
   <span class="tok-k">new</span> <span class="tok-n">Supplier</span><span class="tok-o">&lt;</span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;&gt;()</span> <span class="tok-o">{</span>
       <span class="tok-nd">@Override</span>
       <span class="tok-kd">public</span> <span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-nf">get</span><span class="tok-o">()</span> <span class="tok-o">{</span>
           <span class="tok-k">return</span> <span class="tok-k">new</span> <span class="tok-n">ArrayList</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;();</span>
       <span class="tok-o">}</span>
   <span class="tok-o">},</span> <span class="tok-k">new</span> <span class="tok-n">BiConsumer</span><span class="tok-o">&lt;</span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;,</span> <span class="tok-n">Integer</span><span class="tok-o">&gt;()</span> <span class="tok-o">{</span>
       <span class="tok-nd">@Override</span>
       <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">accept</span><span class="tok-o">(</span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span><span class="tok-o">,</span> <span class="tok-n">Integer</span> <span class="tok-n">integer</span><span class="tok-o">)</span> <span class="tok-o">{</span>
           <span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-n">integer</span><span class="tok-o">);</span>
       <span class="tok-o">}</span>
   <span class="tok-o">},</span> <span class="tok-k">new</span> <span class="tok-n">BiConsumer</span><span class="tok-o">&lt;</span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;,</span> <span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;&gt;()</span> <span class="tok-o">{</span>
       <span class="tok-nd">@Override</span>
       <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">accept</span><span class="tok-o">(</span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">left</span><span class="tok-o">,</span> <span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">right</span><span class="tok-o">)</span> <span class="tok-o">{</span>
          <span class="tok-n">left</span><span class="tok-o">.</span><span class="tok-na">addAll</span><span class="tok-o">(</span><span class="tok-n">right</span><span class="tok-o">);</span>
       <span class="tok-o">}</span>
   <span class="tok-o">});</span>
   <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Ending with the result = &quot;</span> <span class="tok-o">+</span> <span class="tok-n">result</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_converting_collect_with_lambdas">Converting <code>collect</code> with Lambdas</h3>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.streams.StreamsTest#testBasicCustomCollector</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">numbers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">,</span> <span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">6</span><span class="tok-o">,</span> <span class="tok-mi">7</span><span class="tok-o">,</span> <span class="tok-mi">8</span><span class="tok-o">,</span> <span class="tok-mi">9</span><span class="tok-o">);</span>
<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">result</span> <span class="tok-o">=</span>
    <span class="tok-n">numbers</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">()</span>
           <span class="tok-o">.</span><span class="tok-na">map</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-o">)</span>
           <span class="tok-o">.</span><span class="tok-na">collect</span><span class="tok-o">(</span><span class="tok-n">ArrayList</span><span class="tok-o">::</span><span class="tok-k">new</span><span class="tok-o">,</span> <span class="tok-n">ArrayList</span><span class="tok-o">::</span><span class="tok-n">add</span><span class="tok-o">,</span> <span class="tok-n">ArrayList</span><span class="tok-o">::</span><span class="tok-n">addAll</span><span class="tok-o">);</span>
<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Ending with the result = &quot;</span> <span class="tok-o">+</span> <span class="tok-n">result</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_parallelizing_streams">Parallelizing Streams</h3>
<div class="ulist">
<ul>
<li>
<p>We can call <code>parallel()</code> anywhere in our pipeline when needed.</p>
</li>
<li>
<p>This is will cause the rest of that pipeline to be executed on a different thread.</p>
</li>
<li>
<p>Aggregate operations and parallel streams enable you to implement parallelism with non-thread-safe collections, provided that you <strong><em>do not modify the collection</em></strong> while you are operating on it.</p>
</li>
<li>
<p>Parallelism is not automatically faster than performing operations serially, although it can be if you have enough data and processor cores</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_using_parallel_in_streams">Using <code>parallel</code> in Streams</h4>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.streams.StreamsTest#testParallelCollections</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">collect</span> <span class="tok-o">=</span>
    <span class="tok-n">IntStream</span><span class="tok-o">.</span><span class="tok-na">range</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">,</span> <span class="tok-mi">10</span><span class="tok-o">)</span>
             <span class="tok-o">.</span><span class="tok-na">boxed</span><span class="tok-o">()</span>
             <span class="tok-o">.</span><span class="tok-na">parallel</span><span class="tok-o">()</span>
             <span class="tok-o">.</span><span class="tok-na">map</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-o">)</span>
             <span class="tok-o">.</span><span class="tok-na">peek</span><span class="tok-o">(</span><span class="tok-n">x</span><span class="tok-o">-&gt;</span> <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;parallel:&quot;</span> <span class="tok-o">+</span> <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">currentThread</span><span class="tok-o">().</span><span class="tok-na">getName</span><span class="tok-o">()))</span>
             <span class="tok-o">.</span><span class="tok-na">collect</span><span class="tok-o">(</span><span class="tok-n">Collectors</span><span class="tok-o">.</span><span class="tok-na">toList</span><span class="tok-o">());</span>
<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">collect</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_grouping_concurrently">Grouping Concurrently</h4>
<div class="ulist">
<ul>
<li>
<p>Returns a concurrent Collector implementing a "group by" operation on input elements of type <code>T</code></p>
</li>
<li>
<p>Groups elements according to a classification function.</p>
</li>
<li>
<p>This is a concurrent and unordered Collector.</p>
</li>
<li>
<p>The classification function maps elements to some key type <code>K</code></p>
</li>
<li>
<p>The collector produces a <code>ConcurrentMap&lt;K, List&lt;T&gt;&gt;</code> whose keys are the values resulting from applying the classification function to the input elements, and whose corresponding values are Lists containing the input elements which map to the associated key under the classification function.</p>
</li>
<li>
<p>There are no guarantees on the type, mutability, or serializability of the ConcurrentMap or List objects returned, or of the thread-safety of the List objects returned.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.streams.StreamsTest#testGroupingByConcurrent</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">IntStream</span> <span class="tok-n">stream</span> <span class="tok-o">=</span> <span class="tok-n">IntStream</span><span class="tok-o">.</span><span class="tok-na">range</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">,</span> <span class="tok-mi">10</span><span class="tok-o">);</span>
<span class="tok-n">Map</span><span class="tok-o">&lt;</span><span class="tok-n">Boolean</span><span class="tok-o">,</span> <span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;&gt;</span> <span class="tok-n">groups</span> <span class="tok-o">=</span>
    <span class="tok-n">stream</span><span class="tok-o">.</span><span class="tok-na">parallel</span><span class="tok-o">()</span>
          <span class="tok-o">.</span><span class="tok-na">boxed</span><span class="tok-o">()</span>
          <span class="tok-o">.</span><span class="tok-na">collect</span><span class="tok-o">(</span><span class="tok-n">Collectors</span><span class="tok-o">.</span><span class="tok-na">groupingByConcurrent</span><span class="tok-o">(</span><span class="tok-n">i</span> <span class="tok-o">-&gt;</span> <span class="tok-n">i</span> <span class="tok-o">%</span> <span class="tok-mi">3</span> <span class="tok-o">==</span> <span class="tok-mi">0</span><span class="tok-o">));</span>
<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">groups</span><span class="tok-o">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Results In:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-o">{</span><span class="tok-kc">false</span><span class="tok-o">=[</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">8</span><span class="tok-o">,</span> <span class="tok-mi">7</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">],</span> <span class="tok-kc">true</span><span class="tok-o">=[</span><span class="tok-mi">0</span><span class="tok-o">,</span> <span class="tok-mi">9</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">6</span><span class="tok-o">]}</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The above result is a <code>java.util.concurrent.ConcurrentHashMap</code>
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2 slide_section">
<h3 id="_lab_streams">Lab: Streams</h3>
<div class="paragraph">
<p><strong>Step 1:</strong> Open <em>src/test/java/com.xycorp.exercises.streams.StreamsExercises</em></p>
</div>
<div class="paragraph">
<p><strong>Step 2:</strong> In the test <code>testConvertIntegerListToHexidecimal</code>, initialize <code>Arrays.asList(1,50,100,200,921)</code> and
convert that list to a <code>List</code> of hexadecimals. Research how to convert an <code>Integer</code> to
hexadecimal. <em>Do not use <code>while</code> or <code>for</code> loops or any old style iteration</em>.</p>
</div>
<div class="paragraph">
<p><strong>Step 3:</strong> In the test <code>testConvertIntegerListToDouble</code>, initialize <code>Arrays.asList(1,50,100,200,921)</code> and
convert that list to a <code>List</code> of <code>Double</code>. <em>Do not use <code>while</code> or <code>for</code>
loops or any old style iteration</em>.</p>
</div>
<div class="paragraph">
<p><strong>Step 4:</strong> In the test <code>testFactorialUsingStreams</code>, test a class that you create that will calculate the
 factorial of a number. <em>Do not use <code>while</code> or <code>for</code> loops or any old style iteration</em>.</p>
</div>
<div class="paragraph">
<p><strong>Step 5:</strong> In the test <code>testFindTopFiveEmployees</code>, concatenate two <code>Streams</code> that
read from <code>jkRowlingEmployees</code> and <code>georgeLucasEmployees</code>, sort the combined streams by <code>salary</code> in descending order,
find the top five, collect them as a string with a new line.  <em>Do not use <code>while</code> or <code>for</code> loops or any old style iteration</em>.</p>
</div>
<div class="paragraph">
<p><strong>Step 6:</strong> In the test <code>testAllEmployeesSalaryWithManager</code>, give the reference <code>managers</code> only,
find the sum of all the employees and the managers. <strong>You can only use the <code>managers</code> reference</strong>.
<em>Do not use <code>while</code> or <code>for</code> loops or any old style iteration</em>.</p>
</div>
<div class="paragraph">
<p><strong>Step 7:</strong> Which managers employees are paid more? J.K. Rowling or
George Lucas? In <code>testWhichManagersEmployeesArePaidMore</code> find out.
<em>Do not use <code>while</code> or <code>for</code> loops or any old style iteration</em>.</p>
</div>
<div class="paragraph">
<p><strong>Step 8:</strong> In <code>testCreateAMapOfEmployeeKeyWithManagerValue</code> create a Map where the keys are all the employees (non-managers) and the values are their managers
<em>Do not use <code>while</code> or <code>for</code> loops or any old style iteration</em>.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1 slide_section">
<h2 id="_java_date_time_api">Java Date Time API</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_iso_8601_standard">ISO 8601 Standard</h3>
<div class="ulist">
<ul>
<li>
<p>Standard and Collaborative means of managing date and time</p>
</li>
<li>
<p>Based on the cesium-133 atom atomic clock</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_iso_8601_formats">ISO 8601 Formats</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Format</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Example</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2014-01-01</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Combined Date and Time in UTC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2014-07-07T07:01Z</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Combined Date and Time in MDT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2014-07-07T07:38:51.716-06:00</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date With Week Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2014-W27-3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ordinal Date</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2014-188</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Duration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P3Y6M4DT12H30M5S</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Finite Interval</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2014-03-01T13:00:00Z/2015-05-11T15:30:00Z</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Finite Start with Duration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2014-03-01T13:00:00Z/P1Y2M10DT2H30M</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Duration with with Finite End</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P1Y2M10DT2H30M/2015-05-11T15:30:00Z</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_java_util_date"><code>java.util.Date</code></h3>
<div class="ulist">
<ul>
<li>
<p>Introduced millisecond resolution</p>
</li>
<li>
<p>java.util.Date</p>
</li>
<li>
<p>What was wrong with it?</p>
<div class="ulist">
<ul>
<li>
<p>Constructors that accept year arguments require offsets from 1900, which has been a source of bugs.</p>
</li>
<li>
<p>January is represented by 0 instead of 1, also a source of bugs.</p>
</li>
<li>
<p>Date doesn&#8217;t describe a date but describes a date-time combination.</p>
</li>
<li>
<p>Date&#8217;s mutability makes it unsafe to use in multithreaded scenarios without external synchronization.</p>
</li>
<li>
<p>Date isn&#8217;t amenable to internationalization.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Source: <a href="http://www.javaworld.com/article/2078757/java-se/java-101-the-next-generation-it-s-time-for-a-change.html" class="bare">http://www.javaworld.com/article/2078757/java-se/java-101-the-next-generation-it-s-time-for-a-change.html</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_java_util_calendar"><code>java.util.Calendar</code></h3>
<div class="ulist">
<ul>
<li>
<p>Introduced in Java 1.1</p>
</li>
<li>
<p>What is wrong with it?</p>
<div class="ulist">
<ul>
<li>
<p>It isn&#8217;t possible to format a calendar.</p>
</li>
<li>
<p>January is represented by 0 instead of 1, a source of bugs.</p>
</li>
<li>
<p>Calendar isn&#8217;t type-safe; for example, you must pass an int-based constant to the get(int field) method. (In fairness, enums weren&#8217;t available when Calendar was released.)</p>
</li>
<li>
<p>Calendar&#8217;s mutability makes it unsafe to use in multithreaded scenarios without external synchronization. (The companion java.util.TimeZone and java.text.DateFormat classes share this problem.)</p>
</li>
<li>
<p>Calendar stores its state internally in two different ways&#8201;&#8212;&#8201;as a millisecond offset from the epoch and as a set of fields&#8201;&#8212;&#8201;resulting in many bugs and performance issues.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Source: <a href="http://www.javaworld.com/article/2078757/java-se/java-101-the-next-generation-it-s-time-for-a-change.html" class="bare">http://www.javaworld.com/article/2078757/java-se/java-101-the-next-generation-it-s-time-for-a-change.html</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_terrible_readability_of_java_util_calendar">Terrible Readability of <code>java.util.Calendar</code></h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-o">&gt;</span> <span class="tok-k">new</span> <span class="tok-n">java</span><span class="tok-o">.</span><span class="tok-na">util</span><span class="tok-o">.</span><span class="tok-na">GregorianCalendar</span>

<span class="tok-n">java</span><span class="tok-o">.</span><span class="tok-na">util</span><span class="tok-o">.</span><span class="tok-na">GregorianCalendar</span> <span class="tok-o">=</span> <span class="tok-n">java</span><span class="tok-o">.</span><span class="tok-na">util</span><span class="tok-o">.</span><span class="tok-na">GregorianCalendar</span><span class="tok-o">[</span><span class="tok-n">time</span><span class="tok-o">=</span><span class="tok-mi">1393764079082</span><span class="tok-o">,</span><span class="tok-n">areFieldsSet</span><span class="tok-o">=</span><span class="tok-kc">true</span><span class="tok-o">,</span><span class="tok-n">areAllFieldsSet</span><span class="tok-o">=</span><span class="tok-kc">true</span><span class="tok-o">,</span><span class="tok-n">lenient</span><span class="tok-o">=</span><span class="tok-kc">true</span><span class="tok-o">,</span><span class="tok-n">zone</span><span class="tok-o">=</span><span class="tok-n">sun</span><span class="tok-o">.</span><span class="tok-na">util</span><span class="tok-o">.</span><span class="tok-na">calendar</span><span class="tok-o">.</span><span class="tok-na">ZoneInfo</span><span class="tok-o">[</span><span class="tok-n">id</span><span class="tok-o">=</span><span class="tok-s">&quot;America/New_York&quot;</span><span class="tok-o">,</span><span class="tok-n">offset</span><span class="tok-o">=-</span><span class="tok-mi">18000000</span><span class="tok-o">,</span><span class="tok-n">dstSaving</span><span class="tok-o">=</span><span class="tok-mi">3600000</span><span class="tok-o">,</span><span class="tok-n">useDaylight</span><span class="tok-o">=</span><span class="tok-kc">true</span><span class="tok-o">,</span><span class="tok-n">transitions</span><span class="tok-o">=</span><span class="tok-mi">235</span><span class="tok-o">,</span><span class="tok-n">lastRule</span><span class="tok-o">=</span><span class="tok-n">java</span><span class="tok-o">.</span><span class="tok-na">util</span><span class="tok-o">.</span><span class="tok-na">SimpleTimeZone</span><span class="tok-o">[</span><span class="tok-n">id</span><span class="tok-o">=</span><span class="tok-n">America</span><span class="tok-o">/</span><span class="tok-n">New_York</span><span class="tok-o">,</span><span class="tok-n">offset</span><span class="tok-o">=-</span><span class="tok-mi">18000000</span><span class="tok-o">,</span><span class="tok-n">dstSaving</span><span class="tok-o">=</span><span class="tok-mi">3600000</span><span class="tok-o">,</span><span class="tok-n">useDaylight</span><span class="tok-o">=</span><span class="tok-kc">true</span><span class="tok-o">,</span><span class="tok-n">startYear</span><span class="tok-o">=</span><span class="tok-mi">0</span><span class="tok-o">,</span><span class="tok-n">startMode</span><span class="tok-o">=</span><span class="tok-mi">3</span><span class="tok-o">,</span><span class="tok-n">startMonth</span><span class="tok-o">=</span><span class="tok-mi">2</span><span class="tok-o">,</span><span class="tok-n">startDay</span><span class="tok-o">=</span><span class="tok-mi">8</span><span class="tok-o">,</span><span class="tok-n">startDayOfWeek</span><span class="tok-o">=</span><span class="tok-mi">1</span><span class="tok-o">,</span><span class="tok-n">startTime</span><span class="tok-o">=</span><span class="tok-mi">7200000</span><span class="tok-o">,</span><span class="tok-n">startTimeMode</span><span class="tok-o">=</span><span class="tok-mi">0</span><span class="tok-o">,</span><span class="tok-n">endMode</span><span class="tok-o">=</span><span class="tok-mi">3</span><span class="tok-o">,</span><span class="tok-n">endMonth</span><span class="tok-o">=</span><span class="tok-mi">10</span><span class="tok-o">,</span><span class="tok-n">endDay</span><span class="tok-o">=</span><span class="tok-mi">1</span><span class="tok-o">,</span><span class="tok-n">endDayOfWeek</span><span class="tok-o">=</span><span class="tok-mi">1</span><span class="tok-o">,</span><span class="tok-n">endTime</span><span class="tok-o">=</span><span class="tok-mi">7200000</span><span class="tok-o">,</span><span class="tok-n">endTimeMode</span><span class="tok-o">=</span><span class="tok-mi">0</span><span class="tok-o">]],</span><span class="tok-n">firstDayOfWeek</span><span class="tok-o">=</span><span class="tok-mi">1</span><span class="tok-o">,</span><span class="tok-n">minimalDaysInFirstWeek</span><span class="tok-o">=</span><span class="tok-mi">1</span><span class="tok-o">,</span><span class="tok-n">ERA</span><span class="tok-o">=</span><span class="tok-mi">1</span><span class="tok-o">,</span><span class="tok-n">YEAR</span><span class="tok-o">=</span><span class="tok-mi">2014</span><span class="tok-o">,</span><span class="tok-n">MONTH</span><span class="tok-o">=</span><span class="tok-mi">2</span><span class="tok-o">,</span><span class="tok-n">WEEK_OF_YEAR</span><span class="tok-o">=</span><span class="tok-mi">10</span><span class="tok-o">,</span><span class="tok-n">WEEK_OF_MONTH</span><span class="tok-o">=</span><span class="tok-mi">2</span><span class="tok-o">,</span><span class="tok-n">DAY_OF_MONTH</span><span class="tok-o">=</span><span class="tok-mi">2</span><span class="tok-o">,</span><span class="tok-n">DAY_OF_YEAR</span><span class="tok-o">=</span><span class="tok-mi">61</span><span class="tok-o">,</span><span class="tok-n">DAY_OF_WEEK</span><span class="tok-o">=</span><span class="tok-mi">1</span><span class="tok-o">,</span><span class="tok-n">DAY_OF_WEEK_IN_MONTH</span><span class="tok-o">=</span><span class="tok-mi">1</span><span class="tok-o">,</span><span class="tok-n">AM_PM</span><span class="tok-o">=</span><span class="tok-mi">0</span><span class="tok-o">,</span><span class="tok-n">HOUR</span><span class="tok-o">=</span><span class="tok-mi">7</span><span class="tok-o">,</span><span class="tok-n">HOUR_OF_DAY</span><span class="tok-o">=</span><span class="tok-mi">7</span><span class="tok-o">,</span><span class="tok-n">MINUTE</span><span class="tok-o">=</span><span class="tok-mi">41</span><span class="tok-o">,</span><span class="tok-n">SECOND</span><span class="tok-o">=</span><span class="tok-mi">19</span><span class="tok-o">,</span><span class="tok-n">MILLISECOND</span><span class="tok-o">=</span><span class="tok-mi">82</span><span class="tok-o">,</span><span class="tok-n">ZONE_OFFSET</span><span class="tok-o">=-</span><span class="tok-mi">18000000</span><span class="tok-o">,</span><span class="tok-n">DST_</span><span class="tok-o">...</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_what_was_cool_about_joda_time">What was cool about Joda Time?</h3>
<div class="ulist">
<ul>
<li>
<p>Straight-forward instantiation and methods</p>
</li>
<li>
<p>UTC/ISO 8601 Based, not Gregorian Calendar</p>
</li>
<li>
<p>Has support for other calendar systems if you need it (Julian, Gregorian-Julian, Coptic, Buddhist)</p>
</li>
<li>
<p>Includes classes for date times, dates without times, times without dates, intervals and time periods.</p>
</li>
<li>
<p>Advanced formatting</p>
</li>
<li>
<p>Well documented and well tested</p>
</li>
<li>
<p>Immutable!</p>
</li>
<li>
<p>Months are 1 based</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_about_the_java_8_date_time_api">About the Java 8 Date Time API</h3>
<div class="ulist">
<ul>
<li>
<p>Authored by the same team as Joda Time</p>
</li>
<li>
<p>Immutable &amp; Threadsafe</p>
</li>
<li>
<p>Learned from previous mistakes made in Joda Time</p>
</li>
<li>
<p>There are no <em>constructors</em> (Dude what?)</p>
</li>
<li>
<p>Nanosecond Resolution</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_the_java_date_time_packaging">The Java Date Time Packaging</h3>
<div class="ulist">
<ul>
<li>
<p><code>java.time</code> - Base package for managing date time</p>
</li>
<li>
<p><code>java.time.chrono</code> - Package that handles alternative calendering and chronology systems</p>
</li>
<li>
<p><code>java.time.format</code> - Package that handles formatting of dates and times</p>
</li>
<li>
<p><code>java.time.temporal</code> - Package that allows us to query dates and times</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_date_time_conventions">Date Time Conventions</h3>
<div class="ulist">
<ul>
<li>
<p><code>of</code> - static factory usually validating input parameters not converting them</p>
</li>
<li>
<p><code>from</code> - static factory that converts to an instance of a target class</p>
</li>
<li>
<p><code>parse</code> - static factory that parses an input string</p>
</li>
<li>
<p><code>format</code> - uses a specified formatter to format the date</p>
</li>
<li>
<p><code>get</code> - Returns part of the state of the target object</p>
</li>
<li>
<p><code>is</code> - Queries the state of the object</p>
</li>
<li>
<p><code>with</code> - Returns a copy of the object with one element changed, this is the immutable equivalent</p>
</li>
<li>
<p><code>plus</code> - Returns a copy of the target object with the amount of time added</p>
</li>
<li>
<p><code>minus</code> - Returns a copy of the target object with the amount of time subtracted</p>
</li>
<li>
<p><code>to</code> - Converts this object to another object type</p>
</li>
<li>
<p><code>at</code> - Combines the object with another</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_instant"><code>Instant</code></h3>
<div class="ulist">
<ul>
<li>
<p>Single point in time</p>
</li>
<li>
<p>Time since the Unix/Java Epoch <code>1970-01-01T00:00:00Z</code></p>
</li>
<li>
<p>Differs from the <code>java.util.Date</code> and <code>long</code> representation</p>
</li>
<li>
<p>Contains two states:</p>
<div class="ulist">
<ul>
<li>
<p><code>long</code> of seconds since the Unix Epoch</p>
</li>
<li>
<p><code>int</code> of nano seconds within one second</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_instant_resolution"><code>Instant</code> Resolution!</h3>
<div class="paragraph">
<p>An <code>Instant</code> can be resolved as 1.844674407x10<sup>19</sup> seconds
or 584542046090 years!</p>
</div>
</div>
<div class="sect2">
<h3 id="_instant_exemplified"><code>Instant</code> Exemplified</h3>
<div class="listingblock">
<div class="title">/src/test/java/com.xyzcorp.demos.datetime.DatesTest#testInstant</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Instant</span> <span class="tok-n">instant</span> <span class="tok-o">=</span> <span class="tok-n">Instant</span><span class="tok-o">.</span><span class="tok-na">now</span><span class="tok-o">();</span>
<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;instant = &quot;</span> <span class="tok-o">+</span> <span class="tok-n">instant</span><span class="tok-o">);</span>
<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">instant</span><span class="tok-o">.</span><span class="tok-na">getEpochSecond</span><span class="tok-o">());</span>
<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">instant</span><span class="tok-o">.</span><span class="tok-na">getNano</span><span class="tok-o">());</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_enum"><code>Enum</code></h3>
<div class="sect3">
<h4 id="_month_and_dayofweek"><code>Month</code> and <code>DayOfWeek</code></h4>
<div class="ulist">
<ul>
<li>
<p>The Java Date/Time API contains <code>enum</code> classes to describe our months and days</p>
<div class="ulist">
<ul>
<li>
<p><code>Month</code></p>
</li>
<li>
<p><code>DayOfWeek</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_month_and_dayofweek_2"><code>Month</code> and <code>DayOfWeek</code></h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">DayOfWeek</span><span class="tok-o">.</span><span class="tok-na">SUNDAY</span>
<span class="tok-n">DayOfWeek</span><span class="tok-o">.</span><span class="tok-na">FRIDAY</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Month</span><span class="tok-o">.</span><span class="tok-na">JANUARY</span>
<span class="tok-n">Month</span><span class="tok-o">.</span><span class="tok-na">JULY</span>
<span class="tok-n">Month</span><span class="tok-o">.</span><span class="tok-na">DECEMBER</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_chronounit"><code>ChronoUnit</code></h4>
<div class="ulist">
<ul>
<li>
<p><code>enum</code> to represent a unit of time for a scalar</p>
</li>
<li>
<p><code>implements TemporalUnit</code></p>
</li>
<li>
<p><code>ChronoUnit</code> is meant to be general enough for various calendars</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_chronounit_exemplified"><code>ChronoUnit</code> Exemplified</h5>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">ChronoUnit</span><span class="tok-o">.</span><span class="tok-na">DAYS</span>
<span class="tok-n">ChronoUnit</span><span class="tok-o">.</span><span class="tok-na">CENTURIES</span>
<span class="tok-n">ChronoUnit</span><span class="tok-o">.</span><span class="tok-na">ERAS</span>
<span class="tok-n">ChronoUnit</span><span class="tok-o">.</span><span class="tok-na">MINUTES</span>
<span class="tok-n">ChronoUnit</span><span class="tok-o">.</span><span class="tok-na">MONTHS</span>
<span class="tok-n">ChronoUnit</span><span class="tok-o">.</span><span class="tok-na">SECONDS</span>
<span class="tok-n">ChronoUnit</span><span class="tok-o">.</span><span class="tok-na">FOREVER</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_adding_chronounit_to_instant">Adding <code>ChronoUnit</code> to <code>Instant</code></h5>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.datetime.DatesTest#testChronoUnitAddToInstant</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Instant</span><span class="tok-o">.</span><span class="tok-na">now</span><span class="tok-o">().</span><span class="tok-na">plus</span><span class="tok-o">(</span><span class="tok-mi">19</span><span class="tok-o">,</span> <span class="tok-n">ChronoUnit</span><span class="tok-o">.</span><span class="tok-na">DAYS</span><span class="tok-o">)</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_chronounit_to_determine_time_between"><code>ChronoUnit</code> to Determine Time Between</h5>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.datetime.DatesTest#testChronoUnitBetween</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kt">long</span> <span class="tok-n">between</span> <span class="tok-o">=</span> <span class="tok-n">ChronoUnit</span><span class="tok-o">.</span><span class="tok-na">DAYS</span><span class="tok-o">.</span><span class="tok-na">between</span>
    <span class="tok-o">(</span><span class="tok-n">Instant</span><span class="tok-o">.</span><span class="tok-na">parse</span><span class="tok-o">(</span><span class="tok-s">&quot;2019-01-05T12:00:00.0Z&quot;</span><span class="tok-o">),</span>
        <span class="tok-n">Instant</span><span class="tok-o">.</span><span class="tok-na">parse</span><span class="tok-o">(</span><span class="tok-s">&quot;2019-01-01T12:00:00.0Z&quot;</span><span class="tok-o">));</span>
<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;between = &quot;</span> <span class="tok-o">+</span> <span class="tok-n">between</span><span class="tok-o">);</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The above uses <code>parse</code> to parse an ISO-8601 formatted <code>String</code>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_chronofield"><code>ChronoField</code></h3>
<div class="ulist">
<ul>
<li>
<p>Represents a field in a date</p>
</li>
<li>
<p>Given: <code>2010-10-22T12:00:13</code> has six fields</p>
<div class="ulist">
<ul>
<li>
<p>The year: <code>2010</code></p>
</li>
<li>
<p>The month: <code>10</code></p>
</li>
<li>
<p>The day of the month: <code>22</code></p>
</li>
<li>
<p>The hour of the day: <code>12</code></p>
</li>
<li>
<p>The minute: <code>0</code></p>
</li>
<li>
<p>The seconds: <code>13</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>implements TemporalField</code></p>
</li>
<li>
<p><code>ChronoField</code> is also meant to be general enough for various calendars</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_chronofield_exemplified"><code>ChronoField</code> Exemplified</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">ChronoField</span><span class="tok-o">.</span><span class="tok-na">MONTH_OF_YEAR</span>
<span class="tok-n">ChronoField</span><span class="tok-o">.</span><span class="tok-na">DAY_OF_MONTH</span>
<span class="tok-n">ChronoField</span><span class="tok-o">.</span><span class="tok-na">HOUR_OF_DAY</span>
<span class="tok-n">ChronoField</span><span class="tok-o">.</span><span class="tok-na">SECOND_OF_MINUTE</span>
<span class="tok-n">ChronoField</span><span class="tok-o">.</span><span class="tok-na">SECOND_OF_DAY</span>
<span class="tok-n">ChronoField</span><span class="tok-o">.</span><span class="tok-na">MINUTE_OF_DAY</span>
<span class="tok-n">ChronoField</span><span class="tok-o">.</span><span class="tok-na">MINUTE_OF_HOUR</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.datetime.DatesTest#testChronoField</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Instant</span><span class="tok-o">.</span><span class="tok-na">now</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-n">ChronoField</span><span class="tok-o">.</span><span class="tok-na">HOUR_OF_DAY</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_local_dates_and_times">Local Dates and Times</h3>
<div class="ulist">
<ul>
<li>
<p><code>LocalDate</code> - An ISO 8601 date representation without timezone and time</p>
</li>
<li>
<p><code>LocalTime</code>- An ISO 8601 time representation without timezone and date</p>
</li>
<li>
<p><code>LocalDateTime</code> - An ISO 8601 date and time representation without time zone</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_creating_a_localdate">Creating a <code>LocalDate</code></h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">LocalDate</span> <span class="tok-n">february20th</span> <span class="tok-o">=</span> <span class="tok-n">LocalDate</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">2014</span><span class="tok-o">,</span> <span class="tok-n">Month</span><span class="tok-o">.</span><span class="tok-na">FEBRUARY</span><span class="tok-o">,</span> <span class="tok-mi">20</span><span class="tok-o">);</span>
<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">february20th</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_creating_a_localtime">Creating a <code>LocalTime</code></h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">LocalTime</span><span class="tok-o">.</span><span class="tok-na">MIDNIGHT</span><span class="tok-o">;</span>
<span class="tok-n">LocalTime</span><span class="tok-o">.</span><span class="tok-na">NOON</span><span class="tok-o">;</span>
<span class="tok-n">LocalTime</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">23</span><span class="tok-o">,</span> <span class="tok-mi">12</span><span class="tok-o">,</span> <span class="tok-mi">30</span><span class="tok-o">,</span> <span class="tok-mi">500</span><span class="tok-o">);</span>
<span class="tok-n">LocalTime</span><span class="tok-o">.</span><span class="tok-na">now</span><span class="tok-o">();</span>
<span class="tok-n">LocalTime</span><span class="tok-o">.</span><span class="tok-na">ofSecondOfDay</span><span class="tok-o">(</span><span class="tok-mi">11</span> <span class="tok-o"><strong></span> <span class="tok-mi">60</span> <span class="tok-o"></strong></span> <span class="tok-mi">60</span><span class="tok-o">);</span>
<span class="tok-n">LocalTime</span><span class="tok-o">.</span><span class="tok-na">from</span><span class="tok-o">(</span><span class="tok-n">LocalTime</span><span class="tok-o">.</span><span class="tok-na">MIDNIGHT</span><span class="tok-o">.</span><span class="tok-na">plusHours</span><span class="tok-o">(</span><span class="tok-mi">4</span><span class="tok-o">));</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_creating_a_localdatetime">Creating a <code>LocalDateTime</code></h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">LocalDateTime</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">2014</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">15</span><span class="tok-o">,</span> <span class="tok-mi">12</span><span class="tok-o">,</span> <span class="tok-mi">30</span><span class="tok-o">,</span> <span class="tok-mi">50</span><span class="tok-o">,</span> <span class="tok-mi">200</span><span class="tok-o">);</span>
<span class="tok-n">LocalDateTime</span><span class="tok-o">.</span><span class="tok-na">now</span><span class="tok-o">();</span>
<span class="tok-n">LocalDateTime</span><span class="tok-o">.</span><span class="tok-na">from</span><span class="tok-o">(</span>
   <span class="tok-n">LocalDateTime</span><span class="tok-o">.</span><span class="tok-na">of</span>
      <span class="tok-o">(</span><span class="tok-mi">2014</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">15</span><span class="tok-o">,</span> <span class="tok-mi">12</span><span class="tok-o">,</span> <span class="tok-mi">30</span><span class="tok-o">,</span> <span class="tok-mi">40</span><span class="tok-o">,</span> <span class="tok-mi">500</span><span class="tok-o">)</span>
        <span class="tok-o">.</span><span class="tok-na">plusHours</span><span class="tok-o">(</span><span class="tok-mi">19</span><span class="tok-o">)));</span>
<span class="tok-n">LocalDateTime</span><span class="tok-o">.</span><span class="tok-na">MIN</span><span class="tok-o">;</span>
<span class="tok-n">LocalDateTime</span><span class="tok-o">.</span><span class="tok-na">MAX</span><span class="tok-o">;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_zoneddatetime"><code>ZonedDateTime</code></h3>
<div class="ulist">
<ul>
<li>
<p>Specifies a complete date and time in a particular time zone</p>
</li>
<li>
<p>Contains methods that can convert from <code>LocalDate</code>, <code>LocalTime</code>, and <code>LocalDateTime</code> to <code>ZonedDateTime</code></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_but_first_zoneid">But first, <code>ZoneId</code></h4>
<div class="ulist">
<ul>
<li>
<p><code>ZoneId</code> represents the IANA Time Zone Entry</p>
</li>
<li>
<p><a href="http://www.iana.org/time-zones">http://www.iana.org/time-zones</a></p>
</li>
<li>
<p>Download tar.gz file, locate the region file (e.g. northamerica)</p>
</li>
<li>
<p>TimeZone names are divided by region</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre># Monaco
# Shanks &amp; Pottenger give 0:09:20 for Paris Mean Time; go with Howse's
# more precise 0:09:21.
# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
Zone	Europe/Monaco	0:29:32 -	LMT	1891 Mar 15
			0:09:21	-	PMT	1911 Mar 11    # Paris Mean Time
			0:00	France	WE%sT	1945 Sep 16 3:00
			1:00	France	CE%sT	1977
			1:00	EU	CE%sT</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_creating_the_zoneid">Creating the <code>ZoneId</code></h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">ZoneId</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-s">&quot;America/Denver&quot;</span><span class="tok-o">);</span>
<span class="tok-n">ZoneId</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-s">&quot;Asia/Jakarta&quot;</span><span class="tok-o">);</span>
<span class="tok-n">ZoneId</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-s">&quot;America/Los_Angeles&quot;</span><span class="tok-o">);</span>
<span class="tok-n">ZoneId</span><span class="tok-o">.</span><span class="tok-na">ofOffset</span><span class="tok-o">(</span><span class="tok-s">&quot;UTC&quot;</span><span class="tok-o">,</span> <span class="tok-n">ZoneOffset</span><span class="tok-o">.</span><span class="tok-na">ofHours</span><span class="tok-o">(-</span><span class="tok-mi">6</span><span class="tok-o">));</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_zoneddatetime_exemplified"><code>ZonedDateTime</code> exemplified</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">ZonedDateTime</span><span class="tok-o">.</span><span class="tok-na">now</span><span class="tok-o">();</span>  <span class="tok-c1">//Current Date Time with Zone</span>

<span class="tok-n">ZonedDateTime</span> <span class="tok-n">myZonedDateTime</span> <span class="tok-o">=</span> <span class="tok-n">ZonedDateTime</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">2014</span><span class="tok-o">,</span> <span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">31</span><span class="tok-o">,</span> <span class="tok-mi">11</span><span class="tok-o">,</span> <span class="tok-mi">20</span><span class="tok-o">,</span> <span class="tok-mi">30</span><span class="tok-o">,</span> <span class="tok-mi">93020122</span><span class="tok-o">,</span> <span class="tok-n">ZoneId</span><span class="tok-o">.</span><span class="tok-na">systemDefault</span><span class="tok-o">());</span>

<span class="tok-n">ZonedDateTime</span> <span class="tok-n">nowInAthens</span> <span class="tok-o">=</span> <span class="tok-n">ZonedDateTime</span><span class="tok-o">.</span><span class="tok-na">now</span><span class="tok-o">(</span><span class="tok-n">ZoneId</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-s">&quot;Europe/Athens&quot;</span><span class="tok-o">));</span>

<span class="tok-n">LocalDate</span> <span class="tok-n">localDate</span> <span class="tok-o">=</span> <span class="tok-n">LocalDate</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">2013</span><span class="tok-o">,</span> <span class="tok-mi">11</span><span class="tok-o">,</span> <span class="tok-mi">12</span><span class="tok-o">);</span>
<span class="tok-n">LocalTime</span> <span class="tok-n">localTime</span> <span class="tok-o">=</span> <span class="tok-n">LocalTime</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">23</span><span class="tok-o">,</span> <span class="tok-mi">10</span><span class="tok-o">,</span> <span class="tok-mi">44</span><span class="tok-o">,</span> <span class="tok-mi">12882</span><span class="tok-o">);</span>
<span class="tok-n">ZoneId</span> <span class="tok-n">chicago</span> <span class="tok-o">=</span> <span class="tok-n">ZoneId</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-s">&quot;America/Chicago&quot;</span><span class="tok-o">);</span>
<span class="tok-n">ZonedDateTime</span> <span class="tok-n">chicagoTime</span> <span class="tok-o">=</span> <span class="tok-n">ZonedDateTime</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-n">localDate</span><span class="tok-o">,</span> <span class="tok-n">localTime</span><span class="tok-o">,</span> <span class="tok-n">chicago</span><span class="tok-o">);</span>

<span class="tok-n">LocalDateTime</span> <span class="tok-n">localDateTime</span> <span class="tok-o">=</span> <span class="tok-n">LocalDateTime</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">1982</span><span class="tok-o">,</span> <span class="tok-n">Month</span><span class="tok-o">.</span><span class="tok-na">APRIL</span><span class="tok-o">,</span> <span class="tok-mi">17</span><span class="tok-o">,</span> <span class="tok-mi">14</span><span class="tok-o">,</span> <span class="tok-mi">11</span><span class="tok-o">);</span>
<span class="tok-n">ZonedDateTime</span> <span class="tok-n">jakartaTime</span> <span class="tok-o">=</span> <span class="tok-n">ZonedDateTime</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-n">localDateTime</span><span class="tok-o">,</span> <span class="tok-n">ZoneId</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-s">&quot;Asia/Jakarta&quot;</span><span class="tok-o">));</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_daylight_saving_time_begins">Daylight Saving Time Begins</h3>
<div class="ulist">
<ul>
<li>
<p>In the summer</p>
<div class="ulist">
<ul>
<li>
<p>In the case of a gap, when clocks jump forward, there is no valid offset.</p>
</li>
<li>
<p>Local date-time is adjusted to be later by the length of the gap</p>
</li>
<li>
<p>For a typical one hour daylight savings change, the local date-time will be moved one hour later into the offset typically corresponding to "summer"</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_daylight_saving_time_using_java_date_time_api">Daylight Saving Time using Java Date Time API</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">LocalDateTime</span> <span class="tok-n">date</span> <span class="tok-o">=</span> <span class="tok-n">LocalDateTime</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">2012</span><span class="tok-o">,</span> <span class="tok-mi">11</span><span class="tok-o">,</span> <span class="tok-mi">12</span><span class="tok-o">,</span> <span class="tok-mi">13</span><span class="tok-o">,</span> <span class="tok-mi">11</span><span class="tok-o">,</span> <span class="tok-mi">12</span><span class="tok-o">);</span>
<span class="tok-n">date</span><span class="tok-o">.</span><span class="tok-na">atZone</span><span class="tok-o">(</span><span class="tok-n">ZoneId</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-s">&quot;America/Los_Angeles&quot;</span><span class="tok-o">))</span> <span class="tok-c1">//2012-11-12T13:11:12-08:00[America/Los_Angeles]</span>

<span class="tok-n">LocalDateTime</span> <span class="tok-n">daylightSavingTime</span> <span class="tok-o">=</span> <span class="tok-n">LocalDateTime</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">2014</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">9</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">0</span><span class="tok-o">,</span> <span class="tok-mi">0</span><span class="tok-o">,</span> <span class="tok-mi">0</span><span class="tok-o">);</span>
<span class="tok-n">daylightSavingTime</span><span class="tok-o">.</span><span class="tok-na">atZone</span><span class="tok-o">(</span><span class="tok-n">ZoneId</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-s">&quot;America/Denver&quot;</span><span class="tok-o">));</span> <span class="tok-c1">//2014-03-09T03:00-06:00[America/Denver]</span>

<span class="tok-n">LocalDateTime</span> <span class="tok-n">daylightSavingTime2</span> <span class="tok-o">=</span> <span class="tok-n">LocalDateTime</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">2014</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">9</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">30</span><span class="tok-o">,</span> <span class="tok-mi">0</span><span class="tok-o">,</span> <span class="tok-mi">0</span><span class="tok-o">);</span>
<span class="tok-n">daylightSavingTime2</span><span class="tok-o">.</span><span class="tok-na">atZone</span><span class="tok-o">(</span><span class="tok-n">ZoneId</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-s">&quot;America/New_York&quot;</span><span class="tok-o">));</span> <span class="tok-c1">//2014-03-09T03:30-04:00[America/New_York]</span>

<span class="tok-n">LocalDateTime</span> <span class="tok-n">daylightSavingTime3</span> <span class="tok-o">=</span> <span class="tok-n">LocalDateTime</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">2014</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">9</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">0</span><span class="tok-o">,</span> <span class="tok-mi">0</span><span class="tok-o">,</span> <span class="tok-mi">0</span><span class="tok-o">);</span>
<span class="tok-n">daylightSavingTime3</span><span class="tok-o">.</span><span class="tok-na">atZone</span><span class="tok-o">(</span><span class="tok-n">ZoneId</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-s">&quot;America/Phoenix&quot;</span><span class="tok-o">));</span> <span class="tok-c1">//2014-03-09T02:00-07:00[America/Phoenix]</span>

<span class="tok-n">LocalDateTime</span> <span class="tok-n">daylightSavingTime4</span> <span class="tok-o">=</span> <span class="tok-n">LocalDateTime</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">2014</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">9</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">59</span><span class="tok-o">,</span> <span class="tok-mi">59</span><span class="tok-o">,</span> <span class="tok-mi">999999999</span><span class="tok-o">);</span>
<span class="tok-n">daylightSavingTime4</span><span class="tok-o">.</span><span class="tok-na">atZone</span><span class="tok-o">(</span><span class="tok-n">ZoneId</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-s">&quot;America/Chicago&quot;</span><span class="tok-o">));</span> <span class="tok-c1">//2014-03-09T03:59:59.999999999-05:00[America/Chicago]</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_daylight_saving_time_using_the_java_date_time_api">Daylight Saving Time using the Java Date Time API</h3>
<div class="ulist">
<ul>
<li>
<p>In the winter</p>
<div class="ulist">
<ul>
<li>
<p>In the case of an overlap, when clocks are set back, there are two valid offsets.</p>
</li>
<li>
<p>This method uses the earlier offset typically corresponding to "summer".</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_standard_time_using_the_java_date_time_api">Standard Time using the Java Date Time API</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">LocalDateTime</span> <span class="tok-n">date2</span> <span class="tok-o">=</span> <span class="tok-n">LocalDateTime</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">2012</span><span class="tok-o">,</span> <span class="tok-mi">11</span><span class="tok-o">,</span> <span class="tok-mi">12</span><span class="tok-o">,</span> <span class="tok-mi">13</span><span class="tok-o">,</span> <span class="tok-mi">11</span><span class="tok-o">,</span> <span class="tok-mi">12</span><span class="tok-o">);</span>
<span class="tok-n">date2</span><span class="tok-o">.</span><span class="tok-na">atZone</span><span class="tok-o">(</span><span class="tok-n">ZoneId</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-s">&quot;America/Los_Angeles&quot;</span><span class="tok-o">)));</span> <span class="tok-c1">//2012-11-12T13:11:12-08:00[America/Los_Angeles]</span>

<span class="tok-n">LocalDateTime</span> <span class="tok-n">standardTime</span> <span class="tok-o">=</span> <span class="tok-n">LocalDateTime</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">2014</span><span class="tok-o">,</span> <span class="tok-mi">11</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">0</span><span class="tok-o">,</span> <span class="tok-mi">0</span><span class="tok-o">,</span> <span class="tok-mi">0</span><span class="tok-o">);</span>
<span class="tok-n">standardTime</span><span class="tok-o">.</span><span class="tok-na">atZone</span><span class="tok-o">(</span><span class="tok-n">ZoneId</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-s">&quot;America/Denver&quot;</span><span class="tok-o">));</span> <span class="tok-c1">//2014-11-02T02:00-07:00[America/Denver]</span>

<span class="tok-n">LocalDateTime</span> <span class="tok-n">standardTime2</span> <span class="tok-o">=</span> <span class="tok-n">LocalDateTime</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">2014</span><span class="tok-o">,</span> <span class="tok-mi">11</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">30</span><span class="tok-o">,</span> <span class="tok-mi">0</span><span class="tok-o">,</span> <span class="tok-mi">0</span><span class="tok-o">);</span>
<span class="tok-n">standardTime2</span><span class="tok-o">.</span><span class="tok-na">atZone</span><span class="tok-o">(</span><span class="tok-n">ZoneId</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-s">&quot;America/New_York&quot;</span><span class="tok-o">));</span> <span class="tok-c1">//2014-11-02T02:30-05:00[America/New_York]</span>

<span class="tok-n">LocalDateTime</span> <span class="tok-n">standardTime3</span> <span class="tok-o">=</span> <span class="tok-n">LocalDateTime</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">2014</span><span class="tok-o">,</span> <span class="tok-mi">11</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">0</span><span class="tok-o">,</span> <span class="tok-mi">0</span><span class="tok-o">,</span> <span class="tok-mi">0</span><span class="tok-o">);</span>
<span class="tok-n">standardTime3</span><span class="tok-o">.</span><span class="tok-na">atZone</span><span class="tok-o">(</span><span class="tok-n">ZoneId</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-s">&quot;America/Phoenix&quot;</span><span class="tok-o">));</span> <span class="tok-c1">//2014-11-02T02:00-07:00[America/Phoenix]</span>

<span class="tok-n">LocalDateTime</span> <span class="tok-n">standardTime4</span> <span class="tok-o">=</span> <span class="tok-n">LocalDateTime</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">2014</span><span class="tok-o">,</span> <span class="tok-mi">11</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">59</span><span class="tok-o">,</span> <span class="tok-mi">59</span><span class="tok-o">,</span> <span class="tok-mi">999999999</span><span class="tok-o">);</span>
<span class="tok-n">standardTime4</span><span class="tok-o">.</span><span class="tok-na">atZone</span><span class="tok-o">(</span><span class="tok-n">ZoneId</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-s">&quot;America/Chicago&quot;</span><span class="tok-o">));</span> <span class="tok-c1">//2014-11-02T02:59:59.999999999-06:00[America/Chicago]</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_which_130_am">Which 1:30 AM?</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">LocalDateTime</span> <span class="tok-n">standardTime6</span> <span class="tok-o">=</span> <span class="tok-n">LocalDateTime</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">2014</span><span class="tok-o">,</span> <span class="tok-mi">11</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">30</span><span class="tok-o">,</span> <span class="tok-mi">0</span><span class="tok-o">,</span> <span class="tok-mi">0</span><span class="tok-o">);</span>
<span class="tok-n">standardTime6</span><span class="tok-o">.</span><span class="tok-na">atZone</span><span class="tok-o">(</span><span class="tok-n">ZoneId</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-s">&quot;America/New_York&quot;</span><span class="tok-o">)));</span>
<span class="tok-n">standardTime6</span><span class="tok-o">.</span><span class="tok-na">atZone</span><span class="tok-o">(</span><span class="tok-n">ZoneId</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-s">&quot;America/New_York&quot;</span><span class="tok-o">))</span>
        <span class="tok-o">.</span><span class="tok-na">withEarlierOffsetAtOverlap</span><span class="tok-o">().</span><span class="tok-na">toInstant</span><span class="tok-o">().</span><span class="tok-na">getEpochSecond</span><span class="tok-o">());</span>
<span class="tok-n">standardTime6</span><span class="tok-o">.</span><span class="tok-na">atZone</span><span class="tok-o">(</span><span class="tok-n">ZoneId</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-s">&quot;America/New_York&quot;</span><span class="tok-o">))</span>
        <span class="tok-o">.</span><span class="tok-na">withLaterOffsetAtOverlap</span><span class="tok-o">().</span><span class="tok-na">toInstant</span><span class="tok-o">().</span><span class="tok-na">getEpochSecond</span><span class="tok-o">());</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_shifting_time">Shifting Time</h3>
<div class="sect3">
<h4 id="_duration_and_period"><code>Duration</code> and <code>Period</code></h4>
<div class="ulist">
<ul>
<li>
<p>To model a span of time (e.g. 10 days) you have two choices</p>
<div class="ulist">
<ul>
<li>
<p><code>Duration</code> - a span of time in seconds and nanoseconds</p>
</li>
<li>
<p><code>Period</code> -a span of time in years, months and days</p>
</li>
</ul>
</div>
</li>
<li>
<p>Both implement <code>TemporalAmount</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_duration"><code>Duration</code></h4>
<div class="ulist">
<ul>
<li>
<p>Spans only seconds and nanoseconds</p>
</li>
<li>
<p>Meant to adjust <code>LocalTime</code> (assumes no dates are involved)</p>
</li>
<li>
<p><code>static</code> method calls include construction for:</p>
<div class="ulist">
<ul>
<li>
<p>days</p>
</li>
<li>
<p>hours</p>
</li>
<li>
<p>milliseconds</p>
</li>
<li>
<p>nanoseconds</p>
</li>
</ul>
</div>
</li>
<li>
<p>Can have a side effect depending on which API calls you make</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_duration_exemplified"><code>Duration</code> Exemplified</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Duration</span> <span class="tok-n">duration</span> <span class="tok-o">=</span>  <span class="tok-n">Duration</span><span class="tok-o">.</span><span class="tok-na">ofDays</span><span class="tok-o">(</span><span class="tok-mi">33</span><span class="tok-o">);</span> <span class="tok-c1">//seconds or nanos</span>
<span class="tok-n">Duration</span> <span class="tok-n">duration1</span> <span class="tok-o">=</span> <span class="tok-n">Duration</span><span class="tok-o">.</span><span class="tok-na">ofHours</span><span class="tok-o">(</span><span class="tok-mi">33</span><span class="tok-o">);</span> <span class="tok-c1">//seconds or nanos</span>
<span class="tok-n">Duration</span> <span class="tok-n">duration2</span> <span class="tok-o">=</span> <span class="tok-n">Duration</span><span class="tok-o">.</span><span class="tok-na">ofMillis</span><span class="tok-o">(</span><span class="tok-mi">33</span><span class="tok-o">);</span> <span class="tok-c1">//seconds or nanos</span>
<span class="tok-n">Duration</span> <span class="tok-n">duration3</span> <span class="tok-o">=</span> <span class="tok-n">Duration</span><span class="tok-o">.</span><span class="tok-na">ofMinutes</span><span class="tok-o">(</span><span class="tok-mi">33</span><span class="tok-o">);</span> <span class="tok-c1">//seconds or nanos</span>
<span class="tok-n">Duration</span> <span class="tok-n">duration4</span> <span class="tok-o">=</span> <span class="tok-n">Duration</span><span class="tok-o">.</span><span class="tok-na">ofNanos</span><span class="tok-o">(</span><span class="tok-mi">33</span><span class="tok-o">);</span> <span class="tok-c1">//seconds or nanos</span>
<span class="tok-n">Duration</span> <span class="tok-n">duration5</span> <span class="tok-o">=</span> <span class="tok-n">Duration</span><span class="tok-o">.</span><span class="tok-na">ofSeconds</span><span class="tok-o">(</span><span class="tok-mi">33</span><span class="tok-o">);</span> <span class="tok-c1">//seconds or nanos</span>
<span class="tok-n">Duration</span> <span class="tok-n">duration6</span> <span class="tok-o">=</span> <span class="tok-n">Duration</span><span class="tok-o">.</span><span class="tok-na">between</span><span class="tok-o">(</span><span class="tok-n">LocalDate</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">2012</span><span class="tok-o">,</span> <span class="tok-mi">11</span><span class="tok-o">,</span> <span class="tok-mi">11</span><span class="tok-o">),</span> <span class="tok-n">LocalDate</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">2013</span><span class="tok-o">,</span> <span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">1</span><span class="tok-o">));</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_period"><code>Period</code></h4>
<div class="ulist">
<ul>
<li>
<p>Spans years, months, weeks and days</p>
</li>
<li>
<p>Meant to adjust <code>LocalDate</code> (assumes no times are involved)</p>
</li>
<li>
<p><code>static</code> method calls include construction for:</p>
<div class="ulist">
<ul>
<li>
<p>days</p>
</li>
<li>
<p>months</p>
</li>
<li>
<p>weeks</p>
</li>
<li>
<p>years</p>
</li>
</ul>
</div>
</li>
<li>
<p>Can also have a side effect depending on which API call you make</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_period_exemplified"><code>Period</code> Exemplified</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Period</span> <span class="tok-n">p</span> <span class="tok-o">=</span> <span class="tok-n">Period</span><span class="tok-o">.</span><span class="tok-na">ofDays</span><span class="tok-o">(</span><span class="tok-mi">30</span><span class="tok-o">);</span>
<span class="tok-n">Period</span> <span class="tok-n">p1</span> <span class="tok-o">=</span> <span class="tok-n">Period</span><span class="tok-o">.</span><span class="tok-na">ofMonths</span><span class="tok-o">(</span><span class="tok-mi">12</span><span class="tok-o">);</span>
<span class="tok-n">Period</span> <span class="tok-n">p2</span> <span class="tok-o">=</span> <span class="tok-n">Period</span><span class="tok-o">.</span><span class="tok-na">ofWeeks</span><span class="tok-o">(</span><span class="tok-mi">11</span><span class="tok-o">);</span>
<span class="tok-n">Period</span> <span class="tok-n">p3</span> <span class="tok-o">=</span> <span class="tok-n">Period</span><span class="tok-o">.</span><span class="tok-na">ofYears</span><span class="tok-o">(</span><span class="tok-mi">50</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_shifting_dates_and_time">Shifting Dates and Time</h3>
<div class="ulist">
<ul>
<li>
<p>Any class that derives from <code>Temporal</code> has the ability to add or remove any time using methods:</p>
<div class="ulist">
<ul>
<li>
<p><code>plus</code></p>
</li>
<li>
<p><code>minus</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Changing any one implementation of a <code>Temporal</code> will provide a copy!</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_shifting_localdate">Shifting <code>LocalDate</code></h4>
<div class="ulist">
<ul>
<li>
<p>A shift of <code>LocalDate</code> can be done with:</p>
<div class="ulist">
<ul>
<li>
<p>a <code>TemporalAmount</code> (<code>Period</code>)</p>
</li>
<li>
<p>a <code>long</code> with <code>TemporalUnit</code> (<code>ChronoUnit</code>)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">LocalDate</span> <span class="tok-n">localDate</span> <span class="tok-o">=</span> <span class="tok-n">LocalDate</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">2012</span><span class="tok-o">,</span> <span class="tok-mi">11</span><span class="tok-o">,</span> <span class="tok-mi">23</span><span class="tok-o">);</span>
<span class="tok-n">localDate</span><span class="tok-o">.</span><span class="tok-na">plus</span><span class="tok-o">(</span><span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-n">ChronoUnit</span><span class="tok-o">.</span><span class="tok-na">DAYS</span><span class="tok-o">);</span> <span class="tok-c1">//2012-11-26</span>
<span class="tok-n">localDate</span><span class="tok-o">.</span><span class="tok-na">plus</span><span class="tok-o">(</span><span class="tok-n">Period</span><span class="tok-o">.</span><span class="tok-na">ofDays</span><span class="tok-o">(</span><span class="tok-mi">3</span><span class="tok-o">));</span> <span class="tok-c1">//2012-11-26</span>
<span class="tok-k">try</span> <span class="tok-o">{</span>
   <span class="tok-n">localDate</span><span class="tok-o">.</span><span class="tok-na">plus</span><span class="tok-o">(</span><span class="tok-n">Duration</span><span class="tok-o">.</span><span class="tok-na">ofDays</span><span class="tok-o">(</span><span class="tok-mi">3</span><span class="tok-o">));</span>  <span class="tok-c1">//2012-11-26</span>
<span class="tok-o">}</span> <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">UnsupportedTemporalTypeException</span> <span class="tok-n">e</span><span class="tok-o">)</span> <span class="tok-o">{</span>
   <span class="tok-n">e</span><span class="tok-o">.</span><span class="tok-na">printStackTrace</span><span class="tok-o">();</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_shifting_localtime">Shifting <code>LocalTime</code></h4>
<div class="ulist">
<ul>
<li>
<p>A shift of <code>LocalTime</code> can be done with:</p>
<div class="ulist">
<ul>
<li>
<p>a <code>TemporalAmount</code> (<code>Duration</code>)</p>
</li>
<li>
<p>a <code>long</code> with <code>TemporalUnit</code> (<code>ChronoUnit</code>)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">LocalTime</span> <span class="tok-n">localTime</span> <span class="tok-o">=</span> <span class="tok-n">LocalTime</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">11</span><span class="tok-o">,</span> <span class="tok-mi">20</span><span class="tok-o">,</span> <span class="tok-mi">50</span><span class="tok-o">);</span>
<span class="tok-n">localTime</span><span class="tok-o">.</span><span class="tok-na">plus</span><span class="tok-o">(</span><span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-n">ChronoUnit</span><span class="tok-o">.</span><span class="tok-na">HOURS</span><span class="tok-o">);</span> <span class="tok-c1">//14:20:50</span>
<span class="tok-n">localTime</span><span class="tok-o">.</span><span class="tok-na">plus</span><span class="tok-o">(</span><span class="tok-n">Duration</span><span class="tok-o">.</span><span class="tok-na">ofDays</span><span class="tok-o">(</span><span class="tok-mi">3</span><span class="tok-o">));</span> <span class="tok-c1">//11:20:50</span>
<span class="tok-k">try</span> <span class="tok-o">{</span>
  <span class="tok-n">localTime</span><span class="tok-o">.</span><span class="tok-na">plus</span><span class="tok-o">(</span><span class="tok-n">Period</span><span class="tok-o">.</span><span class="tok-na">ofDays</span><span class="tok-o">(</span><span class="tok-mi">3</span><span class="tok-o">));</span>
<span class="tok-o">}</span> <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">UnsupportedTemporalTypeException</span> <span class="tok-n">e</span><span class="tok-o">)</span> <span class="tok-o">{</span>
  <span class="tok-n">e</span><span class="tok-o">.</span><span class="tok-na">printStackTrace</span><span class="tok-o">();</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_temporal_adjusters">Temporal Adjusters</h3>
<div class="ulist">
<ul>
<li>
<p>New construct</p>
</li>
<li>
<p><code>interface</code> that can be implemented to specialize a time shift</p>
</li>
<li>
<p>Use Case - An object that shifts time based on external factors</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@FunctionalInterface</span>
<span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">TemporalAdjuster</span> <span class="tok-o">{</span>
   <span class="tok-n">Temporal</span> <span class="tok-nf">adjustInto</span><span class="tok-o">(</span><span class="tok-n">Temporal</span> <span class="tok-n">temporal</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_overly_simplified_temporal_adjuster">Overly Simplified Temporal Adjuster</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">TemporalAdjuster</span> <span class="tok-n">fourMinutesFromNow</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">TemporalAdjuster</span><span class="tok-o">()</span> <span class="tok-o">{</span>
   <span class="tok-nd">@Override</span>
   <span class="tok-kd">public</span> <span class="tok-n">Temporal</span> <span class="tok-nf">adjustInto</span><span class="tok-o">(</span><span class="tok-n">Temporal</span> <span class="tok-n">temporal</span><span class="tok-o">)</span> <span class="tok-o">{</span>
       <span class="tok-k">return</span> <span class="tok-n">temporal</span><span class="tok-o">.</span><span class="tok-na">plus</span><span class="tok-o">(</span><span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-n">ChronoUnit</span><span class="tok-o">.</span><span class="tok-na">MINUTES</span><span class="tok-o">);</span>
   <span class="tok-o">}</span>
<span class="tok-o">};</span>

<span class="tok-n">LocalTime</span> <span class="tok-n">localTime</span> <span class="tok-o">=</span> <span class="tok-n">LocalTime</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">12</span><span class="tok-o">,</span> <span class="tok-mi">0</span><span class="tok-o">,</span> <span class="tok-mi">0</span><span class="tok-o">);</span>
<span class="tok-n">localTime</span><span class="tok-o">.</span><span class="tok-na">with</span><span class="tok-o">(</span><span class="tok-n">fourMinutesFromNow</span><span class="tok-o">));</span> <span class="tok-c1">//12:04</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_lambda_capable_temporaladjuster">Lambda Capable <code>TemporalAdjuster</code></h3>
<div class="paragraph">
<p>Remember this?</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@FunctionalInterface</span>
<span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">TemporalAdjuster</span> <span class="tok-o">{</span>
      <span class="tok-n">Temporal</span> <span class="tok-nf">adjustInto</span><span class="tok-o">(</span><span class="tok-n">Temporal</span> <span class="tok-n">temporal</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>That&#8217;s a Java 8 Lambda! Therefore <code>fourMinutesFromNow</code> can now be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">TemporalAdjuster</span> <span class="tok-n">fourMinutesFromNow</span> <span class="tok-o">=</span> <span class="tok-n">temporal</span> <span class="tok-o">-&gt;</span> <span class="tok-n">temporal</span><span class="tok-o">.</span><span class="tok-na">plus</span><span class="tok-o">(</span><span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-n">ChronoUnit</span><span class="tok-o">.</span><span class="tok-na">MINUTES</span><span class="tok-o">);</span>
<span class="tok-n">LocalTime</span> <span class="tok-n">localTime</span> <span class="tok-o">=</span> <span class="tok-n">LocalTime</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">12</span><span class="tok-o">,</span> <span class="tok-mi">0</span><span class="tok-o">,</span> <span class="tok-mi">0</span><span class="tok-o">);</span>
<span class="tok-n">localTime</span><span class="tok-o">.</span><span class="tok-na">with</span><span class="tok-o">(</span><span class="tok-n">fourMinutesFromNow</span><span class="tok-o">));</span> <span class="tok-c1">//12:04</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_refactoring_and_inlining">Refactoring and inlining</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">LocalTime</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">12</span><span class="tok-o">,</span> <span class="tok-mi">0</span><span class="tok-o">,</span> <span class="tok-mi">0</span><span class="tok-o">).</span><span class="tok-na">with</span><span class="tok-o">(</span><span class="tok-n">temporal</span> <span class="tok-o">-&gt;</span> <span class="tok-n">temporal</span><span class="tok-o">.</span><span class="tok-na">plus</span><span class="tok-o">(</span><span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-n">ChronoUnit</span><span class="tok-o">.</span><span class="tok-na">MINUTES</span><span class="tok-o">));</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_parsing_and_formatting">Parsing and Formatting</h3>
<div class="ulist">
<ul>
<li>
<p>Converting dates and times from a <code>String</code> is always important</p>
</li>
<li>
<p><code>java.time.format.DateFormatter</code></p>
</li>
<li>
<p>Immutable and Threadsafe</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_formatting_localdate">Formatting <code>LocalDate</code></h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">DateTimeFormatter</span> <span class="tok-n">dateFormatter</span> <span class="tok-o">=</span> <span class="tok-n">DateTimeFormatter</span><span class="tok-o">.</span><span class="tok-na">ofLocalizedDate</span><span class="tok-o">(</span><span class="tok-n">FormatStyle</span><span class="tok-o">.</span><span class="tok-na">MEDIUM</span><span class="tok-o">);</span>
<span class="tok-n">dateFormatter</span><span class="tok-o">.</span><span class="tok-na">format</span><span class="tok-o">(</span><span class="tok-n">LocalDate</span><span class="tok-o">.</span><span class="tok-na">now</span><span class="tok-o">());</span> <span class="tok-c1">// Jan. 19, 2014</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_formatting_localtime">Formatting <code>LocalTime</code></h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">DateTimeFormatter</span> <span class="tok-n">timeFormatter</span> <span class="tok-o">=</span>
   <span class="tok-n">DateTimeFormatter</span><span class="tok-o">.</span><span class="tok-na">ofLocalizedTime</span><span class="tok-o">(</span><span class="tok-n">FormatStyle</span><span class="tok-o">.</span><span class="tok-na">MEDIUM</span><span class="tok-o">);</span>

<span class="tok-n">timeFormatter</span><span class="tok-o">.</span><span class="tok-na">format</span><span class="tok-o">(</span><span class="tok-n">LocalTime</span><span class="tok-o">.</span><span class="tok-na">now</span><span class="tok-o">()));</span> <span class="tok-c1">//3:01:48 PM</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_formatting_localdatetime">Formatting <code>LocalDateTime</code></h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">DateTimeFormatter</span> <span class="tok-n">dateTimeFormatter</span> <span class="tok-o">=</span>
   <span class="tok-n">DateTimeFormatter</span><span class="tok-o">.</span><span class="tok-na">ofLocalizedDateTime</span><span class="tok-o">(</span><span class="tok-n">FormatStyle</span><span class="tok-o">.</span><span class="tok-na">MEDIUM</span><span class="tok-o">,</span> <span class="tok-n">FormatStyle</span><span class="tok-o">.</span><span class="tok-na">SHORT</span><span class="tok-o">);</span>

<span class="tok-n">dateTimeFormatter</span><span class="tok-o">.</span><span class="tok-na">format</span><span class="tok-o">(</span><span class="tok-n">LocalDateTime</span><span class="tok-o">.</span><span class="tok-na">now</span><span class="tok-o">()));</span> <span class="tok-c1">// Jan. 19, 2014 3:01 PM</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_formatting_customized_patterns">Formatting Customized Patterns</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">DateTimeFormatter</span> <span class="tok-n">obscurePattern</span> <span class="tok-o">=</span>
   <span class="tok-n">DateTimeFormatter</span><span class="tok-o">.</span><span class="tok-na">ofPattern</span><span class="tok-o">(</span><span class="tok-s">&quot;MMMM dd, yyyy &#39;(In Time Zone: &#39;VV&#39;)&#39;&quot;</span><span class="tok-o">);</span>
<span class="tok-n">ZonedDateTime</span> <span class="tok-n">zonedNow</span> <span class="tok-o">=</span> <span class="tok-n">ZonedDateTime</span><span class="tok-o">.</span><span class="tok-na">now</span><span class="tok-o">();</span>

<span class="tok-n">obscurePattern</span><span class="tok-o">.</span><span class="tok-na">format</span><span class="tok-o">(</span><span class="tok-n">zonedNow</span><span class="tok-o">);</span> <span class="tok-c1">//January 19, 2014 (In Time Zone: America/Denver)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_formatting_with_localization">Formatting with Localization</h3>
<div class="ulist">
<ul>
<li>
<p>Localization using <code>java.util.Locale</code> is available for:</p>
<div class="ulist">
<ul>
<li>
<p><code>ofLocalizedDate</code></p>
</li>
<li>
<p><code>ofLocalizedTime</code></p>
</li>
<li>
<p><code>ofLocalizedDateTime</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">ZonedDateTime</span> <span class="tok-n">zonedDateTime</span> <span class="tok-o">=</span> <span class="tok-n">ZonedDateTime</span><span class="tok-o">.</span><span class="tok-na">now</span><span class="tok-o">(</span><span class="tok-n">ZoneId</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-s">&quot;Europe/Paris&quot;</span><span class="tok-o">));</span>

<span class="tok-n">DateTimeFormatter</span> <span class="tok-n">longDateTimeFormatter</span> <span class="tok-o">=</span>
<span class="tok-n">DateTimeFormatter</span><span class="tok-o">.</span><span class="tok-na">ofLocalizedDateTime</span><span class="tok-o">(</span><span class="tok-n">FormatStyle</span><span class="tok-o">.</span><span class="tok-na">FULL</span><span class="tok-o">,</span> <span class="tok-n">FormatStyle</span><span class="tok-o">.</span><span class="tok-na">FULL</span><span class="tok-o">).</span><span class="tok-na">withLocale</span><span class="tok-o">(</span><span class="tok-n">Locale</span><span class="tok-o">.</span><span class="tok-na">FRENCH</span><span class="tok-o">);</span>
<span class="tok-n">longDateTimeFormatter</span><span class="tok-o">.</span><span class="tok-na">getLocale</span><span class="tok-o">();</span> <span class="tok-c1">//fr</span>
<span class="tok-n">longDateTimeFormatter</span><span class="tok-o">.</span><span class="tok-na">format</span><span class="tok-o">(</span><span class="tok-n">zonedDateTime</span><span class="tok-o">);</span> <span class="tok-c1">//samedi 19 janvier 2014 00 h 00 CET</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_shifting_time_zones">Shifting Time Zones</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">LocalDateTime</span> <span class="tok-n">localDateTime</span> <span class="tok-o">=</span> <span class="tok-n">LocalDateTime</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">1982</span><span class="tok-o">,</span> <span class="tok-n">Month</span><span class="tok-o">.</span><span class="tok-na">APRIL</span><span class="tok-o">,</span> <span class="tok-mi">17</span><span class="tok-o">,</span> <span class="tok-mi">14</span><span class="tok-o">,</span> <span class="tok-mi">11</span><span class="tok-o">);</span>
<span class="tok-n">ZonedDateTime</span> <span class="tok-n">jakartaTime</span> <span class="tok-o">=</span> <span class="tok-n">ZonedDateTime</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-n">localDateTime</span><span class="tok-o">,</span> <span class="tok-n">ZoneId</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-s">&quot;Asia/Jakarta&quot;</span><span class="tok-o">));</span>
<span class="tok-n">jakartaTime</span><span class="tok-o">.</span><span class="tok-na">withZoneSameInstant</span><span class="tok-o">(</span><span class="tok-n">ZoneId</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-s">&quot;America/Los_Angeles&quot;</span><span class="tok-o">)));</span> <span class="tok-c1">//1982-04-16T23:11-08:00[America/Los_Angeles]</span>
<span class="tok-n">jakartaTime</span><span class="tok-o">.</span><span class="tok-na">withZoneSameLocal</span><span class="tok-o">(</span><span class="tok-n">ZoneId</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-s">&quot;America/New_York&quot;</span><span class="tok-o">)));</span> <span class="tok-c1">//1982-04-17T14:11-05:00[America/New_York]</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_temporal_querying">Temporal Querying</h3>
<div class="ulist">
<ul>
<li>
<p>Process of asking information about a <code>TemporalAccessor</code></p>
<div class="ulist">
<ul>
<li>
<p><code>LocalDate</code></p>
</li>
<li>
<p><code>LocalTime</code></p>
</li>
<li>
<p><code>LocalDateTime</code></p>
</li>
<li>
<p><code>ZonedDateTime</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@FunctionalInterface</span>
<span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">TemporalQuery</span><span class="tok-o">&lt;</span><span class="tok-n">R</span><span class="tok-o">&gt;</span> <span class="tok-o">{</span>
    <span class="tok-n">R</span> <span class="tok-nf">queryFrom</span><span class="tok-o">(</span><span class="tok-n">TemporalAccessor</span> <span class="tok-n">temporal</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_a_festive_example">A Festive Example</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@Test</span>
<span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">testDaysBeforeChristmas</span><span class="tok-o">()</span> <span class="tok-o">{</span>
    <span class="tok-n">TemporalQuery</span><span class="tok-o">&lt;</span><span class="tok-n">Long</span><span class="tok-o">&gt;</span> <span class="tok-n">daysBeforeChristmas</span> <span class="tok-o">=</span> <span class="tok-n">temporal</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>
        <span class="tok-n">LocalDate</span> <span class="tok-n">localDate</span> <span class="tok-o">=</span> <span class="tok-n">LocalDate</span><span class="tok-o">.</span><span class="tok-na">from</span><span class="tok-o">(</span><span class="tok-n">temporal</span><span class="tok-o">);</span>
        <span class="tok-kt">long</span> <span class="tok-n">d</span> <span class="tok-o">=</span> <span class="tok-n">ChronoUnit</span><span class="tok-o">.</span><span class="tok-na">DAYS</span><span class="tok-o">.</span><span class="tok-na">between</span><span class="tok-o">(</span><span class="tok-n">localDate</span><span class="tok-o">,</span>
                <span class="tok-n">LocalDate</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-n">localDate</span><span class="tok-o">.</span><span class="tok-na">getYear</span><span class="tok-o">(),</span> <span class="tok-mi">12</span><span class="tok-o">,</span> <span class="tok-mi">25</span><span class="tok-o">));</span>
        <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">d</span> <span class="tok-o">&gt;=</span> <span class="tok-mi">0</span><span class="tok-o">)</span> <span class="tok-k">return</span> <span class="tok-n">d</span><span class="tok-o">;</span>
        <span class="tok-k">return</span> <span class="tok-n">ChronoUnit</span><span class="tok-o">.</span><span class="tok-na">DAYS</span><span class="tok-o">.</span><span class="tok-na">between</span>
                <span class="tok-o">(</span><span class="tok-n">localDate</span><span class="tok-o">,</span> <span class="tok-n">LocalDate</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-n">localDate</span><span class="tok-o">.</span><span class="tok-na">getYear</span><span class="tok-o">()</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">12</span><span class="tok-o">,</span> <span class="tok-mi">25</span><span class="tok-o">));</span>
    <span class="tok-o">};</span>

    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">LocalDate</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">2013</span><span class="tok-o">,</span> <span class="tok-mi">12</span><span class="tok-o">,</span> <span class="tok-mi">26</span><span class="tok-o">).</span><span class="tok-na">query</span><span class="tok-o">(</span><span class="tok-n">daysBeforeChristmas</span><span class="tok-o">));</span> <span class="tok-c1">//364</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_simple_parsing_example">Simple Parsing Example</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">DateTimeFormatter</span> <span class="tok-n">dateFormatter</span> <span class="tok-o">=</span> <span class="tok-n">DateTimeFormatter</span><span class="tok-o">.</span><span class="tok-na">ofLocalizedDate</span><span class="tok-o">(</span><span class="tok-n">FormatStyle</span><span class="tok-o">.</span><span class="tok-na">MEDIUM</span><span class="tok-o">);</span>
<span class="tok-n">dateFormatter</span><span class="tok-o">.</span><span class="tok-na">parse</span><span class="tok-o">(</span><span class="tok-s">&quot;Jan 19, 2014&quot;</span><span class="tok-o">));</span> <span class="tok-c1">// {}, ISO resolved to 2014-01-19</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Parses to <code>java.time.format.Parsed</code> which is rather useless</p>
</li>
<li>
<p>The more effective call is to <code>parse(CharSequence, TemporalQuery)</code></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_first_attempt">First Attempt</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">TemporalQuery</span><span class="tok-o">&lt;</span><span class="tok-n">LocalDate</span><span class="tok-o">&gt;</span> <span class="tok-n">localDateTemporalQuery</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">TemporalQuery</span><span class="tok-o">&lt;</span><span class="tok-n">LocalDate</span><span class="tok-o">&gt;()</span> <span class="tok-o">{</span>
   <span class="tok-nd">@Override</span>
   <span class="tok-kd">public</span> <span class="tok-n">LocalDate</span> <span class="tok-nf">queryFrom</span><span class="tok-o">(</span><span class="tok-n">TemporalAccessor</span> <span class="tok-n">temporal</span><span class="tok-o">)</span> <span class="tok-o">{</span>
       <span class="tok-k">return</span> <span class="tok-n">LocalDate</span><span class="tok-o">.</span><span class="tok-na">from</span><span class="tok-o">(</span><span class="tok-n">temporal</span><span class="tok-o">);</span>
   <span class="tok-o">}</span>
<span class="tok-o">};</span>

<span class="tok-n">dateFormatter</span><span class="tok-o">.</span><span class="tok-na">parse</span><span class="tok-o">(</span><span class="tok-s">&quot;Jan 19, 2014&quot;</span><span class="tok-o">,</span> <span class="tok-n">localDateTemporalQuery</span><span class="tok-o">);</span> <span class="tok-c1">//2014-01-19</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_second_attempt">Second Attempt</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">dateFormatter</span><span class="tok-o">.</span><span class="tok-na">parse</span><span class="tok-o">(</span><span class="tok-s">&quot;Jan 19, 2014&quot;</span><span class="tok-o">,</span> <span class="tok-n">temporal</span> <span class="tok-o">-&gt;</span> <span class="tok-n">LocalDate</span><span class="tok-o">.</span><span class="tok-na">from</span><span class="tok-o">(</span><span class="tok-n">temporal</span><span class="tok-o">));</span> <span class="tok-c1">//2014-01-19</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_last_attempt">Last attempt</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">dateFormatter</span><span class="tok-o">.</span><span class="tok-na">parse</span><span class="tok-o">(</span><span class="tok-s">&quot;Jan 19, 2014&quot;</span><span class="tok-o">,</span> <span class="tok-n">LocalDate</span><span class="tok-o">::</span><span class="tok-n">from</span><span class="tok-o">);</span> <span class="tok-c1">// Jan 19, 2014</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_interoperabilility_with_legacy_code">Interoperabilility with Legacy Code</h3>
<div class="ulist">
<ul>
<li>
<p><code>calendar.toInstant()</code> - converts the Calendar object to an Instant.</p>
</li>
<li>
<p><code>gregorianCalendar.toZonedDateTime()</code> - converts a GregorianCalendar instance to a ZonedDateTime.</p>
</li>
<li>
<p><code>gregorianCalendar.from(ZonedDateTime)</code> - creates a GregorianCalendar object using the default locale from a ZonedDateTime instance.</p>
</li>
<li>
<p><code>date.from(Instant)</code> - creates a Date object from an Instant.</p>
</li>
<li>
<p><code>date.toInstant()</code> - converts a Date object to an Instant.</p>
</li>
<li>
<p><code>timeZone.toZoneId()</code> - converts a TimeZone object to a ZoneId.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">GregorianCalendar</span> <span class="tok-n">gregorianCalendar</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">GregorianCalendar</span><span class="tok-o">();</span>
<span class="tok-n">gregorianCalendar</span><span class="tok-o">.</span><span class="tok-na">toZonedDateTime</span><span class="tok-o">();</span></code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2 slide_section">
<h3 id="_lab_date_time">Lab: Date Time</h3>
<div class="paragraph">
<p><strong>Step 1:</strong> Open <em>src/test/java/com.xycorp.exercises.datetime.DateTimeExercises</em></p>
</div>
<div class="paragraph">
<p><strong>Step 2:</strong> In the test <code>testIterateWithThreeDays</code>, initialize the current date time and and return the next three days
using functional programming. For example, if today is 2019-10-08T16:05:11 then return a collection with:</p>
</div>
<div class="paragraph">
<p>2019-10-08T16:05:11<br>
2019-10-09T16:05:11<br>
2019-10-10T16:05:11<br></p>
</div>
<div class="paragraph">
<p><strong>Step 3:</strong> In the test <code>testWhatDateTimeIsItInBuenosAiresArgentina</code>, display the current time in Buenos Aires Argentina.</p>
</div>
<div class="paragraph">
<p><strong>Step 4:</strong> In the test <code>testFindAllAmericasTimeZones</code>, find all the time zones in the "America", remove the <code>America</code> from the
Time Zone identifier and sort by the name of the time zone.</p>
</div>
<div class="paragraph">
<p><strong>Step 5:</strong> In the test <code>testFindAllTimeZonesInAntarctica</code>, find all the Antarctica Time Zones,
 sort by their distance from UTC in ascending order, and display nicely the offset, the zone,
 and whether it adheres to Daylight Saving Time or not.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_generics">Generics</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Generics</p>
</li>
<li>
<p>Get Put Principles</p>
</li>
<li>
<p>Wildcards</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_static_vs_dynamic">Static vs. Dynamic</h3>
<div class="imageblock">
<div class="content">
<img src="./images/static_dynamic.jpg" alt="static dynamic" width="40%" height="40%">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_generics_2">Generics</h3>
<div class="ulist">
<ul>
<li>
<p>Add stability to your code by making more of your bugs detectable at <em>compile time</em></p>
</li>
<li>
<p>Enable types (classes and interfaces) to be parameters when defining classes, interfaces and methods.</p>
</li>
<li>
<p>Provide a way for you to re-use the same code with different inputs, requiring less code</p>
</li>
<li>
<p>Eliminates Casting</p>
</li>
<li>
<p>One of the harder concepts in Java Programming since JDK 5.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_effective_java_item_26">Effective Java Item 26</h3>
<div class="imageblock left">
<div class="content">
<img src="./images/effective_java.jpeg" alt="effective java">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/item26.png" alt="item26">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_generic_terms">Generic Terms</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Term</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parameterized Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List&lt;String&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actual Type Parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Generic Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List&lt;E&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Formal Type Parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>E</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unbounded wildcard type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List&lt;?&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Raw Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bounded Type Parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;E extends Number&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Recursive Type Bound</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;T extends Comparable&lt;T&gt;&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bounded Wildcard Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List&lt;? extends Number&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Generic Method</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>static &lt;E&gt; List&lt;E&gt; asList(E[] a)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type Token</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Integer.class</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_before_generics">Before Generics</h3>
<div class="ulist">
<ul>
<li>
<p>Terrible verbosity</p>
</li>
<li>
<p>Extensive Casting</p>
</li>
<li>
<p>Raw Type</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.generics.GenericsBasicsTest#testRawTypes</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span> <span class="tok-n">list</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">ArrayList</span><span class="tok-o">();</span>
<span class="tok-n">list</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-s">&quot;Foo&quot;</span><span class="tok-o">);</span>
<span class="tok-n">list</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-mi">4</span><span class="tok-o">);</span>
<span class="tok-n">list</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-mf">10.0</span><span class="tok-o">);</span>
<span class="tok-n">Object</span> <span class="tok-n">object</span> <span class="tok-o">=</span> <span class="tok-n">list</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">);</span> <span class="tok-c1">//Object</span>
<span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">object</span> <span class="tok-k">instanceof</span> <span class="tok-n">String</span><span class="tok-o">)</span> <span class="tok-o">{</span>
    <span class="tok-n">String</span> <span class="tok-n">string</span> <span class="tok-o">=</span> <span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">)</span> <span class="tok-n">object</span><span class="tok-o">;</span>
    <span class="tok-n">string</span><span class="tok-o">.</span><span class="tok-na">substring</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">,</span> <span class="tok-mi">1</span><span class="tok-o">);</span> <span class="tok-c1">//Substring belongs to String</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_effective_java_item_23">Effective Java Item 23</h3>
<div class="imageblock left">
<div class="content">
<img src="./images/effective_java.jpeg" alt="effective java">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/item23.png" alt="item23">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_before_generics_another_example">Before Generics Another Example</h3>
<div class="paragraph">
<p>Another example of extensive generics</p>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.generics.GenericsBasicsTest#testAnotherWithCastingWithRawTypes</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span> <span class="tok-n">words</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">ArrayList</span><span class="tok-o">();</span> <span class="tok-c1">//raw type</span>
<span class="tok-n">words</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-s">&quot;Hello &quot;</span><span class="tok-o">);</span>
<span class="tok-n">words</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-s">&quot;world!&quot;</span><span class="tok-o">);</span>
<span class="tok-n">String</span> <span class="tok-n">s</span> <span class="tok-o">=</span> <span class="tok-o">((</span><span class="tok-n">String</span><span class="tok-o">)</span> <span class="tok-n">words</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">)).</span><span class="tok-na">substring</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">)</span> <span class="tok-o">+</span>
        <span class="tok-o">((</span><span class="tok-n">String</span><span class="tok-o">)</span> <span class="tok-n">words</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">)).</span><span class="tok-na">substring</span><span class="tok-o">(</span><span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">);</span>
<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">s</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_eliminating_casting">Eliminating Casting</h3>
<div class="paragraph">
<p>The previous examples looks like this with generics</p>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.generics.GenericsBasicsTest#testEliminationOfCasting</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">words</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">ArrayList</span><span class="tok-o">&lt;&gt;();</span> <span class="tok-c1">//JDK 5- 10</span>
<span class="tok-n">words</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-s">&quot;Hello &quot;</span><span class="tok-o">);</span>
<span class="tok-n">words</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-s">&quot;world!&quot;</span><span class="tok-o">);</span>
<span class="tok-n">String</span> <span class="tok-n">s</span> <span class="tok-o">=</span> <span class="tok-n">words</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">).</span><span class="tok-na">substring</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">)</span> <span class="tok-o">+</span>
        <span class="tok-n">words</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">).</span><span class="tok-na">substring</span><span class="tok-o">(</span><span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">);</span>
<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">s</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_diamond_operator">Diamond Operator</h3>
<div class="paragraph">
<p>In Java SE 7, you can substitute the parameterized type of the
constructor with an empty set of type parameters (<code>&lt;&gt;</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">list</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">ArrayList</span><span class="tok-o">&lt;&gt;();</span>
<span class="tok-n">list</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-s">&quot;hello&quot;</span><span class="tok-o">);</span>
<span class="tok-n">String</span> <span class="tok-n">s</span> <span class="tok-o">=</span> <span class="tok-n">list</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">);</span>   <span class="tok-c1">// no cast</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_boxing_before_generics">Boxing Before Generics</h3>
<div class="ulist">
<ul>
<li>
<p>Before Generics there was explicit changing between primitives and <code>Object</code></p>
</li>
<li>
<p>An Object was required before putting it into a <code>Collection</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.generics.GenericsBasicsTest#testAutomaticBoxingOfPrimitivesBefore</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">ints</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">ArrayList</span><span class="tok-o">&lt;&gt;();</span>
<span class="tok-n">ints</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Integer</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">));</span>
<span class="tok-kt">int</span> <span class="tok-n">n</span> <span class="tok-o">=</span> <span class="tok-n">ints</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">).</span><span class="tok-na">intValue</span><span class="tok-o">();</span>
<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">n</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_boxing_after_generics">Boxing After Generics</h3>
<div class="ulist">
<ul>
<li>
<p>Cleaner alternative</p>
</li>
<li>
<p>No casting</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">ints</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">ArrayList</span><span class="tok-o">&lt;&gt;();</span>
<span class="tok-n">ints</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">);</span>
<span class="tok-kt">int</span> <span class="tok-n">n</span> <span class="tok-o">=</span> <span class="tok-n">ints</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">);</span>
<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">n</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_container_of_a_container">Container of a Container</h3>
<div class="ulist">
<ul>
<li>
<p>Generics keep the type, and the type system that the right type is returned</p>
</li>
<li>
<p>This allow the type system to aid us in programming</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;&gt;</span> <span class="tok-n">ints</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">ArrayList</span><span class="tok-o">&lt;&gt;();</span>
<span class="tok-n">ints</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">10</span><span class="tok-o">,</span> <span class="tok-mi">11</span><span class="tok-o">,</span> <span class="tok-mi">12</span><span class="tok-o">));</span>
<span class="tok-n">ints</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">9</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">42</span><span class="tok-o">));</span>
<span class="tok-n">Integer</span> <span class="tok-n">actual</span> <span class="tok-o">=</span> <span class="tok-n">ints</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">).</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_using_generics_with_static_methods">Using Generics with static methods</h3>
<div class="ulist">
<ul>
<li>
<p>When needed apply the generic before the method</p>
</li>
<li>
<p>This adds clarity to what specific type you need</p>
</li>
<li>
<p>Overrides the type inferencer</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.generics.GenericsBasicsTest#testOverrideStaticGenericTypes</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Number</span> <span class="tok-n">n</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.&lt;</span><span class="tok-n">Number</span><span class="tok-o">&gt;</span><span class="tok-n">asList</span><span class="tok-o">(</span><span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">6</span><span class="tok-o">,</span> <span class="tok-mi">10</span><span class="tok-o">).</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_type_erasure">Type Erasure</h3>
<div class="ulist">
<ul>
<li>
<p>Types are erased at runtime</p>
</li>
<li>
<p><code>List&lt;String&gt;</code> is just <code>List</code></p>
</li>
<li>
<p><code>List&lt;Integer&gt;</code> is just <code>List</code></p>
</li>
<li>
<p>Generic types are non-reifiable, meaning they are not fully available at runtime</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.generics.GenericsBasicsTest#testErasure</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">format</span><span class="tok-o">(</span><span class="tok-s">&quot;Runtime type of ArrayList&lt;String&gt;: %s\n&quot;</span><span class="tok-o">,</span>
        <span class="tok-k">new</span> <span class="tok-n">ArrayList</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;().</span><span class="tok-na">getClass</span><span class="tok-o">());</span>
<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">format</span><span class="tok-o">(</span><span class="tok-s">&quot;Runtime type of ArrayList&lt;Long&gt;  : %s\n&quot;</span><span class="tok-o">,</span>
        <span class="tok-k">new</span> <span class="tok-n">ArrayList</span><span class="tok-o">&lt;</span><span class="tok-n">Long</span><span class="tok-o">&gt;().</span><span class="tok-na">getClass</span><span class="tok-o">());</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Results In:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code><span></span>Runtime type of ArrayList&lt;String&gt;: class java.util.ArrayList
Runtime type of ArrayList&lt;Long&gt;  : class java.util.ArrayList</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_assignment_of_generic_types">Assignment of Generic Types</h3>
<div class="ulist">
<ul>
<li>
<p>As default, <code>List&lt;Integer&gt;</code> can only be assigned to a <code>List&lt;Integer&gt;</code></p>
</li>
<li>
<p>Special Consideration for assignments where <code>List&lt;Integer&gt;</code> gets assigned a <code>List&lt;Object&gt;</code></p>
</li>
<li>
<p>&#8230;&#8203;or the other way around: <code>List&lt;Object&gt;</code> gets assigned a <code>List&lt;Integer&gt;</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_variant_relationships">Variant Relationships</h3>
<div class="imageblock">
<div class="content">
<img src="./images/variantrelationships.png" alt="variantrelationships">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_variant_relationships_2">Variant Relationships</h3>
<div class="imageblock">
<div class="content">
<img src="./images/variantrelationships2.png" alt="variantrelationships2">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_method_return_types_vs_parameters">Method Return Types Vs. Parameters</h3>
<div class="imageblock">
<div class="content">
<img src="./images/methodgetput.png" alt="methodgetput">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_pecs">PECS</h3>
<div class="paragraph">
<p><strong>Producer</strong>-<code>extends</code><br>
<strong>Consumer</strong>-<code>super</code></p>
</div>
</div>
<div class="sect2">
<h3 id="_consumer_and_producer">Consumer and Producer</h3>
<div class="imageblock">
<div class="content">
<img src="./images/consumerproducer.png" alt="consumerproducer">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_consumer_and_producer_2">Consumer and Producer</h3>
<div class="imageblock">
<div class="content">
<img src="./images/consumerproducercode.png" alt="consumerproducercode">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_graph_relationship">Graph Relationship</h3>
<div class="imageblock">
<div class="content">
<img src="./images/graphhierarchy.png" alt="graphhierarchy">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_invariant">Invariant</h3>
<div class="imageblock">
<div class="content">
<img src="./images/invariant.png" alt="invariant">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_invariant_chart">Invariant Chart</h3>
<div class="imageblock">
<div class="content">
<img src="./images/invariant_chart.png" alt="invariant chart">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_invariant_american_method_parameter">Invariant <code>American</code> Method Parameter</h3>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.generics.InvariantTest#processInvariantList</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">processInvariantList</span><span class="tok-o">(</span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">American</span><span class="tok-o">&gt;</span> <span class="tok-n">americans</span><span class="tok-o">)</span> <span class="tok-o">{</span>
    <span class="tok-n">Object</span> <span class="tok-n">object</span> <span class="tok-o">=</span> <span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">);</span>
    <span class="tok-n">Person</span> <span class="tok-n">person</span> <span class="tok-o">=</span> <span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">);</span>
    <span class="tok-n">NorthAmerican</span> <span class="tok-n">northAmerican</span> <span class="tok-o">=</span> <span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">);</span>
    <span class="tok-n">American</span> <span class="tok-n">american</span> <span class="tok-o">=</span> <span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">);</span>
    <span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Bostonian</span><span class="tok-o">());</span>
    <span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Minnesotan</span><span class="tok-o">());</span>
    <span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-kc">null</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following will not work:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Object</span><span class="tok-o">());</span>
<span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">NorthAmerican</span><span class="tok-o">());</span>
<span class="tok-n">Massachusettsan</span> <span class="tok-n">massachusettsan</span> <span class="tok-o">=</span> <span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">);</span>
<span class="tok-n">Bostonian</span> <span class="tok-n">bostonian</span> <span class="tok-o">=</span> <span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">);</span>
<span class="tok-n">Madisonian</span> <span class="tok-n">madisonian</span> <span class="tok-o">=</span> <span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_invariant_american_assignment">Invariant <code>American</code> Assignment</h3>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.generics.InvariantTest#testInvariantAssignment</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">American</span><span class="tok-o">&gt;</span> <span class="tok-n">americans</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">ArrayList</span><span class="tok-o">&lt;</span><span class="tok-n">American</span><span class="tok-o">&gt;();</span>
<span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">American</span><span class="tok-o">());</span>
<span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Massachusettsan</span><span class="tok-o">());</span>
<span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Bostonian</span><span class="tok-o">());</span>
<span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Milwaukeean</span><span class="tok-o">());</span>

<span class="tok-n">Object</span> <span class="tok-n">object</span> <span class="tok-o">=</span> <span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">);</span>
<span class="tok-n">Person</span> <span class="tok-n">person</span> <span class="tok-o">=</span> <span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">);</span>
<span class="tok-n">NorthAmerican</span> <span class="tok-n">northAmerican</span> <span class="tok-o">=</span> <span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">);</span>
<span class="tok-n">American</span> <span class="tok-n">american</span> <span class="tok-o">=</span> <span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following will not work:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Object</span><span class="tok-o">());</span>
<span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">NorthAmerican</span><span class="tok-o">());</span>
<span class="tok-n">Massachusettsan</span> <span class="tok-n">massachusettsan</span> <span class="tok-o">=</span> <span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">);</span>
<span class="tok-n">Bostonian</span> <span class="tok-n">bostonian</span> <span class="tok-o">=</span> <span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">);</span>
<span class="tok-n">Madisonian</span> <span class="tok-n">madisonian</span> <span class="tok-o">=</span> <span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_covariant">Covariant</h3>
<div class="imageblock">
<div class="content">
<img src="./images/covariant.png" alt="covariant">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_covariant_chart_extends_american_with_stlouisan_container">Covariant Chart <code>&lt;? extends American&gt;</code> with <code>StLouisan</code> Container</h3>
<div class="imageblock">
<div class="content">
<img src="./images/covariant_chart.png" alt="covariant chart">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_covariant_chart_extends_person_with_missourian_container">Covariant Chart <code>&lt;? extends Person&gt;</code> with <code>Missourian</code> Container</h3>
<div class="imageblock">
<div class="content">
<img src="./images/covariant_chart2.png" alt="covariant chart2">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_covariant_chart_extends_object_with_stlouisan_container">Covariant Chart <code>&lt;? extends Object&gt;</code> with <code>StLouisan</code> Container</h3>
<div class="imageblock">
<div class="content">
<img src="./images/covariant_chart3.png" alt="covariant chart3">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_covariant_chart_with_stlouisan_container">Covariant Chart <code>&lt;?&gt;</code> with <code>StLouisan</code> Container</h3>
<div class="imageblock">
<div class="content">
<img src="./images/covariant_chart4.png" alt="covariant chart4">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_covariant_northamerican_method_parameter">Covariant <code>NorthAmerican</code> Method Parameter</h3>
<div class="listingblock">
<div class="title">/src/test/java/com.xyzcorp.demos.generics.CovariantTest#processCovariantList</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">processCovariantList</span><span class="tok-o">(</span><span class="tok-n">List</span><span class="tok-o">&lt;?</span> <span class="tok-kd">extends</span> <span class="tok-n">NorthAmerican</span><span class="tok-o">&gt;</span> <span class="tok-n">northAmericansOrLower</span><span class="tok-o">)</span> <span class="tok-o">{</span>
   <span class="tok-n">Object</span> <span class="tok-n">object</span> <span class="tok-o">=</span> <span class="tok-n">northAmericansOrLower</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">);</span>
   <span class="tok-n">Person</span> <span class="tok-n">person</span> <span class="tok-o">=</span> <span class="tok-n">northAmericansOrLower</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">);</span>
   <span class="tok-n">NorthAmerican</span> <span class="tok-n">northAmerican</span> <span class="tok-o">=</span> <span class="tok-n">northAmericansOrLower</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">);</span>
   <span class="tok-n">northAmericansOrLower</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-kc">null</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following will not work:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">northAmericansOrLower</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Object</span><span class="tok-o">());</span>
<span class="tok-n">northAmericansOrLower</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">NorthAmerican</span><span class="tok-o">());</span>
<span class="tok-n">northAmericansOrLower</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">American</span><span class="tok-o">());</span>
<span class="tok-n">northAmericansOrLower</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Minneapolitan</span><span class="tok-o">());</span>
<span class="tok-n">northAmericansOrLower</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">NewMexican</span><span class="tok-o">());</span>
<span class="tok-n">northAmericansOrLower</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Bostonian</span><span class="tok-o">());</span>
<span class="tok-n">northAmericansOrLower</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">NorthAmerican</span><span class="tok-o">());</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_covariant_north_american_assignment">Covariant <code>North American</code> Assignment</h3>
<div class="listingblock">
<div class="title">/src/test/java/com.xyzcorp.demos.generics.CovariantTest#testCovariantAssignment</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;?</span> <span class="tok-kd">extends</span> <span class="tok-n">American</span><span class="tok-o">&gt;</span> <span class="tok-n">americansOrLower</span> <span class="tok-o">=</span> <span class="tok-n">bostonians</span><span class="tok-o">;</span>
<span class="tok-n">Object</span> <span class="tok-n">object</span> <span class="tok-o">=</span> <span class="tok-n">americansOrLower</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">);</span>
<span class="tok-n">Person</span> <span class="tok-n">person</span> <span class="tok-o">=</span> <span class="tok-n">americansOrLower</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">);</span>
<span class="tok-n">NorthAmerican</span> <span class="tok-n">northAmerican</span> <span class="tok-o">=</span> <span class="tok-n">americansOrLower</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">);</span>
<span class="tok-n">American</span> <span class="tok-n">american</span> <span class="tok-o">=</span> <span class="tok-n">americansOrLower</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following will not work:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Massachusettsan</span> <span class="tok-n">massachusettsan</span><span class="tok-o">=</span> <span class="tok-n">americansOrLower</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">);</span>
<span class="tok-n">Bostonian</span> <span class="tok-n">bostonian</span> <span class="tok-o">=</span> <span class="tok-n">americansOrLower</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">);</span>
<span class="tok-n">americansOrLower</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Object</span><span class="tok-o">());</span>
<span class="tok-n">americansOrLower</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Person</span><span class="tok-o">());</span>
<span class="tok-n">americansOrLower</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">NorthAmerican</span><span class="tok-o">());</span>
<span class="tok-n">americansOrLower</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">American</span><span class="tok-o">());</span>
<span class="tok-n">americansOrLower</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Massachusettsan</span><span class="tok-o">());</span>
<span class="tok-n">americansOrLower</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Bostonian</span><span class="tok-o">());</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_covariant_object_method_parameter">Covariant <code>Object</code> Method Parameter</h3>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.generics.CovariantTest#processUnbounded</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">processUnbounded</span><span class="tok-o">(</span><span class="tok-n">List</span><span class="tok-o">&lt;?&gt;</span> <span class="tok-n">objects</span><span class="tok-o">)</span> <span class="tok-o">{</span>
  <span class="tok-n">Object</span> <span class="tok-n">o</span> <span class="tok-o">=</span> <span class="tok-n">objects</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">);</span>
  <span class="tok-n">objects</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-kc">null</span><span class="tok-o">);</span>
  <span class="tok-n">objects</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-kc">null</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/contravariance.png" alt="contravariance">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_contravariant_super_american_with_person_container">Contravariant <code>&lt;? super American&gt;</code> with <code>Person</code> Container</h3>
<div class="imageblock">
<div class="content">
<img src="./images/contravariant_chart.png" alt="contravariant chart">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_contravariant_chart_super_stlouisan_with_person_container">Contravariant Chart <code>&lt;? super StLouisan&gt;</code> with <code>Person</code> Container</h3>
<div class="imageblock">
<div class="content">
<img src="./images/contravariant_chart2.png" alt="contravariant chart2">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_contravariant_chart_super_stlouisan_with_american_container">Contravariant Chart <code>&lt;? super StLouisan&gt;</code> with <code>American</code> Container</h3>
<div class="imageblock">
<div class="content">
<img src="./images/contravariant_chart3.png" alt="contravariant chart3">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_contravariant_american_method">Contravariant <code>American</code> Method</h3>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.generics.ContravariantTest#processContravariantList</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">processContravariantList</span><span class="tok-o">(</span><span class="tok-n">List</span><span class="tok-o">&lt;?</span> <span class="tok-kd">super</span> <span class="tok-n">American</span><span class="tok-o">&gt;</span> <span class="tok-n">americans</span><span class="tok-o">)</span> <span class="tok-o">{</span>
    <span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">American</span><span class="tok-o">());</span>
    <span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Massachusettsan</span><span class="tok-o">());</span>
    <span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Bostonian</span><span class="tok-o">());</span>
    <span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Wisconsinite</span><span class="tok-o">());</span>
    <span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Madisonian</span><span class="tok-o">());</span>
    <span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">NorthernCalifornian</span><span class="tok-o">());</span>
    <span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Raleighite</span><span class="tok-o">());</span>
    <span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Denverite</span><span class="tok-o">());</span>
    <span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Coloradan</span><span class="tok-o">());</span>
    <span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Missourian</span><span class="tok-o">());</span>
    <span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">StLouisan</span><span class="tok-o">());</span>
    <span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-kc">null</span><span class="tok-o">);</span>

    <span class="tok-n">Object</span> <span class="tok-n">o</span> <span class="tok-o">=</span> <span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following does not work:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">European</span><span class="tok-o">());</span> <span class="tok-c1">//Nein!</span>
<span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Person</span><span class="tok-o">());</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_contravariant_american_assignment">Contravariant <code>American</code> Assignment</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;?</span> <span class="tok-kd">super</span> <span class="tok-n">American</span><span class="tok-o">&gt;</span> <span class="tok-n">americans</span> <span class="tok-o">=</span> <span class="tok-n">people</span><span class="tok-o">;</span>

<span class="tok-n">Object</span> <span class="tok-n">object</span> <span class="tok-o">=</span> <span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">);</span> <span class="tok-c1">//special case</span>

<span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">American</span><span class="tok-o">());</span>
<span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Massachusettsan</span><span class="tok-o">());</span>
<span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Bostonian</span><span class="tok-o">());</span>
<span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-k">new</span> <span class="tok-n">NewMexican</span><span class="tok-o">());</span>
<span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-kc">null</span><span class="tok-o">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following does not work:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Person</span> <span class="tok-n">person</span> <span class="tok-o">=</span> <span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">);</span>
<span class="tok-n">NorthAmerican</span> <span class="tok-n">northAmerican</span> <span class="tok-o">=</span> <span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">);</span>
<span class="tok-n">American</span> <span class="tok-n">american</span> <span class="tok-o">=</span> <span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">);</span>
<span class="tok-n">Massachusettsan</span> <span class="tok-n">Massachusettsan</span> <span class="tok-o">=</span> <span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">);</span>
<span class="tok-n">Bostonian</span> <span class="tok-n">bostonian</span> <span class="tok-o">=</span> <span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">);</span>

<span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Object</span><span class="tok-o">());</span>
<span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Person</span><span class="tok-o">());</span>
<span class="tok-n">americans</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">NorthAmerican</span><span class="tok-o">());</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_array_covariance">Array Covariance</h3>
<div class="ulist">
<ul>
<li>
<p>Arrays are covariant</p>
</li>
<li>
<p><code>Array&lt;Integer&gt;</code> can be assigned to <code>Array&lt;Number&gt;</code> reference.</p>
</li>
<li>
<p>Any attempt to do put in something wrong will be met with an <code>ArrayStoreException</code></p>
</li>
<li>
<p>An array of <code>List&lt;String&gt;</code> at runtime is purely an array of <code>List</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_array_covariance_example">Array Covariance Example</h3>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.generics.ArraysTest#testArraysAreNaturallyCovariant</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">American</span><span class="tok-o">[]</span> <span class="tok-n">americans</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Massachusettsan</span><span class="tok-o">[</span><span class="tok-mi">3</span><span class="tok-o">];</span>
<span class="tok-n">americans</span><span class="tok-o">[</span><span class="tok-mi">0</span><span class="tok-o">]</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Massachusettsan</span><span class="tok-o">();</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This is allowed <em>at compile time</em> but not at runtime, as we will get an <code>ArrayStoreException</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">americans</span><span class="tok-o">[</span><span class="tok-mi">1</span><span class="tok-o">]</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Raleighite</span><span class="tok-o">();</span>
<span class="tok-n">americans</span><span class="tok-o">[</span><span class="tok-mi">2</span><span class="tok-o">]</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Wisconsinite</span><span class="tok-o">();</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following works:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">American</span> <span class="tok-n">american</span> <span class="tok-o">=</span> <span class="tok-n">americans</span><span class="tok-o">[</span><span class="tok-mi">0</span><span class="tok-o">];</span>
<span class="tok-n">Person</span> <span class="tok-n">person</span> <span class="tok-o">=</span> <span class="tok-n">americans</span><span class="tok-o">[</span><span class="tok-mi">0</span><span class="tok-o">];</span>
<span class="tok-n">Object</span> <span class="tok-n">object</span> <span class="tok-o">=</span> <span class="tok-n">americans</span><span class="tok-o">[</span><span class="tok-mi">0</span><span class="tok-o">];</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following will fail at compile time:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Massachusettsan</span> <span class="tok-n">massachusettsan</span> <span class="tok-o">=</span> <span class="tok-n">americans</span><span class="tok-o">[</span><span class="tok-mi">0</span><span class="tok-o">];</span>
<span class="tok-n">Raleighite</span> <span class="tok-n">raleighite</span> <span class="tok-o">=</span> <span class="tok-n">americans</span><span class="tok-o">[</span><span class="tok-mi">1</span><span class="tok-o">];</span>
<span class="tok-n">Wisconsinite</span> <span class="tok-n">wisconsinite</span> <span class="tok-o">=</span> <span class="tok-n">americans</span><span class="tok-o">[</span><span class="tok-mi">2</span><span class="tok-o">];</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_safe_varargs_heap_pollution">Safe VarArgs Heap Pollution</h3>

</div>
<div class="sect2">
<h3 id="_heap_pollution">Heap Pollution</h3>
<div class="ulist">
<ul>
<li>
<p>A situation where a variable of a parameterized type refers to an object that is not of that parameterized type.</p>
</li>
<li>
<p>This leads likely to a ClassCastException</p>
</li>
<li>
<p>Occurs by</p>
<div class="ulist">
<ul>
<li>
<p>Mixing Raw Types and Parameterized Types</p>
</li>
<li>
<p>Performing Unchecked Casts</p>
</li>
<li>
<p>Separate Compilation of Transaction Units</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_heap_pollution_example">Heap Pollution Example</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span> <span class="tok-n">ln</span> <span class="tok-o">=</span> <span class="tok-n">Lists</span><span class="tok-o">.&lt;</span><span class="tok-n">Number</span><span class="tok-o">&gt;</span><span class="tok-n">newArrayList</span><span class="tok-o">(</span><span class="tok-mi">5</span><span class="tok-o">,</span><span class="tok-mi">1</span><span class="tok-o">,</span><span class="tok-mi">3</span><span class="tok-o">,</span><span class="tok-mi">5</span><span class="tok-o">,</span><span class="tok-mi">6</span><span class="tok-o">,</span><span class="tok-mi">10</span><span class="tok-o">);</span> <span class="tok-c1">//Converting to RawType!</span>
<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">ls</span> <span class="tok-o">=</span> <span class="tok-n">ln</span><span class="tok-o">;</span>  <span class="tok-c1">// unchecked warning</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following will throw a <code>ClassCastException</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">String</span> <span class="tok-n">s</span> <span class="tok-o">=</span> <span class="tok-n">ls</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_safe_varargs">Safe Varargs</h3>
<div class="ulist">
<ul>
<li>
<p>Annotation that marks that the developer is not performing an unsafe operation using varargs</p>
</li>
<li>
<p>Particularly committing heap pollution</p>
</li>
<li>
<p>Reminder! Arrays are covariant</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_vararg_non_safety">Vararg Non-Safety</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">private</span> <span class="tok-kd">final</span> <span class="tok-kt">void</span> <span class="tok-nf">process</span><span class="tok-o">(</span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;...</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
   <span class="tok-c1">//Masking the List of String, it is after all, a List&lt;String&gt;</span>
   <span class="tok-n">Object</span><span class="tok-o">[]</span> <span class="tok-n">array</span> <span class="tok-o">=</span> <span class="tok-n">args</span><span class="tok-o">;</span>
   <span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">tmpList</span> <span class="tok-o">=</span> <span class="tok-n">Collections</span><span class="tok-o">.</span><span class="tok-na">singletonList</span><span class="tok-o">(</span><span class="tok-mi">42</span><span class="tok-o">);</span>

   <span class="tok-c1">// Semantically invalid, but compiles without warnings</span>
   <span class="tok-n">array</span><span class="tok-o">[</span><span class="tok-mi">0</span><span class="tok-o">]</span> <span class="tok-o">=</span> <span class="tok-n">tmpList</span><span class="tok-o">;</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following will become a <code>ClassCastException</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">String</span> <span class="tok-n">s</span> <span class="tok-o">=</span> <span class="tok-n">args</span><span class="tok-o">[</span><span class="tok-mi">0</span><span class="tok-o">].</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_the_varargs_annotation">The <code>@Varargs</code> Annotation</h3>
<div class="ulist">
<ul>
<li>
<p>A programmer assertion that the body of the annotated method or constructor does not perform potentially unsafe operations on its varargs parameter.</p>
</li>
<li>
<p>Applying this annotation to a method or constructor suppresses unchecked warnings about</p>
<div class="ulist">
<ul>
<li>
<p>A non-reifiable variable arity (vararg) type</p>
</li>
<li>
<p>Suppresses unchecked warnings about parameterized array creation at call sites</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_subclassing_generics_bridge_method">Subclassing Generics &amp; Bridge Method</h3>

</div>
<div class="sect2">
<h3 id="_subclassing_generics">Subclassing Generics</h3>
<div class="ulist">
<ul>
<li>
<p>A class that is generic MyClass&lt;T&gt; can be extended</p>
</li>
<li>
<p>The Generic Type can either be</p>
<div class="ulist">
<ul>
<li>
<p>Fulfilled by the subclass</p>
</li>
<li>
<p>Kept Generic</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_subclassing">Subclassing</h3>
<div class="ulist">
<ul>
<li>
<p><code>Node&lt;Integer&gt;</code> is the assigned variable</p>
</li>
<li>
<p><code>MySafeNode</code> is the already a generic that extends <code>Node&lt;Integer&gt;</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Node</span><span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-o">{</span>

    <span class="tok-kd">public</span> <span class="tok-n">T</span> <span class="tok-n">data</span><span class="tok-o">;</span>

    <span class="tok-kd">public</span> <span class="tok-nf">Node</span><span class="tok-o">(</span><span class="tok-n">T</span> <span class="tok-n">data</span><span class="tok-o">)</span> <span class="tok-o">{</span> <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">data</span> <span class="tok-o">=</span> <span class="tok-n">data</span><span class="tok-o">;</span> <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">setData</span><span class="tok-o">(</span><span class="tok-n">T</span> <span class="tok-n">data</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Node.setData&quot;</span><span class="tok-o">);</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">data</span> <span class="tok-o">=</span> <span class="tok-n">data</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">MySafeNode</span><span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-kd">extends</span> <span class="tok-n">Node</span><span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-o">{...}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_bridge_method">Bridge Method</h3>
<div class="ulist">
<ul>
<li>
<p>At times, the compiler may create a synthetic bridge method to add support for the super classes method type.</p>
</li>
<li>
<p>This is used to avoid unsafe method calls and ClassCastExceptions</p>
</li>
<li>
<p>In the following example, notice that <code>Node</code> uses <code>T</code> but <code>MyNode</code> uses <code>Integer</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The super class:</p>
</div>
<div class="listingblock">
<div class="title">src/main/java/com.xyzcorp.demos.generics.bridge.Node</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Node</span><span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-o">{</span>

    <span class="tok-kd">public</span> <span class="tok-n">T</span> <span class="tok-n">data</span><span class="tok-o">;</span>

    <span class="tok-kd">public</span> <span class="tok-nf">Node</span><span class="tok-o">(</span><span class="tok-n">T</span> <span class="tok-n">data</span><span class="tok-o">)</span> <span class="tok-o">{</span> <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">data</span> <span class="tok-o">=</span> <span class="tok-n">data</span><span class="tok-o">;</span> <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">setData</span><span class="tok-o">(</span><span class="tok-n">T</span> <span class="tok-n">data</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Node.setData&quot;</span><span class="tok-o">);</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">data</span> <span class="tok-o">=</span> <span class="tok-n">data</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-n">T</span> <span class="tok-nf">getData</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Node.setData&quot;</span><span class="tok-o">);</span>
        <span class="tok-k">return</span> <span class="tok-n">data</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The subclass:</p>
</div>
<div class="listingblock">
<div class="title">src/main/java/com.xyzcorp.demos.generics.bridge.MyNode</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">MyNode</span> <span class="tok-kd">extends</span> <span class="tok-n">Node</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-o">{</span>
    <span class="tok-kd">public</span> <span class="tok-nf">MyNode</span><span class="tok-o">(</span><span class="tok-n">Integer</span> <span class="tok-n">data</span><span class="tok-o">)</span> <span class="tok-o">{</span> <span class="tok-kd">super</span><span class="tok-o">(</span><span class="tok-n">data</span><span class="tok-o">);</span> <span class="tok-o">}</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">setData</span><span class="tok-o">(</span><span class="tok-n">Integer</span> <span class="tok-n">data</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;MyNode.setData&quot;</span><span class="tok-o">);</span>
        <span class="tok-kd">super</span><span class="tok-o">.</span><span class="tok-na">setData</span><span class="tok-o">(</span><span class="tok-n">data</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Running <code>javap</code> on <code>MyNode</code> renders the following</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sh"><span></span>% javap -cp target/classes com.xyzcorp.demos.generics.bridge.MyNode
public class com.xyzcorp.demos.generics.bridge.MyNode
    extends com.xyzcorp.demos.generics.bridge.Node&lt;java.lang.Integer&gt; <span class="tok-o">{</span>
  public com.xyzcorp.demos.generics.bridge.MyNode<span class="tok-o">(</span>java.lang.Integer<span class="tok-o">)</span><span class="tok-p">;</span>
  public void setData<span class="tok-o">(</span>java.lang.Integer<span class="tok-o">)</span><span class="tok-p">;</span>
  public void setData<span class="tok-o">(</span>java.lang.Object<span class="tok-o">)</span><span class="tok-p">;</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">src/test/java/com.xyzcorp.demos.generics.BridgeTest#testBridgeMethod</div>
<p>If we were to use the raw form this would work</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Node</span> <span class="tok-n">base</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">MyNode</span><span class="tok-o">(</span><span class="tok-mi">5</span><span class="tok-o">);</span> <span class="tok-c1">//Assigning to the raw form</span>
<span class="tok-n">base</span><span class="tok-o">.</span><span class="tok-na">setData</span><span class="tok-o">(</span><span class="tok-mi">40</span><span class="tok-o">);</span> <span class="tok-c1">//Not preferred but should still work</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_multiple_type_bounds">Multiple Type Bounds</h3>
<div class="ulist">
<ul>
<li>
<p>A type parameter can have multiple bounds:  <code>&lt;T extends B1 &amp; B2 &amp; B3&gt;</code></p>
</li>
<li>
<p>If one of the bounds is a class, then it should be first: </p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">class</span> <span class="tok-nc">A</span> <span class="tok-o">{...}</span>
<span class="tok-kd">interface</span> <span class="tok-nc">B</span> <span class="tok-o">{...}</span> 
<span class="tok-kd">interface</span> <span class="tok-nc">C</span> <span class="tok-o">{...}</span> 

<span class="tok-kd">class</span> <span class="tok-nc">D</span> <span class="tok-o">&lt;</span><span class="tok-n">T</span> <span class="tok-kd">extends</span> <span class="tok-n">A</span> <span class="tok-o">&amp;</span> <span class="tok-n">B</span> <span class="tok-o">&amp;</span> <span class="tok-n">C</span><span class="tok-o">&gt;</span> <span class="tok-o">{...}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_multiple_type_bound_example">Multiple Type Bound Example</h3>
<div class="paragraph">
<p>The following is requiring a Product Type of <code>Appendable</code>, <code>Flushable</code> and <code>Closeable</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">private</span> <span class="tok-o">&lt;</span><span class="tok-n">T</span> <span class="tok-kd">extends</span> <span class="tok-n">Appendable</span> <span class="tok-o">&amp;</span> <span class="tok-n">Flushable</span> <span class="tok-o">&amp;</span> <span class="tok-n">Closeable</span><span class="tok-o">&gt;</span> <span class="tok-kt">void</span> <span class="tok-nf">foo</span><span class="tok-o">(</span><span class="tok-n">T</span> <span class="tok-n">t</span><span class="tok-o">)</span> <span class="tok-kd">throws</span>
    <span class="tok-n">IOException</span> <span class="tok-o">{</span>
    <span class="tok-n">t</span><span class="tok-o">.</span><span class="tok-na">append</span><span class="tok-o">(</span><span class="tok-sc">&#39;c&#39;</span><span class="tok-o">);</span>
    <span class="tok-n">t</span><span class="tok-o">.</span><span class="tok-na">append</span><span class="tok-o">(</span><span class="tok-sc">&#39;d&#39;</span><span class="tok-o">);</span>
    <span class="tok-n">t</span><span class="tok-o">.</span><span class="tok-na">flush</span><span class="tok-o">();</span>
    <span class="tok-n">t</span><span class="tok-o">.</span><span class="tok-na">close</span><span class="tok-o">();</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>One such class, is the <code>CharArrayWriter</code></p>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.generics.MultipleBoundsTest#testMultipleInheritance</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">CharArrayWriter</span> <span class="tok-n">writer</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">CharArrayWriter</span><span class="tok-o">(</span><span class="tok-mi">40</span><span class="tok-o">);</span>
<span class="tok-n">foo</span><span class="tok-o">(</span><span class="tok-n">writer</span><span class="tok-o">);</span>
<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">writer</span><span class="tok-o">.</span><span class="tok-na">toCharArray</span><span class="tok-o">());</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_recursive_type_bound">Recursive Type Bound</h3>
<div class="ulist">
<ul>
<li>
<p>Bound by an expression involving the type parameter itself</p>
</li>
<li>
<p>Usually involves <code>Comparable&lt;T&gt;</code> or <code>Class&lt;T&gt;</code></p>
</li>
<li>
<p>For example: <code>String extends Comparable&lt;String&gt;</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_recursive_type_bound_example">Recursive Type Bound Example</h3>
<div class="paragraph">
<p>Here is the correct way to for a <code>Comparable</code> with the type of the class</p>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.generics.RecursiveTypeBoundsTest.Foo</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Foo</span> <span class="tok-kd">implements</span> <span class="tok-n">Comparable</span><span class="tok-o">&lt;</span><span class="tok-n">Foo</span><span class="tok-o">&gt;</span> <span class="tok-o">{</span>
    <span class="tok-kd">private</span> <span class="tok-kt">int</span> <span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-o">;</span>

    <span class="tok-n">Foo</span><span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">i</span><span class="tok-o">)</span> <span class="tok-o">{</span> <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">i</span> <span class="tok-o">=</span> <span class="tok-n">i</span><span class="tok-o">;</span> <span class="tok-o">}</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-kt">int</span> <span class="tok-nf">compareTo</span><span class="tok-o">(</span><span class="tok-n">Foo</span> <span class="tok-n">o</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-n">Objects</span><span class="tok-o">.</span><span class="tok-na">requireNonNull</span><span class="tok-o">(</span><span class="tok-n">o</span><span class="tok-o">,</span> <span class="tok-s">&quot;cannot compare to null&quot;</span><span class="tok-o">);</span>
        <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">o</span> <span class="tok-o">==</span> <span class="tok-k">this</span><span class="tok-o">)</span> <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-o">;</span>
        <span class="tok-k">return</span> <span class="tok-n">Integer</span><span class="tok-o">.</span><span class="tok-na">compare</span><span class="tok-o">(</span><span class="tok-n">i</span><span class="tok-o">,</span> <span class="tok-n">o</span><span class="tok-o">.</span><span class="tok-na">i</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If this were not recursive, it would look like the following, notice the casting and the <code>Object</code> parameter</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Foo</span> <span class="tok-kd">implements</span> <span class="tok-n">Comparable</span> <span class="tok-o">{</span>
    <span class="tok-kd">private</span> <span class="tok-kt">int</span> <span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-o">;</span>

    <span class="tok-n">Foo</span><span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">i</span><span class="tok-o">)</span> <span class="tok-o">{</span> <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">i</span> <span class="tok-o">=</span> <span class="tok-n">i</span><span class="tok-o">;</span> <span class="tok-o">}</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-kt">int</span> <span class="tok-nf">compareTo</span><span class="tok-o">(</span><span class="tok-n">Object</span> <span class="tok-n">o</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-n">Objects</span><span class="tok-o">.</span><span class="tok-na">requireNonNull</span><span class="tok-o">(</span><span class="tok-n">o</span><span class="tok-o">,</span> <span class="tok-s">&quot;cannot compare to null&quot;</span><span class="tok-o">);</span>
        <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">o</span> <span class="tok-o">==</span> <span class="tok-k">this</span><span class="tok-o">)</span> <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-o">;</span>
        <span class="tok-k">return</span> <span class="tok-n">Integer</span><span class="tok-o">.</span><span class="tok-na">compare</span><span class="tok-o">(</span><span class="tok-n">i</span><span class="tok-o">,</span> <span class="tok-o">((</span><span class="tok-n">Foo</span><span class="tok-o">)</span><span class="tok-n">o</span><span class="tok-o">).</span><span class="tok-na">i</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2 slide_section">
<h3 id="_lab_generics">Lab: Generics</h3>
<div class="paragraph">
<p><strong>Step 1:</strong> Open <em>src/test/java/com.xycorp.exercises.generics.GenericsExercises</em></p>
</div>
<div class="paragraph">
<p><strong>Step 2:</strong> Create a test called <code>testStaticFactory</code> with the following content</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@Test</span>
<span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">testStaticFactory</span><span class="tok-o">()</span> <span class="tok-o">{</span>
    <span class="tok-n">Box</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">box</span> <span class="tok-o">=</span> <span class="tok-n">Box</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">40</span><span class="tok-o">);</span>
    <span class="tok-n">assertThat</span><span class="tok-o">(</span><span class="tok-n">box</span><span class="tok-o">.</span><span class="tok-na">getContent</span><span class="tok-o">()).</span><span class="tok-na">isEqualTo</span><span class="tok-o">(</span><span class="tok-mi">40</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Step 3:</strong> Ensure that the test works and you are able to create a <code>Box</code></p>
</div>
<div class="paragraph">
<p><strong>Step 4:</strong> Create a test called <code>testMapBox</code> with following content</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@Test</span>
<span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">testMapBox</span><span class="tok-o">()</span> <span class="tok-o">{</span>
    <span class="tok-n">Box</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">bs</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Box</span><span class="tok-o">&lt;&gt;(</span><span class="tok-s">&quot;Hello&quot;</span><span class="tok-o">);</span> <span class="tok-c1">//Box&lt;String&gt;</span>
    <span class="tok-n">Box</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">transformed</span> <span class="tok-o">=</span> <span class="tok-n">bs</span><span class="tok-o">.</span><span class="tok-na">map</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">::</span><span class="tok-n">length</span><span class="tok-o">);</span>
    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">transformed</span><span class="tok-o">.</span><span class="tok-na">getContent</span><span class="tok-o">()</span> <span class="tok-o">==</span> <span class="tok-mi">5</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Step 5:</strong> Ensure that the test works and you are able to map the contents of the <code>Box</code></p>
</div>
<div class="paragraph">
<p><strong>Step 6:</strong> Create a test called <code>testMapBoxWithAlternateTypes</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@Test</span>
<span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">testMapBoxWithAlternateTypes</span><span class="tok-o">()</span> <span class="tok-o">{</span>
    <span class="tok-n">Box</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">bs</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Box</span><span class="tok-o">&lt;&gt;(</span><span class="tok-s">&quot;Hello&quot;</span><span class="tok-o">);</span> <span class="tok-c1">//Box&lt;String&gt;</span>

    <span class="tok-n">Function</span> <span class="tok-o">&lt;</span><span class="tok-n">CharSequence</span><span class="tok-o">,</span> <span class="tok-n">Person</span><span class="tok-o">&gt;</span> <span class="tok-n">fun</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Function</span><span class="tok-o">&lt;</span><span class="tok-n">CharSequence</span><span class="tok-o">,</span> <span class="tok-n">Person</span><span class="tok-o">&gt;(){</span>
        <span class="tok-nd">@Override</span>
        <span class="tok-kd">public</span> <span class="tok-n">American</span> <span class="tok-nf">apply</span><span class="tok-o">(</span><span class="tok-n">CharSequence</span> <span class="tok-n">charSequence</span><span class="tok-o">)</span> <span class="tok-o">{</span>
            <span class="tok-k">return</span> <span class="tok-k">new</span> <span class="tok-n">American</span><span class="tok-o">();</span>
        <span class="tok-o">}</span>
    <span class="tok-o">};</span>

    <span class="tok-c1">//The above function will fit, that&#39;s the flexibility that we gain!</span>
    <span class="tok-n">Box</span><span class="tok-o">&lt;</span><span class="tok-n">Person</span><span class="tok-o">&gt;</span> <span class="tok-n">map</span> <span class="tok-o">=</span> <span class="tok-n">bs</span><span class="tok-o">.</span><span class="tok-na">map</span><span class="tok-o">(</span><span class="tok-n">fun</span><span class="tok-o">);</span>

    <span class="tok-n">Person</span> <span class="tok-n">person</span> <span class="tok-o">=</span> <span class="tok-n">map</span><span class="tok-o">.</span><span class="tok-na">getContent</span><span class="tok-o">();</span>
    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">person</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Step 7:</strong> Ensure that the test works and you are able to map the contents of the <code>Box</code></p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_collection_interface">Collection interface</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_collections">Collections</h3>
<div class="ulist">
<ul>
<li>
<p>Before Java 2, all we had were arrays</p>
</li>
<li>
<p>Java 2, introduced <code>java.util.Collection</code> package</p>
</li>
<li>
<p>Java 5, generics were added to make it easier to use with tools</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_list"><code>List</code></h4>
<div class="ulist">
<ul>
<li>
<p>Store elements by insertion order</p>
</li>
<li>
<p>0-based index</p>
</li>
<li>
<p>Primitives are boxed</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_linkedlist"><code>LinkedList</code></h4>
<div class="ulist">
<ul>
<li>
<p>A <code>List</code> that is composed of a doubly linked list.</p>
</li>
<li>
<p>Constant O(1) time adding and removing elements</p>
</li>
<li>
<p>Linear O(n) time for other operations</p>
</li>
<li>
<p>Not thread safe</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_arraylist"><code>ArrayList</code></h4>
<div class="ulist">
<ul>
<li>
<p>Array&#8217;s size will be automatically expanded</p>
</li>
<li>
<p>Constant Time O(1) for the following</p>
<div class="ulist">
<ul>
<li>
<p><code>size</code></p>
</li>
<li>
<p><code>isEmpty</code></p>
</li>
<li>
<p><code>get</code> and <code>set</code></p>
</li>
<li>
<p><code>iterator</code> and <code>listIterator</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Linear O(n) for all other operations</p>
</li>
<li>
<p>Not thread safe</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_set"><code>Set</code></h4>
<div class="ulist">
<ul>
<li>
<p>No duplicate elements</p>
</li>
<li>
<p>Mathematical <code>Set</code> meaning there are more mathematical style methods depending on implementation</p>
</li>
<li>
<p>A correct <code>hashCode</code> and <code>equals</code> must be establish on objects added to any <code>Set</code></p>
</li>
<li>
<p>Mutable objects should remain consistent or have an expected behavior</p>
</li>
<li>
<p>Prefer immutable objects to avoid unexpected behavior</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_hashset"><code>HashSet</code></h4>
<div class="ulist">
<ul>
<li>
<p><code>Set</code> backed up by a Hashtable</p>
</li>
<li>
<p>No order</p>
</li>
<li>
<p>Constant Time O(n) for <code>add</code>, <code>remove</code>, <code>contains</code>, <code>size</code>, if <code>hashCode</code> is implemented well.</p>
</li>
<li>
<p>Iteration speed is proportional to the size</p>
</li>
<li>
<p>Not thread safe</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_treeset"><code>TreeSet</code></h4>
<div class="ulist">
<ul>
<li>
<p><code>Set</code> implements of a <code>TreeMap</code></p>
</li>
<li>
<p>Elements are ordered with natural ordering or using a specified <code>Comparator</code></p>
</li>
<li>
<p>Made consistent using the <code>equals</code> implementation of the contained objects</p>
</li>
<li>
<p>Consistent with <code>equals</code> requires that <code>compare</code> should reflect equality</p>
</li>
<li>
<p>All elements are compared using <code>Comparator</code> implementation if provided</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_map"><code>Map</code></h4>
<div class="ulist">
<ul>
<li>
<p><code>Object</code> that maps key to a value</p>
</li>
<li>
<p>Some have specific order, others do not, depending on</p>
</li>
<li>
<p>Some implementations will have restrictions on the types of keys or values</p>
</li>
<li>
<p>Mutable objects should remain consistent or have an expected behavior</p>
</li>
<li>
<p>Prefer immutable objects to avoid unexpected behavior</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_treemap"><code>TreeMap</code></h4>
<div class="ulist">
<ul>
<li>
<p>An implementation of <code>Map</code></p>
</li>
<li>
<p>Sorted according to the natural ordering of its keys or a given <code>Comparator</code></p>
</li>
<li>
<p>O(log(n)) time for <code>containsKey</code>, <code>get</code>, <code>put</code>, <code>remove</code> methods</p>
</li>
<li>
<p>If a <code>Comparator</code> is not provide, the objects contained must correctly implement <code>equals</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_hashmap"><code>HashMap</code></h4>
<div class="ulist">
<ul>
<li>
<p>Hash table implementation of <code>Map</code></p>
</li>
<li>
<p>Permits <code>null</code> keys and values</p>
</li>
<li>
<p>Not thread safe</p>
</li>
<li>
<p>Constant time for <code>get</code> and <code>put</code></p>
</li>
<li>
<p>Iteration is time proportional to the capacity</p>
</li>
<li>
<p>Determined by two parameters:</p>
<div class="ulist">
<ul>
<li>
<p><code>initial capacity</code>: number of buckets</p>
</li>
<li>
<p><code>load factory</code>: how full does the hash table need to before automatically increased</p>
</li>
</ul>
</div>
</li>
<li>
<p>Rebuilt when entries is greater than the product of load factor and capacity</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_iterator_iterable_and_enumeration"><code>Iterator</code>, <code>Iterable</code>, and <code>Enumeration</code></h3>

</div>
<div class="sect2">
<h3 id="_using_iterator">Using <code>Iterator</code></h3>
<div class="paragraph">
<p>Interface that allows iteration in one direction, forward:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>hasNext</code></p>
</li>
<li>
<p><code>next</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_using_iterable">Using <code>Iterable</code></h3>
<div class="ulist">
<ul>
<li>
<p><code>interface</code> that allows an object to be accepted as way to be included in a <code>for-each</code> loop.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Before Java 5:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-k">for</span> <span class="tok-o">(</span><span class="tok-n">Iterator</span> <span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-n">suits</span><span class="tok-o">.</span><span class="tok-na">iterator</span><span class="tok-o">();</span> <span class="tok-n">i</span><span class="tok-o">.</span><span class="tok-na">hasNext</span><span class="tok-o">();</span> <span class="tok-o">)</span> <span class="tok-o">{</span>
    <span class="tok-n">Suit</span> <span class="tok-n">suit</span> <span class="tok-o">=</span> <span class="tok-o">(</span><span class="tok-n">Suit</span><span class="tok-o">)</span> <span class="tok-n">i</span><span class="tok-o">.</span><span class="tok-na">next</span><span class="tok-o">();</span>
    <span class="tok-k">for</span> <span class="tok-o">(</span><span class="tok-n">Iterator</span> <span class="tok-n">j</span> <span class="tok-o">=</span> <span class="tok-n">ranks</span><span class="tok-o">.</span><span class="tok-na">iterator</span><span class="tok-o">();</span> <span class="tok-n">j</span><span class="tok-o">.</span><span class="tok-na">hasNext</span><span class="tok-o">();</span> <span class="tok-o">)</span>
        <span class="tok-n">sortedDeck</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Card</span><span class="tok-o">(</span><span class="tok-n">suit</span><span class="tok-o">,</span> <span class="tok-n">j</span><span class="tok-o">.</span><span class="tok-na">next</span><span class="tok-o">()));</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>After Java 5:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="groovy"><span></span><span class="tok-k">for</span> <span class="tok-o">(</span><span class="tok-n">Suit</span> <span class="tok-n">suit</span> <span class="tok-o">:</span> <span class="tok-n">suits</span><span class="tok-o">)</span>
    <span class="tok-k">for</span> <span class="tok-o">(</span><span class="tok-n">Rank</span> <span class="tok-n">rank</span> <span class="tok-o">:</span> <span class="tok-n">ranks</span><span class="tok-o">)</span>
        <span class="tok-n">sortedDeck</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Card</span><span class="tok-o">(</span><span class="tok-n">suit</span><span class="tok-o">,</span> <span class="tok-n">rank</span><span class="tok-o">));</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>From: <a href="https://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html" class="bare">https://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_using_listiterator">Using <code>ListIterator</code></h3>
<div class="paragraph">
<p>Interface that allows iteration in either direction and include calls for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>hasPrevious</code></p>
</li>
<li>
<p><code>previous</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_enumeration"><code>Enumeration</code></h3>
<div class="ulist">
<ul>
<li>
<p>Older way to iterate through collections.</p>
</li>
<li>
<p>Has been since less preferred in favor of <code>Iterator</code> and <code>Iterable</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-k">for</span> <span class="tok-o">(</span><span class="tok-n">Enumeration</span><span class="tok-o">&lt;</span><span class="tok-n">E</span><span class="tok-o">&gt;</span> <span class="tok-n">e</span> <span class="tok-o">=</span> <span class="tok-n">v</span><span class="tok-o">.</span><span class="tok-na">elements</span><span class="tok-o">();</span> <span class="tok-n">e</span><span class="tok-o">.</span><span class="tok-na">hasMoreElements</span><span class="tok-o">();)</span>
    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">e</span><span class="tok-o">.</span><span class="tok-na">nextElement</span><span class="tok-o">());</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Source: <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Enumeration.html" class="bare">https://docs.oracle.com/javase/8/docs/api/java/util/Enumeration.html</a></p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_queue_and_deque"><code>Queue</code> and <code>Deque</code></h3>

</div>
<div class="sect2">
<h3 id="_queue"><code>Queue</code></h3>
<div class="ulist">
<ul>
<li>
<p>A collection designed for holding elements prior to processing.</p>
</li>
<li>
<p>Used extensively for asynchronous processing in <code>java.util.concurrent</code> package</p>
</li>
<li>
<p>Typically FIFO (first in, first out), some implementations may be different.</p>
</li>
<li>
<p>In FIFO queues, elements are placed at the end or tail</p>
</li>
<li>
<p>Queues will have different sorting algorithms</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_queue_operations"><code>Queue</code> Operations</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">Throws Exception</th>
<th class="tableblock halign-left valign-top">Returns Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Insert</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>add(e)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>offer(e)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Remove</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>remove()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>poll()</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Examine</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>element()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>peek()</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_queue_addition_operations"><code>Queue</code> Addition Operations</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">Throws Exception</th>
<th class="tableblock halign-left valign-top">Returns Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Insert</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>add(e)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>offer(e)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Remove</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>remove()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>poll()</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Examine</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>element()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>peek()</code></p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<ul>
<li>
<p><code>offer(e)</code> will add the element typically at the tail of the <code>Queue</code></p>
</li>
<li>
<p><code>add(e)</code> will add the element typically at the tail</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_queue_removal_operations"><code>Queue</code> Removal Operations</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">Throws Exception</th>
<th class="tableblock halign-left valign-top">Returns Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Insert</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>add(e)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>offer(e)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Remove</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>remove()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>poll()</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Examine</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>element()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>peek()</code></p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<ul>
<li>
<p><code>poll</code> will offer the head element or <code>null</code> if empty</p>
</li>
<li>
<p><code>remove</code> will offer the head element or throw a <code>NoSuchElementException</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_queue_examination_operations"><code>Queue</code> Examination Operations</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">Throws Exception</th>
<th class="tableblock halign-left valign-top">Returns Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Insert</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>add(e)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>offer(e)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Remove</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>remove()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>poll()</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Examine</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>element()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>peek()</code></p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<ul>
<li>
<p><code>element</code> will retrieve but not remove the head, throws <code>NoSuchElementException</code> if empty</p>
</li>
<li>
<p><code>peek</code> will retrieve but not remove the head, returns <code>null</code> if empty.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_linkedlist_as_a_queue"><code>LinkedList</code> as a <code>Queue</code></h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Queue</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">queue</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">LinkedList</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;();</span>
<span class="tok-n">queue</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-mi">40</span><span class="tok-o">);</span>
<span class="tok-kt">boolean</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">queue</span><span class="tok-o">.</span><span class="tok-na">offer</span><span class="tok-o">(</span><span class="tok-mi">50</span><span class="tok-o">);</span>
<span class="tok-k">assert</span><span class="tok-o">(</span><span class="tok-n">result</span><span class="tok-o">);</span>
<span class="tok-kt">boolean</span> <span class="tok-n">result2</span> <span class="tok-o">=</span> <span class="tok-n">queue</span><span class="tok-o">.</span><span class="tok-na">offer</span><span class="tok-o">(</span><span class="tok-mi">60</span><span class="tok-o">);</span>
<span class="tok-k">assert</span><span class="tok-o">(</span><span class="tok-n">result2</span><span class="tok-o">);</span>
<span class="tok-k">assert</span><span class="tok-o">(</span><span class="tok-n">queue</span><span class="tok-o">.</span><span class="tok-na">peek</span><span class="tok-o">()</span> <span class="tok-o">==</span> <span class="tok-mi">40</span><span class="tok-o">);</span>
<span class="tok-k">assert</span><span class="tok-o">(</span><span class="tok-n">queue</span><span class="tok-o">.</span><span class="tok-na">poll</span><span class="tok-o">()</span> <span class="tok-o">==</span> <span class="tok-mi">40</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_priorityqueue"><code>PriorityQueue</code></h3>
<div class="ulist">
<ul>
<li>
<p>Queue lined up based on <em>natural ordering</em> or provided <code>Comparator</code>.</p>
</li>
<li>
<p>Disallows non-comparable objects</p>
</li>
<li>
<p>The <em>head</em> element is the least element</p>
</li>
<li>
<p>Ties are broken arbitrarily</p>
</li>
<li>
<p>Unbounded, with a internal array that is automatically managed</p>
</li>
<li>
<p>Not thread-safe</p>
</li>
<li>
<p>O(log(n)) for <code>offer</code>, <code>remove</code>, <code>poll</code>, <code>add</code></p>
</li>
<li>
<p>O(n) linear for <code>remove</code> and <code>contains</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_priorityqueue_2"><code>PriorityQueue</code></h3>
<div class="paragraph">
<p>Given:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kd">class</span> <span class="tok-nc">Person</span> <span class="tok-o">{</span>
    <span class="tok-kd">private</span> <span class="tok-n">String</span> <span class="tok-n">firstName</span><span class="tok-o">;</span>
    <span class="tok-kd">private</span> <span class="tok-n">String</span> <span class="tok-n">lastName</span><span class="tok-o">;</span>

    <span class="tok-n">Person</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">firstName</span><span class="tok-o">,</span> <span class="tok-n">String</span> <span class="tok-n">lastName</span><span class="tok-o">)</span> <span class="tok-o">{..}</span>

    <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">getFirstName</span><span class="tok-o">()</span> <span class="tok-o">{..}</span>

    <span class="tok-n">String</span> <span class="tok-nf">getLastName</span><span class="tok-o">()</span> <span class="tok-o">{..}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_priorityqueue_3"><code>PriorityQueue</code></h3>
<div class="paragraph">
<p>Given:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kd">class</span> <span class="tok-nc">PersonComparator</span> <span class="tok-kd">implements</span> <span class="tok-n">Comparator</span><span class="tok-o">&lt;</span><span class="tok-n">Person</span><span class="tok-o">&gt;</span> <span class="tok-o">{</span>
    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-kt">int</span> <span class="tok-nf">compare</span><span class="tok-o">(</span><span class="tok-n">Person</span> <span class="tok-n">o1</span><span class="tok-o">,</span> <span class="tok-n">Person</span> <span class="tok-n">o2</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-n">o1</span><span class="tok-o">.</span><span class="tok-na">getLastName</span><span class="tok-o">().</span><span class="tok-na">compareTo</span><span class="tok-o">(</span><span class="tok-n">o2</span><span class="tok-o">.</span><span class="tok-na">getLastName</span><span class="tok-o">());</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_priorityqueue_4"><code>PriorityQueue</code></h3>
<div class="paragraph">
<p>Using a <code>PriorityQueue</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Queue</span><span class="tok-o">&lt;</span><span class="tok-n">Person</span><span class="tok-o">&gt;</span> <span class="tok-n">queue</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">PriorityQueue</span><span class="tok-o">&lt;&gt;(</span><span class="tok-k">new</span> <span class="tok-n">PersonComparator</span><span class="tok-o">());</span>
<span class="tok-n">queue</span><span class="tok-o">.</span><span class="tok-na">offer</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Person</span><span class="tok-o">(</span><span class="tok-s">&quot;Franz&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Kafka&quot;</span><span class="tok-o">));</span>
<span class="tok-n">queue</span><span class="tok-o">.</span><span class="tok-na">offer</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Person</span><span class="tok-o">(</span><span class="tok-s">&quot;Jane&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Austen&quot;</span><span class="tok-o">));</span>
<span class="tok-n">queue</span><span class="tok-o">.</span><span class="tok-na">offer</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Person</span><span class="tok-o">(</span><span class="tok-s">&quot;Leo&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Tolstoy&quot;</span><span class="tok-o">));</span>
<span class="tok-n">queue</span><span class="tok-o">.</span><span class="tok-na">offer</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Person</span><span class="tok-o">(</span><span class="tok-s">&quot;Lewis&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Carroll&quot;</span><span class="tok-o">));</span>
<span class="tok-k">assert</span><span class="tok-o">(</span><span class="tok-n">queue</span><span class="tok-o">.</span><span class="tok-na">peek</span><span class="tok-o">().</span><span class="tok-na">getLastName</span><span class="tok-o">().</span><span class="tok-na">equals</span><span class="tok-o">(</span><span class="tok-s">&quot;Austen&quot;</span><span class="tok-o">));</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_deque"><code>Deque</code></h3>
<div class="ulist">
<ul>
<li>
<p>Pronounced <em>deck</em></p>
</li>
<li>
<p>Double Ended Queue, allows insertion and removal of elements at both end points</p>
</li>
<li>
<p>Implements both <code>Stack</code> and <code>Queue</code> at the same time</p>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_stack"><code>Stack</code></h3>
<div class="ulist">
<ul>
<li>
<p>Old collection from Java 1.x that represents a last in first out collection (LIFO)</p>
</li>
<li>
<p>Extended the older <code>Vector</code> implementation and provided methods that can be treated as a <code>Stack</code></p>
</li>
<li>
<p>Preferable to use <code>Deque</code> for stack based operations</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_deque_operations"><code>Deque</code> Operations</h3>
<div class="paragraph">
<p>Deque Methods</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type of Operation</th>
<th class="tableblock halign-left valign-top">First Element (Beginning of the <code>Deque</code> instance)</th>
<th class="tableblock halign-left valign-top">Last Element (End of the <code>Deque</code> instance)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Insert</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>addFirst(e)</code><br>
  <code>offerFirst(e)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>addLast(e)</code><br>
<code>offerLast(e)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Remove</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>removeFirst()</code><br>
  <code>pollFirst()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>removeLast()</code><br>
  <code>pollLast()</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Examine</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>getFirst()</code><br>
  <code>peekFirst()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>getLast()</code><br>
  <code>peekLast()</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Some extra methods of note:
<code>removeFirstOccurence</code> removes the first occurrence of the specified element if it exists in the <code>Deque</code> instance otherwise remains unchanged.</p>
</div>
<div class="paragraph">
<p><code>removeLastOccurence</code> removes the last occurrence of the specified element in the <code>Deque</code> instance. The return type of these methods is <code>boolean</code>, and they return <code>true</code> if the element exists in the <code>Deque</code> instance.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_threads">Threads</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_threads_2">Threads</h3>
<div class="ulist">
<ul>
<li>
<p>An independent path of execution with code.</p>
</li>
<li>
<p>Multiple threads executing within the same program is a <em>multithreaded application</em></p>
</li>
<li>
<p>All Threaded code is performed using <code>java.lang.Thread</code></p>
</li>
<li>
<p>In every Java application there is a non-daemon (non-background thread)</p>
</li>
<li>
<p>All threads will be executed until:</p>
<div class="ulist">
<ul>
<li>
<p><code>Runtime.exit()</code> has been called</p>
</li>
<li>
<p>All non-daemon threads have been terminated</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_creating_a_basic_thread">Creating a Basic <code>Thread</code></h3>
<div class="ulist">
<ul>
<li>
<p>Two different philosophies</p>
<div class="ulist">
<ul>
<li>
<p>extending <code>Thread</code></p>
</li>
<li>
<p>using a <code>Runnable</code> and plugging it into a <code>Thread</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_extending_thread">Extending <code>Thread</code></h3>
<div class="listingblock">
<div class="title">src/main/java/com.xyzcorp.demos.concurrent.threads.MyThread</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">class</span> <span class="tok-nc">MyThread</span> <span class="tok-kd">extends</span> <span class="tok-n">Thread</span> <span class="tok-o">{</span>
   <span class="tok-kd">private</span> <span class="tok-kt">boolean</span> <span class="tok-n">done</span> <span class="tok-o">=</span> <span class="tok-kc">false</span><span class="tok-o">;</span>

   <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">finish</span><span class="tok-o">()</span> <span class="tok-o">{</span>
      <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">done</span> <span class="tok-o">=</span> <span class="tok-kc">true</span><span class="tok-o">;</span>
   <span class="tok-o">}</span>

   <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">run</span><span class="tok-o">()</span> <span class="tok-o">{</span>
       <span class="tok-k">while</span> <span class="tok-o">(!</span><span class="tok-n">done</span><span class="tok-o">)</span> <span class="tok-o">{</span>
         <span class="tok-k">try</span> <span class="tok-o">{</span>
           <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">sleep</span><span class="tok-o">(</span><span class="tok-mi">1000</span><span class="tok-o">);</span>
         <span class="tok-o">}</span> <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">InterruptedException</span> <span class="tok-n">ie</span><span class="tok-o">)</span> <span class="tok-o">{</span>
           <span class="tok-c1">//ignore</span>
         <span class="tok-o">}</span>
         <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">print</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">.</span><span class="tok-na">format</span><span class="tok-o">(</span><span class="tok-s">&quot;In Run: [%s] %s\r\n&quot;</span><span class="tok-o">,</span>
             <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">currentThread</span><span class="tok-o">().</span><span class="tok-na">getName</span><span class="tok-o">(),</span> <span class="tok-n">LocalDateTime</span><span class="tok-o">.</span><span class="tok-na">now</span><span class="tok-o">()));</span>
       <span class="tok-o">}</span>
   <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_threads_with_runnable">Threads with <code>Runnable</code></h3>
<div class="ulist">
<ul>
<li>
<p>A Thread can be created with instances of the <code>Runnable</code> interface</p>
</li>
<li>
<p><code>Runnable</code> interface has a <code>run</code> method and what is used in the interface is what is run.</p>
</li>
<li>
<p>Perfect to have plug the same behavior into multiple <code>Thread</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_create_a_thread_with_runnable">Create a <code>Thread</code> with <code>Runnable</code></h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">class</span> <span class="tok-nc">MyRunnable</span> <span class="tok-kd">implements</span> <span class="tok-n">Runnable</span> <span class="tok-o">{</span>
   <span class="tok-kd">private</span> <span class="tok-kt">boolean</span> <span class="tok-n">done</span> <span class="tok-o">=</span> <span class="tok-kc">false</span><span class="tok-o">;</span>

   <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">finish</span><span class="tok-o">()</span> <span class="tok-o">{</span>
      <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">done</span> <span class="tok-o">=</span> <span class="tok-kc">true</span><span class="tok-o">;</span>
   <span class="tok-o">}</span>

   <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">run</span><span class="tok-o">()</span> <span class="tok-o">{</span>
       <span class="tok-k">while</span> <span class="tok-o">(!</span><span class="tok-n">done</span><span class="tok-o">)</span> <span class="tok-o">{</span>
         <span class="tok-k">try</span> <span class="tok-o">{</span>
           <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">sleep</span><span class="tok-o">(</span><span class="tok-mi">1000</span><span class="tok-o">);</span>
         <span class="tok-o">}</span> <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">InterruptedException</span> <span class="tok-n">ie</span><span class="tok-o">)</span> <span class="tok-o">{</span>
           <span class="tok-c1">//ignore</span>
         <span class="tok-o">}</span>
         <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">print</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">.</span><span class="tok-na">format</span><span class="tok-o">(</span><span class="tok-s">&quot;In Run: [%s] %s\r\n&quot;</span><span class="tok-o">,</span>
             <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">currentThread</span><span class="tok-o">().</span><span class="tok-na">getName</span><span class="tok-o">(),</span> <span class="tok-n">LocalDateTime</span><span class="tok-o">.</span><span class="tok-na">now</span><span class="tok-o">()));</span>
       <span class="tok-o">}</span>
   <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_common_thread_methods">Common <code>Thread</code> methods</h3>
<div class="ulist">
<ul>
<li>
<p><code>void interrupt()</code> sends an interrupt signal to a <code>Thread</code></p>
</li>
<li>
<p><code>static boolean interrupted()</code> tests if the current <code>Thread</code> is interrupted</p>
</li>
<li>
<p><code>isInterrupted</code> tests whether a <code>Thread</code> is interrupted</p>
</li>
<li>
<p><code>currentThread</code> retrieves the current <code>Thread</code> in the current scope</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_thread_states">Thread states</h3>
<div class="imageblock">
<div class="content">
<img src="./images/thread_states.png" alt="thread states">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_thread_priorities">Thread priorities</h3>
<div class="ulist">
<ul>
<li>
<p>Each thread have a priority.</p>
</li>
<li>
<p>Priorities are represented by a number between <code>1</code> and <code>10</code>.</p>
</li>
<li>
<p>Thread Schedulers schedules the threads according to their priority (known as preemptive scheduling).</p>
</li>
<li>
<p>Indeterminate because it depends on JVM specification that which scheduling it chooses.</p>
</li>
<li>
<p>Predefined constants are available:</p>
<div class="ulist">
<ul>
<li>
<p><code>MIN_PRIORITY</code></p>
</li>
<li>
<p><code>MAX_PRIORITY</code></p>
</li>
<li>
<p><code>NORM_PRIORITY</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_join"><code>join</code></h3>
<div class="paragraph">
<p>Join allows one thread to wait for another thread to complete.
If Thread <code>t</code> is running, then the following will cause the current running <code>Thread</code> to wait until <code>t</code> is done.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">t</span><span class="tok-o">.</span><span class="tok-na">join</span><span class="tok-o">()</span> <span class="tok-c1">//Wait for Thread t to finish and block</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_join_threads"><code>join</code> Threads</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Thread</span> <span class="tok-n">thread1</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Thread</span><span class="tok-o">()</span> <span class="tok-o">{</span>
    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">run</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">try</span> <span class="tok-o">{</span>
            <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">sleep</span><span class="tok-o">(</span><span class="tok-mi">2000</span><span class="tok-o">);</span>
        <span class="tok-o">}</span> <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">InterruptedException</span> <span class="tok-n">e</span><span class="tok-o">)</span> <span class="tok-o">{</span>
            <span class="tok-n">e</span><span class="tok-o">.</span><span class="tok-na">printStackTrace</span><span class="tok-o">();</span>
        <span class="tok-o">}</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">format</span><span class="tok-o">(</span><span class="tok-s">&quot;Did two seconds on Thread %s\n&quot;</span><span class="tok-o">,</span> <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">currentThread</span><span class="tok-o">().</span><span class="tok-na">getName</span><span class="tok-o">());</span>
    <span class="tok-o">}</span>
<span class="tok-o">};</span>

<span class="tok-n">thread1</span><span class="tok-o">.</span><span class="tok-na">start</span><span class="tok-o">();</span>
<span class="tok-n">thread1</span><span class="tok-o">.</span><span class="tok-na">join</span><span class="tok-o">();</span>
<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Thread test done&quot;</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_daemon_threads">Daemon Threads</h3>
<div class="ulist">
<ul>
<li>
<p>A daemon thread is a thread that doesn&#8217;t prevent the JVM from exiting when the thread finishes</p>
</li>
<li>
<p>An example of a daemon thread is the garbage collection thread</p>
</li>
<li>
<p>Use <code>setDaemon</code> to set the <code>Thread</code> to a daemon <code>Thread</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_daemon_thread_example">Daemon Thread Example</h3>
<div class="listingblock">
<div class="title">src/main/java/com.xyzcorp.demos.threads.DaemonRunner</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">DaemonRunner</span> <span class="tok-o">{</span>
    <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-n">Thread</span> <span class="tok-n">t</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Thread</span><span class="tok-o">()</span> <span class="tok-o">{</span>
            <span class="tok-nd">@Override</span>
            <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">run</span><span class="tok-o">()</span> <span class="tok-o">{</span>
                <span class="tok-k">while</span><span class="tok-o">(</span><span class="tok-kc">true</span><span class="tok-o">)</span> <span class="tok-o">{</span>
                    <span class="tok-k">try</span> <span class="tok-o">{</span>
                        <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">sleep</span><span class="tok-o">(</span><span class="tok-mi">2000</span><span class="tok-o">);</span>
                    <span class="tok-o">}</span> <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">InterruptedException</span> <span class="tok-n">e</span><span class="tok-o">)</span> <span class="tok-o">{</span>
                        <span class="tok-n">e</span><span class="tok-o">.</span><span class="tok-na">printStackTrace</span><span class="tok-o">();</span>
                    <span class="tok-o">}</span>
                    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Going...&quot;</span><span class="tok-o">);</span>

                <span class="tok-o">}</span>
            <span class="tok-o">}</span>
        <span class="tok-o">};</span>
        <span class="tok-c1">//t.setDaemon(true); //Run first then uncomment</span>
        <span class="tok-n">t</span><span class="tok-o">.</span><span class="tok-na">start</span><span class="tok-o">();</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_immutability">Immutability</h3>
<div class="ulist">
<ul>
<li>
<p>Immutability is not having the capability of changing an object</p>
</li>
<li>
<p>Any change to an object provides a copy</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Person</span> <span class="tok-o">{</span>
    <span class="tok-kd">private</span> <span class="tok-kd">final</span> <span class="tok-n">String</span> <span class="tok-n">firstName</span><span class="tok-o">;</span>
    <span class="tok-kd">private</span> <span class="tok-kd">final</span> <span class="tok-n">String</span> <span class="tok-n">lastName</span><span class="tok-o">;</span>

    <span class="tok-kd">public</span> <span class="tok-nf">Person</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">firstName</span><span class="tok-o">,</span> <span class="tok-n">String</span> <span class="tok-n">lastName</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">firstName</span> <span class="tok-o">=</span> <span class="tok-n">firstName</span><span class="tok-o">;</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">lastName</span> <span class="tok-o">=</span> <span class="tok-n">lastName</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">getFirstName</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-n">firstName</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">getLastName</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-n">lastName</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-c1">//equals, hashCode, toString</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Processor caching does not need to exchange state.</p>
</li>
<li>
<p>Desirable in modern applications.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_race_conditions">Race Conditions</h3>
<div class="ulist">
<ul>
<li>
<p>A race condition occurs when two threads or more race to a resource and at the time it is in undesired state.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>An inappropriate Singleton</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">MySingleton</span> <span class="tok-o">{</span>
   <span class="tok-kd">private</span> <span class="tok-kd">static</span> <span class="tok-n">MySingleton</span> <span class="tok-n">instance</span> <span class="tok-o">=</span> <span class="tok-kc">null</span><span class="tok-o">;</span>
   <span class="tok-kd">private</span> <span class="tok-nf">MySingleton</span><span class="tok-o">()</span> <span class="tok-o">{</span> <span class="tok-o">}</span>
   <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-n">MySingleton</span> <span class="tok-nf">getInstance</span><span class="tok-o">()</span> <span class="tok-o">{</span>
      <span class="tok-k">if</span><span class="tok-o">(</span><span class="tok-n">instance</span> <span class="tok-o">==</span> <span class="tok-kc">null</span><span class="tok-o">)</span> <span class="tok-o">{</span> <span class="tok-c1">//What happens when two threads attack this?</span>
         <span class="tok-n">instance</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">MySingleton</span><span class="tok-o">();</span>
      <span class="tok-o">}</span>
      <span class="tok-k">return</span> <span class="tok-n">instance</span><span class="tok-o">;</span>
   <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_locks">Locks</h3>
<div class="imageblock">
<div class="content">
<img src="./images/batonpass.jpg" alt="batonpass">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_intrinsic_locks">Intrinsic Locks</h3>
<div class="ulist">
<ul>
<li>
<p>An intrinsic lock is a lock that is innate within the language and provided depending where it is used</p>
</li>
<li>
<p>Often called a "monitor lock"</p>
</li>
<li>
<p>Intrinsic locks can either be established on a method using the <code>synchronized</code> keyword on the method</p>
</li>
<li>
<p>Intrinsic locks can also be established on a your selected object</p>
</li>
<li>
<p>All threads must establish an "intrinsic lock" on the object.</p>
</li>
<li>
<p>Constructors cannot be synchronized since one thread creates objects</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_intrinsic_lock_on_a_method">Intrinsic Lock on a Method</h3>
<div class="ulist">
<ul>
<li>
<p>The following example shows an intrinsic lock that locks on the <code>Account</code> instance that is created</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">class</span> <span class="tok-nc">Account</span> <span class="tok-o">{</span>
  <span class="tok-kd">private</span> <span class="tok-kt">int</span> <span class="tok-n">amount</span><span class="tok-o">;</span>

  <span class="tok-kd">public</span> <span class="tok-kd">synchronized</span> <span class="tok-kt">void</span> <span class="tok-nf">deposit</span><span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">amount</span><span class="tok-o">)</span> <span class="tok-o">{</span>
     <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">amount</span> <span class="tok-o">=</span> <span class="tok-n">amount</span><span class="tok-o">;</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_intrinsic_lock_on_this">Intrinsic Lock on <code>this</code></h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">class</span> <span class="tok-nc">Account</span> <span class="tok-o">{</span>
  <span class="tok-kd">private</span> <span class="tok-kt">int</span> <span class="tok-n">amount</span><span class="tok-o">;</span>

  <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">deposit</span><span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">amount</span><span class="tok-o">)</span> <span class="tok-o">{</span>
     <span class="tok-kd">synchronized</span><span class="tok-o">(</span><span class="tok-k">this</span><span class="tok-o">)</span> <span class="tok-o">{</span> <span class="tok-c1">// Synchronized on the account object</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">amount</span> <span class="tok-o">=</span> <span class="tok-n">amount</span><span class="tok-o">;</span>
     <span class="tok-o">}</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_intrinsic_lock_on_an_external_object">Intrinsic Lock on an external object</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">class</span> <span class="tok-nc">Account</span> <span class="tok-o">{</span>
  <span class="tok-kd">private</span> <span class="tok-n">Object</span> <span class="tok-n">lock</span><span class="tok-o">;</span>
  <span class="tok-kd">private</span> <span class="tok-kt">int</span> <span class="tok-n">amount</span><span class="tok-o">;</span>
  <span class="tok-kd">public</span> <span class="tok-nf">Account</span><span class="tok-o">(</span><span class="tok-n">Object</span> <span class="tok-n">lock</span><span class="tok-o">)</span> <span class="tok-o">{</span>
     <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">lock</span> <span class="tok-o">=</span> <span class="tok-n">lock</span><span class="tok-o">;</span>
  <span class="tok-o">}</span>
  <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">deposit</span><span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">amount</span><span class="tok-o">)</span> <span class="tok-o">{</span>
     <span class="tok-kd">synchronized</span><span class="tok-o">(</span><span class="tok-n">lock</span><span class="tok-o">)</span> <span class="tok-o">{</span> <span class="tok-c1">// Synchronized on the account object</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">amount</span> <span class="tok-o">=</span> <span class="tok-n">amount</span><span class="tok-o">;</span>
     <span class="tok-o">}</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_intrinsic_lock_on_a_class">Intrinsic Lock on a <code>class</code></h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">class</span> <span class="tok-nc">Account</span> <span class="tok-o">{</span>
  <span class="tok-kd">private</span> <span class="tok-n">Object</span> <span class="tok-n">lock</span><span class="tok-o">;</span>
  <span class="tok-kd">private</span> <span class="tok-kt">int</span> <span class="tok-n">amount</span><span class="tok-o">;</span>
  <span class="tok-kd">public</span> <span class="tok-nf">Account</span><span class="tok-o">(</span><span class="tok-n">Object</span> <span class="tok-n">lock</span><span class="tok-o">)</span> <span class="tok-o">{</span>
     <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">lock</span> <span class="tok-o">=</span> <span class="tok-n">lock</span><span class="tok-o">;</span>
  <span class="tok-o">}</span>
  <span class="tok-c1">//The static makes the class become the lock</span>
  <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kd">synchronized</span> <span class="tok-kt">void</span> <span class="tok-nf">deposit</span><span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">amount</span><span class="tok-o">)</span> <span class="tok-o">{</span>
     <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">amount</span> <span class="tok-o">=</span> <span class="tok-n">amount</span><span class="tok-o">;</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_wait_notify_notifyall"><code>wait</code>, <code>notify</code>, <code>notifyAll</code></h3>
<div class="ulist">
<ul>
<li>
<p><code>wait()</code> - Causes the current thread to block in the given object until awakened by a <code>notify()</code> or <code>notifyAll()</code>.</p>
</li>
<li>
<p><code>notify()</code></p>
<div class="ulist">
<ul>
<li>
<p>Causes a randomly selected thread waiting on this object to be awakened.</p>
</li>
<li>
<p>It must then try to regain the intrinsic lock.</p>
</li>
<li>
<p>If the “wrong” thread is awakened, your program can deadlock.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>notifyAll()</code></p>
<div class="ulist">
<ul>
<li>
<p>Causes all threads waiting on the object to be awakened</p>
</li>
<li>
<p>Each will then try to regain the monitor lock. Hopefully one will succeed.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_volatile_fields">Volatile Fields</h3>
<div class="ulist">
<ul>
<li>
<p>Volatile files are a flag that the memory is to be read on main memory and not the CPU cache</p>
</li>
<li>
<p>If each processor is in charge of it&#8217;s piece of memory per object they would need to synchronize that state.</p>
</li>
<li>
<p>Adding <code>volatile</code> to the member variable will avoid "visibility issues"</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_volatile_field_first_guarantee"><code>volatile</code> field first guarantee</h3>
<div class="ulist">
<ul>
<li>
<p>If Thread-1 writes to a volatile variable and Thread-2 reads the same variable, all variables visible to Thread-1 before writing the <code>volatile</code> variable will flushed to main memory will be visible to the Thread-2</p>
</li>
<li>
<p>Reading or Writing by the JVM cannot be rerordered, whatever instructions are meant to happen after the write.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_atomics">Atomics</h3>
<div class="ulist">
<ul>
<li>
<p>List of values that can be updated atomically.</p>
</li>
<li>
<p>Lock-free</p>
</li>
<li>
<p>Thread-safe</p>
</li>
<li>
<p>Extends the notion of a <code>volatile</code> values, fields, and array elements</p>
</li>
<li>
<p>All contain the update form of:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kt">boolean</span> <span class="tok-nf">compareAndSet</span><span class="tok-o">(</span><span class="tok-n">expectedValue</span><span class="tok-o">,</span> <span class="tok-n">updateValue</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_atomic_values_arrays_and_fields">Atomic Values, Arrays, and Fields</h3>
<div class="ulist">
<ul>
<li>
<p>List of atomics values  include:</p>
<div class="ulist">
<ul>
<li>
<p><code>AtomicBoolean</code></p>
</li>
<li>
<p><code>AtomicInteger</code></p>
</li>
<li>
<p><code>AtomicIntegerArray</code></p>
</li>
<li>
<p><code>AtomicIntegerFieldUpdater</code></p>
</li>
<li>
<p><code>AtomicLong</code></p>
</li>
<li>
<p><code>AtomicLongArray</code></p>
</li>
<li>
<p><code>AtomicLongFieldUpdater</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_atomic_references">Atomic References</h3>
<div class="ulist">
<ul>
<li>
<p><code>AtomicMarkableReference&lt;V&gt;</code></p>
</li>
<li>
<p><code>AtomicReference&lt;V&gt;</code></p>
</li>
<li>
<p><code>AtomicReferenceArray&lt;E&gt;</code></p>
</li>
<li>
<p><code>AtomicReferenceFieldUpdater&lt;T,V&gt;</code></p>
</li>
<li>
<p><code>AtomicStampedReference&lt;V&gt;</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_without_atomic_variables">Without Atomic Variables</h3>
<div class="paragraph">
<p>Instead of the following <code>Counter</code> that is <code>synchronized</code> we can opt for an Atomic variable as seen in the next slide.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">class</span> <span class="tok-nc">Counter</span> <span class="tok-o">{</span>
    <span class="tok-kd">private</span> <span class="tok-kt">int</span> <span class="tok-n">c</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-o">;</span>

    <span class="tok-kd">public</span> <span class="tok-kd">synchronized</span> <span class="tok-kt">void</span> <span class="tok-nf">increment</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-n">c</span><span class="tok-o">++;</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-kd">synchronized</span> <span class="tok-kt">void</span> <span class="tok-nf">decrement</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-n">c</span><span class="tok-o">--;</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-kd">synchronized</span> <span class="tok-kt">int</span> <span class="tok-nf">value</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-n">c</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_with_atomic_variables">With Atomic Variables</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kn">import</span> <span class="tok-nn">java.util.concurrent.atomic.AtomicInteger</span><span class="tok-o">;</span>

<span class="tok-kd">class</span> <span class="tok-nc">AtomicCounter</span> <span class="tok-o">{</span>
    <span class="tok-kd">private</span> <span class="tok-n">AtomicInteger</span> <span class="tok-n">c</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">AtomicInteger</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">);</span>

    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">increment</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-n">c</span><span class="tok-o">.</span><span class="tok-na">incrementAndGet</span><span class="tok-o">();</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">decrement</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-n">c</span><span class="tok-o">.</span><span class="tok-na">decrementAndGet</span><span class="tok-o">();</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-kt">int</span> <span class="tok-nf">value</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-n">c</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">();</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_deadlocks">Deadlocks</h3>
<div class="ulist">
<ul>
<li>
<p>Two or more threads are blocked forever without resolution</p>
</li>
<li>
<p>Each thread is waiting on a lock but the other thread has a lock</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_alphonse_and_gaston_example"><code>Alphonse</code> and <code>Gaston</code> Example</h3>
<div class="paragraph">
<p>From: <a href="https://docs.oracle.com/javase/tutorial/essential/concurrency/deadlock.html" class="bare">https://docs.oracle.com/javase/tutorial/essential/concurrency/deadlock.html</a></p>
</div>
<div class="listingblock">
<div class="title">src/main/java/com.xyzcorp.demos.concurrent.deadlock.Friend</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">class</span> <span class="tok-nc">Friend</span> <span class="tok-o">{</span>
  <span class="tok-kd">private</span> <span class="tok-kd">final</span> <span class="tok-n">String</span> <span class="tok-n">name</span><span class="tok-o">;</span>
  <span class="tok-kd">public</span> <span class="tok-nf">Friend</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">name</span><span class="tok-o">)</span> <span class="tok-o">{</span>
      <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">name</span> <span class="tok-o">=</span> <span class="tok-n">name</span><span class="tok-o">;</span>
  <span class="tok-o">}</span>
  <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">getName</span><span class="tok-o">()</span> <span class="tok-o">{</span>
      <span class="tok-k">return</span> <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">name</span><span class="tok-o">;</span>
  <span class="tok-o">}</span>
  <span class="tok-kd">public</span> <span class="tok-kd">synchronized</span> <span class="tok-kt">void</span> <span class="tok-nf">bow</span><span class="tok-o">(</span><span class="tok-n">Friend</span> <span class="tok-n">bower</span><span class="tok-o">)</span> <span class="tok-o">{</span>
      <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">format</span><span class="tok-o">(</span><span class="tok-s">&quot;%s: %s&quot;</span>
          <span class="tok-o">+</span> <span class="tok-s">&quot;  has bowed to me!%n&quot;</span><span class="tok-o">,</span>
          <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">name</span><span class="tok-o">,</span> <span class="tok-n">bower</span><span class="tok-o">.</span><span class="tok-na">getName</span><span class="tok-o">());</span>
      <span class="tok-n">bower</span><span class="tok-o">.</span><span class="tok-na">bowBack</span><span class="tok-o">(</span><span class="tok-k">this</span><span class="tok-o">);</span>
  <span class="tok-o">}</span>
  <span class="tok-kd">public</span> <span class="tok-kd">synchronized</span> <span class="tok-kt">void</span> <span class="tok-nf">bowBack</span><span class="tok-o">(</span><span class="tok-n">Friend</span> <span class="tok-n">bower</span><span class="tok-o">)</span> <span class="tok-o">{</span>
      <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">format</span><span class="tok-o">(</span><span class="tok-s">&quot;%s: %s&quot;</span>
             <span class="tok-o">+</span> <span class="tok-s">&quot; has bowed back to me!%n&quot;</span><span class="tok-o">,</span>
             <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">name</span><span class="tok-o">,</span> <span class="tok-n">bower</span><span class="tok-o">.</span><span class="tok-na">getName</span><span class="tok-o">());</span>
  <span class="tok-o">}</span>

  <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
       <span class="tok-kd">final</span> <span class="tok-n">Friend</span> <span class="tok-n">alphonse</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Friend</span><span class="tok-o">(</span><span class="tok-s">&quot;Alphonse&quot;</span><span class="tok-o">);</span>
       <span class="tok-kd">final</span> <span class="tok-n">Friend</span> <span class="tok-n">gaston</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Friend</span><span class="tok-o">(</span><span class="tok-s">&quot;Gaston&quot;</span><span class="tok-o">);</span>
       <span class="tok-k">new</span> <span class="tok-n">Thread</span><span class="tok-o">(()</span> <span class="tok-o">-&gt;</span> <span class="tok-n">alphonse</span><span class="tok-o">.</span><span class="tok-na">bow</span><span class="tok-o">(</span><span class="tok-n">gaston</span><span class="tok-o">)).</span><span class="tok-na">start</span><span class="tok-o">();</span>
       <span class="tok-k">new</span> <span class="tok-n">Thread</span><span class="tok-o">(()</span> <span class="tok-o">-&gt;</span> <span class="tok-n">gaston</span><span class="tok-o">.</span><span class="tok-na">bow</span><span class="tok-o">(</span><span class="tok-n">alphonse</span><span class="tok-o">)).</span><span class="tok-na">start</span><span class="tok-o">();</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_livelock">Livelock</h3>
<div class="ulist">
<ul>
<li>
<p>Livelock occurs when two threads are expecting a state from each other but never make it.</p>
</li>
<li>
<p>Thread-1 acts as a response to action of Thread-2</p>
</li>
<li>
<p>Thread 2 acts as a response to action of Thread-1</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_the_criminal_and_police">The <code>Criminal</code> and <code>Police</code></h3>
<div class="ulist">
<ul>
<li>
<p>The <code>Criminal</code> demands payment to release the hostage</p>
</li>
<li>
<p>The <code>Police</code> is waiting for the <code>Criminal</code> to release the hostage to receive payment</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_first_the_criminal">First the <code>Criminal</code></h3>
<div class="listingblock">
<div class="title">src/main/java/com.xyzcorp.demos.concurrent.livelock.Criminal</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Criminal</span> <span class="tok-o">{</span>
    <span class="tok-kd">private</span> <span class="tok-kt">boolean</span> <span class="tok-n">hostageReleased</span> <span class="tok-o">=</span> <span class="tok-kc">false</span><span class="tok-o">;</span>

    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">releaseHostage</span><span class="tok-o">(</span><span class="tok-n">Police</span> <span class="tok-n">police</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">while</span> <span class="tok-o">(!</span><span class="tok-n">police</span><span class="tok-o">.</span><span class="tok-na">isMoneySent</span><span class="tok-o">())</span> <span class="tok-o">{</span>

            <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span>
              <span class="tok-s">&quot;Criminal: waiting police to give ransom&quot;</span><span class="tok-o">);</span>

            <span class="tok-k">try</span> <span class="tok-o">{</span>
                <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">sleep</span><span class="tok-o">(</span><span class="tok-mi">1000</span><span class="tok-o">);</span>
            <span class="tok-o">}</span> <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">InterruptedException</span> <span class="tok-n">ex</span><span class="tok-o">)</span> <span class="tok-o">{</span>
                <span class="tok-n">ex</span><span class="tok-o">.</span><span class="tok-na">printStackTrace</span><span class="tok-o">();</span>
            <span class="tok-o">}</span>
        <span class="tok-o">}</span>

        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Criminal: released hostage&quot;</span><span class="tok-o">);</span>

        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">hostageReleased</span> <span class="tok-o">=</span> <span class="tok-kc">true</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-kt">boolean</span> <span class="tok-nf">isHostageReleased</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">hostageReleased</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_then_the_police">Then the <code>Police</code></h3>
<div class="listingblock">
<div class="title">src/main/java/com.xyzcorp.demos.concurrent.livelock.Police</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Police</span> <span class="tok-o">{</span>
    <span class="tok-kd">private</span> <span class="tok-kt">boolean</span> <span class="tok-n">moneySent</span> <span class="tok-o">=</span> <span class="tok-kc">false</span><span class="tok-o">;</span>

    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">giveRansom</span><span class="tok-o">(</span><span class="tok-n">Criminal</span> <span class="tok-n">criminal</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">while</span> <span class="tok-o">(!</span><span class="tok-n">criminal</span><span class="tok-o">.</span><span class="tok-na">isHostageReleased</span><span class="tok-o">())</span> <span class="tok-o">{</span>
            <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span>
               <span class="tok-s">&quot;Police: waiting criminal to release hostage&quot;</span><span class="tok-o">);</span>
            <span class="tok-k">try</span> <span class="tok-o">{</span>
                <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">sleep</span><span class="tok-o">(</span><span class="tok-mi">1000</span><span class="tok-o">);</span>
            <span class="tok-o">}</span> <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">InterruptedException</span> <span class="tok-n">ex</span><span class="tok-o">)</span> <span class="tok-o">{</span>
                <span class="tok-n">ex</span><span class="tok-o">.</span><span class="tok-na">printStackTrace</span><span class="tok-o">();</span>
            <span class="tok-o">}</span>
        <span class="tok-o">}</span>

        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Police: sent money&quot;</span><span class="tok-o">);</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">moneySent</span> <span class="tok-o">=</span> <span class="tok-kc">true</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-kt">boolean</span> <span class="tok-nf">isMoneySent</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">moneySent</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_running_the_livelock">Running the Livelock</h3>
<div class="listingblock">
<div class="title">src/main/java/com.xyzcorp.demos.concurrent.livelock.LivelockRunner</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">LivelockRunner</span> <span class="tok-o">{</span>
    <span class="tok-kd">static</span> <span class="tok-kd">final</span> <span class="tok-n">Police</span> <span class="tok-n">police</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Police</span><span class="tok-o">();</span>
    <span class="tok-kd">static</span> <span class="tok-kd">final</span> <span class="tok-n">Criminal</span> <span class="tok-n">criminal</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Criminal</span><span class="tok-o">();</span>

    <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-n">Thread</span> <span class="tok-n">t1</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Thread</span><span class="tok-o">(()</span> <span class="tok-o">-&gt;</span> <span class="tok-n">police</span><span class="tok-o">.</span><span class="tok-na">giveRansom</span><span class="tok-o">(</span><span class="tok-n">criminal</span><span class="tok-o">));</span>
        <span class="tok-n">t1</span><span class="tok-o">.</span><span class="tok-na">start</span><span class="tok-o">();</span>

        <span class="tok-n">Thread</span> <span class="tok-n">t2</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Thread</span><span class="tok-o">(()</span> <span class="tok-o">-&gt;</span> <span class="tok-n">criminal</span><span class="tok-o">.</span><span class="tok-na">releaseHostage</span><span class="tok-o">(</span><span class="tok-n">police</span><span class="tok-o">));</span>
        <span class="tok-n">t2</span><span class="tok-o">.</span><span class="tok-na">start</span><span class="tok-o">();</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>From: <a href="http://www.codejava.net/java-core/concurrency/understanding-deadlock-livelock-and-starvation-with-code-examples-in-java" class="bare">http://www.codejava.net/java-core/concurrency/understanding-deadlock-livelock-and-starvation-with-code-examples-in-java</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_starvation">Starvation</h3>
<div class="ulist">
<ul>
<li>
<p>When one greedy thread takes on a resource and doesn&#8217;t relinquish control</p>
</li>
<li>
<p>Either occurs because:</p>
<div class="ulist">
<ul>
<li>
<p>One <code>Thread</code> priority is higher and will never let go of a resource</p>
</li>
<li>
<p>A <code>Thread</code> doesn&#8217;t finish the job</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_starvation_by_never_finishing_the_job">Starvation by never finishing the job</h3>
<div class="listingblock">
<div class="title">src/main/java/com.xyzcorp.demos.concurrent.starvation.Worker</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Worker</span> <span class="tok-o">{</span>

    <span class="tok-kd">public</span> <span class="tok-kd">synchronized</span> <span class="tok-kt">void</span> <span class="tok-nf">work</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-n">String</span> <span class="tok-n">name</span> <span class="tok-o">=</span> <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">currentThread</span><span class="tok-o">().</span><span class="tok-na">getName</span><span class="tok-o">();</span>

        <span class="tok-k">while</span> <span class="tok-o">(</span><span class="tok-kc">true</span><span class="tok-o">)</span> <span class="tok-o">{</span>
            <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">name</span> <span class="tok-o">+</span> <span class="tok-s">&quot; is working&quot;</span><span class="tok-o">);</span>
            <span class="tok-k">try</span> <span class="tok-o">{</span>
                <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">sleep</span><span class="tok-o">(</span><span class="tok-mi">1000</span><span class="tok-o">);</span>
            <span class="tok-o">}</span> <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">InterruptedException</span> <span class="tok-n">e</span><span class="tok-o">)</span> <span class="tok-o">{</span>
                <span class="tok-n">e</span><span class="tok-o">.</span><span class="tok-na">printStackTrace</span><span class="tok-o">();</span>
            <span class="tok-o">}</span>
        <span class="tok-o">}</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The Runner looks like the following:</p>
</div>
<div class="listingblock">
<div class="title">src/main/java/com.xyzcorp.demos.concurrent.starvation.StarvationRunner</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
    <span class="tok-n">Worker</span> <span class="tok-n">worker</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Worker</span><span class="tok-o">();</span>

    <span class="tok-c1">//We are creating ten threads</span>
    <span class="tok-k">for</span> <span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-o">;</span> <span class="tok-n">i</span> <span class="tok-o">&lt;</span> <span class="tok-mi">10</span><span class="tok-o">;</span> <span class="tok-n">i</span><span class="tok-o">++)</span> <span class="tok-o">{</span>
        <span class="tok-k">new</span> <span class="tok-n">Thread</span><span class="tok-o">(</span><span class="tok-n">worker</span><span class="tok-o">::</span><span class="tok-n">work</span><span class="tok-o">).</span><span class="tok-na">start</span><span class="tok-o">();</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_remedy_for_starvation">Remedy for Starvation</h3>
<div class="paragraph">
<p>Include a <code>wait</code> to allow other threads to have a chance</p>
</div>
<div class="listingblock">
<div class="title">src/main/java/com.xyzcorp.demos.concurrent.starvation.Worker</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Worker</span> <span class="tok-o">{</span>

    <span class="tok-kd">public</span> <span class="tok-kd">synchronized</span> <span class="tok-kt">void</span> <span class="tok-nf">work</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-n">String</span> <span class="tok-n">name</span> <span class="tok-o">=</span> <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">currentThread</span><span class="tok-o">().</span><span class="tok-na">getName</span><span class="tok-o">();</span>

        <span class="tok-k">while</span> <span class="tok-o">(</span><span class="tok-kc">true</span><span class="tok-o">)</span> <span class="tok-o">{</span>
            <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">name</span> <span class="tok-o">+</span> <span class="tok-s">&quot; is working&quot;</span><span class="tok-o">);</span>
            <span class="tok-k">try</span> <span class="tok-o">{</span>
                <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">sleep</span><span class="tok-o">(</span><span class="tok-mi">1000</span><span class="tok-o">);</span>
            <span class="tok-o">}</span> <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">InterruptedException</span> <span class="tok-n">e</span><span class="tok-o">)</span> <span class="tok-o">{</span>
                <span class="tok-n">e</span><span class="tok-o">.</span><span class="tok-na">printStackTrace</span><span class="tok-o">();</span>
            <span class="tok-o">}</span>
            <span class="tok-c1">//wait will give other chances to other threads</span>
            <span class="tok-k">try</span> <span class="tok-o">{</span>
                <span class="tok-n">wait</span><span class="tok-o">(</span><span class="tok-mi">1000</span><span class="tok-o">);</span>
            <span class="tok-o">}</span> <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">InterruptedException</span> <span class="tok-n">ex</span><span class="tok-o">)</span> <span class="tok-o">{</span>
                <span class="tok-n">ex</span><span class="tok-o">.</span><span class="tok-na">printStackTrace</span><span class="tok-o">();</span>
            <span class="tok-o">}</span>
        <span class="tok-o">}</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_reentrant_locks">Reentrant Locks</h3>
<div class="ulist">
<ul>
<li>
<p>Same semantics as an implicit monitor lock accessed by <code>synchronized</code></p>
</li>
<li>
<p>The <code>RentrantLock</code> is owned by the thread last successfully locking, but not unlocking</p>
</li>
<li>
<p>May contain a <code>fairness</code> operator, when <code>true</code>, favors longer waiting threads</p>
</li>
<li>
<p>Standard practice to use a <code>try</code>/<code>catch</code> block to access the lock and unlock</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">class</span> <span class="tok-nc">X</span> <span class="tok-o">{</span>
   <span class="tok-kd">private</span> <span class="tok-kd">final</span> <span class="tok-n">ReentrantLock</span> <span class="tok-n">lock</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">ReentrantLock</span><span class="tok-o">();</span>
   <span class="tok-c1">// ...</span>

   <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">m</span><span class="tok-o">()</span> <span class="tok-o">{</span>
     <span class="tok-n">lock</span><span class="tok-o">.</span><span class="tok-na">lock</span><span class="tok-o">();</span>  <span class="tok-c1">// block until condition holds</span>
     <span class="tok-k">try</span> <span class="tok-o">{</span>
       <span class="tok-c1">// ... method body</span>
     <span class="tok-o">}</span> <span class="tok-k">finally</span> <span class="tok-o">{</span>
       <span class="tok-n">lock</span><span class="tok-o">.</span><span class="tok-na">unlock</span><span class="tok-o">()</span>
     <span class="tok-o">}</span>
   <span class="tok-o">}</span>
 <span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This lock supports a maximum of 2147483647 recursive locks by the same thread
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>From: <a href="https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html" class="bare">https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_thread_safe_collections">Thread safe collections</h3>
<div class="ulist">
<ul>
<li>
<p><code>BlockingQueue</code> defines a first-in-first-out data structure that blocks or times out when you attempt to add to a full queue, or retrieve from an empty queue.`</p>
</li>
<li>
<p><code>ConcurrentMap</code> is a subinterface of java.util.Map that defines useful atomic operations. These operations remove or replace a key-value pair only if the key is present, or add a key-value pair only if the key is absent. Making these operations atomic helps avoid synchronization. The standard general-purpose implementation of <code>ConcurrentMap</code> is <code>ConcurrentHashMap</code>, which is a concurrent analog of <code>HashMap</code>.</p>
</li>
<li>
<p><code>ConcurrentNavigableMap</code> is a subinterface of <code>ConcurrentMap</code> that supports approximate matches. The standard general-purpose implementation of <code>ConcurrentNavigableMap</code> is <code>ConcurrentSkipListMap</code>, which is a concurrent analog of <code>TreeMap</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_cyclic_barrier">Cyclic Barrier</h3>
<div class="ulist">
<ul>
<li>
<p>It enables you to define a synchronization object that suspends until the specified
number of threads has reached the barrier point.</p>
</li>
<li>
<p>Call to <code>await</code> must be made within the <code>Thread</code></p>
</li>
<li>
<p>When the amount of the barrier has been reached execution will resume</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/main/java/com.xyzcorp.demos.concurrent.synchronizers.cyclicbarrier.CyclicBarrierRunner</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">CyclicBarrier</span> <span class="tok-n">cyclicBarrier</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">CyclicBarrier</span><span class="tok-o">(</span><span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-o">()</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>
   <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Done&quot;</span><span class="tok-o">);</span>
<span class="tok-o">});</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>Runnable</code></p>
</div>
<div class="listingblock">
<div class="title">src/main/java/com.xyzcorp.demos.concurrent.synchronizers.cyclicbarrier.MyRunnable</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">MyRunnable</span> <span class="tok-kd">implements</span> <span class="tok-n">Runnable</span> <span class="tok-o">{</span>

    <span class="tok-kd">private</span> <span class="tok-kd">final</span> <span class="tok-n">CyclicBarrier</span> <span class="tok-n">cyclicBarrier</span><span class="tok-o">;</span>
    <span class="tok-kd">private</span> <span class="tok-kd">final</span> <span class="tok-n">String</span> <span class="tok-n">name</span><span class="tok-o">;</span>

    <span class="tok-kd">public</span> <span class="tok-nf">MyRunnable</span><span class="tok-o">(</span><span class="tok-n">CyclicBarrier</span> <span class="tok-n">cyclicBarrier</span><span class="tok-o">,</span> <span class="tok-n">String</span> <span class="tok-n">name</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">cyclicBarrier</span> <span class="tok-o">=</span> <span class="tok-n">cyclicBarrier</span><span class="tok-o">;</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">name</span> <span class="tok-o">=</span> <span class="tok-n">name</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">run</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">format</span><span class="tok-o">(</span><span class="tok-s">&quot;Processing %s in Thread: %s%n&quot;</span><span class="tok-o">,</span> <span class="tok-n">name</span><span class="tok-o">,</span>
                <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">currentThread</span><span class="tok-o">().</span><span class="tok-na">getName</span><span class="tok-o">());</span>
        <span class="tok-k">try</span> <span class="tok-o">{</span>
            <span class="tok-n">cyclicBarrier</span><span class="tok-o">.</span><span class="tok-na">await</span><span class="tok-o">();</span>
        <span class="tok-o">}</span> <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">InterruptedException</span> <span class="tok-o">|</span> <span class="tok-n">BrokenBarrierException</span> <span class="tok-n">e</span><span class="tok-o">)</span> <span class="tok-o">{</span>
            <span class="tok-n">e</span><span class="tok-o">.</span><span class="tok-na">printStackTrace</span><span class="tok-o">();</span>
        <span class="tok-o">}</span>

        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">format</span><span class="tok-o">(</span><span class="tok-s">&quot;Finally finishing %s in Thread: %s%n&quot;</span><span class="tok-o">,</span> <span class="tok-n">name</span><span class="tok-o">,</span>
                <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">currentThread</span><span class="tok-o">().</span><span class="tok-na">getName</span><span class="tok-o">());</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Create all threads that we will be using:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Thread</span> <span class="tok-n">t1</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Thread</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">MyRunnable</span><span class="tok-o">(</span><span class="tok-n">cyclicBarrier</span><span class="tok-o">,</span> <span class="tok-s">&quot;A&quot;</span><span class="tok-o">));</span>
<span class="tok-n">Thread</span> <span class="tok-n">t2</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Thread</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">MyRunnable</span><span class="tok-o">(</span><span class="tok-n">cyclicBarrier</span><span class="tok-o">,</span> <span class="tok-s">&quot;B&quot;</span><span class="tok-o">));</span>
<span class="tok-n">Thread</span> <span class="tok-n">t3</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Thread</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">MyRunnable</span><span class="tok-o">(</span><span class="tok-n">cyclicBarrier</span><span class="tok-o">,</span> <span class="tok-s">&quot;C&quot;</span><span class="tok-o">));</span>
<span class="tok-n">Thread</span> <span class="tok-n">t4</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Thread</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">MyRunnable</span><span class="tok-o">(</span><span class="tok-n">cyclicBarrier</span><span class="tok-o">,</span> <span class="tok-s">&quot;D&quot;</span><span class="tok-o">));</span>
<span class="tok-n">Thread</span> <span class="tok-n">t5</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Thread</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">MyRunnable</span><span class="tok-o">(</span><span class="tok-n">cyclicBarrier</span><span class="tok-o">,</span> <span class="tok-s">&quot;E&quot;</span><span class="tok-o">));</span>
<span class="tok-n">Thread</span> <span class="tok-n">t6</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Thread</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">MyRunnable</span><span class="tok-o">(</span><span class="tok-n">cyclicBarrier</span><span class="tok-o">,</span> <span class="tok-s">&quot;F&quot;</span><span class="tok-o">));</span>
<span class="tok-n">Thread</span> <span class="tok-n">t7</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Thread</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">MyRunnable</span><span class="tok-o">(</span><span class="tok-n">cyclicBarrier</span><span class="tok-o">,</span> <span class="tok-s">&quot;G&quot;</span><span class="tok-o">));</span>
<span class="tok-n">Thread</span> <span class="tok-n">t8</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Thread</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">MyRunnable</span><span class="tok-o">(</span><span class="tok-n">cyclicBarrier</span><span class="tok-o">,</span> <span class="tok-s">&quot;H&quot;</span><span class="tok-o">));</span>
<span class="tok-n">Thread</span> <span class="tok-n">t9</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Thread</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">MyRunnable</span><span class="tok-o">(</span><span class="tok-n">cyclicBarrier</span><span class="tok-o">,</span> <span class="tok-s">&quot;I&quot;</span><span class="tok-o">));</span>
<span class="tok-n">Thread</span> <span class="tok-n">t10</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Thread</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">MyRunnable</span><span class="tok-o">(</span><span class="tok-n">cyclicBarrier</span><span class="tok-o">,</span> <span class="tok-s">&quot;J&quot;</span><span class="tok-o">));</span>
<span class="tok-n">Thread</span> <span class="tok-n">t11</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Thread</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">MyRunnable</span><span class="tok-o">(</span><span class="tok-n">cyclicBarrier</span><span class="tok-o">,</span> <span class="tok-s">&quot;K&quot;</span><span class="tok-o">));</span>
<span class="tok-n">Thread</span> <span class="tok-n">t12</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Thread</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">MyRunnable</span><span class="tok-o">(</span><span class="tok-n">cyclicBarrier</span><span class="tok-o">,</span> <span class="tok-s">&quot;L&quot;</span><span class="tok-o">));</span>

<span class="tok-n">t1</span><span class="tok-o">.</span><span class="tok-na">start</span><span class="tok-o">();</span>
<span class="tok-n">t2</span><span class="tok-o">.</span><span class="tok-na">start</span><span class="tok-o">();</span>
<span class="tok-n">t3</span><span class="tok-o">.</span><span class="tok-na">start</span><span class="tok-o">();</span>
<span class="tok-n">t4</span><span class="tok-o">.</span><span class="tok-na">start</span><span class="tok-o">();</span>
<span class="tok-n">t5</span><span class="tok-o">.</span><span class="tok-na">start</span><span class="tok-o">();</span>
<span class="tok-n">t6</span><span class="tok-o">.</span><span class="tok-na">start</span><span class="tok-o">();</span>
<span class="tok-n">t7</span><span class="tok-o">.</span><span class="tok-na">start</span><span class="tok-o">();</span>
<span class="tok-n">t8</span><span class="tok-o">.</span><span class="tok-na">start</span><span class="tok-o">();</span>
<span class="tok-n">t9</span><span class="tok-o">.</span><span class="tok-na">start</span><span class="tok-o">();</span>
<span class="tok-n">t10</span><span class="tok-o">.</span><span class="tok-na">start</span><span class="tok-o">();</span>
<span class="tok-n">t11</span><span class="tok-o">.</span><span class="tok-na">start</span><span class="tok-o">();</span>
<span class="tok-n">t12</span><span class="tok-o">.</span><span class="tok-na">start</span><span class="tok-o">();</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Results In:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Processing</span> <span class="tok-n">A</span> <span class="tok-n">in</span> <span class="tok-n">Thread</span><span class="tok-o">:</span> <span class="tok-n">Thread</span><span class="tok-o">-</span><span class="tok-mi">0</span>
<span class="tok-n">Processing</span> <span class="tok-n">D</span> <span class="tok-n">in</span> <span class="tok-n">Thread</span><span class="tok-o">:</span> <span class="tok-n">Thread</span><span class="tok-o">-</span><span class="tok-mi">3</span>
<span class="tok-n">Processing</span> <span class="tok-n">C</span> <span class="tok-n">in</span> <span class="tok-n">Thread</span><span class="tok-o">:</span> <span class="tok-n">Thread</span><span class="tok-o">-</span><span class="tok-mi">2</span>
<span class="tok-n">Processing</span> <span class="tok-n">B</span> <span class="tok-n">in</span> <span class="tok-n">Thread</span><span class="tok-o">:</span> <span class="tok-n">Thread</span><span class="tok-o">-</span><span class="tok-mi">1</span>
<span class="tok-n">Done</span>
<span class="tok-n">Finally</span> <span class="tok-n">finishing</span> <span class="tok-n">B</span> <span class="tok-n">in</span> <span class="tok-n">Thread</span><span class="tok-o">:</span> <span class="tok-n">Thread</span><span class="tok-o">-</span><span class="tok-mi">1</span>
<span class="tok-n">Finally</span> <span class="tok-n">finishing</span> <span class="tok-n">D</span> <span class="tok-n">in</span> <span class="tok-n">Thread</span><span class="tok-o">:</span> <span class="tok-n">Thread</span><span class="tok-o">-</span><span class="tok-mi">3</span>
<span class="tok-n">Finally</span> <span class="tok-n">finishing</span> <span class="tok-n">C</span> <span class="tok-n">in</span> <span class="tok-n">Thread</span><span class="tok-o">:</span> <span class="tok-n">Thread</span><span class="tok-o">-</span><span class="tok-mi">2</span>
<span class="tok-n">Finally</span> <span class="tok-n">finishing</span> <span class="tok-n">A</span> <span class="tok-n">in</span> <span class="tok-n">Thread</span><span class="tok-o">:</span> <span class="tok-n">Thread</span><span class="tok-o">-</span><span class="tok-mi">0</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_phaser">Phaser</h3>
<div class="ulist">
<ul>
<li>
<p>Its primary purpose is to enable the synchronization of threads that represent one or more phases of activity.</p>
</li>
<li>
<p>For example an order-processing application</p>
<div class="ulist">
<ul>
<li>
<p>Phase 1</p>
<div class="ulist">
<ul>
<li>
<p>Validate customer information,</p>
</li>
<li>
<p>Check inventory</p>
</li>
<li>
<p>Confirm pricing</p>
</li>
</ul>
</div>
</li>
<li>
<p>Phase 2</p>
<div class="ulist">
<ul>
<li>
<p>Compute shipping costs and all applicable tax.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Phase 3</p>
<div class="ulist">
<ul>
<li>
<p>Determines estimated shipping time.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/main/java/com.xyzcorp.demos.concurrent.synchronizers.phaser.MyRunnable</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.concurrent.Phaser</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">MyRunnable</span> <span class="tok-kd">implements</span> <span class="tok-n">Runnable</span> <span class="tok-o">{</span>

    <span class="tok-kd">private</span> <span class="tok-kd">final</span> <span class="tok-n">Phaser</span> <span class="tok-n">phaser</span><span class="tok-o">;</span>
    <span class="tok-kd">private</span> <span class="tok-kd">final</span> <span class="tok-n">String</span> <span class="tok-n">name</span><span class="tok-o">;</span>

    <span class="tok-kd">public</span> <span class="tok-nf">MyRunnable</span><span class="tok-o">(</span><span class="tok-n">Phaser</span> <span class="tok-n">phaser</span><span class="tok-o">,</span> <span class="tok-n">String</span> <span class="tok-n">name</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">phaser</span> <span class="tok-o">=</span> <span class="tok-n">phaser</span><span class="tok-o">;</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">name</span> <span class="tok-o">=</span> <span class="tok-n">name</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">run</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-n">phaser</span><span class="tok-o">.</span><span class="tok-na">register</span><span class="tok-o">();</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">format</span><span class="tok-o">(</span><span class="tok-s">&quot;Processing Phase 1 of %s in Thread: %s%n&quot;</span><span class="tok-o">,</span> <span class="tok-n">name</span><span class="tok-o">,</span>
                <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">currentThread</span><span class="tok-o">().</span><span class="tok-na">getName</span><span class="tok-o">());</span>
        <span class="tok-n">phaser</span><span class="tok-o">.</span><span class="tok-na">arriveAndAwaitAdvance</span><span class="tok-o">();</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">format</span><span class="tok-o">(</span><span class="tok-s">&quot;Processing Phase 2 of %s in Thread: %s%n&quot;</span><span class="tok-o">,</span> <span class="tok-n">name</span><span class="tok-o">,</span>
                <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">currentThread</span><span class="tok-o">().</span><span class="tok-na">getName</span><span class="tok-o">());</span>
        <span class="tok-n">phaser</span><span class="tok-o">.</span><span class="tok-na">arriveAndAwaitAdvance</span><span class="tok-o">();</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">format</span><span class="tok-o">(</span><span class="tok-s">&quot;Processing Phase 3 %s in Thread: %s%n&quot;</span><span class="tok-o">,</span> <span class="tok-n">name</span><span class="tok-o">,</span>
                <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">currentThread</span><span class="tok-o">().</span><span class="tok-na">getName</span><span class="tok-o">());</span>
        <span class="tok-n">phaser</span><span class="tok-o">.</span><span class="tok-na">arriveAndAwaitAdvance</span><span class="tok-o">();</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">format</span><span class="tok-o">(</span><span class="tok-s">&quot;Processing Phase 4 %s in Thread: %s%n&quot;</span><span class="tok-o">,</span> <span class="tok-n">name</span><span class="tok-o">,</span>
                <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">currentThread</span><span class="tok-o">().</span><span class="tok-na">getName</span><span class="tok-o">());</span>
        <span class="tok-n">phaser</span><span class="tok-o">.</span><span class="tok-na">arriveAndAwaitAdvance</span><span class="tok-o">();</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">format</span><span class="tok-o">(</span><span class="tok-s">&quot;Finally finishing %s in Thread: %s%n&quot;</span><span class="tok-o">,</span> <span class="tok-n">name</span><span class="tok-o">,</span>
                <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">currentThread</span><span class="tok-o">().</span><span class="tok-na">getName</span><span class="tok-o">());</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Phaser</span> <span class="tok-n">phaser</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Phaser</span><span class="tok-o">();</span>
<span class="tok-n">Thread</span> <span class="tok-n">t</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Thread</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">MyRunnable</span><span class="tok-o">(</span><span class="tok-n">phaser</span><span class="tok-o">,</span> <span class="tok-s">&quot;A&quot;</span><span class="tok-o">));</span>
<span class="tok-n">Thread</span> <span class="tok-n">t2</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Thread</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">MyRunnable</span><span class="tok-o">(</span><span class="tok-n">phaser</span><span class="tok-o">,</span> <span class="tok-s">&quot;B&quot;</span><span class="tok-o">));</span>
<span class="tok-n">Thread</span> <span class="tok-n">t3</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Thread</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">MyRunnable</span><span class="tok-o">(</span><span class="tok-n">phaser</span><span class="tok-o">,</span> <span class="tok-s">&quot;C&quot;</span><span class="tok-o">));</span>
<span class="tok-n">Thread</span> <span class="tok-n">t4</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Thread</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">MyRunnable</span><span class="tok-o">(</span><span class="tok-n">phaser</span><span class="tok-o">,</span> <span class="tok-s">&quot;D&quot;</span><span class="tok-o">));</span>

<span class="tok-n">t</span><span class="tok-o">.</span><span class="tok-na">start</span><span class="tok-o">();</span>
<span class="tok-n">t2</span><span class="tok-o">.</span><span class="tok-na">start</span><span class="tok-o">();</span>
<span class="tok-n">t3</span><span class="tok-o">.</span><span class="tok-na">start</span><span class="tok-o">();</span>
<span class="tok-n">t4</span><span class="tok-o">.</span><span class="tok-na">start</span><span class="tok-o">();</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Results In:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Processing</span> <span class="tok-n">Phase</span> <span class="tok-mi">1</span> <span class="tok-n">of</span> <span class="tok-n">C</span> <span class="tok-n">in</span> <span class="tok-n">Thread</span><span class="tok-o">:</span> <span class="tok-n">Thread</span><span class="tok-o">-</span><span class="tok-mi">2</span>
<span class="tok-n">Processing</span> <span class="tok-n">Phase</span> <span class="tok-mi">1</span> <span class="tok-n">of</span> <span class="tok-n">D</span> <span class="tok-n">in</span> <span class="tok-n">Thread</span><span class="tok-o">:</span> <span class="tok-n">Thread</span><span class="tok-o">-</span><span class="tok-mi">3</span>
<span class="tok-n">Processing</span> <span class="tok-n">Phase</span> <span class="tok-mi">1</span> <span class="tok-n">of</span> <span class="tok-n">B</span> <span class="tok-n">in</span> <span class="tok-n">Thread</span><span class="tok-o">:</span> <span class="tok-n">Thread</span><span class="tok-o">-</span><span class="tok-mi">1</span>
<span class="tok-n">Processing</span> <span class="tok-n">Phase</span> <span class="tok-mi">1</span> <span class="tok-n">of</span> <span class="tok-n">A</span> <span class="tok-n">in</span> <span class="tok-n">Thread</span><span class="tok-o">:</span> <span class="tok-n">Thread</span><span class="tok-o">-</span><span class="tok-mi">0</span>
<span class="tok-n">Processing</span> <span class="tok-n">Phase</span> <span class="tok-mi">2</span> <span class="tok-n">of</span> <span class="tok-n">A</span> <span class="tok-n">in</span> <span class="tok-n">Thread</span><span class="tok-o">:</span> <span class="tok-n">Thread</span><span class="tok-o">-</span><span class="tok-mi">0</span>
<span class="tok-n">Processing</span> <span class="tok-n">Phase</span> <span class="tok-mi">2</span> <span class="tok-n">of</span> <span class="tok-n">B</span> <span class="tok-n">in</span> <span class="tok-n">Thread</span><span class="tok-o">:</span> <span class="tok-n">Thread</span><span class="tok-o">-</span><span class="tok-mi">1</span>
<span class="tok-n">Processing</span> <span class="tok-n">Phase</span> <span class="tok-mi">2</span> <span class="tok-n">of</span> <span class="tok-n">D</span> <span class="tok-n">in</span> <span class="tok-n">Thread</span><span class="tok-o">:</span> <span class="tok-n">Thread</span><span class="tok-o">-</span><span class="tok-mi">3</span>
<span class="tok-n">Processing</span> <span class="tok-n">Phase</span> <span class="tok-mi">2</span> <span class="tok-n">of</span> <span class="tok-n">C</span> <span class="tok-n">in</span> <span class="tok-n">Thread</span><span class="tok-o">:</span> <span class="tok-n">Thread</span><span class="tok-o">-</span><span class="tok-mi">2</span>
<span class="tok-o">...</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_countdown_latch">Countdown Latch</h3>
<div class="ulist">
<ul>
<li>
<p>Sometimes you will want a thread to wait until one or more events have occurred.</p>
</li>
<li>
<p>To handle such a situation, the concurrent API supplies CountDownLatch.</p>
</li>
<li>
<p>A CountDownLatch is initially created with a count of the number of events that must occur before the latch is released.</p>
</li>
<li>
<p>Each time an event happens, the count is decremented. When the count reaches zero, the latch opens.</p>
</li>
<li>
<p>To wait on the latch, a thread calls <code>await( )</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_countdown_latch_listener">Countdown Latch Listener</h3>
<div class="ulist">
<ul>
<li>
<p>The Listener will trigger when the latch is counted down</p>
</li>
<li>
<p>This <code>Runnable</code> will block in the <code>countDownLatch.await</code> call</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/main/java/com.xyzcorp.demos.concurrent.synchronizers.countdownlatch.RunnableListener</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">RunnableListener</span> <span class="tok-kd">implements</span> <span class="tok-n">Runnable</span> <span class="tok-o">{</span>

    <span class="tok-kd">private</span> <span class="tok-n">CountDownLatch</span> <span class="tok-n">countDownLatch</span><span class="tok-o">;</span>
    <span class="tok-kd">private</span> <span class="tok-n">String</span> <span class="tok-n">name</span><span class="tok-o">;</span>

    <span class="tok-kd">public</span> <span class="tok-nf">RunnableListener</span><span class="tok-o">(</span><span class="tok-n">CountDownLatch</span> <span class="tok-n">countDownLatch</span><span class="tok-o">,</span> <span class="tok-n">String</span> <span class="tok-n">name</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">countDownLatch</span> <span class="tok-o">=</span> <span class="tok-n">countDownLatch</span><span class="tok-o">;</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">name</span> <span class="tok-o">=</span> <span class="tok-n">name</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">run</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">format</span><span class="tok-o">(</span><span class="tok-s">&quot;Processing %s in Thread: %s%n&quot;</span><span class="tok-o">,</span> <span class="tok-n">name</span><span class="tok-o">,</span>
                <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">currentThread</span><span class="tok-o">().</span><span class="tok-na">getName</span><span class="tok-o">());</span>
        <span class="tok-k">try</span> <span class="tok-o">{</span>
            <span class="tok-n">countDownLatch</span><span class="tok-o">.</span><span class="tok-na">await</span><span class="tok-o">();</span>
        <span class="tok-o">}</span> <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">InterruptedException</span> <span class="tok-n">e</span><span class="tok-o">)</span> <span class="tok-o">{</span>
            <span class="tok-n">e</span><span class="tok-o">.</span><span class="tok-na">printStackTrace</span><span class="tok-o">();</span>
        <span class="tok-o">}</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">format</span><span class="tok-o">(</span><span class="tok-s">&quot;Finally finishing %s in Thread: %s%n&quot;</span><span class="tok-o">,</span> <span class="tok-n">name</span><span class="tok-o">,</span>
                <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">currentThread</span><span class="tok-o">().</span><span class="tok-na">getName</span><span class="tok-o">());</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_countdown_latch_command">Countdown Latch Command</h3>
<div class="ulist">
<ul>
<li>
<p>This will issue the command to count down from another thread</p>
</li>
<li>
<p>They all share the same <code>CountDownLatch</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/main/java/com.xyzcorp.demos.concurrent.synchronizers.countdownlatch.RunnableCommand</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">RunnableCommand</span> <span class="tok-kd">implements</span> <span class="tok-n">Runnable</span> <span class="tok-o">{</span>

    <span class="tok-kd">private</span> <span class="tok-kd">final</span> <span class="tok-n">CountDownLatch</span> <span class="tok-n">countDownLatch</span><span class="tok-o">;</span>
    <span class="tok-kd">private</span> <span class="tok-kd">final</span> <span class="tok-n">String</span> <span class="tok-n">name</span><span class="tok-o">;</span>

    <span class="tok-kd">public</span> <span class="tok-nf">RunnableCommand</span><span class="tok-o">(</span><span class="tok-n">CountDownLatch</span> <span class="tok-n">countDownLatch</span><span class="tok-o">,</span> <span class="tok-n">String</span> <span class="tok-n">name</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">countDownLatch</span> <span class="tok-o">=</span> <span class="tok-n">countDownLatch</span><span class="tok-o">;</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">name</span> <span class="tok-o">=</span> <span class="tok-n">name</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">run</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-n">Random</span> <span class="tok-n">random</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Random</span><span class="tok-o">(</span><span class="tok-mi">304L</span><span class="tok-o">);</span>
        <span class="tok-k">try</span> <span class="tok-o">{</span>
            <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">sleep</span><span class="tok-o">(</span><span class="tok-n">random</span><span class="tok-o">.</span><span class="tok-na">nextInt</span><span class="tok-o">(</span><span class="tok-mi">3</span><span class="tok-o">)</span> <span class="tok-o">*</span> <span class="tok-mi">1000</span><span class="tok-o">);</span>
            <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">printf</span><span class="tok-o">(</span><span class="tok-s">&quot;Counting down in %s on Thread %s%n&quot;</span><span class="tok-o">,</span> <span class="tok-n">name</span><span class="tok-o">,</span>
                    <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">currentThread</span><span class="tok-o">().</span><span class="tok-na">getName</span><span class="tok-o">());</span>
            <span class="tok-n">countDownLatch</span><span class="tok-o">.</span><span class="tok-na">countDown</span><span class="tok-o">();</span>
            <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">printf</span><span class="tok-o">(</span><span class="tok-s">&quot;Counted down in %s on Thread %s%n&quot;</span><span class="tok-o">,</span> <span class="tok-n">name</span><span class="tok-o">,</span>
                    <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">currentThread</span><span class="tok-o">().</span><span class="tok-na">getName</span><span class="tok-o">());</span>
        <span class="tok-o">}</span> <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">InterruptedException</span> <span class="tok-n">e</span><span class="tok-o">)</span> <span class="tok-o">{</span>
            <span class="tok-n">e</span><span class="tok-o">.</span><span class="tok-na">printStackTrace</span><span class="tok-o">();</span>
        <span class="tok-o">}</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">CountDownLatch</span> <span class="tok-n">countDownLatch</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">CountDownLatch</span><span class="tok-o">(</span><span class="tok-mi">2</span><span class="tok-o">);</span>
<span class="tok-k">new</span> <span class="tok-n">Thread</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">RunnableListener</span><span class="tok-o">(</span><span class="tok-n">countDownLatch</span><span class="tok-o">,</span> <span class="tok-s">&quot;A&quot;</span><span class="tok-o">)).</span><span class="tok-na">start</span><span class="tok-o">();</span>
<span class="tok-k">new</span> <span class="tok-n">Thread</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">RunnableListener</span><span class="tok-o">(</span><span class="tok-n">countDownLatch</span><span class="tok-o">,</span> <span class="tok-s">&quot;B&quot;</span><span class="tok-o">)).</span><span class="tok-na">start</span><span class="tok-o">();</span>
<span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">sleep</span><span class="tok-o">(</span><span class="tok-mi">2000</span><span class="tok-o">);</span>
<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">countDownLatch</span><span class="tok-o">.</span><span class="tok-na">getCount</span><span class="tok-o">());</span>
<span class="tok-k">new</span> <span class="tok-n">Thread</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">RunnableCommand</span><span class="tok-o">(</span><span class="tok-n">countDownLatch</span><span class="tok-o">,</span> <span class="tok-s">&quot;A&quot;</span><span class="tok-o">)).</span><span class="tok-na">start</span><span class="tok-o">();</span>
<span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">sleep</span><span class="tok-o">(</span><span class="tok-mi">2000</span><span class="tok-o">);</span>
<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">countDownLatch</span><span class="tok-o">.</span><span class="tok-na">getCount</span><span class="tok-o">());</span>
<span class="tok-k">new</span> <span class="tok-n">Thread</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">RunnableCommand</span><span class="tok-o">(</span><span class="tok-n">countDownLatch</span><span class="tok-o">,</span> <span class="tok-s">&quot;B&quot;</span><span class="tok-o">)).</span><span class="tok-na">start</span><span class="tok-o">();</span>
<span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">sleep</span><span class="tok-o">(</span><span class="tok-mi">2000</span><span class="tok-o">);</span>
<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">countDownLatch</span><span class="tok-o">.</span><span class="tok-na">getCount</span><span class="tok-o">());</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Results In:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Processing</span> <span class="tok-n">A</span> <span class="tok-n">in</span> <span class="tok-n">Thread</span><span class="tok-o">:</span> <span class="tok-n">Thread</span><span class="tok-o">-</span><span class="tok-mi">0</span>
<span class="tok-n">Processing</span> <span class="tok-n">B</span> <span class="tok-n">in</span> <span class="tok-n">Thread</span><span class="tok-o">:</span> <span class="tok-n">Thread</span><span class="tok-o">-</span><span class="tok-mi">1</span>
<span class="tok-mi">2</span>
<span class="tok-n">Counting</span> <span class="tok-n">down</span> <span class="tok-n">in</span> <span class="tok-n">A</span> <span class="tok-n">on</span> <span class="tok-n">Thread</span> <span class="tok-n">Thread</span><span class="tok-o">-</span><span class="tok-mi">2</span>
<span class="tok-n">Counted</span> <span class="tok-n">down</span> <span class="tok-n">in</span> <span class="tok-n">A</span> <span class="tok-n">on</span> <span class="tok-n">Thread</span> <span class="tok-n">Thread</span><span class="tok-o">-</span><span class="tok-mi">2</span>
<span class="tok-mi">1</span>
<span class="tok-n">Counting</span> <span class="tok-n">down</span> <span class="tok-n">in</span> <span class="tok-n">B</span> <span class="tok-n">on</span> <span class="tok-n">Thread</span> <span class="tok-n">Thread</span><span class="tok-o">-</span><span class="tok-mi">3</span>
<span class="tok-n">Counted</span> <span class="tok-n">down</span> <span class="tok-n">in</span> <span class="tok-n">B</span> <span class="tok-n">on</span> <span class="tok-n">Thread</span> <span class="tok-n">Thread</span><span class="tok-o">-</span><span class="tok-mi">3</span>
<span class="tok-n">Finally</span> <span class="tok-n">finishing</span> <span class="tok-n">A</span> <span class="tok-n">in</span> <span class="tok-n">Thread</span><span class="tok-o">:</span> <span class="tok-n">Thread</span><span class="tok-o">-</span><span class="tok-mi">0</span>
<span class="tok-n">Finally</span> <span class="tok-n">finishing</span> <span class="tok-n">B</span> <span class="tok-n">in</span> <span class="tok-n">Thread</span><span class="tok-o">:</span> <span class="tok-n">Thread</span><span class="tok-o">-</span><span class="tok-mi">1</span>
<span class="tok-mi">0</span></code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2 slide_section">
<h3 id="_lab_threads">Lab: Threads</h3>
<div class="paragraph">
<p><strong>Step 1:</strong> Run the class <code>com.xyzcorp.demos.concurrent.threads.MyThread</code> in either Maven or your IDE
<strong>Step 2:</strong> This class will print the PID
<strong>Step 3:</strong> Then run <code>jcmd</code> which is a thread analysis tool for Java 8</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sh"><span></span>jcmd  <span class="tok-nv">$PID</span>  Thread.print</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Step 4:</strong> If you have <code>jconsole</code> installed, run it against the PID provided by the thread</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You may want to change the amount of time <code>MyThread</code> will run
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_futures">Futures</h2>
<div class="sectionbody">
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Future def. - Future represents the lifecycle of a task and provides methods to test whether the task has completed or has been cancelled.</p>
</div>
</blockquote>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Future can only move forwards and once complete it stays in that state forever.</p>
</div>
</blockquote>
</div>
<div class="sect2">
<h3 id="_thread_pools">Thread Pools</h3>
<div class="paragraph">
<p>Before setting up a future, a thread pool is required to perform an asynchronous computation.
Each pool with return an <code>ExecutorService</code>.</p>
</div>
<div class="paragraph">
<p>There are a few thread pools to choose from:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>FixedThreadPool</code></p>
</li>
<li>
<p><code>CachedThreadPool</code></p>
</li>
<li>
<p><code>SingleThreadExecutor</code></p>
</li>
<li>
<p><code>ScheduledThreadPool</code></p>
</li>
<li>
<p><code>ForkJoinThreadPool</code></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_fixed_thread_pool">Fixed Thread Pool</h4>
<div class="ulist">
<ul>
<li>
<p>"Creates a thread pool that reuses a fixed number of threads operating off a shared unbounded queue."</p>
</li>
<li>
<p>Keeps threads constant and uses the queue to manage tasks waiting to be run</p>
</li>
<li>
<p>If a thread fails, a new one is created in its stead</p>
</li>
<li>
<p>If all threads are taken up, it will wait on an unbounded queue for the next available thread</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_cached_thread_pool">Cached Thread Pool</h4>
<div class="ulist">
<ul>
<li>
<p>Flexible thread pool implementation that will reuse previously constructed threads if they are available</p>
</li>
<li>
<p>If no existing thread is available, a new thread is created and added to the pool</p>
</li>
<li>
<p>Threads that have not been used for sixty seconds are terminated and removed from the cache</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_single_thread_executor">Single Thread Executor</h4>
<div class="ulist">
<ul>
<li>
<p>Creates an Executor that uses a single worker thread operating off an unbounded queue</p>
</li>
<li>
<p>If a thread terminates due to a failure during execution prior to shutdown, a new one will take its place if needed to execute subsequent tasks.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_scheduled_thread_pool">Scheduled Thread Pool</h4>
<div class="ulist">
<ul>
<li>
<p>Can run your tasks after a delay or periodically</p>
</li>
<li>
<p>This method does not return an <code>ExecutorService</code>, but a <code>ScheduledExecutorService</code></p>
</li>
<li>
<p>Runs periodically until <code>canceled()</code> is called.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_fork_join_thread_pool">Fork Join Thread Pool</h4>
<div class="ulist">
<ul>
<li>
<p>An <code>ExecutorService</code>, that participates in <em>work-stealing</em></p>
</li>
<li>
<p>By default when a task creates other tasks (<code>ForkJoinTasks</code>) they are placed on the same on queue as the main task.</p>
</li>
<li>
<p><em>Work-stealing</em> is when a processor runs out of work, it looks at the queues of other processors and "steals" their work items.</p>
</li>
<li>
<p>Not a member of Executors. Created by instantiation</p>
</li>
<li>
<p>Brought up since this will be in many cases the "default" thread pool on the JVM</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_basic_future_blocking_jdk_5">Basic Future Blocking (JDK 5)</h3>
<div class="ulist">
<ul>
<li>
<p><code>get</code> will always block</p>
</li>
<li>
<p>Would be best to ensure that there is an result ready before querying</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.futures.FutureBasicsTest#testBasicFuture</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">ExecutorService</span> <span class="tok-n">fixedThreadPool</span> <span class="tok-o">=</span> <span class="tok-n">Executors</span><span class="tok-o">.</span><span class="tok-na">newFixedThreadPool</span><span class="tok-o">(</span><span class="tok-mi">5</span><span class="tok-o">);</span>

<span class="tok-n">Callable</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">callable</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Callable</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;()</span> <span class="tok-o">{</span>
    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-n">Integer</span> <span class="tok-nf">call</span><span class="tok-o">()</span> <span class="tok-kd">throws</span> <span class="tok-n">Exception</span> <span class="tok-o">{</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Inside ze future: &quot;</span> <span class="tok-o">+</span>
                <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">currentThread</span><span class="tok-o">().</span><span class="tok-na">getName</span><span class="tok-o">());</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Future priority: &quot;</span> <span class="tok-o">+</span>
          <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">currentThread</span><span class="tok-o">().</span><span class="tok-na">getPriority</span><span class="tok-o">());</span>
        <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">sleep</span><span class="tok-o">(</span><span class="tok-mi">5000</span><span class="tok-o">);</span>
        <span class="tok-k">return</span> <span class="tok-mi">5</span> <span class="tok-o">+</span> <span class="tok-mi">3</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>
<span class="tok-o">};</span>

<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;In test:&quot;</span> <span class="tok-o">+</span> <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">currentThread</span><span class="tok-o">().</span><span class="tok-na">getName</span><span class="tok-o">());</span>
<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Main priority&quot;</span> <span class="tok-o">+</span> <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">currentThread</span><span class="tok-o">().</span><span class="tok-na">getPriority</span><span class="tok-o">());</span>
<span class="tok-n">Future</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">future</span> <span class="tok-o">=</span> <span class="tok-n">fixedThreadPool</span><span class="tok-o">.</span><span class="tok-na">submit</span><span class="tok-o">(</span><span class="tok-n">callable</span><span class="tok-o">);</span>

<span class="tok-c1">//This will block</span>
<span class="tok-n">Integer</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">future</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">();</span> <span class="tok-c1">//block</span>
<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;result = &quot;</span> <span class="tok-o">+</span> <span class="tok-n">result</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_basic_future_asynchronous_jdk_5">Basic Future Asynchronous (JDK 5)</h3>
<div class="ulist">
<ul>
<li>
<p>From JDK 5 until JDK 8 this one the standard approach</p>
</li>
<li>
<p>There have been libraries like Guava which made this far easier</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.futures.FutureBasicsTest#testBasicFutureAsync</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">ExecutorService</span> <span class="tok-n">cachedThreadPool</span> <span class="tok-o">=</span> <span class="tok-n">Executors</span><span class="tok-o">.</span><span class="tok-na">newCachedThreadPool</span><span class="tok-o">();</span>

<span class="tok-n">Callable</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">callable</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Callable</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;()</span> <span class="tok-o">{</span>
    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-n">Integer</span> <span class="tok-nf">call</span><span class="tok-o">()</span> <span class="tok-kd">throws</span> <span class="tok-n">Exception</span> <span class="tok-o">{</span>
        <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">sleep</span><span class="tok-o">(</span><span class="tok-mi">3000</span><span class="tok-o">);</span>
        <span class="tok-k">return</span> <span class="tok-mi">5</span> <span class="tok-o">+</span> <span class="tok-mi">3</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>
<span class="tok-o">};</span>

<span class="tok-n">Future</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">future</span> <span class="tok-o">=</span> <span class="tok-n">cachedThreadPool</span><span class="tok-o">.</span><span class="tok-na">submit</span><span class="tok-o">(</span><span class="tok-n">callable</span><span class="tok-o">);</span>

<span class="tok-c1">//This is proper asynchrony</span>
<span class="tok-k">while</span> <span class="tok-o">(!</span><span class="tok-n">future</span><span class="tok-o">.</span><span class="tok-na">isDone</span><span class="tok-o">())</span> <span class="tok-o">{</span>
    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;I am doing something else on thread: &quot;</span> <span class="tok-o">+</span>
            <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">currentThread</span><span class="tok-o">().</span><span class="tok-na">getName</span><span class="tok-o">());</span>
<span class="tok-o">}</span>

<span class="tok-n">Integer</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">future</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">();</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_futures_with_parameters">Futures with Parameters</h3>
<div class="ulist">
<ul>
<li>
<p><code>Future</code> with a parameter will require a parameter be made with method</p>
</li>
<li>
<p>Use a <code>final</code> variable for the future</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.futures.FutureBasicsTest#downloadingContentFromURL</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">private</span> <span class="tok-n">Future</span><span class="tok-o">&lt;</span><span class="tok-n">Stream</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;&gt;</span> <span class="tok-nf">downloadingContentFromURL</span><span class="tok-o">(</span><span class="tok-kd">final</span> <span class="tok-n">String</span> <span class="tok-n">url</span><span class="tok-o">)</span> <span class="tok-o">{</span>
    <span class="tok-n">ExecutorService</span> <span class="tok-n">cachedThreadPool</span> <span class="tok-o">=</span> <span class="tok-n">Executors</span><span class="tok-o">.</span><span class="tok-na">newCachedThreadPool</span><span class="tok-o">();</span>
    <span class="tok-k">return</span> <span class="tok-n">cachedThreadPool</span><span class="tok-o">.</span><span class="tok-na">submit</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Callable</span><span class="tok-o">&lt;</span><span class="tok-n">Stream</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;&gt;()</span> <span class="tok-o">{</span>
        <span class="tok-nd">@Override</span>
        <span class="tok-kd">public</span> <span class="tok-n">Stream</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-nf">call</span><span class="tok-o">()</span> <span class="tok-kd">throws</span> <span class="tok-n">Exception</span> <span class="tok-o">{</span>
            <span class="tok-n">URL</span> <span class="tok-n">netUrl</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">URL</span><span class="tok-o">(</span><span class="tok-n">url</span><span class="tok-o">);</span>
            <span class="tok-n">URLConnection</span> <span class="tok-n">urlConnection</span> <span class="tok-o">=</span> <span class="tok-n">netUrl</span><span class="tok-o">.</span><span class="tok-na">openConnection</span><span class="tok-o">();</span>
            <span class="tok-n">BufferedReader</span> <span class="tok-n">reader</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">BufferedReader</span><span class="tok-o">(</span>
                    <span class="tok-k">new</span> <span class="tok-n">InputStreamReader</span><span class="tok-o">(</span>
                            <span class="tok-n">urlConnection</span><span class="tok-o">.</span><span class="tok-na">getInputStream</span><span class="tok-o">()));</span>
            <span class="tok-k">return</span> <span class="tok-n">reader</span>
                    <span class="tok-o">.</span><span class="tok-na">lines</span><span class="tok-o">()</span>
                    <span class="tok-o">.</span><span class="tok-na">flatMap</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">(</span><span class="tok-n">x</span><span class="tok-o">.</span><span class="tok-na">split</span><span class="tok-o">(</span><span class="tok-s">&quot; &quot;</span><span class="tok-o">)));</span>
        <span class="tok-o">}</span>
    <span class="tok-o">});</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_retrieving_the_future">Retrieving the <code>Future</code></h3>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.futures.FutureBasicsTest#testGettingUrl</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Future</span><span class="tok-o">&lt;</span><span class="tok-n">Stream</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;&gt;</span> <span class="tok-n">future</span> <span class="tok-o">=</span> <span class="tok-n">downloadingContentFromURL</span><span class="tok-o">(</span><span class="tok-s">&quot;https://openjdk.java.net/&quot;</span><span class="tok-o">);</span>
<span class="tok-k">while</span> <span class="tok-o">(!</span><span class="tok-n">future</span><span class="tok-o">.</span><span class="tok-na">isDone</span><span class="tok-o">())</span> <span class="tok-o">{</span>
    <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">sleep</span><span class="tok-o">(</span><span class="tok-mi">1000</span><span class="tok-o">);</span>
    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Doing Something Else&quot;</span><span class="tok-o">);</span>
<span class="tok-o">}</span>
<span class="tok-n">Stream</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">allStrings</span> <span class="tok-o">=</span> <span class="tok-n">future</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">();</span>
<span class="tok-n">allStrings</span>
        <span class="tok-o">.</span><span class="tok-na">filter</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span><span class="tok-o">.</span><span class="tok-na">contains</span><span class="tok-o">(</span><span class="tok-s">&quot;Java&quot;</span><span class="tok-o">))</span>
        <span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">(</span><span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">::</span><span class="tok-n">println</span><span class="tok-o">);</span>
<span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">sleep</span><span class="tok-o">(</span><span class="tok-mi">5000</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_completable_future">Completable Future</h3>
<div class="ulist">
<ul>
<li>
<p>Staged Completions of Interface <code>java.util.concurrent.CompletionStage&lt;T&gt;</code></p>
</li>
<li>
<p>Ability to chain functions to <code>Future&lt;V&gt;</code></p>
</li>
<li>
<p>Analogies</p>
<div class="ulist">
<ul>
<li>
<p><code>thenApply(&#8230;&#8203;)</code>   = map</p>
</li>
<li>
<p><code>thenCompose(&#8230;&#8203;)</code> = flatMap</p>
</li>
<li>
<p><code>thenCombine(&#8230;&#8203;)</code> = independent combination</p>
</li>
<li>
<p><code>thenAccept(&#8230;&#8203;)</code>  = final processing</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_setting_up_the_completable_future">Setting up the Completable Future</h4>
<div class="ulist">
<ul>
<li>
<p>We will run in the example 3 futures of a different quality</p>
</li>
<li>
<p>We will also include an <code>ExecutorService</code> for a Thread Pool</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.futures.CompletableFutureTest</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">private</span> <span class="tok-n">CompletableFuture</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integerFuture1</span><span class="tok-o">;</span>
<span class="tok-kd">private</span> <span class="tok-n">CompletableFuture</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integerFuture2</span><span class="tok-o">;</span>
<span class="tok-kd">private</span> <span class="tok-n">CompletableFuture</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">stringFuture1</span><span class="tok-o">;</span>
<span class="tok-kd">private</span> <span class="tok-n">ExecutorService</span> <span class="tok-n">executorService</span><span class="tok-o">;</span>
<span class="tok-n">executorService</span> <span class="tok-o">=</span> <span class="tok-n">Executors</span><span class="tok-o">.</span><span class="tok-na">newCachedThreadPool</span><span class="tok-o">();</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_implementation_for_the_futures">Implementation for the Futures</h3>
<div class="ulist">
<ul>
<li>
<p>Note that when some are created, they may include an <code>executorService</code></p>
</li>
<li>
<p>The <code>Future</code> that are not using an <code>executorService</code> will be using the default thread pool (<code>ForkJoin</code>)</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.futures.CompletableFutureTest</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">integerFuture1</span> <span class="tok-o">=</span> <span class="tok-n">CompletableFuture</span>
    <span class="tok-o">.</span><span class="tok-na">supplyAsync</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Supplier</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;()</span> <span class="tok-o">{</span>
        <span class="tok-nd">@Override</span>
        <span class="tok-kd">public</span> <span class="tok-n">Integer</span> <span class="tok-nf">get</span><span class="tok-o">()</span> <span class="tok-o">{</span>
            <span class="tok-k">try</span> <span class="tok-o">{</span>
                <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;intFuture1 is Sleeping in thread: &quot;</span>
                        <span class="tok-o">+</span> <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">currentThread</span><span class="tok-o">().</span><span class="tok-na">getName</span><span class="tok-o">());</span>
                <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">sleep</span><span class="tok-o">(</span><span class="tok-mi">3000</span><span class="tok-o">);</span>
            <span class="tok-o">}</span> <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">InterruptedException</span> <span class="tok-n">e</span><span class="tok-o">)</span> <span class="tok-o">{</span>
                <span class="tok-n">e</span><span class="tok-o">.</span><span class="tok-na">printStackTrace</span><span class="tok-o">();</span>
            <span class="tok-o">}</span>
            <span class="tok-k">return</span> <span class="tok-mi">5</span><span class="tok-o">;</span>
        <span class="tok-o">}</span>
    <span class="tok-o">});</span>
<span class="tok-o">}</span>
<span class="tok-n">integerFuture2</span> <span class="tok-o">=</span> <span class="tok-n">CompletableFuture</span>
        <span class="tok-o">.</span><span class="tok-na">supplyAsync</span><span class="tok-o">(()</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>
            <span class="tok-k">try</span> <span class="tok-o">{</span>
                <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;intFuture2 is sleeping in thread: &quot;</span>
                        <span class="tok-o">+</span> <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">currentThread</span><span class="tok-o">().</span><span class="tok-na">getName</span><span class="tok-o">());</span>
                <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">sleep</span><span class="tok-o">(</span><span class="tok-mi">400</span><span class="tok-o">);</span>
            <span class="tok-o">}</span> <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">InterruptedException</span> <span class="tok-n">e</span><span class="tok-o">)</span> <span class="tok-o">{</span>
                <span class="tok-n">e</span><span class="tok-o">.</span><span class="tok-na">printStackTrace</span><span class="tok-o">();</span>
            <span class="tok-o">}</span>
            <span class="tok-k">return</span> <span class="tok-mi">555</span><span class="tok-o">;</span>
        <span class="tok-o">},</span> <span class="tok-n">executorService</span><span class="tok-o">);</span>

<span class="tok-n">stringFuture1</span> <span class="tok-o">=</span> <span class="tok-n">CompletableFuture</span>
        <span class="tok-o">.</span><span class="tok-na">supplyAsync</span><span class="tok-o">(()</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>
            <span class="tok-k">try</span> <span class="tok-o">{</span>
                <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;stringFuture1 is sleeping in thread: &quot;</span>
                        <span class="tok-o">+</span> <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">currentThread</span><span class="tok-o">().</span><span class="tok-na">getName</span><span class="tok-o">());</span>
                <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">sleep</span><span class="tok-o">(</span><span class="tok-mi">4300</span><span class="tok-o">);</span>
            <span class="tok-o">}</span> <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">InterruptedException</span> <span class="tok-n">e</span><span class="tok-o">)</span> <span class="tok-o">{</span>
                <span class="tok-n">e</span><span class="tok-o">.</span><span class="tok-na">printStackTrace</span><span class="tok-o">();</span>
            <span class="tok-o">}</span>
            <span class="tok-k">return</span> <span class="tok-s">&quot;Los Angeles, CA&quot;</span><span class="tok-o">;</span>
        <span class="tok-o">});</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_simply_accepting_the_answer">Simply Accepting the Answer</h3>
<div class="ulist">
<ul>
<li>
<p><code>thenAccept</code></p>
<div class="ulist">
<ul>
<li>
<p>Accepts the answer</p>
</li>
<li>
<p>Argument is a <code>Consumer</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">integerFuture1</span><span class="tok-o">.</span><span class="tok-na">thenAccept</span><span class="tok-o">(</span><span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">::</span><span class="tok-n">println</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_functional_map_with_thenapply">Functional <code>map</code> with <code>thenApply</code></h3>
<div class="ulist">
<ul>
<li>
<p><code>thenApply</code></p>
<div class="ulist">
<ul>
<li>
<p>Analogous to <code>map</code></p>
</li>
<li>
<p>Accepts a <code>Function</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">CompletableFuture</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">future</span> <span class="tok-o">=</span>
        <span class="tok-n">integerFuture1</span><span class="tok-o">.</span><span class="tok-na">thenApply</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>
            <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;In Block:&quot;</span> <span class="tok-o">+</span>
                    <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">currentThread</span><span class="tok-o">().</span><span class="tok-na">getName</span><span class="tok-o">());</span>
            <span class="tok-k">return</span> <span class="tok-s">&quot;&quot;</span> <span class="tok-o">+</span> <span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">+</span> <span class="tok-mi">19</span><span class="tok-o">);</span>
        <span class="tok-o">});</span>
<span class="tok-n">future</span><span class="tok-o">.</span><span class="tok-na">thenAccept</span><span class="tok-o">(</span><span class="tok-n">s</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>
    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">currentThread</span><span class="tok-o">().</span><span class="tok-na">getName</span><span class="tok-o">());</span>
    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">s</span><span class="tok-o">);</span>
<span class="tok-o">});</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_asynchronous_functional_map_with_thenapplyasync">Asynchronous Functional <code>map</code> with <code>thenApplyAsync</code></h3>
<div class="ulist">
<ul>
<li>
<p><code>thenApplyAsync</code> will apply a map but will do so on another <code>Thread</code></p>
<div class="ulist">
<ul>
<li>
<p>If an <code>ExecutorService</code> is provided it will use a <code>Thread</code> from that pool</p>
</li>
<li>
<p>Otherwise it will pull a <code>Thread</code> from the <code>ForkJoin</code> pool</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.futures.CompletableFutureTest#completableFutureWithThenApplyAsync</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">CompletableFuture</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">thenApplyAsync</span> <span class="tok-o">=</span>
        <span class="tok-n">integerFuture1</span><span class="tok-o">.</span><span class="tok-na">thenApplyAsync</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>
            <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;In Block:&quot;</span> <span class="tok-o">+</span>
                    <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">currentThread</span><span class="tok-o">().</span><span class="tok-na">getName</span><span class="tok-o">());</span>
            <span class="tok-k">return</span> <span class="tok-s">&quot;&quot;</span> <span class="tok-o">+</span> <span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">+</span> <span class="tok-mi">19</span><span class="tok-o">);</span>
        <span class="tok-o">},</span> <span class="tok-n">executorService</span><span class="tok-o">);</span>
<span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">sleep</span><span class="tok-o">(</span><span class="tok-mi">5000</span><span class="tok-o">);</span>

<span class="tok-n">thenApplyAsync</span><span class="tok-o">.</span><span class="tok-na">thenAcceptAsync</span><span class="tok-o">((</span><span class="tok-n">x</span><span class="tok-o">)</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>
    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Accepting in:&quot;</span> <span class="tok-o">+</span> <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">currentThread</span><span class="tok-o">().</span><span class="tok-na">getName</span><span class="tok-o">());</span>
    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;x = &quot;</span> <span class="tok-o">+</span> <span class="tok-n">x</span><span class="tok-o">);</span>
<span class="tok-o">});</span>

<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Main:&quot;</span> <span class="tok-o">+</span> <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">currentThread</span><span class="tok-o">().</span><span class="tok-na">getName</span><span class="tok-o">());</span>
<span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">sleep</span><span class="tok-o">(</span><span class="tok-mi">3000</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_trigger_a_final_action_with_thenrun">Trigger a final action with <code>thenRun</code></h3>
<div class="ulist">
<ul>
<li>
<p><code>thenRun</code> will run any block after the chain of <code>CompleteableFuture</code></p>
</li>
<li>
<p>It will return a <code>CompletableFuture&lt;Void&gt;</code> so essentially it is sentinel.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.futures.CompletableFutureTest#completableFutureWithThenRun</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@Test</span>
<span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">completableFutureWithThenRun</span><span class="tok-o">()</span> <span class="tok-kd">throws</span> <span class="tok-n">InterruptedException</span> <span class="tok-o">{</span>
    <span class="tok-n">integerFuture1</span><span class="tok-o">.</span><span class="tok-na">thenRun</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Runnable</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-nd">@Override</span>
        <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">run</span><span class="tok-o">()</span> <span class="tok-o">{</span>
            <span class="tok-n">String</span> <span class="tok-n">successMessage</span> <span class="tok-o">=</span>
                    <span class="tok-s">&quot;I am doing something else once&quot;</span> <span class="tok-o">+</span>
                            <span class="tok-s">&quot; that future has been triggered!&quot;</span><span class="tok-o">;</span>
            <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span>
                    <span class="tok-o">(</span><span class="tok-n">successMessage</span><span class="tok-o">);</span>
        <span class="tok-o">}</span>
    <span class="tok-o">});</span>
    <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">sleep</span><span class="tok-o">(</span><span class="tok-mi">3000</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_trapping_errors_with_exceptionally">Trapping Errors with <code>exceptionally</code></h3>
<div class="ulist">
<ul>
<li>
<p>Exceptionally takes an error exception if anywhere on the chain there is an <code>Exception</code> thrown</p>
</li>
<li>
<p>Provides an alternative answer in case of Exception</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.futures.CompletableFutureTest#completableFutureExceptionally</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">stringFuture1</span><span class="tok-o">.</span><span class="tok-na">thenApply</span><span class="tok-o">((</span><span class="tok-n">s</span><span class="tok-o">)</span> <span class="tok-o">-&gt;</span> <span class="tok-n">Integer</span><span class="tok-o">.</span><span class="tok-na">parseInt</span><span class="tok-o">(</span><span class="tok-n">s</span><span class="tok-o">))</span>
        <span class="tok-o">.</span><span class="tok-na">exceptionally</span><span class="tok-o">(</span><span class="tok-n">t</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>
            <span class="tok-c1">//t.printStackTrace();</span>
            <span class="tok-k">return</span> <span class="tok-o">-</span><span class="tok-mi">1</span><span class="tok-o">;}).</span><span class="tok-na">thenAccept</span><span class="tok-o">(</span><span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">::</span><span class="tok-n">println</span><span class="tok-o">);</span>
<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;This message should appear first.&quot;</span><span class="tok-o">);</span>
<span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">sleep</span><span class="tok-o">(</span><span class="tok-mi">6000</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_trapping_errors_with_handle">Trapping Errors with <code>handle</code></h3>
<div class="ulist">
<ul>
<li>
<p>If you wish to handle the error based on both a successful output or an exception, use <code>handle</code></p>
</li>
<li>
<p>Gives you complete control of how to handle the response</p>
</li>
<li>
<p>Provides both the value and the <code>Throwable</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.futures.CompletableFutureTest#completableFutureHandle</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">stringFuture1</span><span class="tok-o">.</span><span class="tok-na">thenApply</span><span class="tok-o">((</span><span class="tok-n">s</span><span class="tok-o">)</span> <span class="tok-o">-&gt;</span> <span class="tok-n">Integer</span><span class="tok-o">.</span><span class="tok-na">parseInt</span><span class="tok-o">(</span><span class="tok-n">s</span><span class="tok-o">)).</span><span class="tok-na">handle</span><span class="tok-o">(</span>
        <span class="tok-k">new</span> <span class="tok-n">BiFunction</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">,</span> <span class="tok-n">Throwable</span><span class="tok-o">,</span> <span class="tok-n">Integer</span><span class="tok-o">&gt;()</span> <span class="tok-o">{</span>
            <span class="tok-nd">@Override</span>
            <span class="tok-kd">public</span> <span class="tok-n">Integer</span> <span class="tok-nf">apply</span><span class="tok-o">(</span><span class="tok-n">Integer</span> <span class="tok-n">item</span><span class="tok-o">,</span> <span class="tok-n">Throwable</span> <span class="tok-n">throwable</span><span class="tok-o">)</span> <span class="tok-o">{</span>
                <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">throwable</span> <span class="tok-o">==</span> <span class="tok-kc">null</span><span class="tok-o">)</span> <span class="tok-k">return</span> <span class="tok-n">item</span><span class="tok-o">;</span>
                <span class="tok-k">else</span> <span class="tok-k">return</span> <span class="tok-o">-</span><span class="tok-mi">1</span><span class="tok-o">;</span>
            <span class="tok-o">}</span>
        <span class="tok-o">}).</span><span class="tok-na">thenAccept</span><span class="tok-o">(</span><span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">::</span><span class="tok-n">println</span><span class="tok-o">);</span>

<span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">sleep</span><span class="tok-o">(</span><span class="tok-mi">6000</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_flatmap_with_compose_but_first_a_composablefuture_with_a_parameter"><code>flatMap</code> with <code>compose</code>, but first a <code>ComposableFuture</code> with a parameter</h3>
<div class="ulist">
<ul>
<li>
<p>Notice the structure is the same as a regular <code>Future</code> with a parameter</p>
</li>
<li>
<p>We need to encapsulate the future in a method using the parameter</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.futures.CompletableFutureTest#getTemperatureInFahrenheit</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-n">CompletableFuture</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span>
    <span class="tok-nf">getTemperatureInFahrenheit</span><span class="tok-o">(</span><span class="tok-kd">final</span> <span class="tok-n">String</span> <span class="tok-n">cityState</span><span class="tok-o">)</span> <span class="tok-o">{</span>
    <span class="tok-k">return</span> <span class="tok-n">CompletableFuture</span><span class="tok-o">.</span><span class="tok-na">supplyAsync</span><span class="tok-o">(()</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>
        <span class="tok-c1">//We go into a webservice to find the weather...</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;In getTemperatureInFahrenheit: &quot;</span> <span class="tok-o">+</span>
                <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">currentThread</span><span class="tok-o">().</span><span class="tok-na">getName</span><span class="tok-o">());</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Finding the temperature for &quot;</span> <span class="tok-o">+</span> <span class="tok-n">cityState</span><span class="tok-o">);</span>
        <span class="tok-k">return</span> <span class="tok-mi">78</span><span class="tok-o">;</span>
    <span class="tok-o">});</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_using_compose_to_compose_two_completablefuture">Using <code>compose</code> to compose two <code>CompletableFuture</code></h3>
<div class="ulist">
<ul>
<li>
<p><code>compose</code> is <code>flatMap</code> for <code>CompletableFuture</code> and allows you to build off one another</p>
</li>
<li>
<p>Use case, use a Future to look for a value, and based on the value create another <code>Future</code> for another task</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.futures.CompletableFutureTest#completableCompose</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">CompletableFuture</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">composition</span> <span class="tok-o">=</span>
        <span class="tok-n">stringFuture1</span><span class="tok-o">.</span><span class="tok-na">thenCompose</span><span class="tok-o">(</span><span class="tok-n">s</span> <span class="tok-o">-&gt;</span> <span class="tok-n">getTemperatureInFahrenheit</span><span class="tok-o">(</span><span class="tok-n">s</span><span class="tok-o">));</span>
<span class="tok-n">composition</span><span class="tok-o">.</span><span class="tok-na">thenAccept</span><span class="tok-o">(</span><span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">::</span><span class="tok-n">println</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_using_combine_to_combine_two_unrelated_completeablefuture">Using <code>combine</code> to combine two unrelated <code>CompleteableFuture</code></h3>
<div class="ulist">
<ul>
<li>
<p><code>combine</code> is not reliant on another&#8217;s evaluation but is used as a <code>join</code> to join the <code>CompletableFuture</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.futures.CompletableFutureTest#completableCombine</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@Test</span>
<span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">completableCombine</span><span class="tok-o">()</span> <span class="tok-kd">throws</span> <span class="tok-n">InterruptedException</span> <span class="tok-o">{</span>
    <span class="tok-n">CompletableFuture</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">combine</span> <span class="tok-o">=</span>
            <span class="tok-n">integerFuture1</span>
                    <span class="tok-o">.</span><span class="tok-na">thenCombine</span><span class="tok-o">(</span><span class="tok-n">integerFuture2</span><span class="tok-o">,</span> <span class="tok-o">(</span><span class="tok-n">x</span><span class="tok-o">,</span> <span class="tok-n">y</span><span class="tok-o">)</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span> <span class="tok-o">+</span> <span class="tok-n">y</span><span class="tok-o">);</span>
    <span class="tok-n">combine</span><span class="tok-o">.</span><span class="tok-na">thenAccept</span><span class="tok-o">(</span><span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">::</span><span class="tok-n">println</span><span class="tok-o">);</span>
    <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">sleep</span><span class="tok-o">(</span><span class="tok-mi">6000</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_a_promise_is_a_promise">A Promise is a <code>Promise</code></h3>
<div class="ulist">
<ul>
<li>
<p>A promise is a <code>Future</code> that not determined by calculation</p>
</li>
<li>
<p>There is no <code>Promise</code> construct in Java per se</p>
</li>
<li>
<p>You can use a <code>CompletableFuture</code> to perform the action of a Promise</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_creating_a_promise_using_completablefuture">Creating a Promise using <code>CompletableFuture</code></h3>
<div class="listingblock">
<div class="title">src/test/java/com.xyzcorp.demos.futures.CompletableFutureTest#testCompletableFuturePromise</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">CompletableFuture</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">completableFuture</span> <span class="tok-o">=</span>
        <span class="tok-k">new</span> <span class="tok-n">CompletableFuture</span><span class="tok-o">&lt;&gt;();</span>

<span class="tok-n">completableFuture</span><span class="tok-o">.</span><span class="tok-na">thenAccept</span><span class="tok-o">(</span><span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">::</span><span class="tok-n">println</span><span class="tok-o">);</span>

<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Processing something else&quot;</span><span class="tok-o">);</span>
<span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">sleep</span><span class="tok-o">(</span><span class="tok-mi">1000</span><span class="tok-o">);</span>
<span class="tok-n">completableFuture</span><span class="tok-o">.</span><span class="tok-na">complete</span><span class="tok-o">(</span><span class="tok-mi">42</span><span class="tok-o">);</span>
<span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">sleep</span><span class="tok-o">(</span><span class="tok-mi">3000</span><span class="tok-o">);</span></code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1 slide_section">
<h2 id="_flow_api">Flow API</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>JEP 266 (<a href="http://openjdk.java.net/jeps/266" class="bare">http://openjdk.java.net/jeps/266</a>)</p>
</li>
<li>
<p>Minimal set of interfaces that capture the heart of asynchronous publication and subscription</p>
</li>
<li>
<p>Interfaces contain that of what is in reactive-streams.org (Though they are not the same)</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_components">Components</h3>
<div class="ulist">
<ul>
<li>
<p><code>Publisher</code></p>
</li>
<li>
<p><code>Subscriber</code></p>
</li>
<li>
<p><code>Processor</code></p>
</li>
<li>
<p><code>Subscription</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_publisher"><code>Publisher</code></h3>
<div class="ulist">
<ul>
<li>
<p>The publisher publishes the stream of data items to the registered subscribers</p>
</li>
<li>
<p>It publishes items to the subscriber asynchronously, normally using an Executor</p>
</li>
<li>
<p>Publishers ensure that <code>Subscriber</code> method invocations for each subscription are strictly ordered</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_subscriber"><code>Subscriber</code></h3>
<div class="ulist">
<ul>
<li>
<p>The <code>Subscriber</code> subscribes to the <code>Publisher</code> for the callbacks.</p>
</li>
<li>
<p>Data items are not pushed to the <code>Subscriber</code> unless requested, but multiple items may be requested.</p>
</li>
<li>
<p><code>Subscriber</code> method invocations for a given <code>Subscription</code> are strictly ordered.</p>
</li>
<li>
<p>The application can react to the following callbacks, which are available on the subscriber</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_subscription"><code>Subscription</code></h3>
<div class="ulist">
<ul>
<li>
<p>Links a <code>Flow.Publisher</code> and <code>Flow.Subscriber</code></p>
</li>
<li>
<p>Subscribers receive items only when requested, and may cancel at any time, via the <code>Subscription</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_push_model">Push Model</h3>
<div class="imageblock">
<div class="content">
<img src="./images/push_model.png" alt="push model">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_processor"><code>Processor</code></h3>
<div class="ulist">
<ul>
<li>
<p>A component that acts as both a <code>Subscriber</code> and <code>Publisher</code></p>
</li>
<li>
<p>The processor sits between the <code>Publisher</code> and <code>Subscriber,</code> and transforms one stream to another.</p>
</li>
<li>
<p>There could be one or more processor chained together, and the result of the final processor in the chain, is processed by the <code>Subscriber</code></p>
</li>
<li>
<p>The JDK does not provide any concrete Processors so it is left up to the individual to write whatever processor one requires.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_physical_backpressure">Physical Backpressure</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Back pressure refers to pressure opposed to the desired flow of a fluid in a confined place such as a pipe. It is often caused by obstructions or tight bends in the confinement vessel along which it is moving, such as piping or air vents.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="_data_backpressure">Data Backpressure</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Back pressure is when an asynchronous source is emitting items more rapidly than an operator or subscriber can consume them. This presents the problem of what to do with such a growing backlog of unconsumed items.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="_flow_api_request_and_backpressure">Flow API Request and Backpressure</h3>
<div class="imageblock">
<div class="content">
<img src="./images/backpressure.png" alt="backpressure">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_flow_api_backpressure">Flow API Backpressure</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>The Flow API does not provide any APIs to signal or deal with back pressure as such, but there could be various strategies one could implement by oneself to deal with back pressure</p>
</div>
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="_publisher_2"><code>Publisher</code></h3>
<div class="paragraph">
<p>Example of a <code>Publisher</code> if we were to do our own with an <code>ExecutorService</code></p>
</div>
<div class="listingblock">
<div class="title">/src/main/java/com.xyzcorp.demos.reactive.MyPublisher</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">MyPublisher</span> <span class="tok-kd">implements</span> <span class="tok-n">Flow</span><span class="tok-o">.</span><span class="tok-na">Publisher</span><span class="tok-o">&lt;</span><span class="tok-n">Long</span><span class="tok-o">&gt;</span> <span class="tok-o">{</span>
    <span class="tok-kd">private</span> <span class="tok-kd">final</span> <span class="tok-n">ExecutorService</span> <span class="tok-n">executorService</span><span class="tok-o">;</span>

    <span class="tok-kd">public</span> <span class="tok-nf">MyPublisher</span><span class="tok-o">(</span><span class="tok-n">ExecutorService</span> <span class="tok-n">executorService</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">executorService</span> <span class="tok-o">=</span> <span class="tok-n">executorService</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">subscribe</span><span class="tok-o">(</span><span class="tok-n">Flow</span><span class="tok-o">.</span><span class="tok-na">Subscriber</span><span class="tok-o">&lt;?</span> <span class="tok-kd">super</span> <span class="tok-n">Long</span><span class="tok-o">&gt;</span> <span class="tok-n">subscriber</span><span class="tok-o">)</span> <span class="tok-o">{</span>
         <span class="tok-n">subscriber</span><span class="tok-o">.</span><span class="tok-na">onSubscribe</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Flow</span><span class="tok-o">.</span><span class="tok-na">Subscription</span><span class="tok-o">()</span> <span class="tok-o">{</span>
             <span class="tok-n">AtomicLong</span> <span class="tok-n">count</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">AtomicLong</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">);</span>
             <span class="tok-n">AtomicBoolean</span> <span class="tok-n">done</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">AtomicBoolean</span><span class="tok-o">(</span><span class="tok-kc">false</span><span class="tok-o">);</span>

             <span class="tok-nd">@Override</span>
             <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">request</span><span class="tok-o">(</span><span class="tok-kt">long</span> <span class="tok-n">n</span><span class="tok-o">)</span> <span class="tok-o">{</span>
                 <span class="tok-n">executorService</span><span class="tok-o">.</span><span class="tok-na">submit</span><span class="tok-o">(()</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>
                     <span class="tok-k">while</span> <span class="tok-o">(!</span><span class="tok-n">done</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-o">((</span><span class="tok-n">count</span><span class="tok-o">.</span><span class="tok-na">incrementAndGet</span><span class="tok-o">())</span> <span class="tok-o">&lt;</span> <span class="tok-n">n</span><span class="tok-o">))</span> <span class="tok-o">{</span>
                         <span class="tok-n">subscriber</span><span class="tok-o">.</span><span class="tok-na">onNext</span><span class="tok-o">(</span><span class="tok-n">count</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">());</span>
                     <span class="tok-o">}</span>
                 <span class="tok-o">});</span>
             <span class="tok-o">}</span>

             <span class="tok-nd">@Override</span>
             <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">cancel</span><span class="tok-o">()</span> <span class="tok-o">{</span>
                <span class="tok-n">done</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-kc">true</span><span class="tok-o">);</span>
             <span class="tok-o">}</span>
         <span class="tok-o">});</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_subscriber_and_subscription"><code>Subscriber</code> and <code>Subscription</code></h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">ExecutorService</span> <span class="tok-n">executorService</span> <span class="tok-o">=</span>
        <span class="tok-n">Executors</span><span class="tok-o">.</span><span class="tok-na">newFixedThreadPool</span><span class="tok-o">(</span><span class="tok-mi">100</span><span class="tok-o">);</span>


<span class="tok-n">MyPublisher</span> <span class="tok-n">myPublisher</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">MyPublisher</span><span class="tok-o">(</span><span class="tok-n">executorService</span><span class="tok-o">);</span>
<span class="tok-n">myPublisher</span><span class="tok-o">.</span><span class="tok-na">subscribe</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Flow</span><span class="tok-o">.</span><span class="tok-na">Subscriber</span><span class="tok-o">&lt;</span><span class="tok-n">Long</span><span class="tok-o">&gt;()</span> <span class="tok-o">{</span>
    <span class="tok-kd">private</span> <span class="tok-n">Flow</span><span class="tok-o">.</span><span class="tok-na">Subscription</span> <span class="tok-n">subscription</span><span class="tok-o">;</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">onSubscribe</span><span class="tok-o">(</span><span class="tok-n">Flow</span><span class="tok-o">.</span><span class="tok-na">Subscription</span> <span class="tok-n">subscription</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">subscription</span> <span class="tok-o">=</span> <span class="tok-n">subscription</span><span class="tok-o">;</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">subscription</span><span class="tok-o">.</span><span class="tok-na">request</span><span class="tok-o">(</span><span class="tok-mi">1000</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">onNext</span><span class="tok-o">(</span><span class="tok-n">Long</span> <span class="tok-n">item</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">item</span> <span class="tok-o">&lt;</span> <span class="tok-mi">0</span><span class="tok-o">)</span> <span class="tok-k">throw</span> <span class="tok-k">new</span> <span class="tok-n">RuntimeException</span><span class="tok-o">(</span><span class="tok-s">&quot;Nope&quot;</span><span class="tok-o">);</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;S1: (&quot;</span> <span class="tok-o">+</span>
                <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">currentThread</span><span class="tok-o">().</span><span class="tok-na">getName</span><span class="tok-o">()</span> <span class="tok-o">+</span> <span class="tok-s">&quot;)&quot;</span> <span class="tok-o">+</span> <span class="tok-n">item</span><span class="tok-o">);</span>
        <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">item</span> <span class="tok-o">==</span> <span class="tok-mi">350</span><span class="tok-o">)</span> <span class="tok-o">{</span>
            <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">subscription</span><span class="tok-o">.</span><span class="tok-na">cancel</span><span class="tok-o">();</span>
        <span class="tok-o">}</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">onError</span><span class="tok-o">(</span><span class="tok-n">Throwable</span> <span class="tok-n">throwable</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-n">throwable</span><span class="tok-o">.</span><span class="tok-na">printStackTrace</span><span class="tok-o">();</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">onComplete</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;S1: Done!&quot;</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_a_second_subscriber">A Second Subscriber</h3>
<div class="paragraph">
<p>Every Subscriber is different and can do different things with the data</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">myPublisher</span><span class="tok-o">.</span><span class="tok-na">subscribe</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">Flow</span><span class="tok-o">.</span><span class="tok-na">Subscriber</span><span class="tok-o">&lt;</span><span class="tok-n">Long</span><span class="tok-o">&gt;()</span> <span class="tok-o">{</span>
  <span class="tok-kd">private</span> <span class="tok-n">Flow</span><span class="tok-o">.</span><span class="tok-na">Subscription</span> <span class="tok-n">subscription</span><span class="tok-o">;</span>

  <span class="tok-nd">@Override</span>
  <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">onSubscribe</span><span class="tok-o">(</span><span class="tok-n">Flow</span><span class="tok-o">.</span><span class="tok-na">Subscription</span> <span class="tok-n">subscription</span><span class="tok-o">)</span> <span class="tok-o">{</span>
      <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">subscription</span> <span class="tok-o">=</span> <span class="tok-n">subscription</span><span class="tok-o">;</span>
      <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">subscription</span><span class="tok-o">.</span><span class="tok-na">request</span><span class="tok-o">(</span><span class="tok-mi">1000</span><span class="tok-o">);</span>
  <span class="tok-o">}</span>

  <span class="tok-nd">@Override</span>
  <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">onNext</span><span class="tok-o">(</span><span class="tok-n">Long</span> <span class="tok-n">item</span><span class="tok-o">)</span> <span class="tok-o">{</span>
      <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;S2: (&quot;</span> <span class="tok-o">+</span>
              <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">currentThread</span><span class="tok-o">().</span><span class="tok-na">getName</span><span class="tok-o">()</span> <span class="tok-o">+</span> <span class="tok-s">&quot;)&quot;</span> <span class="tok-o">+</span> <span class="tok-n">item</span><span class="tok-o">);</span>
  <span class="tok-o">}</span>

  <span class="tok-nd">@Override</span>
  <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">onError</span><span class="tok-o">(</span><span class="tok-n">Throwable</span> <span class="tok-n">throwable</span><span class="tok-o">)</span> <span class="tok-o">{</span>
      <span class="tok-n">throwable</span><span class="tok-o">.</span><span class="tok-na">printStackTrace</span><span class="tok-o">();</span>
  <span class="tok-o">}</span>

  <span class="tok-nd">@Override</span>
  <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">onComplete</span><span class="tok-o">()</span> <span class="tok-o">{</span>
      <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;S2: Done!&quot;</span><span class="tok-o">);</span>
  <span class="tok-o">}</span>
<span class="tok-o">});</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_reactive_streams">Reactive Streams</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.reactive-streams.org/" class="bare">https://www.reactive-streams.org/</a></p>
</li>
<li>
<p>Reactive Streams Standards</p>
</li>
<li>
<p>Abides by the Flow API</p>
<div class="ulist">
<ul>
<li>
<p><a href="http://reactivex.io/">RXJava</a></p>
</li>
<li>
<p><a href="https://projectreactor.io/">Project Reactor</a></p>
</li>
<li>
<p><a href="https://doc.akka.io/docs/akka/2.5/stream/">Akka Streams</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_interconnecting_reactive_projects">Interconnecting Reactive Projects</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Flux</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">reactorFlux</span> <span class="tok-o">=</span> <span class="tok-n">Flux</span><span class="tok-o">.</span><span class="tok-na">fromCompletionStage</span><span class="tok-o">(</span><span class="tok-n">CompletableFuture</span><span class="tok-o">.&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span><span class="tok-n">completedFuture</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">));</span>

<span class="tok-n">Observable</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">observable</span> <span class="tok-o">=</span> <span class="tok-n">Observable</span><span class="tok-o">.</span><span class="tok-na">fromPublisher</span><span class="tok-o">(</span><span class="tok-n">reactorFlux</span><span class="tok-o">);</span>

<span class="tok-n">observable</span><span class="tok-o">.</span><span class="tok-na">subscribe</span><span class="tok-o">(</span>
    <span class="tok-n">item</span> <span class="tok-o">-&gt;</span> <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">item</span><span class="tok-o">),</span>
    <span class="tok-n">error</span> <span class="tok-o">-&gt;</span> <span class="tok-n">error</span><span class="tok-o">.</span><span class="tok-na">printStackTrace</span><span class="tok-o">(),</span>
    <span class="tok-o">()</span> <span class="tok-o">-&gt;</span> <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Done&quot;</span><span class="tok-o">));</span></code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2 slide_section">
<h3 id="_lab_reactive">Lab: Reactive</h3>
<div class="paragraph">
<p><strong>Step 1:</strong> Open <em>src/test/java/com.xycorp.exercises.reactive.ReactiveExercises</em></p>
</div>
<div class="paragraph">
<p><strong>Step 2:</strong> Open in your browser the following <a href="https://raw.githubusercontent.com/datasets/population/master/data/population.csv">url</a></p>
</div>
<div class="paragraph">
<p><strong>Step 3:</strong> Create an RXJava <code>Observable</code> that reads from reads from the above url line by line</p>
</div>
<div class="paragraph">
<p><strong>Step 4:</strong> On one branch, find the latest population for the country you live in, output on <code>System.out.println</code></p>
</div>
<div class="paragraph">
<p><strong>Step 5:</strong> On another branch, find the change in population for the country you live in, output on <code>System.out.println</code></p>
</div>
<div class="paragraph">
<p><strong>Step 6:</strong> Extra Credit! Read from the URL using an IO Scheduler and write each of the branches to a file instead of <code>System.out.println</code></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_design_patterns">Design Patterns</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_creational_patterns">Creational Patterns</h3>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2 slide_section">
<h3 id="_factory_method_pattern">Factory Method Pattern</h3>
<div class="sect3">
<h4 id="_factory_method_pattern_properties">Factory Method Pattern Properties</h4>
<div class="ulist">
<ul>
<li>
<p><strong>Type:</strong> Creational</p>
</li>
<li>
<p><strong>Level:</strong> Class</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_factory_method_pattern_purpose">Factory Method Pattern Purpose</h4>
<div class="paragraph">
<p>To define a standard method to create an object, apart
from a constructor, but the decision of what kind of
an object to create is left to subclasses.</p>
</div>
</div>
<div class="sect3">
<h4 id="_factory_method_canonical_diagram">Factory Method Canonical Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="./images/diagram-classes.png" alt="diagram classes" width="467" height="456">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_factory_method_ingredients">Factory Method Ingredients</h4>
<div class="paragraph">
<p><strong>Product</strong> – The <code>interface</code> of objects created by the factory</p>
</div>
<div class="paragraph">
<p><strong>ConcreteProduct</strong> – The implementing class of <strong>Product</strong>. Objects of this class are created by the <strong>ConcreteCreator</strong>.</p>
</div>
<div class="paragraph">
<p><strong>Creator</strong> – The <code>interface</code> that defines the factory methods</p>
</div>
<div class="paragraph">
<p><strong>ConcreteCreator</strong> – The class that extends <strong>Creator</strong> and that provides an implementation for the factoryMethod. This can return any object that implements the <strong>Product</strong> interface.</p>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_factory_method_demo_diagram">Factory Method Demo Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="./images/factory_method_uml.png" alt="factory method uml">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_factory_method_advantages">Factory Method Advantages</h4>
<div class="ulist">
<ul>
<li>
<p>Extensible</p>
</li>
<li>
<p>Leave decision of specificity until later</p>
</li>
<li>
<p>Subclass, not superclass, determines the kind of object to create</p>
</li>
<li>
<p>You know when to create an object, but not what kind of an object.</p>
</li>
<li>
<p>You need several overloaded constructors with the same parameter list, which is not allowed in Java.  Instead, use several Factory Methods with different names.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_factory_method_disadvantages">Factory Method Disadvantages</h4>
<div class="ulist">
<ul>
<li>
<p>To create a new type you must create a separate subclass</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_factory_method_product">Factory Method: Product</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">Country</span> <span class="tok-o">{</span>
    <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">getName</span><span class="tok-o">();</span>

    <span class="tok-kd">public</span> <span class="tok-kt">byte</span><span class="tok-o">[]</span> <span class="tok-nf">getFlag</span><span class="tok-o">();</span>

    <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">capital</span><span class="tok-o">();</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_factory_method_concrete_product">Factory Method: Concrete Product</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span>
<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">ConcreteCountry</span> <span class="tok-kd">implements</span> <span class="tok-n">Country</span> <span class="tok-o">{</span>

    <span class="tok-kd">private</span> <span class="tok-n">String</span> <span class="tok-n">name</span><span class="tok-o">;</span>
    <span class="tok-kd">private</span> <span class="tok-n">String</span> <span class="tok-n">capital</span><span class="tok-o">;</span>
    <span class="tok-kd">private</span> <span class="tok-kt">byte</span><span class="tok-o">[]</span> <span class="tok-n">flagBytes</span><span class="tok-o">;</span>

    <span class="tok-kd">public</span> <span class="tok-nf">ConcreteCountry</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">name</span><span class="tok-o">,</span> <span class="tok-kt">byte</span><span class="tok-o">[]</span> <span class="tok-n">flagBytes</span><span class="tok-o">,</span> <span class="tok-n">String</span> <span class="tok-n">capital</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">name</span> <span class="tok-o">=</span> <span class="tok-n">name</span><span class="tok-o">;</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">capital</span> <span class="tok-o">=</span> <span class="tok-n">capital</span><span class="tok-o">;</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">flagBytes</span> <span class="tok-o">=</span> <span class="tok-n">flagBytes</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">getName</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-n">name</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-kt">byte</span><span class="tok-o">[]</span> <span class="tok-nf">getFlag</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-n">flagBytes</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">capital</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-n">capital</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_factory_method_creator">Factory Method: Creator</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">CountryFactory</span> <span class="tok-o">{</span>
    <span class="tok-kd">public</span> <span class="tok-n">Country</span> <span class="tok-nf">createCountry</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">name</span><span class="tok-o">,</span> <span class="tok-kt">byte</span><span class="tok-o">[]</span> <span class="tok-n">flag</span><span class="tok-o">,</span> <span class="tok-n">String</span> <span class="tok-n">capital</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_factory_method_concrete_creator">Factory Method: Concrete Creator</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">ConcreteCountryFactory</span> <span class="tok-kd">implements</span> <span class="tok-n">CountryFactory</span> <span class="tok-o">{</span>
    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-n">Country</span> <span class="tok-nf">createCountry</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">name</span><span class="tok-o">,</span> <span class="tok-kt">byte</span><span class="tok-o">[]</span> <span class="tok-n">flag</span><span class="tok-o">,</span> <span class="tok-n">String</span> <span class="tok-n">capital</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-k">new</span> <span class="tok-n">ConcreteCountry</span><span class="tok-o">(</span><span class="tok-n">name</span><span class="tok-o">,</span> <span class="tok-n">flag</span><span class="tok-o">,</span> <span class="tok-n">capital</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2 slide_section">
<h3 id="_builder_pattern">Builder Pattern</h3>
<div class="sect3">
<h4 id="_builder_pattern_properties">Builder Pattern Properties</h4>
<div class="ulist">
<ul>
<li>
<p><strong>Type:</strong> Creational</p>
</li>
<li>
<p><strong>Level:</strong> Component</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_builder_pattern_purpose">Builder Pattern Purpose</h4>
<div class="paragraph">
<p>To simplify complex object creation by defining a class
whose purpose is to build instances of another class.
The Builder produces one main product, such that there might
be more than one class in the product, but there is always
one main class.</p>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_builder_pattern_canonical_diagram">Builder Pattern Canonical Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="./images/builder-pattern.png" alt="builder pattern" width="231" height="551">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_builder_pattern_ingredients">Builder Pattern Ingredients</h4>
<div class="paragraph">
<p><strong>Director</strong> – Has a reference to an <strong>AbstractBuilder</strong> instance. The <strong>Director</strong> calls the
creational methods on its builder instance to have the different parts and the Builder build.</p>
</div>
<div class="paragraph">
<p><strong>AbstractBuilder</strong> – The interface that defines the available methods
to create the separate parts of the product.</p>
</div>
<div class="paragraph">
<p><strong>ConcreteBuilder</strong> – Implements the <strong>AbstractBuilder</strong> interface. The <strong>ConcreteBuilder</strong>
implements all the methods required to create a real Product. The
implementation of the methods knows how to process information from the
<strong>Director</strong> and build the respective parts of a Product.
The <strong>ConcreteBuilder</strong> also has either a <code>getProduct</code> method or a
creational method to return the <strong>Product</strong> instance.</p>
</div>
<div class="paragraph">
<p><strong>Product</strong> – The resulting object. You can define the product as either an interface (preferable) or class.</p>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_builder_pattern_advantages">Builder Pattern Advantages</h4>
<div class="ulist">
<ul>
<li>
<p>Works well if you have complex state in an object</p>
</li>
<li>
<p>Avoids complicated constructors</p>
</li>
<li>
<p>Avoids complicated object graph initialization</p>
</li>
<li>
<p>Works particularly well for dependencies that are difficult to setup</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_builder_pattern_disadvantages">Builder Pattern Disadvantages</h4>
<div class="ulist">
<ul>
<li>
<p>Tight coupling in the builder and its product</p>
</li>
<li>
<p>Any changes in the product would affect the builder</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_builder_pattern_demo_diagram">Builder Pattern Demo Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="./images/builder_uml.png" alt="builder uml">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_builder_director">Builder: Director</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">EspressoDrinkMaker</span> <span class="tok-o">{</span>

    <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-n">EspressoDrinkBuilder</span> <span class="tok-nf">addShots</span><span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">i</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-k">new</span> <span class="tok-n">EspressoDrinkBuilder</span><span class="tok-o">(</span><span class="tok-n">i</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_builder_concrete_builder">Builder: Concrete Builder</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">EspressoDrinkBuilder</span> <span class="tok-o">{</span>
    <span class="tok-kd">private</span> <span class="tok-kt">boolean</span> <span class="tok-n">whip</span><span class="tok-o">;</span>
    <span class="tok-kd">private</span> <span class="tok-kt">boolean</span> <span class="tok-n">sprinkles</span><span class="tok-o">;</span>
    <span class="tok-kd">private</span> <span class="tok-kt">int</span> <span class="tok-n">shots</span><span class="tok-o">;</span>

    <span class="tok-kd">public</span> <span class="tok-nf">EspressoDrinkBuilder</span><span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">shots</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">shots</span> <span class="tok-o">=</span> <span class="tok-n">shots</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-n">EspressoDrinkBuilder</span> <span class="tok-nf">addWhip</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">whip</span> <span class="tok-o">=</span> <span class="tok-kc">true</span><span class="tok-o">;</span>
        <span class="tok-k">return</span> <span class="tok-k">this</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-n">EspressoDrinkBuilder</span> <span class="tok-nf">addSprinkles</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">sprinkles</span> <span class="tok-o">=</span> <span class="tok-kc">true</span><span class="tok-o">;</span>
        <span class="tok-k">return</span> <span class="tok-k">this</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-n">EspressoDrink</span> <span class="tok-nf">build</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-k">new</span> <span class="tok-n">EspressoDrink</span><span class="tok-o">(</span><span class="tok-k">this</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_builder_product">Builder: Product</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">EspressoDrink</span> <span class="tok-o">{</span>
    <span class="tok-kd">private</span> <span class="tok-kt">int</span> <span class="tok-n">shots</span><span class="tok-o">;</span>
    <span class="tok-kd">private</span> <span class="tok-kt">boolean</span> <span class="tok-n">sprinkles</span><span class="tok-o">;</span>
    <span class="tok-kd">private</span> <span class="tok-kt">boolean</span> <span class="tok-n">whip</span><span class="tok-o">;</span>

    <span class="tok-kd">protected</span> <span class="tok-nf">EspressoDrink</span><span class="tok-o">(</span><span class="tok-n">EspressoDrinkBuilder</span> <span class="tok-n">espressoDrinkBuilder</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">shots</span> <span class="tok-o">=</span> <span class="tok-n">espressoDrinkBuilder</span><span class="tok-o">.</span><span class="tok-na">getShots</span><span class="tok-o">();</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">sprinkles</span> <span class="tok-o">=</span> <span class="tok-n">espressoDrinkBuilder</span><span class="tok-o">.</span><span class="tok-na">isSprinkles</span><span class="tok-o">();</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">whip</span> <span class="tok-o">=</span> <span class="tok-n">espressoDrinkBuilder</span><span class="tok-o">.</span><span class="tok-na">isWhip</span><span class="tok-o">();</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2 slide_section">
<h3 id="_singleton_pattern">Singleton Pattern</h3>
<div class="sect3">
<h4 id="_singleton_pattern_properties">Singleton Pattern Properties</h4>
<div class="ulist">
<ul>
<li>
<p><strong>Type:</strong> Creational</p>
</li>
<li>
<p><strong>Level:</strong> Object</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_singleton_pattern_purpose">Singleton Pattern Purpose</h4>
<div class="paragraph">
<p>To have only one instance of this class in the system,
while allowing other classes to get access to this instance.</p>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_singleton_canonical_diagram">Singleton Canonical Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="./images/singleton-pattern.png" alt="singleton pattern" width="241" height="129">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_singleton_ingredients">Singleton Ingredients</h4>
<div class="paragraph">
<p><strong>Singleton</strong> – Provides a private constructor, maintains
a private static reference to the single instance
of this class, and provides a static accessor method
to return a reference to the single instance.</p>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_singleton_demo_diagram">Singleton Demo Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="./images/singleton_uml.png" alt="singleton uml">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_singleton_pattern_advantages">Singleton Pattern Advantages</h4>
<div class="ulist">
<ul>
<li>
<p>If done right, can delay use of an object</p>
</li>
<li>
<p>Ensures a single object at all times</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_singleton_pattern_disadvantages">Singleton Pattern Disadvantages</h4>
<div class="ulist">
<ul>
<li>
<p>Abuse especially among beginning programmers</p>
</li>
<li>
<p>Difficulty in unit testing</p>
</li>
<li>
<p>Often unnecessary, particularly in dependency injection frameworks</p>
</li>
<li>
<p>No control over who accesses the object</p>
</li>
<li>
<p>Once you go singleton, it&#8217;s tough to change</p>
</li>
<li>
<p>Can expose threading issues, where duplicates can be created</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_singleton_an_eager_implementation">Singleton: An Eager Implementation</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">EagerSingleton</span> <span class="tok-o">{</span>
    <span class="tok-kd">private</span> <span class="tok-kd">static</span> <span class="tok-n">EagerSingleton</span> <span class="tok-n">instance</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">EagerSingleton</span><span class="tok-o">();</span>

    <span class="tok-kd">private</span> <span class="tok-nf">EagerSingleton</span><span class="tok-o">()</span> <span class="tok-o">{</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-n">EagerSingleton</span> <span class="tok-nf">getInstance</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-n">instance</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_singleton_a_lazy_non_thread_safe_implementation">Singleton: A Lazy Non-Thread-Safe Implementation</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">WrongLazySingleton</span> <span class="tok-o">{</span>
    <span class="tok-kd">private</span> <span class="tok-kd">static</span> <span class="tok-n">WrongLazySingleton</span> <span class="tok-n">instance</span> <span class="tok-o">=</span> <span class="tok-kc">null</span><span class="tok-o">;</span>

    <span class="tok-kd">private</span> <span class="tok-nf">WrongLazySingleton</span><span class="tok-o">()</span> <span class="tok-o">{</span> <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-n">WrongLazySingleton</span> <span class="tok-nf">getInstance</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">instance</span> <span class="tok-o">====</span> <span class="tok-kc">null</span><span class="tok-o">)</span> <span class="tok-o">{</span>
            <span class="tok-n">instance</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">WrongLazySingleton</span><span class="tok-o">();</span>
        <span class="tok-o">}</span>
        <span class="tok-k">return</span> <span class="tok-n">instance</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_singleton_a_lazy_thread_safe_implementation">Singleton: A Lazy Thread-Safe Implementation</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">RightLazySingleton</span> <span class="tok-o">{</span>
    <span class="tok-kd">private</span> <span class="tok-kd">static</span> <span class="tok-n">RightLazySingleton</span> <span class="tok-n">instance</span><span class="tok-o">;</span>

    <span class="tok-kd">private</span> <span class="tok-nf">RightLazySingleton</span><span class="tok-o">()</span> <span class="tok-o">{}</span>

    <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kd">synchronized</span> <span class="tok-n">RightLazySingleton</span> <span class="tok-nf">getInstance</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">instance</span> <span class="tok-o">====</span> <span class="tok-kc">null</span><span class="tok-o">)</span> <span class="tok-o">{</span>
            <span class="tok-n">instance</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">RightLazySingleton</span><span class="tok-o">();</span>
        <span class="tok-o">}</span>
        <span class="tok-k">return</span> <span class="tok-n">instance</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>synchronized</code> would obtain a lock on the class since the method is <code>static</code>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_singleton_an_enum_of_one">Singleton: An <code>enum</code> of one</h4>
<div class="paragraph">
<p>Recommended way to create a Singleton in Java:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">enum</span> <span class="tok-n">EnumSingleton</span> <span class="tok-o">{</span>
     <span class="tok-n">INSTANCE</span><span class="tok-o">;</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To use this&#8230;&#8203;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">var</span> <span class="tok-n">a</span> <span class="tok-o">=</span> <span class="tok-n">EnumSingleton</span><span class="tok-o">.</span><span class="tok-na">INSTANCE</span><span class="tok-o">;</span>
<span class="tok-n">var</span> <span class="tok-n">b</span> <span class="tok-o">=</span> <span class="tok-n">EnumSingleton</span><span class="tok-o">.</span><span class="tok-na">INSTANCE</span><span class="tok-o">;</span>

<span class="tok-n">a</span><span class="tok-o">.</span><span class="tok-na">equals</span><span class="tok-o">(</span><span class="tok-n">b</span><span class="tok-o">);</span>
<span class="tok-n">a</span><span class="tok-o">.</span><span class="tok-na">hashCode</span><span class="tok-o">()</span> <span class="tok-o">==</span> <span class="tok-n">b</span><span class="tok-o">.</span><span class="tok-na">hashCode</span><span class="tok-o">();</span>
<span class="tok-n">a</span><span class="tok-o">.</span><span class="tok-na">toString</span><span class="tok-o">().</span><span class="tok-na">equals</span><span class="tok-o">(</span><span class="tok-n">b</span><span class="tok-o">.</span><span class="tok-na">toString</span><span class="tok-o">());</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The above uses Java 10&#8217;s new <code>var</code>
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2 slide_section">
<h3 id="_factory_method_pattern_2">Factory Method Pattern</h3>
<div class="sect3">
<h4 id="_factory_method_pattern_properties_2">Factory Method Pattern Properties</h4>
<div class="ulist">
<ul>
<li>
<p><strong>Type:</strong> Creational</p>
</li>
<li>
<p><strong>Level:</strong> Class</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_factory_method_pattern_purpose_2">Factory Method Pattern Purpose</h4>
<div class="paragraph">
<p>To define a standard method to create an object, apart
from a constructor, but the decision of what kind of
an object to create is left to subclasses.</p>
</div>
</div>
<div class="sect3">
<h4 id="_factory_method_canonical_diagram_2">Factory Method Canonical Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="./images/diagram-classes.png" alt="diagram classes" width="467" height="456">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_factory_method_ingredients_2">Factory Method Ingredients</h4>
<div class="paragraph">
<p><strong>Product</strong> – The <code>interface</code> of objects created by the factory</p>
</div>
<div class="paragraph">
<p><strong>ConcreteProduct</strong> – The implementing class of <strong>Product</strong>. Objects of this class are created by the <strong>ConcreteCreator</strong>.</p>
</div>
<div class="paragraph">
<p><strong>Creator</strong> – The <code>interface</code> that defines the factory methods</p>
</div>
<div class="paragraph">
<p><strong>ConcreteCreator</strong> – The class that extends <strong>Creator</strong> and that provides an implementation for the factoryMethod. This can return any object that implements the <strong>Product</strong> interface.</p>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_factory_method_demo_diagram_2">Factory Method Demo Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="./images/factory_method_uml.png" alt="factory method uml">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_factory_method_advantages_2">Factory Method Advantages</h4>
<div class="ulist">
<ul>
<li>
<p>Extensible</p>
</li>
<li>
<p>Leave decision of specificity until later</p>
</li>
<li>
<p>Subclass, not superclass, determines the kind of object to create</p>
</li>
<li>
<p>You know when to create an object, but not what kind of an object.</p>
</li>
<li>
<p>You need several overloaded constructors with the same parameter list, which is not allowed in Java.  Instead, use several Factory Methods with different names.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_factory_method_disadvantages_2">Factory Method Disadvantages</h4>
<div class="ulist">
<ul>
<li>
<p>To create a new type you must create a separate subclass</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_factory_method_product_2">Factory Method: Product</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">Country</span> <span class="tok-o">{</span>
    <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">getName</span><span class="tok-o">();</span>

    <span class="tok-kd">public</span> <span class="tok-kt">byte</span><span class="tok-o">[]</span> <span class="tok-nf">getFlag</span><span class="tok-o">();</span>

    <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">capital</span><span class="tok-o">();</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_factory_method_concrete_product_2">Factory Method: Concrete Product</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span>
<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">ConcreteCountry</span> <span class="tok-kd">implements</span> <span class="tok-n">Country</span> <span class="tok-o">{</span>

    <span class="tok-kd">private</span> <span class="tok-n">String</span> <span class="tok-n">name</span><span class="tok-o">;</span>
    <span class="tok-kd">private</span> <span class="tok-n">String</span> <span class="tok-n">capital</span><span class="tok-o">;</span>
    <span class="tok-kd">private</span> <span class="tok-kt">byte</span><span class="tok-o">[]</span> <span class="tok-n">flagBytes</span><span class="tok-o">;</span>

    <span class="tok-kd">public</span> <span class="tok-nf">ConcreteCountry</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">name</span><span class="tok-o">,</span> <span class="tok-kt">byte</span><span class="tok-o">[]</span> <span class="tok-n">flagBytes</span><span class="tok-o">,</span> <span class="tok-n">String</span> <span class="tok-n">capital</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">name</span> <span class="tok-o">=</span> <span class="tok-n">name</span><span class="tok-o">;</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">capital</span> <span class="tok-o">=</span> <span class="tok-n">capital</span><span class="tok-o">;</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">flagBytes</span> <span class="tok-o">=</span> <span class="tok-n">flagBytes</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">getName</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-n">name</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-kt">byte</span><span class="tok-o">[]</span> <span class="tok-nf">getFlag</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-n">flagBytes</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">capital</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-n">capital</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_factory_method_creator_2">Factory Method: Creator</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">CountryFactory</span> <span class="tok-o">{</span>
    <span class="tok-kd">public</span> <span class="tok-n">Country</span> <span class="tok-nf">createCountry</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">name</span><span class="tok-o">,</span> <span class="tok-kt">byte</span><span class="tok-o">[]</span> <span class="tok-n">flag</span><span class="tok-o">,</span> <span class="tok-n">String</span> <span class="tok-n">capital</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_factory_method_concrete_creator_2">Factory Method: Concrete Creator</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">ConcreteCountryFactory</span> <span class="tok-kd">implements</span> <span class="tok-n">CountryFactory</span> <span class="tok-o">{</span>
    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-n">Country</span> <span class="tok-nf">createCountry</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">name</span><span class="tok-o">,</span> <span class="tok-kt">byte</span><span class="tok-o">[]</span> <span class="tok-n">flag</span><span class="tok-o">,</span> <span class="tok-n">String</span> <span class="tok-n">capital</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-k">new</span> <span class="tok-n">ConcreteCountry</span><span class="tok-o">(</span><span class="tok-n">name</span><span class="tok-o">,</span> <span class="tok-n">flag</span><span class="tok-o">,</span> <span class="tok-n">capital</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2 slide_section">
<h3 id="_abstract_factory_pattern">Abstract Factory Pattern</h3>
<div class="sect3">
<h4 id="_abstract_factory_pattern_properties">Abstract Factory Pattern Properties</h4>
<div class="paragraph">
<p><strong>Type:</strong> Creational, Object<br>
<strong>Level:</strong> Component<br></p>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_abstract_factory_pattern_purpose">Abstract Factory Pattern Purpose</h4>
<div class="paragraph">
<p>To provide a contract for creating families of related
 or dependent objects without having to specify
 their concrete classes.</p>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_abstract_factory_canonical_diagram">Abstract Factory Canonical Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="./images/abstract-factory-diagram.png" alt="abstract factory diagram" width="883" height="333">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_abstract_factory_ingredients">Abstract Factory Ingredients</h4>
<div class="paragraph">
<p><strong>AbstractFactory</strong> – An abstract class or interface that defines the create methods for abstract products.</p>
</div>
<div class="paragraph">
<p><strong>AbstractProduct</strong> – An abstract class or interface describing the general behavior of the resource that will be used by the application.</p>
</div>
<div class="paragraph">
<p><strong>ConcreteFactory</strong> – A class derived from the abstract factory . It implements create methods for one or more concrete products.</p>
</div>
<div class="paragraph">
<p><strong>ConcreteProduct</strong> – A class derived from the abstract product, providing an implementation for a specific resource or operating environment.</p>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_abstract_factory_demo_diagram">Abstract Factory Demo Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="./images/abstract_factory_uml.png" alt="abstract factory uml">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_abstract_factory_advantages">Abstract Factory Advantages</h4>
<div class="ulist">
<ul>
<li>
<p>Flexibility, the client is independent of how the products are created</p>
</li>
<li>
<p>Application is configured with one of multiple families of products</p>
</li>
<li>
<p>Objects need to be created as a set, in order to be compatible</p>
</li>
<li>
<p>Provide a collection of classes and you want to reveal just their contracts and their relationships, not implementation</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_abstract_factory_disadvantages">Abstract Factory Disadvantages</h4>
<div class="ulist">
<ul>
<li>
<p>An ill-defined abstraction can make things difficult later</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_abstract_factory_abstractfactory">Abstract Factory: AbstractFactory</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">abstract</span> <span class="tok-kd">class</span> <span class="tok-nc">RegistrationDAO</span> <span class="tok-o">{</span>
    <span class="tok-kd">public</span> <span class="tok-kd">abstract</span> <span class="tok-kt">void</span> <span class="tok-nf">persist</span><span class="tok-o">(</span><span class="tok-n">Registration</span> <span class="tok-n">registration</span><span class="tok-o">);</span>
    <span class="tok-kd">public</span> <span class="tok-kd">abstract</span> <span class="tok-kt">void</span> <span class="tok-nf">update</span><span class="tok-o">(</span><span class="tok-n">Registration</span> <span class="tok-n">registration</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_abstract_factory_concretefactory1">Abstract Factory: ConcreteFactory1</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">OracleRegistrationDAOFactory</span> <span class="tok-kd">extends</span> <span class="tok-n">RegistrationDAOFactory</span> <span class="tok-o">{</span>
   <span class="tok-kd">public</span> <span class="tok-n">RegistrationDAO</span> <span class="tok-nf">create</span><span class="tok-o">()</span> <span class="tok-o">{</span>
      <span class="tok-k">return</span> <span class="tok-k">new</span> <span class="tok-n">OracleRegistrationDAO</span><span class="tok-o">();</span>
   <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_abstract_factory_concretefactory2">Abstract Factory: ConcreteFactory2</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">MySQLRegistrationDAOFactory</span> <span class="tok-kd">extends</span> <span class="tok-n">RegistrationDAOFactory</span> <span class="tok-o">{</span>
   <span class="tok-kd">public</span> <span class="tok-n">RegistrationDAO</span> <span class="tok-nf">create</span><span class="tok-o">()</span> <span class="tok-o">{</span>
      <span class="tok-k">return</span> <span class="tok-k">new</span> <span class="tok-n">MySQLRegistrationDAO</span><span class="tok-o">();</span>
   <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_abstract_factory_abstract_product">Abstract Factory: Abstract Product</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">abstract</span> <span class="tok-kd">class</span> <span class="tok-nc">RegistrationDAO</span> <span class="tok-o">{</span>
   <span class="tok-kd">public</span> <span class="tok-kd">abstract</span> <span class="tok-kt">void</span> <span class="tok-nf">setDataSource</span><span class="tok-o">(</span><span class="tok-n">DataSource</span> <span class="tok-n">dataSource</span><span class="tok-o">);</span>
   <span class="tok-kd">public</span> <span class="tok-kd">abstract</span> <span class="tok-kt">void</span> <span class="tok-nf">persist</span><span class="tok-o">(</span><span class="tok-n">Registration</span> <span class="tok-n">registration</span><span class="tok-o">);</span>
   <span class="tok-kd">public</span> <span class="tok-kd">abstract</span> <span class="tok-kt">void</span> <span class="tok-nf">update</span><span class="tok-o">(</span><span class="tok-n">Registration</span> <span class="tok-n">registration</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_abstract_factory_concrete_product">Abstract Factory: Concrete Product</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">MySQLRegistrationDAO</span> <span class="tok-kd">extends</span> <span class="tok-n">RegistrationDAO</span> <span class="tok-o">{</span>
   <span class="tok-kd">private</span> <span class="tok-n">DataSource</span> <span class="tok-n">dataSource</span><span class="tok-o">;</span>

   <span class="tok-kd">public</span> <span class="tok-nf">MySQLRegistrationDAO</span><span class="tok-o">()</span> <span class="tok-o">{</span> <span class="tok-o">}</span>

   <span class="tok-nd">@Override</span>
   <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">setDataSource</span><span class="tok-o">(</span><span class="tok-n">DataSource</span> <span class="tok-n">dataSource</span><span class="tok-o">)</span> <span class="tok-o">{..}</span>

   <span class="tok-nd">@Override</span>
   <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">persist</span><span class="tok-o">(</span><span class="tok-n">Registration</span> <span class="tok-n">registration</span><span class="tok-o">)</span> <span class="tok-o">{..}</span>

   <span class="tok-nd">@Override</span>
   <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">update</span><span class="tok-o">(</span><span class="tok-n">Registration</span> <span class="tok-n">registration</span><span class="tok-o">)</span> <span class="tok-o">{..}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_behavioral_patterns">Behavioral Patterns</h3>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2 slide_section">
<h3 id="_state_pattern">State Pattern</h3>
<div class="sect3">
<h4 id="_state_pattern_properties">State Pattern Properties</h4>
<div class="paragraph">
<p><strong>Type:</strong> Behavioral<br>
<strong>Level:</strong> Object<br></p>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_state_pattern_purpose">State Pattern Purpose</h4>
<div class="ulist">
<ul>
<li>
<p>Easily change an object’s behavior at runtime.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_state_pattern_canonical_diagram">State Pattern Canonical Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="./images/state-pattern.png" alt="state pattern" width="366" height="349">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_state_pattern_ingredients">State Pattern Ingredients</h4>
<div class="paragraph">
<p><strong>Context</strong> – Keeps a reference to the current state, and is the interface for other clients to use. It delegates all state-specific method calls to the current State object.</p>
</div>
<div class="paragraph">
<p><strong>State</strong> – Defines all the methods that depend on the state of the object.</p>
</div>
<div class="paragraph">
<p><strong>ConcreteState</strong> – Implements the State interface, and implements specific behavior for one state.</p>
</div>
</div>
<div class="sect3">
<h4 id="_state_pattern_advantages">State Pattern Advantages</h4>
<div class="ulist">
<ul>
<li>
<p>Behavior depends on its state and the state changes frequently</p>
</li>
<li>
<p>Methods have large conditional statements that depend on the state of the object</p>
</li>
<li>
<p>You need clarity on the change of state by focusing on the small segmentation</p>
</li>
<li>
<p>Transitions are explicit and known</p>
</li>
<li>
<p>States can be shared</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_state_pattern_disadvantage">State Pattern Disadvantage</h4>
<div class="ulist">
<ul>
<li>
<p>Number of classes can increase</p>
</li>
<li>
<p>Requires mutability, and therefore care in multi-threading</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_state_demo_diagram">State Demo Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="./images/state_uml.png" alt="state uml">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_state_defining_state">State: Defining <code>State</code></h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">SwitchState</span> <span class="tok-o">{</span>
    <span class="tok-kt">void</span> <span class="tok-nf">execute</span><span class="tok-o">();</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_state_create_an_onstate_with_a_statefactory">State: Create an <code>onState</code> with a <code>StateFactory</code></h4>
<div class="paragraph">
<p>The following is setting up an on state in a factory</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">SwitchStateFactory</span> <span class="tok-o">{</span>
    <span class="tok-kd">private</span> <span class="tok-n">SwitchStateContext</span> <span class="tok-n">switchStateContext</span><span class="tok-o">;</span>
    <span class="tok-kd">private</span> <span class="tok-n">SwitchState</span> <span class="tok-n">onState</span><span class="tok-o">;</span>

    <span class="tok-o">...</span>

    <span class="tok-kd">public</span> <span class="tok-nf">SwitchStateFactory</span><span class="tok-o">(</span><span class="tok-n">SwitchStateContext</span> <span class="tok-n">switchStateContext</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">switchStateContext</span> <span class="tok-o">=</span> <span class="tok-n">switchStateContext</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">protected</span> <span class="tok-n">SwitchState</span> <span class="tok-nf">getOnState</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">onState</span> <span class="tok-o">==</span> <span class="tok-kc">null</span><span class="tok-o">)</span> <span class="tok-o">{</span>
            <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">onState</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">SwitchState</span><span class="tok-o">()</span> <span class="tok-o">{</span>
                <span class="tok-nd">@Override</span>
                <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">execute</span><span class="tok-o">()</span> <span class="tok-o">{</span>
                    <span class="tok-n">switchStateContext</span><span class="tok-o">.</span><span class="tok-na">setState</span><span class="tok-o">(</span><span class="tok-n">getOffState</span><span class="tok-o">());</span>
                <span class="tok-o">}</span>

                <span class="tok-nd">@Override</span>
                <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">toString</span><span class="tok-o">()</span> <span class="tok-o">{</span>
                    <span class="tok-k">return</span> <span class="tok-s">&quot;on&quot;</span><span class="tok-o">;</span>
                <span class="tok-o">}</span>
            <span class="tok-o">};</span>
        <span class="tok-o">}</span>
        <span class="tok-k">return</span> <span class="tok-n">onState</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_state_create_an_offstate_with_a_statefactory">State: Create an <code>offState</code> with a <code>StateFactory</code></h4>
<div class="paragraph">
<p>The following is setting up an off state in the <code>StateFactory</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">SwitchStateFactory</span> <span class="tok-o">{</span>
    <span class="tok-kd">private</span> <span class="tok-n">SwitchStateContext</span> <span class="tok-n">switchStateContext</span><span class="tok-o">;</span>
    <span class="tok-kd">private</span> <span class="tok-n">SwitchState</span> <span class="tok-n">offState</span><span class="tok-o">;</span>

    <span class="tok-o">...</span>

    <span class="tok-kd">public</span> <span class="tok-nf">SwitchStateFactory</span><span class="tok-o">(</span><span class="tok-n">SwitchStateContext</span> <span class="tok-n">switchStateContext</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">switchStateContext</span> <span class="tok-o">=</span> <span class="tok-n">switchStateContext</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">protected</span> <span class="tok-n">SwitchState</span> <span class="tok-nf">getOffState</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">offState</span> <span class="tok-o">==</span> <span class="tok-kc">null</span><span class="tok-o">)</span> <span class="tok-o">{</span>
            <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">offState</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">SwitchState</span><span class="tok-o">()</span> <span class="tok-o">{</span>
                <span class="tok-nd">@Override</span>
                <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">execute</span><span class="tok-o">()</span> <span class="tok-o">{</span>
                    <span class="tok-n">switchStateContext</span><span class="tok-o">.</span><span class="tok-na">setState</span><span class="tok-o">(</span><span class="tok-n">getOnState</span><span class="tok-o">());</span>
                <span class="tok-o">}</span>

                <span class="tok-nd">@Override</span>
                <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">toString</span><span class="tok-o">()</span> <span class="tok-o">{</span>
                    <span class="tok-k">return</span> <span class="tok-s">&quot;off&quot;</span><span class="tok-o">;</span>
                <span class="tok-o">}</span>
            <span class="tok-o">};</span>
        <span class="tok-o">}</span>
        <span class="tok-k">return</span> <span class="tok-n">offState</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_state_context">State: Context</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">SwitchStateContext</span> <span class="tok-o">{</span>
    <span class="tok-kd">private</span> <span class="tok-n">SwitchState</span> <span class="tok-n">switchState</span><span class="tok-o">;</span>

    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">setState</span><span class="tok-o">(</span><span class="tok-n">SwitchState</span> <span class="tok-n">switchState</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">switchState</span> <span class="tok-o">=</span> <span class="tok-n">switchState</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-n">SwitchState</span> <span class="tok-nf">getSwitchState</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-n">switchState</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">next</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-n">switchState</span><span class="tok-o">.</span><span class="tok-na">execute</span><span class="tok-o">();</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2 slide_section">
<h3 id="_strategy_pattern">Strategy Pattern</h3>
<div class="sect3">
<h4 id="_strategy_pattern_properties">Strategy Pattern Properties</h4>
<div class="paragraph">
<p><strong>Type:</strong> Behavioral<br>
<strong>Level:</strong> Component<br></p>
</div>
</div>
<div class="sect3">
<h4 id="_strategy_purpose">Strategy Purpose</h4>
<div class="paragraph">
<p>To define a group of classes that represent a set of
possible behaviors. These behaviors can then be flexibly
plugged into an application, changing the functionality on the fly.</p>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_strategy_canonical_diagram">Strategy Canonical Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="./images/strategy-pattern.png" alt="strategy pattern" width="377" height="362">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_strategy_ingredients">Strategy Ingredients</h4>
<div class="paragraph">
<p><strong>StrategyClient</strong> – This is the class that uses the different strategies for certain tasks. It keeps a reference to the Strategy instance that it uses and has a method to replace the current Strategy instance with another Strategy implementation.</p>
</div>
<div class="paragraph">
<p><strong>Strategy</strong> – The interface that defines all the methods available for the StrategyClient to use.</p>
</div>
<div class="paragraph">
<p><strong>ConcreteStrategy</strong> – A class that implements the Strategy interface using a specific set of rules for each of the methods in the interface.</p>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_strategy_advantages">Strategy Advantages</h4>
<div class="ulist">
<ul>
<li>
<p>You have a variety of ways to perform an action.</p>
</li>
<li>
<p>You might not know which approach to use until runtime.</p>
</li>
<li>
<p>You want to easily add to the possible ways to perform an action.</p>
</li>
<li>
<p>You want to keep the code maintainable as you add behaviors.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_strategy_disadvantages">Strategy Disadvantages</h4>
<div class="ulist">
<ul>
<li>
<p>Forethought and planning is required</p>
</li>
<li>
<p>Identifying a strategy that is generic enough for this pattern</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_strategy_demo_diagram">Strategy Demo Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="./images/strategy_uml.png" alt="strategy uml">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_strategy_strategy_interface">Strategy: Strategy Interface</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">AccumulatorStrategy</span> <span class="tok-o">{</span>
    <span class="tok-kd">public</span> <span class="tok-n">Integer</span> <span class="tok-nf">process</span><span class="tok-o">(</span><span class="tok-n">Integer</span> <span class="tok-n">a</span><span class="tok-o">,</span> <span class="tok-n">Integer</span> <span class="tok-n">b</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_strategy_one_concrete_strategy">Strategy: One Concrete Strategy</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">NumberAccumulator</span> <span class="tok-o">{</span>
    <span class="tok-kd">private</span> <span class="tok-n">AccumulatorStrategy</span> <span class="tok-n">strategy</span><span class="tok-o">;</span>

    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">setAccumulatorStrategy</span><span class="tok-o">(</span><span class="tok-n">AccumulatorStrategy</span> <span class="tok-n">strategy</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">strategy</span> <span class="tok-o">=</span> <span class="tok-n">strategy</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-n">Integer</span> <span class="tok-nf">accumulate</span><span class="tok-o">(</span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">size</span><span class="tok-o">()</span> <span class="tok-o">==</span> <span class="tok-mi">1</span><span class="tok-o">)</span> <span class="tok-k">return</span> <span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">);</span>
        <span class="tok-k">return</span> <span class="tok-n">strategy</span><span class="tok-o">.</span><span class="tok-na">process</span><span class="tok-o">(</span><span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">),</span>
            <span class="tok-n">accumulate</span><span class="tok-o">(</span><span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">subList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">size</span><span class="tok-o">())));</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_strategy_another_concrete_strategy">Strategy: Another Concrete Strategy</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">ProductAccumulator</span> <span class="tok-kd">implements</span> <span class="tok-n">AccumulatorStrategy</span> <span class="tok-o">{</span>
    <span class="tok-kd">public</span> <span class="tok-n">Integer</span> <span class="tok-nf">process</span><span class="tok-o">(</span><span class="tok-n">Integer</span> <span class="tok-n">a</span><span class="tok-o">,</span> <span class="tok-n">Integer</span> <span class="tok-n">b</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-n">a</span> <span class="tok-o">*</span> <span class="tok-n">b</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_strategy_yet_another_concrete_strategy">Strategy: Yet Another Concrete Strategy</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">SumAccumulator</span> <span class="tok-kd">implements</span> <span class="tok-n">AccumulatorStrategy</span> <span class="tok-o">{</span>
    <span class="tok-kd">public</span> <span class="tok-n">Integer</span> <span class="tok-nf">process</span><span class="tok-o">(</span><span class="tok-n">Integer</span> <span class="tok-n">a</span><span class="tok-o">,</span> <span class="tok-n">Integer</span> <span class="tok-n">b</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-n">a</span> <span class="tok-o">+</span> <span class="tok-n">b</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_strategy_use_of_the_strategy_pattern">Strategy: Use of the Strategy Pattern</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">NumberAccumulator</span> <span class="tok-n">numberAccumulator</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">NumberAccumulator</span><span class="tok-o">();</span>
<span class="tok-n">numberAccumulator</span><span class="tok-o">.</span><span class="tok-na">setAccumulatorStrategy</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">ProductAccumulator</span><span class="tok-o">());</span>

<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">ArrayList</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;();</span>
<span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">);</span>
<span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-mi">2</span><span class="tok-o">);</span>
<span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-mi">3</span><span class="tok-o">);</span>
<span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-mi">4</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_strategy_use_of_the_strategy_pattern_using_lambdas_java_8">Strategy: Use of the Strategy Pattern using Lambdas (Java 8+)</h4>
<div class="paragraph">
<p>The following is the same as the above, but using
lambdas and functional programming, much of the boilerplate
is evaporated away</p>
</div>
<div class="listingblock">
<div class="title">Using lambdas as a Strategy Pattern</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span><span class="tok-mi">2</span><span class="tok-o">,</span><span class="tok-mi">3</span><span class="tok-o">,</span><span class="tok-mi">4</span><span class="tok-o">).</span><span class="tok-na">stream</span><span class="tok-o">().</span><span class="tok-na">reduce</span><span class="tok-o">((</span><span class="tok-n">total</span><span class="tok-o">,</span> <span class="tok-n">next</span><span class="tok-o">)</span> <span class="tok-o">-&gt;</span> <span class="tok-n">total</span> <span class="tok-o">+</span> <span class="tok-n">next</span><span class="tok-o">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Renders:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Optional</span><span class="tok-o">[</span><span class="tok-mi">10</span><span class="tok-o">]</span></code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2 slide_section">
<h3 id="_chain_of_responsibility_pattern">Chain of Responsibility Pattern</h3>
<div class="sect3">
<h4 id="_chain_of_responsibility_properties">Chain of Responsibility Properties</h4>
<div class="paragraph">
<p><strong>Type:</strong> Behavioral<br>
<strong>Level:</strong> Component<br></p>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_chain_of_responsibility_purpose">Chain of Responsibility Purpose</h4>
<div class="paragraph">
<p>To establish a chain within a system, so that a message can
either be handled at the level where it is first received,
or be directed to an object that can handle it.</p>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_chain_of_responsibility_canonical_diagram">Chain of Responsibility Canonical Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="./images/chain-of-responsibility-pattern.png" alt="chain of responsibility pattern" width="530" height="241">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_chain_of_responsibility_ingredients">Chain of Responsibility Ingredients</h4>
<div class="paragraph">
<p><strong>Handler</strong> – The interface that defines the method used to pass a message to the next handler. That message is normally just the method call, but if more data needs to be encapsulated, an object can be passed as well.</p>
</div>
<div class="paragraph">
<p><strong>ConcreteHandler</strong> – A class that implements the Handler interface. It keeps a reference to the next Handler instance inline. This reference is either set in the constructor of the class or through a setter method. The implementation of the handleMessage method can determine how to handle the method and call a handleMethod, forward the message to the next Handler or a combination of both.</p>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_chain_of_responsibility_advantages">Chain of Responsibility Advantages</h4>
<div class="ulist">
<ul>
<li>
<p>There is a group of objects in a system that can all
potentially respond to the same kind of message</p>
</li>
<li>
<p>Offers complex message handling</p>
</li>
<li>
<p>Messages must be handled by one of several objects
within the system.</p>
</li>
<li>
<p>Messages follow the “handle or forward” model—that is,
some events can be handled at the level where they are
received or produced, while others must be forwarded to some other object.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_chain_of_responsibility_disadvantages">Chain of Responsibility Disadvantages</h4>
<div class="ulist">
<ul>
<li>
<p>Difficult to test and debug</p>
</li>
<li>
<p>Possible dropped message if not handled</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_chain_of_responsibility_demo_diagram">Chain of Responsibility Demo Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="./images/chain_of_responsibility_uml.png" alt="chain of responsibility uml">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_chain_of_responsibility_interface_of_a_model">Chain of Responsibility: Interface of a Model</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">Car</span> <span class="tok-o">{</span>
    <span class="tok-n">String</span> <span class="tok-nf">getMake</span><span class="tok-o">();</span>
    <span class="tok-n">String</span> <span class="tok-nf">getModel</span><span class="tok-o">();</span>
    <span class="tok-kt">int</span> <span class="tok-nf">getYear</span><span class="tok-o">();</span>

    <span class="tok-kt">boolean</span> <span class="tok-nf">powerSteering</span><span class="tok-o">();</span>
    <span class="tok-kt">boolean</span> <span class="tok-nf">driverAirBags</span><span class="tok-o">();</span>
    <span class="tok-kt">boolean</span> <span class="tok-nf">passengerAirBags</span><span class="tok-o">();</span>
    <span class="tok-kt">boolean</span> <span class="tok-nf">seatHeaters</span><span class="tok-o">();</span>
    <span class="tok-kt">boolean</span> <span class="tok-nf">seatCoolers</span><span class="tok-o">();</span>
    <span class="tok-kt">boolean</span> <span class="tok-nf">driveLaneAssist</span><span class="tok-o">();</span>
    <span class="tok-kt">boolean</span> <span class="tok-nf">rearCamera</span><span class="tok-o">();</span>
    <span class="tok-kt">void</span> <span class="tok-nf">addRecommendation</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">name</span><span class="tok-o">);</span>
    <span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-nf">getRecommendations</span><span class="tok-o">();</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_chain_of_responsibility_handler">Chain of Responsibility: Handler</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">Reviewer</span> <span class="tok-o">{</span>
    <span class="tok-kt">void</span> <span class="tok-nf">recommend</span><span class="tok-o">(</span><span class="tok-n">Car</span> <span class="tok-n">car</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_chain_of_responsibility_concrete_handler">Chain of Responsibility: Concrete Handler</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">CarAndBuyerReviewer</span> <span class="tok-kd">implements</span> <span class="tok-n">Reviewer</span> <span class="tok-o">{</span>

    <span class="tok-kd">private</span> <span class="tok-n">Reviewer</span> <span class="tok-n">nextReviewer</span><span class="tok-o">;</span>

    <span class="tok-kd">public</span> <span class="tok-nf">CarAndBuyerReviewer</span><span class="tok-o">(</span><span class="tok-n">Reviewer</span> <span class="tok-n">nextReviewer</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">nextReviewer</span> <span class="tok-o">=</span> <span class="tok-n">nextReviewer</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-nf">CarAndBuyerReviewer</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">nextReviewer</span> <span class="tok-o">=</span> <span class="tok-kc">null</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">recommend</span><span class="tok-o">(</span><span class="tok-n">Car</span> <span class="tok-n">car</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">car</span><span class="tok-o">.</span><span class="tok-na">passengerAirBags</span><span class="tok-o">()</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">car</span><span class="tok-o">.</span><span class="tok-na">driverAirBags</span><span class="tok-o">())</span>
           <span class="tok-n">car</span><span class="tok-o">.</span><span class="tok-na">addRecommendation</span><span class="tok-o">(</span><span class="tok-s">&quot;Car and Buyer&quot;</span><span class="tok-o">);</span>
        <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">nextReviewer</span> <span class="tok-o">!=</span> <span class="tok-kc">null</span><span class="tok-o">)</span>
           <span class="tok-n">nextReviewer</span><span class="tok-o">.</span><span class="tok-na">recommend</span><span class="tok-o">(</span><span class="tok-n">car</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_chain_of_responsibility_another_concrete_handler">Chain of Responsibility: Another Concrete Handler</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">CarFaxReviewer</span> <span class="tok-kd">implements</span> <span class="tok-n">Reviewer</span> <span class="tok-o">{</span>

    <span class="tok-kd">private</span> <span class="tok-kd">final</span> <span class="tok-n">Reviewer</span> <span class="tok-n">nextReviewer</span><span class="tok-o">;</span>

    <span class="tok-kd">public</span> <span class="tok-nf">CarFaxReviewer</span><span class="tok-o">(</span><span class="tok-n">Reviewer</span> <span class="tok-n">nextReviewer</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">nextReviewer</span> <span class="tok-o">=</span> <span class="tok-n">nextReviewer</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-nf">CarFaxReviewer</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">nextReviewer</span> <span class="tok-o">=</span> <span class="tok-kc">null</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">recommend</span><span class="tok-o">(</span><span class="tok-n">Car</span> <span class="tok-n">car</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">car</span><span class="tok-o">.</span><span class="tok-na">driverAirBags</span><span class="tok-o">())</span>
           <span class="tok-n">car</span><span class="tok-o">.</span><span class="tok-na">addRecommendation</span><span class="tok-o">(</span><span class="tok-s">&quot;CarFax&quot;</span><span class="tok-o">);</span>
        <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">nextReviewer</span> <span class="tok-o">!=</span> <span class="tok-kc">null</span><span class="tok-o">)</span>
           <span class="tok-n">nextReviewer</span><span class="tok-o">.</span><span class="tok-na">recommend</span><span class="tok-o">(</span><span class="tok-n">car</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_chain_of_responsibility_yet_another_concrete_handler">Chain of Responsibility: Yet Another Concrete Handler</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">JDPowerReviewer</span> <span class="tok-kd">implements</span> <span class="tok-n">Reviewer</span> <span class="tok-o">{</span>

    <span class="tok-kd">private</span> <span class="tok-n">Reviewer</span> <span class="tok-n">nextReviewer</span><span class="tok-o">;</span>

    <span class="tok-kd">public</span> <span class="tok-nf">JDPowerReviewer</span><span class="tok-o">(</span><span class="tok-n">Reviewer</span> <span class="tok-n">reviewer</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">nextReviewer</span> <span class="tok-o">=</span> <span class="tok-n">reviewer</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-nf">JDPowerReviewer</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">nextReviewer</span> <span class="tok-o">=</span> <span class="tok-kc">null</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">recommend</span><span class="tok-o">(</span><span class="tok-n">Car</span> <span class="tok-n">car</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">car</span><span class="tok-o">.</span><span class="tok-na">rearCamera</span><span class="tok-o">()</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">car</span><span class="tok-o">.</span><span class="tok-na">driveLaneAssist</span><span class="tok-o">()</span> <span class="tok-o">&amp;&amp;</span>
            <span class="tok-n">car</span><span class="tok-o">.</span><span class="tok-na">powerSteering</span><span class="tok-o">())</span>
            <span class="tok-n">car</span><span class="tok-o">.</span><span class="tok-na">addRecommendation</span><span class="tok-o">(</span><span class="tok-s">&quot;JD Power&quot;</span><span class="tok-o">);</span>
        <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">nextReviewer</span> <span class="tok-o">!=</span> <span class="tok-kc">null</span><span class="tok-o">)</span> <span class="tok-n">nextReviewer</span><span class="tok-o">.</span><span class="tok-na">recommend</span><span class="tok-o">(</span><span class="tok-n">car</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_chain_of_responsibility_running">Chain of Responsibility: Running</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">CarFaxReviewer</span> <span class="tok-n">carFaxReviewer</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">CarFaxReviewer</span><span class="tok-o">();</span>
<span class="tok-n">JDPowerReviewer</span> <span class="tok-n">jdPowerReviewer</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">JDPowerReviewer</span><span class="tok-o">(</span><span class="tok-n">carFaxReviewer</span><span class="tok-o">);</span>
<span class="tok-n">CarAndBuyerReviewer</span> <span class="tok-n">carAndBuyerReviewer</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">CarAndBuyerReviewer</span><span class="tok-o">(</span><span class="tok-n">jdPowerReviewer</span><span class="tok-o">);</span>

<span class="tok-n">carAndBuyerReviewer</span><span class="tok-o">.</span><span class="tok-na">recommend</span><span class="tok-o">(</span><span class="tok-n">car</span><span class="tok-o">);</span>

<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">car</span><span class="tok-o">.</span><span class="tok-na">getRecommendations</span><span class="tok-o">());</span></code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2 slide_section">
<h3 id="_command_pattern">Command Pattern</h3>
<div class="sect3">
<h4 id="_command_pattern_properties">Command Pattern Properties</h4>
<div class="paragraph">
<p><strong>Type:</strong> Behavioral<br>
<strong>Level:</strong> Object<br></p>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_command_pattern_purpose">Command Pattern Purpose</h4>
<div class="ulist">
<ul>
<li>
<p>To wrap a command in an object so that it can be stored, passed into methods, and returned like any other object.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_command_pattern_canonical_diagram">Command Pattern Canonical Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="./images/command-pattern.png" alt="command pattern" width="384" height="228">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_command_pattern_advantages">Command Pattern Advantages</h4>
<div class="ulist">
<ul>
<li>
<p>Decoupling the source or trigger of the event from the object that has the knowledge to perform the task.</p>
</li>
<li>
<p>Sharing Command instances between several objects.</p>
</li>
<li>
<p>Allowing the replacement of Commands and/or Receivers at runtime.</p>
</li>
<li>
<p>Making Commands regular objects, thus allowing for all the normal properties.</p>
</li>
<li>
<p>Easy addition of new Commands; just write another implementation of the interface and add it to the application.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_command_pattern_disadvantages">Command Pattern Disadvantages</h4>
<div class="ulist">
<ul>
<li>
<p>Not beneficial with too few commands</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_command_demo_diagram">Command Demo Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="./images/command_uml.png" alt="command uml">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_command_the_command_interface">Command: The command interface</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">Action</span> <span class="tok-o">{</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">execute</span><span class="tok-o">();</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_command_the_command_target">Command: The command target</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span>
<span class="tok-kn">import</span> <span class="tok-nn">javax.swing.</span><span class="tok-o">&lt;</span><span class="tok-n">strong</span><span class="tok-o">&gt;;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.awt.</span><span class="tok-o">&lt;/</span><span class="tok-n">strong</span><span class="tok-o">&gt;;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.time.LocalDateTime</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Target</span> <span class="tok-o">{</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">displayTime</span><span class="tok-o">(</span><span class="tok-n">LocalDateTime</span> <span class="tok-n">localDateTime</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-n">JFrame</span> <span class="tok-n">jFrame</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">JFrame</span><span class="tok-o">(</span><span class="tok-s">&quot;Title&quot;</span><span class="tok-o">);</span>
        <span class="tok-n">JPanel</span> <span class="tok-n">contentPane</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">JPanel</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">FlowLayout</span><span class="tok-o">());</span>
        <span class="tok-n">JLabel</span> <span class="tok-n">jLabel</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">JLabel</span><span class="tok-o">(</span><span class="tok-s">&quot;The time is: &quot;</span> <span class="tok-o">+</span>
           <span class="tok-n">localDateTime</span><span class="tok-o">.</span><span class="tok-na">toString</span><span class="tok-o">());</span>
        <span class="tok-n">contentPane</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-n">jLabel</span><span class="tok-o">);</span>
        <span class="tok-n">jFrame</span><span class="tok-o">.</span><span class="tok-na">setContentPane</span><span class="tok-o">(</span><span class="tok-n">contentPane</span><span class="tok-o">);</span>
        <span class="tok-n">jFrame</span><span class="tok-o">.</span><span class="tok-na">pack</span><span class="tok-o">();</span>
        <span class="tok-n">jFrame</span><span class="tok-o">.</span><span class="tok-na">setVisible</span><span class="tok-o">(</span><span class="tok-kc">true</span><span class="tok-o">);</span>
        <span class="tok-n">jFrame</span><span class="tok-o">.</span><span class="tok-na">setDefaultCloseOperation</span><span class="tok-o">(</span>
           <span class="tok-n">WindowConstants</span><span class="tok-o">.</span><span class="tok-na">DISPOSE_ON_CLOSE</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_command_a_command_action">Command: A command action</h4>
<div class="paragraph">
<p>The nice thing about the command pattern is that it is easy to add runtime actions!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kn">import</span> <span class="tok-nn">java.time.LocalDateTime</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">QueryTimeAction</span> <span class="tok-kd">implements</span> <span class="tok-n">Action</span><span class="tok-o">{</span>

    <span class="tok-kd">private</span> <span class="tok-kd">final</span> <span class="tok-n">Target</span> <span class="tok-n">target</span><span class="tok-o">;</span>

    <span class="tok-kd">public</span> <span class="tok-nf">QueryTimeAction</span><span class="tok-o">(</span><span class="tok-n">Target</span> <span class="tok-n">target</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">target</span> <span class="tok-o">=</span> <span class="tok-n">target</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">execute</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-n">target</span><span class="tok-o">.</span><span class="tok-na">displayTime</span><span class="tok-o">(</span><span class="tok-n">LocalDateTime</span><span class="tok-o">.</span><span class="tok-na">now</span><span class="tok-o">());</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_command_bringing_it_together">Command: Bringing it together</h4>
<div class="paragraph">
<p>Using a <code>main</code> method or a dependency injection container:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Map</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">,</span> <span class="tok-n">Action</span><span class="tok-o">&gt;</span> <span class="tok-n">commandMap</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">HashMap</span><span class="tok-o">&lt;&gt;();</span>
<span class="tok-n">Target</span> <span class="tok-n">target</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Target</span><span class="tok-o">();</span>
<span class="tok-n">Action</span> <span class="tok-n">action</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">QueryTimeAction</span><span class="tok-o">(</span><span class="tok-n">target</span><span class="tok-o">);</span>
<span class="tok-n">commandMap</span><span class="tok-o">.</span><span class="tok-na">put</span><span class="tok-o">(</span><span class="tok-s">&quot;showTime&quot;</span><span class="tok-o">,</span> <span class="tok-n">action</span><span class="tok-o">);</span>
<span class="tok-n">commandMap</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-s">&quot;showTime&quot;</span><span class="tok-o">).</span><span class="tok-na">execute</span><span class="tok-o">();</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_command_bringing_it_together_with_java_8_lambdas">Command: Bringing it together with Java 8 lambdas</h4>
<div class="paragraph">
<p>Using a <code>main</code> method or a dependency injection container:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Map</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">,</span> <span class="tok-n">Action</span><span class="tok-o">&gt;</span> <span class="tok-n">commandMap</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">HashMap</span><span class="tok-o">&lt;&gt;();</span>
<span class="tok-n">Target</span> <span class="tok-n">target</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Target</span><span class="tok-o">();</span>
<span class="tok-n">Action</span> <span class="tok-n">action</span> <span class="tok-o">=</span> <span class="tok-o">()</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>
   <span class="tok-n">target</span><span class="tok-o">.</span><span class="tok-na">displayTime</span><span class="tok-o">(</span><span class="tok-n">LocalDateTime</span><span class="tok-o">.</span><span class="tok-na">now</span><span class="tok-o">());</span>
<span class="tok-o">};</span>
<span class="tok-n">commandMap</span><span class="tok-o">.</span><span class="tok-na">put</span><span class="tok-o">(</span><span class="tok-s">&quot;showTime&quot;</span><span class="tok-o">,</span> <span class="tok-n">action</span><span class="tok-o">);</span>
<span class="tok-n">commandMap</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-s">&quot;showTime&quot;</span><span class="tok-o">).</span><span class="tok-na">execute</span><span class="tok-o">();</span></code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2 slide_section">
<h3 id="_iterator_pattern">Iterator Pattern</h3>
<div class="sect3">
<h4 id="_iterator_pattern_properties">Iterator Pattern Properties</h4>
<div class="paragraph">
<p><strong>Type:</strong> Behavioral, Object<br>
<strong>Level:</strong> Component<br></p>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_iterator_purpose">Iterator Purpose</h4>
<div class="paragraph">
<p>To provide a consistent way to sequentially access items in a collection that is independent of and separate from the underlying collection.</p>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_iterator_canonical_diagram">Iterator Canonical Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="./images/iterator-pattern.png" alt="iterator pattern" width="621" height="293">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_iterator_ingredients">Iterator Ingredients</h4>
<div class="paragraph">
<p><strong>Iterator</strong> – This interface defines the standard iteration methods. At a minimum, the interface defines methods for navigation, retrieval and validation (<code>first</code>, <code>next</code>, <code>hasMoreElements</code> and <code>getCurrentItem</code>)</p>
</div>
<div class="paragraph">
<p><strong>ConcreteIterator</strong> – Classes that implement the <code>Iterator</code>. These classes reference the underlying collection. Normally, instances are created by the <code>ConcreteAggregate</code>. Because of the tight coupling with the <code>ConcreteAggregate</code>, the <code>ConcreteIterator</code> often is an inner class of the <code>ConcreteAggregate</code>.</p>
</div>
<div class="paragraph">
<p><strong>Aggregate</strong> – This interface defines a factory method to produce the <code>Iterator</code>.</p>
</div>
<div class="paragraph">
<p><strong>ConcreteAggregate</strong> – This class implements the Aggregate, building a <code>ConcreteIterator</code> on demand. The <code>ConcreteAggregate</code> performs this task in addition to its fundamental responsibility of representing a collection of objects in a system. <code>ConcreteAggregate</code> creates the <code>ConcreteIterator</code> instance.</p>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_iterator_advantages">Iterator Advantages</h4>
<div class="ulist">
<ul>
<li>
<p>A uniform interface for traversing a collection</p>
</li>
<li>
<p>Not to tied to the implementation of the collection</p>
</li>
<li>
<p>Enabling several clients to simultaneously navigate within the same underlying collection.</p>
</li>
<li>
<p>You can think of an Iterator as a cursor or pointer into the collection</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_iterator_disadvantages">Iterator Disadvantages</h4>
<div class="ulist">
<ul>
<li>
<p>They give the illusion of order to unordered structures</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_iterator_demo_diagram">Iterator Demo Diagram</h4>
<div class="paragraph">
<p>JDK 8+ UML Diagram</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/iterator_uml.png" alt="iterator uml">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_iterator_javas_implementation_java_8">Iterator: Java&#8217;s implementation (Java 8+)</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">Iterator</span><span class="tok-o">&lt;</span><span class="tok-n">E</span><span class="tok-o">&gt;</span> <span class="tok-o">{</span>
    <span class="tok-kt">boolean</span> <span class="tok-nf">hasNext</span><span class="tok-o">();</span>

    <span class="tok-n">E</span> <span class="tok-nf">next</span><span class="tok-o">();</span>

    <span class="tok-k">default</span> <span class="tok-kt">void</span> <span class="tok-nf">remove</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">throw</span> <span class="tok-k">new</span> <span class="tok-n">UnsupportedOperationException</span><span class="tok-o">(</span><span class="tok-s">&quot;remove&quot;</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>

    <span class="tok-k">default</span> <span class="tok-kt">void</span> <span class="tok-nf">forEachRemaining</span><span class="tok-o">(</span><span class="tok-n">Consumer</span><span class="tok-o">&lt;?</span> <span class="tok-kd">super</span> <span class="tok-n">E</span><span class="tok-o">&gt;</span> <span class="tok-n">action</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-n">Objects</span><span class="tok-o">.</span><span class="tok-na">requireNonNull</span><span class="tok-o">(</span><span class="tok-n">action</span><span class="tok-o">);</span>
        <span class="tok-k">while</span> <span class="tok-o">(</span><span class="tok-n">hasNext</span><span class="tok-o">())</span>
            <span class="tok-n">action</span><span class="tok-o">.</span><span class="tok-na">accept</span><span class="tok-o">(</span><span class="tok-n">next</span><span class="tok-o">());</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The above is the Java 8+ signature
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_use_of_javas_iterator">Use of Java&#8217;s Iterator</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">var</span> <span class="tok-n">stringList</span> <span class="tok-o">=</span> <span class="tok-n">List</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-s">&quot;Foo&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Bar&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Baz&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Qux&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Quux&quot;</span><span class="tok-o">);</span>
<span class="tok-n">Iterator</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">iterator</span> <span class="tok-o">=</span> <span class="tok-n">stringList</span><span class="tok-o">.</span><span class="tok-na">iterator</span><span class="tok-o">();</span>

<span class="tok-n">String</span> <span class="tok-n">value1</span> <span class="tok-o">=</span> <span class="tok-n">iterator</span><span class="tok-o">.</span><span class="tok-na">next</span><span class="tok-o">();</span>
<span class="tok-n">String</span> <span class="tok-n">value2</span> <span class="tok-o">=</span> <span class="tok-n">iterator</span><span class="tok-o">.</span><span class="tok-na">next</span><span class="tok-o">();</span>

<span class="tok-n">assertEquals</span><span class="tok-o">(</span><span class="tok-n">value1</span><span class="tok-o">,</span> <span class="tok-s">&quot;Foo&quot;</span><span class="tok-o">);</span> <span class="tok-c1">//true</span>
<span class="tok-n">assertEquals</span><span class="tok-o">(</span><span class="tok-n">value2</span><span class="tok-o">,</span> <span class="tok-s">&quot;Bar&quot;</span><span class="tok-o">);</span> <span class="tok-c1">//true</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_java_iterator_trick_question">Java Iterator Trick Question</h4>
<div class="paragraph">
<p>What is <code>value1</code> and <code>value2</code>?</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">var</span> <span class="tok-n">stringList</span> <span class="tok-o">=</span> <span class="tok-n">List</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-s">&quot;Foo&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Bar&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Baz&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Qux&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Quux&quot;</span><span class="tok-o">);</span>
<span class="tok-n">String</span> <span class="tok-n">value1</span> <span class="tok-o">=</span> <span class="tok-n">stringList</span><span class="tok-o">.</span><span class="tok-na">iterator</span><span class="tok-o">().</span><span class="tok-na">next</span><span class="tok-o">();</span>
<span class="tok-n">String</span> <span class="tok-n">value2</span> <span class="tok-o">=</span> <span class="tok-n">stringList</span><span class="tok-o">.</span><span class="tok-na">iterator</span><span class="tok-o">().</span><span class="tok-na">next</span><span class="tok-o">();</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_using_java_iterator_with_while">Using Java Iterator with <code>while</code></h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">var</span> <span class="tok-n">iterator</span> <span class="tok-o">=</span> <span class="tok-n">List</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-s">&quot;Foo&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Bar&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Baz&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Qux&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Quux&quot;</span><span class="tok-o">).</span><span class="tok-na">iterator</span><span class="tok-o">();</span>
<span class="tok-n">var</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">ArrayList</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;();</span>
<span class="tok-k">while</span><span class="tok-o">(</span><span class="tok-n">iterator</span><span class="tok-o">.</span><span class="tok-na">hasNext</span><span class="tok-o">())</span> <span class="tok-o">{</span>
    <span class="tok-n">result</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-n">iterator</span><span class="tok-o">.</span><span class="tok-na">next</span><span class="tok-o">());</span>
<span class="tok-o">}</span>
<span class="tok-n">assertEquals</span><span class="tok-o">(</span><span class="tok-s">&quot;[Foo, Bar, Baz, Qux, Quux]&quot;</span><span class="tok-o">,</span><span class="tok-n">result</span><span class="tok-o">.</span><span class="tok-na">toString</span><span class="tok-o">());</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_using_java_iterator_with_java_5_for_loop">Using Java Iterator with Java 5 for loop</h4>
<div class="paragraph">
<p>If a collection extends from <code>Iterable</code> it can be placed in a loop</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">var</span> <span class="tok-n">list</span> <span class="tok-o">=</span> <span class="tok-n">List</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-s">&quot;Foo&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Bar&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Baz&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Qux&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Quux&quot;</span><span class="tok-o">);</span>
<span class="tok-n">var</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">ArrayList</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;();</span>
<span class="tok-k">for</span> <span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">s</span> <span class="tok-o">:</span> <span class="tok-n">list</span><span class="tok-o">)</span> <span class="tok-o">{</span>
    <span class="tok-n">result</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-n">s</span><span class="tok-o">);</span>
<span class="tok-o">}</span>
<span class="tok-n">assertEquals</span><span class="tok-o">(</span><span class="tok-s">&quot;[Foo, Bar, Baz, Qux, Quux]&quot;</span><span class="tok-o">,</span><span class="tok-n">result</span><span class="tok-o">.</span><span class="tok-na">toString</span><span class="tok-o">());</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_using_javas_listiterator">Using Java&#8217;s <code>ListIterator</code></h4>
<div class="ulist">
<ul>
<li>
<p>An iterator for lists that traverses the list in either direction</p>
</li>
<li>
<p>Modify the list during iteration</p>
</li>
<li>
<p>Obtain the iterator&#8217;s current position in the list</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">var</span> <span class="tok-n">list</span> <span class="tok-o">=</span> <span class="tok-n">List</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-s">&quot;Foo&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Bar&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Baz&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Qux&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Quux&quot;</span><span class="tok-o">);</span>
<span class="tok-n">var</span> <span class="tok-n">listIterator</span> <span class="tok-o">=</span> <span class="tok-n">list</span><span class="tok-o">.</span><span class="tok-na">listIterator</span><span class="tok-o">();</span>
<span class="tok-n">listIterator</span><span class="tok-o">.</span><span class="tok-na">next</span><span class="tok-o">();</span>
<span class="tok-n">listIterator</span><span class="tok-o">.</span><span class="tok-na">next</span><span class="tok-o">();</span>
<span class="tok-n">listIterator</span><span class="tok-o">.</span><span class="tok-na">next</span><span class="tok-o">();</span>
<span class="tok-n">listIterator</span><span class="tok-o">.</span><span class="tok-na">previous</span><span class="tok-o">();</span>
<span class="tok-n">listIterator</span><span class="tok-o">.</span><span class="tok-na">previous</span><span class="tok-o">();</span>
<span class="tok-n">listIterator</span><span class="tok-o">.</span><span class="tok-na">next</span><span class="tok-o">();</span>
<span class="tok-n">assertEquals</span><span class="tok-o">(</span><span class="tok-n">listIterator</span><span class="tok-o">.</span><span class="tok-na">next</span><span class="tok-o">(),</span> <span class="tok-s">&quot;Baz&quot;</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_using_javas_spliterator">Using Java&#8217;s <code>Spliterator</code></h4>
<div class="ulist">
<ul>
<li>
<p>Iterator that "splits" perhaps for parallel purposes</p>
</li>
<li>
<p>Traverse elements individually using <code>tryAdvance</code></p>
</li>
<li>
<p>Traverse elements sequentially in bulk using <code>forEachRemaining</code></p>
</li>
<li>
<p><code>Spliterator</code> can be queried with characteristics about the underlying collection</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_using_foreachremaining_with_a_spliterator">Using <code>forEachRemaining</code> with a <code>Spliterator</code></h4>
<div class="paragraph">
<p><code>forEachRemaining</code> iterates all elements using given <code>Consumer</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">var</span> <span class="tok-n">list</span> <span class="tok-o">=</span> <span class="tok-n">List</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-s">&quot;Foo&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Bar&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Baz&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Qux&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Quux&quot;</span><span class="tok-o">);</span>
<span class="tok-n">var</span> <span class="tok-n">split1</span> <span class="tok-o">=</span> <span class="tok-n">list</span><span class="tok-o">.</span><span class="tok-na">spliterator</span><span class="tok-o">();</span>
<span class="tok-n">var</span> <span class="tok-n">split2</span> <span class="tok-o">=</span> <span class="tok-n">split1</span><span class="tok-o">.</span><span class="tok-na">trySplit</span><span class="tok-o">();</span>
<span class="tok-n">split1</span><span class="tok-o">.</span><span class="tok-na">forEachRemaining</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;S1 &quot;</span> <span class="tok-o">+</span> <span class="tok-n">x</span><span class="tok-o">));</span>
<span class="tok-n">split2</span><span class="tok-o">.</span><span class="tok-na">forEachRemaining</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;S2 &quot;</span> <span class="tok-o">+</span> <span class="tok-n">x</span><span class="tok-o">));</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Will result in:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code><span></span>S1 Baz
S1 Qux
S1 Quux
S2 Foo
S2 Bar</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_using_tryadvance_with_a_spliterator">Using <code>tryAdvance</code> with a <code>Spliterator</code></h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">var</span> <span class="tok-n">list</span> <span class="tok-o">=</span> <span class="tok-n">List</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-s">&quot;Foo&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Bar&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Baz&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Qux&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Quux&quot;</span><span class="tok-o">);</span>
<span class="tok-n">var</span> <span class="tok-n">split1</span> <span class="tok-o">=</span> <span class="tok-n">list</span><span class="tok-o">.</span><span class="tok-na">spliterator</span><span class="tok-o">();</span>
<span class="tok-n">var</span> <span class="tok-n">split2</span> <span class="tok-o">=</span> <span class="tok-n">split1</span><span class="tok-o">.</span><span class="tok-na">trySplit</span><span class="tok-o">();</span>
<span class="tok-n">split1</span><span class="tok-o">.</span><span class="tok-na">tryAdvance</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;S1 &quot;</span> <span class="tok-o">+</span> <span class="tok-n">x</span><span class="tok-o">));</span>
<span class="tok-n">split2</span><span class="tok-o">.</span><span class="tok-na">tryAdvance</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;S2 &quot;</span> <span class="tok-o">+</span> <span class="tok-n">x</span><span class="tok-o">));</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Will result in:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code><span></span>S1 Baz
S2 Foo</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2 slide_section">
<h3 id="_template_method_pattern">Template Method Pattern</h3>
<div class="sect3">
<h4 id="_template_method_properties">Template Method Properties</h4>
<div class="paragraph">
<p>Type: Behavioral
Level: Object</p>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_template_method_canonical_diagram">Template Method Canonical Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="./images/template-method-pattern.png" alt="template method pattern" width="237" height="361">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_template_method_diagram">Template Method Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="./images/template_method_uml.png" alt="template method uml">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_template_method_purpose">Template Method Purpose</h4>
<div class="ulist">
<ul>
<li>
<p>To provide a method that allows subclasses to override parts of the method without rewriting it.</p>
</li>
<li>
<p>To provide a skeleton structure for a method</p>
</li>
<li>
<p>Allow subclasses to redefine specific parts of the method.</p>
</li>
<li>
<p>To centralize pieces of a method that are defined in all subtypes of a class</p>
</li>
<li>
<p>Always have a small difference in each subclass.</p>
</li>
<li>
<p>Control which operations subclasses are required to override.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_template_method_the_abstract_class">Template Method: The <code>abstract</code> class</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">abstract</span> <span class="tok-kd">class</span> <span class="tok-nc">SongWriter</span> <span class="tok-o">{</span>
    <span class="tok-kd">abstract</span> <span class="tok-kt">void</span> <span class="tok-nf">writeString</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">str</span><span class="tok-o">)</span> <span class="tok-kd">throws</span> <span class="tok-n">SongWriterException</span><span class="tok-o">;</span>
    <span class="tok-kd">public</span> <span class="tok-kd">abstract</span> <span class="tok-kt">void</span> <span class="tok-nf">writeNewLine</span><span class="tok-o">()</span> <span class="tok-kd">throws</span> <span class="tok-n">SongWriterException</span><span class="tok-o">;</span>

    <span class="tok-kd">public</span> <span class="tok-kd">final</span> <span class="tok-kt">void</span> <span class="tok-nf">writeLyrics</span><span class="tok-o">()</span> <span class="tok-kd">throws</span> <span class="tok-n">SongWriterException</span> <span class="tok-o">{</span>
        <span class="tok-n">writeString</span><span class="tok-o">(</span><span class="tok-s">&quot;I see trees of green&quot;</span><span class="tok-o">);</span>
        <span class="tok-n">writeNewLine</span><span class="tok-o">();</span>
        <span class="tok-n">writeString</span><span class="tok-o">(</span><span class="tok-s">&quot;red roses too, I see them bloom&quot;</span><span class="tok-o">);</span>
        <span class="tok-n">writeNewLine</span><span class="tok-o">();</span>
        <span class="tok-n">writeString</span><span class="tok-o">(</span><span class="tok-s">&quot;for me and you&quot;</span><span class="tok-o">);</span>
        <span class="tok-n">writeNewLine</span><span class="tok-o">();</span>
        <span class="tok-n">writeString</span><span class="tok-o">(</span><span class="tok-s">&quot;and I think to myself&quot;</span><span class="tok-o">);</span>
        <span class="tok-n">writeNewLine</span><span class="tok-o">();</span>
        <span class="tok-n">writeString</span><span class="tok-o">(</span><span class="tok-s">&quot;what a wonderful world&quot;</span><span class="tok-o">);</span>
        <span class="tok-n">writeNewLine</span><span class="tok-o">();</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_template_method_one_possible_implementation">Template Method: One possible implementation</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kn">import</span> <span class="tok-nn">java.io.IOException</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.io.Writer</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">SongWriterWithWriter</span> <span class="tok-kd">extends</span> <span class="tok-n">SongWriter</span> <span class="tok-o">{</span>
    <span class="tok-kd">private</span> <span class="tok-kd">final</span> <span class="tok-n">Writer</span> <span class="tok-n">writer</span><span class="tok-o">;</span>

    <span class="tok-kd">public</span> <span class="tok-nf">SongWriterWithWriter</span><span class="tok-o">(</span><span class="tok-n">Writer</span> <span class="tok-n">writer</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">writer</span> <span class="tok-o">=</span> <span class="tok-n">writer</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kt">void</span> <span class="tok-nf">writeString</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">str</span><span class="tok-o">)</span> <span class="tok-kd">throws</span> <span class="tok-n">SongWriterException</span> <span class="tok-o">{</span>
        <span class="tok-k">try</span> <span class="tok-o">{</span>
            <span class="tok-n">writer</span><span class="tok-o">.</span><span class="tok-na">write</span><span class="tok-o">(</span><span class="tok-n">str</span><span class="tok-o">);</span>
        <span class="tok-o">}</span> <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">IOException</span> <span class="tok-n">e</span><span class="tok-o">)</span> <span class="tok-o">{</span>
            <span class="tok-k">throw</span> <span class="tok-k">new</span> <span class="tok-n">SongWriterException</span><span class="tok-o">(</span><span class="tok-n">e</span><span class="tok-o">);</span>
        <span class="tok-o">}</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">writeNewLine</span><span class="tok-o">()</span> <span class="tok-kd">throws</span> <span class="tok-n">SongWriterException</span> <span class="tok-o">{</span>
        <span class="tok-k">try</span> <span class="tok-o">{</span>
            <span class="tok-n">writer</span><span class="tok-o">.</span><span class="tok-na">write</span><span class="tok-o">(</span><span class="tok-s">&quot;\n&quot;</span><span class="tok-o">);</span>
        <span class="tok-o">}</span> <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">IOException</span> <span class="tok-n">e</span><span class="tok-o">)</span> <span class="tok-o">{</span>
            <span class="tok-k">throw</span> <span class="tok-k">new</span> <span class="tok-n">SongWriterException</span><span class="tok-o">(</span><span class="tok-n">e</span><span class="tok-o">);</span>
        <span class="tok-o">}</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_template_method_another_possible_implementation">Template Method: Another possible implementation</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">SongWriterSystemOut</span> <span class="tok-kd">extends</span> <span class="tok-n">SongWriter</span> <span class="tok-o">{</span>
    <span class="tok-nd">@Override</span>
    <span class="tok-kt">void</span> <span class="tok-nf">writeString</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">str</span><span class="tok-o">)</span> <span class="tok-kd">throws</span> <span class="tok-n">SongWriterException</span> <span class="tok-o">{</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">str</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">writeNewLine</span><span class="tok-o">()</span> <span class="tok-kd">throws</span> <span class="tok-n">SongWriterException</span> <span class="tok-o">{</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">();</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_template_method_can_be_done_with_default_methods">Template Method can be done with <code>default</code> methods</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">LineItem</span> <span class="tok-o">{</span>
    <span class="tok-kd">public</span> <span class="tok-kt">float</span> <span class="tok-nf">getCost</span><span class="tok-o">();</span>
    <span class="tok-kd">public</span> <span class="tok-kt">float</span> <span class="tok-nf">getQuantity</span><span class="tok-o">();</span>
    <span class="tok-kd">public</span> <span class="tok-kt">float</span> <span class="tok-nf">getDiscount</span><span class="tok-o">();</span>
    <span class="tok-kd">public</span> <span class="tok-k">default</span> <span class="tok-kt">float</span> <span class="tok-nf">getSubtotal</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-o">(</span><span class="tok-n">getCost</span><span class="tok-o">()</span> <span class="tok-o">*</span> <span class="tok-n">getQuantity</span><span class="tok-o">())</span> <span class="tok-o">*</span> <span class="tok-n">getDiscount</span><span class="tok-o">();</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2 slide_section">
<h3 id="_mediator_pattern">Mediator Pattern</h3>
<div class="sect3">
<h4 id="_mediator_pattern_properties">Mediator Pattern Properties</h4>
<div class="paragraph">
<p><strong>Type:</strong> Behavioral<br>
<strong>Level:</strong> Component<br></p>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_mediator_purpose">Mediator Purpose</h4>
<div class="paragraph">
<p>Simplify communication among objects in a system by introducing
a single object that manages message distribution among the others</p>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_mediator_canonical_diagram">Mediator Canonical Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="./images/mediator-pattern.png" alt="mediator pattern" width="373" height="356">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_mediator_ingredients">Mediator Ingredients</h4>
<div class="paragraph">
<p><strong>Mediator</strong> – The interface that defines the methods clients can call
 on a <code>Mediator</code>.</p>
</div>
<div class="paragraph">
<p><strong>ConcreteMediator</strong> – The class that implements the <code>Mediator</code> interface.
This class mediates among several client classes. It contains
application-specific information about processes,
and the <code>ConcreteMediator</code> might have some hardcoded references to its clients. Based on the information the Mediator receives, it can either invoke specific methods on the clients, or invoke a generic method to inform clients of a change or a combination of both.</p>
</div>
<div class="paragraph">
<p><strong>Client</strong> – The interface that defines the general methods a <code>Mediator</code>
 can use to inform client instances.</p>
</div>
<div class="paragraph">
<p><strong>ConcreteClient</strong> – A class that implements the <code>Client</code> interface and
provides an implementation to each of the client methods.
The <code>ConcreteClient</code> can keep a reference to a <code>Mediator</code> instance to
 inform colleague clients of a change (through the <code>Mediator</code>).</p>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_mediator_advantages">Mediator Advantages</h4>
<div class="ulist">
<ul>
<li>
<p>There are complex rules for communication among objects in a system (often as a result of the business model).</p>
</li>
<li>
<p>You want to keep the objects simple and manageable.</p>
</li>
<li>
<p>You want the classes for these objects to be redeployable, not dependent on the business model of the system.</p>
</li>
<li>
<p>The individual components become simpler and easier to deal with, since they no longer need to directly pass messages to each other.</p>
</li>
<li>
<p>Components are more generic, no longer need to contain logic to deal with their communication with other components</p>
</li>
<li>
<p>Communications strategy becomes easier, since it is now the exclusive responsibility of the mediator</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_mediator_disadvantages">Mediator Disadvantages</h4>
<div class="ulist">
<ul>
<li>
<p>The Mediator is often application specific and difficult to redeploy</p>
</li>
<li>
<p>Testing and debugging complex Mediator implementations can be challenging</p>
</li>
<li>
<p>The Mediator’s code can become hard to manage as the number and complexity of participants increases</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_mediator_demo_diagram">Mediator Demo Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="./images/mediator_uml.png" alt="mediator uml">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_mediator_the_mediator_interface">Mediator: The Mediator Interface</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">Mediator</span> <span class="tok-o">{</span>
    <span class="tok-kt">void</span> <span class="tok-nf">setUSCitizen</span><span class="tok-o">(</span><span class="tok-kt">boolean</span> <span class="tok-n">isUSCitizen</span><span class="tok-o">);</span>
    <span class="tok-kt">void</span> <span class="tok-nf">setNumberChildren</span><span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">children</span><span class="tok-o">);</span>
    <span class="tok-kt">void</span> <span class="tok-nf">setMarried</span><span class="tok-o">(</span><span class="tok-kt">boolean</span> <span class="tok-n">isMarried</span><span class="tok-o">);</span>
    <span class="tok-kt">void</span> <span class="tok-nf">registerSpouseInfoWidget</span><span class="tok-o">(</span><span class="tok-n">Component</span> <span class="tok-n">component</span><span class="tok-o">);</span>
    <span class="tok-kt">void</span> <span class="tok-nf">registerChildrenInfoWidget</span><span class="tok-o">(</span><span class="tok-n">Component</span> <span class="tok-n">component</span><span class="tok-o">);</span>
    <span class="tok-kt">void</span> <span class="tok-nf">registerUSInfoWidget</span><span class="tok-o">(</span><span class="tok-n">Component</span> <span class="tok-n">component</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_mediator_the_mediator_implementation_registration">Mediator: The Mediator Implementation Registration</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">StandardMediator</span> <span class="tok-kd">implements</span> <span class="tok-n">Mediator</span> <span class="tok-o">{</span>
    <span class="tok-kd">private</span> <span class="tok-n">Component</span> <span class="tok-n">spouseInfoWidget</span><span class="tok-o">;</span>
    <span class="tok-kd">private</span> <span class="tok-n">Component</span> <span class="tok-n">childrenInfoWidget</span><span class="tok-o">;</span>
    <span class="tok-kd">private</span> <span class="tok-n">Component</span> <span class="tok-n">usInfoWidget</span><span class="tok-o">;</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">registerSpouseInfoWidget</span><span class="tok-o">(</span><span class="tok-n">Component</span> <span class="tok-n">component</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">spouseInfoWidget</span> <span class="tok-o">=</span> <span class="tok-n">component</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">registerChildrenInfoWidget</span><span class="tok-o">(</span><span class="tok-n">Component</span> <span class="tok-n">component</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">childrenInfoWidget</span> <span class="tok-o">=</span> <span class="tok-n">component</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">registerUSInfoWidget</span><span class="tok-o">(</span><span class="tok-n">Component</span> <span class="tok-n">component</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">usInfoWidget</span> <span class="tok-o">=</span> <span class="tok-n">component</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_mediator_the_mediator_implementation_activation">Mediator: The Mediator Implementation Activation</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">StandardMediator</span> <span class="tok-kd">implements</span> <span class="tok-n">Mediator</span> <span class="tok-o">{</span>
    <span class="tok-kd">private</span> <span class="tok-n">Component</span> <span class="tok-n">spouseInfoWidget</span><span class="tok-o">;</span>
    <span class="tok-kd">private</span> <span class="tok-n">Component</span> <span class="tok-n">childrenInfoWidget</span><span class="tok-o">;</span>
    <span class="tok-kd">private</span> <span class="tok-n">Component</span> <span class="tok-n">usInfoWidget</span><span class="tok-o">;</span>

    <span class="tok-c1">//Switches</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">setUSCitizen</span><span class="tok-o">(</span><span class="tok-kt">boolean</span> <span class="tok-n">isUSCitizen</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">usInfoWidget</span> <span class="tok-o">!=</span> <span class="tok-kc">null</span><span class="tok-o">)</span> <span class="tok-o">{</span>
            <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">isUSCitizen</span><span class="tok-o">)</span> <span class="tok-o">{</span>
                <span class="tok-n">usInfoWidget</span><span class="tok-o">.</span><span class="tok-na">setEnabled</span><span class="tok-o">(</span><span class="tok-kc">true</span><span class="tok-o">);</span>
            <span class="tok-o">}</span> <span class="tok-k">else</span> <span class="tok-o">{</span>
                <span class="tok-n">usInfoWidget</span><span class="tok-o">.</span><span class="tok-na">setEnabled</span><span class="tok-o">(</span><span class="tok-kc">false</span><span class="tok-o">);</span>
            <span class="tok-o">}</span>
        <span class="tok-o">}</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">setNumberChildren</span><span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">children</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">childrenInfoWidget</span> <span class="tok-o">!=</span> <span class="tok-kc">null</span><span class="tok-o">)</span> <span class="tok-o">{</span>
            <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">children</span> <span class="tok-o">&gt;</span> <span class="tok-mi">0</span><span class="tok-o">)</span> <span class="tok-o">{</span>
                <span class="tok-n">childrenInfoWidget</span><span class="tok-o">.</span><span class="tok-na">setEnabled</span><span class="tok-o">(</span><span class="tok-kc">true</span><span class="tok-o">);</span>
            <span class="tok-o">}</span> <span class="tok-k">else</span> <span class="tok-o">{</span>
                <span class="tok-n">childrenInfoWidget</span><span class="tok-o">.</span><span class="tok-na">setEnabled</span><span class="tok-o">(</span><span class="tok-kc">false</span><span class="tok-o">);</span>
            <span class="tok-o">}</span>
        <span class="tok-o">}</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">setMarried</span><span class="tok-o">(</span><span class="tok-kt">boolean</span> <span class="tok-n">isMarried</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">spouseInfoWidget</span> <span class="tok-o">!=</span> <span class="tok-kc">null</span><span class="tok-o">)</span> <span class="tok-o">{</span>
            <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">isMarried</span><span class="tok-o">)</span> <span class="tok-o">{</span>
                <span class="tok-n">spouseInfoWidget</span><span class="tok-o">.</span><span class="tok-na">setEnabled</span><span class="tok-o">(</span><span class="tok-kc">true</span><span class="tok-o">);</span>
            <span class="tok-o">}</span> <span class="tok-k">else</span> <span class="tok-o">{</span>
                <span class="tok-n">spouseInfoWidget</span><span class="tok-o">.</span><span class="tok-na">setEnabled</span><span class="tok-o">(</span><span class="tok-kc">false</span><span class="tok-o">);</span>
            <span class="tok-o">}</span>
        <span class="tok-o">}</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2 slide_section">
<h3 id="_memento_pattern">Memento Pattern</h3>
<div class="sect3">
<h4 id="_memento_pattern_properties">Memento Pattern Properties</h4>
<div class="paragraph">
<p><strong>Type:</strong> Behavioral<br>
<strong>Level:</strong> Object<br></p>
</div>
</div>
<div class="sect3">
<h4 id="_memento_purpose">Memento Purpose</h4>
<div class="ulist">
<ul>
<li>
<p>To preserve a "snapshot" of an object’s state</p>
</li>
<li>
<p>Object can return to its original state without having to reveal its content to the rest of the world</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_memento_canonical_diagram">Memento Canonical Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="./images/memento-pattern.png" alt="memento pattern" width="648" height="268">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_memento_advantages">Memento Advantages</h4>
<div class="ulist">
<ul>
<li>
<p>A snapshot of the state of an object should be taken.</p>
</li>
<li>
<p>That snapshot is used to recreate the original state.</p>
</li>
<li>
<p>Doesn&#8217;t not expose internal state</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_memento_disadvantages">Memento Disadvantages</h4>
<div class="ulist">
<ul>
<li>
<p>Expensive Storage Overtime</p>
</li>
<li>
<p>Requires thought with large graphs</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_memento_demo_diagram">Memento Demo Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="./images/memento_uml.png" alt="memento uml">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_memento_originator">Memento: Originator</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Originator</span><span class="tok-o">&lt;</span><span class="tok-n">E</span><span class="tok-o">&gt;</span> <span class="tok-o">{</span>
    <span class="tok-kd">private</span> <span class="tok-n">E</span> <span class="tok-n">state</span><span class="tok-o">;</span>
    <span class="tok-c1">// The class could also contain</span>
    <span class="tok-c1">// additional data that is not part of the</span>
    <span class="tok-c1">// state saved in the memento..</span>

    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">set</span><span class="tok-o">(</span><span class="tok-n">E</span> <span class="tok-n">state</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">state</span> <span class="tok-o">=</span> <span class="tok-n">state</span><span class="tok-o">;</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Originator: Setting&quot;</span> <span class="tok-o">+</span>
                           <span class="tok-s">&quot; state to &quot;</span> <span class="tok-o">+</span> <span class="tok-n">state</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-n">Memento</span> <span class="tok-nf">saveToMemento</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Originator: Saving to Memento.&quot;</span><span class="tok-o">);</span>
        <span class="tok-k">return</span> <span class="tok-k">new</span> <span class="tok-n">Memento</span><span class="tok-o">&lt;&gt;(</span><span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">state</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">restoreFromMemento</span><span class="tok-o">(</span><span class="tok-n">Memento</span><span class="tok-o">&lt;</span><span class="tok-n">E</span><span class="tok-o">&gt;</span> <span class="tok-n">memento</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">state</span> <span class="tok-o">=</span> <span class="tok-n">memento</span><span class="tok-o">.</span><span class="tok-na">getSavedState</span><span class="tok-o">();</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Originator: State after&quot;</span> <span class="tok-o">+</span>
                           <span class="tok-s">&quot;restoring from Memento: &quot;</span> <span class="tok-o">+</span>
                           <span class="tok-n">state</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>

    <span class="tok-c1">//Memento Declaration...</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Source: <a href="https://en.wikipedia.org/wiki/Memento_pattern" class="bare">https://en.wikipedia.org/wiki/Memento_pattern</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_memento_memento_inside_the_originator">Memento: Memento inside the Originator</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Originator</span><span class="tok-o">&lt;</span><span class="tok-n">E</span><span class="tok-o">&gt;</span> <span class="tok-o">{</span>

    <span class="tok-c1">//Memento declaration and methods in previous slide</span>

    <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kd">class</span> <span class="tok-nc">Memento</span><span class="tok-o">&lt;</span><span class="tok-n">S</span><span class="tok-o">&gt;</span> <span class="tok-o">{</span>
        <span class="tok-kd">private</span> <span class="tok-kd">final</span> <span class="tok-n">S</span> <span class="tok-n">state</span><span class="tok-o">;</span>

        <span class="tok-kd">public</span> <span class="tok-nf">Memento</span><span class="tok-o">(</span><span class="tok-n">S</span> <span class="tok-n">stateToSave</span><span class="tok-o">)</span> <span class="tok-o">{</span>
            <span class="tok-n">state</span> <span class="tok-o">=</span> <span class="tok-n">stateToSave</span><span class="tok-o">;</span>
        <span class="tok-o">}</span>

        <span class="tok-c1">// accessible by outer class only</span>
        <span class="tok-kd">private</span> <span class="tok-n">S</span> <span class="tok-nf">getSavedState</span><span class="tok-o">()</span> <span class="tok-o">{</span>
            <span class="tok-k">return</span> <span class="tok-n">state</span><span class="tok-o">;</span>
        <span class="tok-o">}</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Source: <a href="https://en.wikipedia.org/wiki/Memento_pattern" class="bare">https://en.wikipedia.org/wiki/Memento_pattern</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_memento_stateholder">Memento: StateHolder</h4>
<div class="ulist">
<ul>
<li>
<p><code>Caretaker</code> is a state holder will hold the different <code>Memento</code></p>
</li>
<li>
<p>You can use whatever collection to recall the previous state</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kn">import</span> <span class="tok-nn">java.util.Stack</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Caretaker</span><span class="tok-o">&lt;</span><span class="tok-n">S</span><span class="tok-o">&gt;</span> <span class="tok-o">{</span>
    <span class="tok-kd">private</span> <span class="tok-n">Stack</span><span class="tok-o">&lt;</span><span class="tok-n">Originator</span><span class="tok-o">.</span><span class="tok-na">Memento</span><span class="tok-o">&lt;</span><span class="tok-n">S</span><span class="tok-o">&gt;&gt;</span> <span class="tok-n">stack</span><span class="tok-o">;</span>

    <span class="tok-kd">public</span> <span class="tok-nf">Caretaker</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">stack</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Stack</span><span class="tok-o">&lt;&gt;();</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">addMemento</span><span class="tok-o">(</span><span class="tok-n">Originator</span><span class="tok-o">.</span><span class="tok-na">Memento</span><span class="tok-o">&lt;</span><span class="tok-n">S</span><span class="tok-o">&gt;</span> <span class="tok-n">memento</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">stack</span><span class="tok-o">.</span><span class="tok-na">push</span><span class="tok-o">(</span><span class="tok-n">memento</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-n">Originator</span><span class="tok-o">.</span><span class="tok-na">Memento</span><span class="tok-o">&lt;</span><span class="tok-n">S</span><span class="tok-o">&gt;</span> <span class="tok-nf">getLastMemento</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">stack</span><span class="tok-o">.</span><span class="tok-na">pop</span><span class="tok-o">();</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2 slide_section">
<h3 id="_observer_pattern">Observer Pattern</h3>
<div class="sect3">
<h4 id="_observer_pattern_properties">Observer Pattern Properties</h4>
<div class="paragraph">
<p><strong>Type:</strong> Behavioral<br>
<strong>Level:</strong> Component<br></p>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_observer_pattern_purpose">Observer Pattern Purpose</h4>
<div class="paragraph">
<p>To provide a way for a component to flexibly broadcast messages to interested receivers.</p>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_observer_canonical_pattern">Observer Canonical Pattern</h4>
<div class="imageblock">
<div class="content">
<img src="./images/observer-pattern.png" alt="observer pattern" width="401" height="385">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_observer_ingredients">Observer Ingredients</h4>
<div class="paragraph">
<p><strong>Observable</strong> – The interface that defines how the observers/clients can interact with an <code>Observable</code>.
 These methods include adding and removing observers, and one or more notification methods
 to send information through the <code>Observable</code> to its clients.</p>
</div>
<div class="paragraph">
<p><strong>ConcreteObservable</strong> – A class that provides implementations for each of the methods in the
 <code>Observable</code> interface. It needs to maintain a collection of Observers.</p>
</div>
<div class="paragraph">
<p>The notification methods copy (or clone) the <code>Observer</code> list and iterate through the list,
 and call the specific listener methods on each <code>Observer</code>.</p>
</div>
<div class="paragraph">
<p><strong>Observer</strong> – The interface the <code>Observer</code> uses to communicate with the clients.</p>
</div>
<div class="paragraph">
<p><strong>ConcreteObserver</strong> – Implements the <code>Observable</code> interface and determines in each
implemented method how to respond to the message received from the <code>Observable</code>.</p>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_observer_demo_diagram">Observer Demo Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="./images/observer_uml.png" alt="observer uml">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_observer_object">Observer: Object</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">RSSEntry</span> <span class="tok-o">{</span>

    <span class="tok-kd">private</span> <span class="tok-n">String</span> <span class="tok-n">value</span><span class="tok-o">;</span>

    <span class="tok-kd">public</span> <span class="tok-nf">RSSEntry</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">value</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">value</span> <span class="tok-o">=</span> <span class="tok-n">value</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">getValue</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-n">value</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_observer_concrete_observable">Observer: Concrete Observable</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">RSSFeed</span> <span class="tok-o">{</span>

    <span class="tok-kd">private</span> <span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">RSSObserver</span><span class="tok-o">&gt;</span> <span class="tok-n">observers</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">ArrayList</span><span class="tok-o">&lt;</span><span class="tok-n">RSSObserver</span><span class="tok-o">&gt;();</span>

    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">broadcast</span><span class="tok-o">(</span><span class="tok-n">RSSEntry</span> <span class="tok-n">entry</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">for</span> <span class="tok-o">(</span><span class="tok-n">RSSObserver</span> <span class="tok-n">observer</span> <span class="tok-o">:</span> <span class="tok-n">observers</span><span class="tok-o">)</span> <span class="tok-o">{</span>
            <span class="tok-n">observer</span><span class="tok-o">.</span><span class="tok-na">update</span><span class="tok-o">(</span><span class="tok-n">entry</span><span class="tok-o">);</span>
        <span class="tok-o">}</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-n">RSSObserver</span> <span class="tok-nf">addObserver</span><span class="tok-o">(</span><span class="tok-n">RSSObserver</span> <span class="tok-n">observer</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-n">observers</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-n">observer</span><span class="tok-o">);</span>
        <span class="tok-k">return</span> <span class="tok-n">observer</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">removeObserver</span><span class="tok-o">(</span><span class="tok-n">RSSObserver</span> <span class="tok-n">observer</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-n">observers</span><span class="tok-o">.</span><span class="tok-na">remove</span><span class="tok-o">(</span><span class="tok-n">observer</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_observer_observer">Observer: Observer</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">RSSObserver</span> <span class="tok-o">{</span>

    <span class="tok-kt">void</span> <span class="tok-nf">update</span><span class="tok-o">(</span><span class="tok-n">RSSEntry</span> <span class="tok-n">entry</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_observer_concrete_observer">Observer: Concrete Observer</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">LoggingObserver</span> <span class="tok-kd">implements</span> <span class="tok-n">RSSObserver</span> <span class="tok-o">{</span>

    <span class="tok-kd">private</span> <span class="tok-n">FileWriter</span> <span class="tok-n">log</span><span class="tok-o">;</span>

    <span class="tok-kd">public</span> <span class="tok-nf">LoggingObserver</span><span class="tok-o">(</span><span class="tok-n">File</span> <span class="tok-n">log</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">try</span> <span class="tok-o">{</span>
            <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">log</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">FileWriter</span><span class="tok-o">(</span><span class="tok-n">log</span><span class="tok-o">);</span>
        <span class="tok-o">}</span> <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">IOException</span> <span class="tok-n">e</span><span class="tok-o">)</span> <span class="tok-o">{</span>
            <span class="tok-n">e</span><span class="tok-o">.</span><span class="tok-na">printStackTrace</span><span class="tok-o">();</span>
        <span class="tok-o">}</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">update</span><span class="tok-o">(</span><span class="tok-n">RSSEntry</span> <span class="tok-n">entry</span><span class="tok-o">)</span> <span class="tok-o">{</span>

        <span class="tok-k">try</span> <span class="tok-o">{</span>
            <span class="tok-n">log</span><span class="tok-o">.</span><span class="tok-na">write</span><span class="tok-o">(</span><span class="tok-n">entry</span><span class="tok-o">.</span><span class="tok-na">getValue</span><span class="tok-o">());</span>
            <span class="tok-n">log</span><span class="tok-o">.</span><span class="tok-na">write</span><span class="tok-o">(</span><span class="tok-sc">&#39;\n&#39;</span><span class="tok-o">);</span>
            <span class="tok-n">log</span><span class="tok-o">.</span><span class="tok-na">flush</span><span class="tok-o">();</span>
        <span class="tok-o">}</span> <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">IOException</span> <span class="tok-n">e</span><span class="tok-o">)</span> <span class="tok-o">{</span>
            <span class="tok-n">e</span><span class="tok-o">.</span><span class="tok-na">printStackTrace</span><span class="tok-o">();</span>
        <span class="tok-o">}</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_observer_another_concrete_observer">Observer: Another Concrete Observer</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">ConsoleOutObserver</span> <span class="tok-kd">implements</span> <span class="tok-n">RSSObserver</span> <span class="tok-o">{</span>

    <span class="tok-kd">private</span> <span class="tok-n">String</span> <span class="tok-n">name</span><span class="tok-o">;</span>

    <span class="tok-kd">public</span> <span class="tok-nf">ConsoleOutObserver</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">name</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">name</span> <span class="tok-o">=</span> <span class="tok-n">name</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">update</span><span class="tok-o">(</span><span class="tok-n">RSSEntry</span> <span class="tok-n">entry</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">name</span> <span class="tok-o">+</span> <span class="tok-s">&quot; : &quot;</span> <span class="tok-o">+</span> <span class="tok-n">entry</span><span class="tok-o">.</span><span class="tok-na">getValue</span><span class="tok-o">());</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_structural_patterns">Structural Patterns</h3>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2 slide_section">
<h3 id="_adapter_pattern">Adapter Pattern</h3>
<div class="sect3">
<h4 id="_adapter_pattern_purpose">Adapter Pattern Purpose</h4>
<div class="ulist">
<ul>
<li>
<p>To act as an intermediary between two classes</p>
</li>
<li>
<p>Converting the interface of one class so that
it can be used with another</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_adapter_pattern_canonical_diagram">Adapter Pattern Canonical Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="./images/adapter-pattern.png" alt="adapter pattern" width="350" height="228">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_adapter_pattern_advantages">Adapter Pattern Advantages</h4>
<div class="ulist">
<ul>
<li>
<p>Code Reuse</p>
</li>
<li>
<p>Apply a different interface</p>
</li>
<li>
<p>Translate code from another language</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_adapter_pattern_disadvantages">Adapter Pattern Disadvantages</h4>
<div class="ulist">
<ul>
<li>
<p>The parameters may not be the same</p>
</li>
<li>
<p>May require more work if the methods are substantial</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_adapter_pattern_demo_diagram">Adapter Pattern Demo Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="./images/adapter_uml.png" alt="adapter uml">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_adapter_pattern_the_target_adaptee">Adapter Pattern: The Target (Adaptee)</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">CelciusThermometer</span> <span class="tok-o">{</span>

    <span class="tok-kd">private</span> <span class="tok-kt">double</span> <span class="tok-n">temp</span><span class="tok-o">;</span>

    <span class="tok-kd">public</span> <span class="tok-nf">CelciusThermometer</span><span class="tok-o">(</span><span class="tok-kt">double</span> <span class="tok-n">temp</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">temp</span> <span class="tok-o">=</span> <span class="tok-n">temp</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-kt">double</span> <span class="tok-nf">getTemperateInC</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-n">temp</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_adapter_pattern_the_adapter">Adapter Pattern: The Adapter</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">CelciusToFahrenheitAdapter</span>
   <span class="tok-kd">implements</span> <span class="tok-n">FahrenheitThermometer</span> <span class="tok-o">{</span>

    <span class="tok-kd">private</span> <span class="tok-n">CelciusThermometer</span> <span class="tok-n">celciusThermometer</span><span class="tok-o">;</span>

    <span class="tok-kd">public</span> <span class="tok-nf">CelciusToFahrenheitAdapter</span>
              <span class="tok-o">(</span><span class="tok-n">CelciusThermometer</span> <span class="tok-n">celciusThermometer</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">celciusThermometer</span> <span class="tok-o">=</span> <span class="tok-n">celciusThermometer</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-kt">double</span> <span class="tok-nf">getTemperateInF</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-n">convertCtoF</span><span class="tok-o">(</span><span class="tok-n">celciusThermometer</span><span class="tok-o">.</span><span class="tok-na">getTemperateInC</span><span class="tok-o">());</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">private</span> <span class="tok-kt">double</span> <span class="tok-nf">convertCtoF</span><span class="tok-o">(</span><span class="tok-kt">double</span> <span class="tok-n">c</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-o">(</span><span class="tok-n">c</span> <span class="tok-o">*</span> <span class="tok-mi">9</span> <span class="tok-o">/</span> <span class="tok-mi">5</span><span class="tok-o">)</span> <span class="tok-o">+</span> <span class="tok-mi">32</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_adapter_pattern_the_adapters_interface">Adapter Pattern: The Adapter&#8217;s Interface</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">FahrenheitThermometer</span> <span class="tok-o">{</span>
    <span class="tok-kt">double</span> <span class="tok-nf">getTemperateInF</span><span class="tok-o">();</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2 slide_section">
<h3 id="_bridge_pattern">Bridge Pattern</h3>
<div class="sect3">
<h4 id="_bridge_pattern_properties">Bridge Pattern Properties</h4>
<div class="paragraph">
<p><strong>Type:</strong> Structural, Object<br>
<strong>Level:</strong> Component<br></p>
</div>
</div>
<div class="sect3">
<h4 id="_bridge_pattern_purpose">Bridge Pattern Purpose</h4>
<div class="ulist">
<ul>
<li>
<p>To divide a complex component into two separate but related inheritance hierarchies:</p>
<div class="ulist">
<ul>
<li>
<p>The functional Abstraction</p>
</li>
<li>
<p>The internal implementation</p>
</li>
</ul>
</div>
</li>
<li>
<p>This makes it easier to change either aspect of the component</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_bridge_pattern_canonical_diagram">Bridge Pattern Canonical Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="./images/bridge-pattern.png" alt="bridge pattern" width="851" height="229">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_bridge_pattern_advantages">Bridge Pattern Advantages</h4>
<div class="ulist">
<ul>
<li>
<p>Decouples an implementation so that it is not bound permanently to an interface.</p>
</li>
<li>
<p>Abstraction and implementation can be extended independently.</p>
</li>
<li>
<p>Changes to the concrete abstraction classes don’t affect the client.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_bridge_pattern_disadvantages">Bridge Pattern Disadvantages</h4>
<div class="ulist">
<ul>
<li>
<p>Useful in graphics and windowing systems that need to run over multiple platforms.</p>
</li>
<li>
<p>Useful any time you need to vary an interface and an implementation in different ways.</p>
</li>
<li>
<p>Increases complexity and components</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_bridge_demo_diagram">Bridge Demo Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="./images/bridge_uml.png" alt="bridge uml">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_bridge_abstraction">Bridge: Abstraction</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">abstract</span> <span class="tok-kd">class</span> <span class="tok-nc">Draw</span> <span class="tok-o">{</span>

    <span class="tok-kd">abstract</span> <span class="tok-n">Ink</span> <span class="tok-nf">getInk</span><span class="tok-o">();</span>
    <span class="tok-kd">abstract</span> <span class="tok-n">String</span> <span class="tok-nf">getShape</span><span class="tok-o">();</span>

    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">draw</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Drawing a &quot;</span> <span class="tok-o">+</span> <span class="tok-n">getShape</span><span class="tok-o">()</span> <span class="tok-o">+</span>
                           <span class="tok-s">&quot; with &quot;</span> <span class="tok-o">+</span> <span class="tok-n">getInk</span><span class="tok-o">().</span><span class="tok-na">getColor</span><span class="tok-o">()</span>
                            <span class="tok-o">+</span> <span class="tok-s">&quot; ink&quot;</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_bridge_refine_abstraction">Bridge: Refine Abstraction</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">SquareDraw</span> <span class="tok-kd">extends</span> <span class="tok-n">Draw</span> <span class="tok-o">{</span>

    <span class="tok-kd">private</span> <span class="tok-kd">final</span> <span class="tok-n">Ink</span> <span class="tok-n">ink</span><span class="tok-o">;</span>

    <span class="tok-kd">public</span> <span class="tok-nf">SquareDraw</span><span class="tok-o">(</span><span class="tok-n">Ink</span> <span class="tok-n">ink</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">ink</span> <span class="tok-o">=</span> <span class="tok-n">ink</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-n">Ink</span> <span class="tok-nf">getInk</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-n">ink</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-n">String</span> <span class="tok-nf">getShape</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-s">&quot;square&quot;</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_bridge_implementation">Bridge: Implementation</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">Ink</span> <span class="tok-o">{</span>
    <span class="tok-n">String</span> <span class="tok-nf">getColor</span><span class="tok-o">();</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_bridge_concrete_implementation">Bridge: Concrete Implementation</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span>
<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">RedInk</span> <span class="tok-kd">implements</span> <span class="tok-n">Ink</span> <span class="tok-o">{</span>
    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">getColor</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-s">&quot;red&quot;</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_bridge_another_concrete_implementation">Bridge: Another Concrete Implementation</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">BlueInk</span> <span class="tok-kd">implements</span> <span class="tok-n">Ink</span> <span class="tok-o">{</span>
    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">getColor</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-s">&quot;blue&quot;</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2 slide_section">
<h3 id="_composite_pattern">Composite Pattern</h3>
<div class="sect3">
<h4 id="_composite_properties">Composite Properties</h4>
<div class="paragraph">
<p><strong>Type:</strong> Structural, Object
<strong>Level:</strong> Component</p>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_composite_purpose">Composite Purpose</h4>
<div class="ulist">
<ul>
<li>
<p>To develop a flexible way to create hierarchical tree structures of arbitrary complexity</p>
</li>
<li>
<p>While enabling every element in the structure to operate with a uniform interface</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_composite_pattern_canonical_diagram">Composite Pattern Canonical Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="./images/composite-pattern.png" alt="composite pattern" width="405" height="340">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_composite_ingredients">Composite Ingredients</h4>
<div class="paragraph">
<p><strong>Component</strong> – The <code>Component</code> interface defines methods available for all
parts of the tree structure. <code>Component</code> may be implemented as abstract class
 when you need to provide standard behavior to all of the sub-types. Normally,
  the component is not instantiable; its subclasses or implementing classes,
   also called nodes, are instantiable and are used to create a collection or
    tree structure.</p>
</div>
<div class="paragraph">
<p><strong>Composite</strong> – This class is defined by the components it contains;
it is composed by its components. The <code>Composite</code> supports a dynamic group
 of <code>Components</code> so it has methods to add and remove <code>Component</code> instances
 from its collection. The methods defined in the <code>Component</code> are implemented
  to execute the behavior specific for this type of <code>Composite</code> and to call
  the same method on each of its nodes. These <code>Composite</code> classes are also
   called branch or container classes.</p>
</div>
<div class="paragraph">
<p><strong>Leaf</strong> – The class that implements the <code>Component</code> interface and that provides
 an implementation for each of the <code>Component</code> ’s methods. The distinction between
  a Leaf class and a <code>Composite</code> class is that the Leaf contains no references
   to other <code>Components</code>. The Leaf classes represent the lowest levels
    of the containment structure.</p>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_composite_advantages">Composite Advantages</h4>
<div class="ulist">
<ul>
<li>
<p>Users perceive a unified structure</p>
</li>
<li>
<p>Users can also add or remove components</p>
</li>
<li>
<p>Great for</p>
<div class="ulist">
<ul>
<li>
<p>UI Development</p>
</li>
<li>
<p>Organizational Charts</p>
</li>
<li>
<p>Schedules</p>
</li>
<li>
<p>Outlines</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_composite_disadvantages">Composite Disadvantages</h4>
<div class="ulist">
<ul>
<li>
<p>Because it is so dynamic, the Composite pattern is often difficult to test and debug</p>
</li>
<li>
<p>It normally requires a more sophisticated test/validation strategy that is designed around the concept of the whole-part object hierarchy</p>
</li>
<li>
<p>Requires full advance knowledge of the structure being modeled</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_composite_pattern_demo_diagram">Composite Pattern Demo Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="./images/composite_uml.png" alt="composite uml">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_composite_component">Composite: Component</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">abstract</span> <span class="tok-kd">class</span> <span class="tok-nc">ArithmeticExpression</span> <span class="tok-o">{</span>
    <span class="tok-kd">public</span> <span class="tok-kd">abstract</span> <span class="tok-kt">double</span> <span class="tok-nf">calculate</span><span class="tok-o">();</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_composite_leaf">Composite: Leaf</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Number</span> <span class="tok-kd">extends</span> <span class="tok-n">ArithmeticExpression</span> <span class="tok-o">{</span>

    <span class="tok-kd">private</span> <span class="tok-kt">double</span> <span class="tok-n">value</span><span class="tok-o">;</span>

    <span class="tok-kd">public</span> <span class="tok-nf">Number</span><span class="tok-o">(</span><span class="tok-kt">double</span> <span class="tok-n">value</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">value</span> <span class="tok-o">=</span> <span class="tok-n">value</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-kt">double</span> <span class="tok-nf">calculate</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-n">value</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">toString</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-n">Double</span><span class="tok-o">.</span><span class="tok-na">toString</span><span class="tok-o">(</span><span class="tok-n">value</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_composite_composite">Composite: Composite</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Operand</span> <span class="tok-kd">extends</span> <span class="tok-n">ArithmeticExpression</span> <span class="tok-o">{</span>
    <span class="tok-kd">private</span> <span class="tok-kd">final</span> <span class="tok-n">ArithmeticExpression</span> <span class="tok-n">rhs</span><span class="tok-o">;</span>
    <span class="tok-kd">private</span> <span class="tok-kd">final</span> <span class="tok-n">ArithmeticExpression</span> <span class="tok-n">lhs</span><span class="tok-o">;</span>
    <span class="tok-kd">private</span> <span class="tok-n">Operation</span> <span class="tok-n">operation</span><span class="tok-o">;</span>

    <span class="tok-kd">public</span> <span class="tok-nf">Operand</span><span class="tok-o">(</span><span class="tok-n">ArithmeticExpression</span> <span class="tok-n">rhs</span><span class="tok-o">,</span>
                   <span class="tok-n">Operation</span> <span class="tok-n">operation</span><span class="tok-o">,</span>
                   <span class="tok-n">ArithmeticExpression</span> <span class="tok-n">lhs</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">rhs</span> <span class="tok-o">=</span> <span class="tok-n">rhs</span><span class="tok-o">;</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">lhs</span> <span class="tok-o">=</span> <span class="tok-n">lhs</span><span class="tok-o">;</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">operation</span> <span class="tok-o">=</span> <span class="tok-n">operation</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-kt">double</span> <span class="tok-nf">calculate</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-n">operation</span><span class="tok-o">.</span><span class="tok-na">calculate</span><span class="tok-o">(</span><span class="tok-n">rhs</span><span class="tok-o">,</span> <span class="tok-n">lhs</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">toString</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-s">&quot;( &quot;</span> <span class="tok-o">+</span> <span class="tok-n">rhs</span><span class="tok-o">.</span><span class="tok-na">toString</span><span class="tok-o">()</span> <span class="tok-o">+</span> <span class="tok-s">&quot; &quot;</span> <span class="tok-o">+</span>
                      <span class="tok-n">operation</span><span class="tok-o">.</span><span class="tok-na">getOp</span><span class="tok-o">()</span> <span class="tok-o">+</span> <span class="tok-s">&quot; &quot;</span> <span class="tok-o">+</span>
                      <span class="tok-n">lhs</span><span class="tok-o">.</span><span class="tok-na">toString</span><span class="tok-o">()</span> <span class="tok-o">+</span> <span class="tok-s">&quot; )&quot;</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_composite_utility_class">Composite: Utility Class</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">enum</span> <span class="tok-n">Operation</span> <span class="tok-o">{</span>
    <span class="tok-n">PLUS</span><span class="tok-o">(</span><span class="tok-s">&quot;+&quot;</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-nd">@Override</span>
        <span class="tok-kd">public</span> <span class="tok-kt">double</span> <span class="tok-nf">calculate</span><span class="tok-o">(</span><span class="tok-n">ArithmeticExpression</span> <span class="tok-n">rhs</span><span class="tok-o">,</span>
                                <span class="tok-n">ArithmeticExpression</span> <span class="tok-n">lhs</span><span class="tok-o">)</span> <span class="tok-o">{</span>
            <span class="tok-k">return</span> <span class="tok-n">rhs</span><span class="tok-o">.</span><span class="tok-na">calculate</span><span class="tok-o">()</span> <span class="tok-o">+</span> <span class="tok-n">lhs</span><span class="tok-o">.</span><span class="tok-na">calculate</span><span class="tok-o">();</span>
        <span class="tok-o">}</span>
    <span class="tok-o">},</span>
    <span class="tok-n">MINUS</span><span class="tok-o">(</span><span class="tok-s">&quot;-&quot;</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-nd">@Override</span>
        <span class="tok-kd">public</span> <span class="tok-kt">double</span> <span class="tok-nf">calculate</span><span class="tok-o">(</span><span class="tok-n">ArithmeticExpression</span> <span class="tok-n">rhs</span><span class="tok-o">,</span>
                                <span class="tok-n">ArithmeticExpression</span> <span class="tok-n">lhs</span><span class="tok-o">)</span> <span class="tok-o">{</span>
            <span class="tok-k">return</span> <span class="tok-n">rhs</span><span class="tok-o">.</span><span class="tok-na">calculate</span><span class="tok-o">()</span> <span class="tok-o">-</span> <span class="tok-n">lhs</span><span class="tok-o">.</span><span class="tok-na">calculate</span><span class="tok-o">();</span>
        <span class="tok-o">}</span>
    <span class="tok-o">},</span>
    <span class="tok-n">MULTIPLICATION</span><span class="tok-o">(</span><span class="tok-s">&quot;*&quot;</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-nd">@Override</span>
        <span class="tok-kd">public</span> <span class="tok-kt">double</span> <span class="tok-nf">calculate</span><span class="tok-o">(</span><span class="tok-n">ArithmeticExpression</span> <span class="tok-n">rhs</span><span class="tok-o">,</span>
                                <span class="tok-n">ArithmeticExpression</span> <span class="tok-n">lhs</span><span class="tok-o">)</span> <span class="tok-o">{</span>
            <span class="tok-k">return</span> <span class="tok-n">rhs</span><span class="tok-o">.</span><span class="tok-na">calculate</span><span class="tok-o">()</span> <span class="tok-o">*</span> <span class="tok-n">lhs</span><span class="tok-o">.</span><span class="tok-na">calculate</span><span class="tok-o">();</span>
        <span class="tok-o">}</span>
    <span class="tok-o">},</span>
    <span class="tok-n">DIVISION</span><span class="tok-o">(</span><span class="tok-s">&quot;/&quot;</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-nd">@Override</span>
        <span class="tok-kd">public</span> <span class="tok-kt">double</span> <span class="tok-nf">calculate</span><span class="tok-o">(</span><span class="tok-n">ArithmeticExpression</span> <span class="tok-n">rhs</span><span class="tok-o">,</span>
                                <span class="tok-n">ArithmeticExpression</span> <span class="tok-n">lhs</span><span class="tok-o">)</span> <span class="tok-o">{</span>
            <span class="tok-k">return</span> <span class="tok-n">rhs</span><span class="tok-o">.</span><span class="tok-na">calculate</span><span class="tok-o">()</span> <span class="tok-o">/</span> <span class="tok-n">lhs</span><span class="tok-o">.</span><span class="tok-na">calculate</span><span class="tok-o">();</span>
        <span class="tok-o">}</span>
    <span class="tok-o">};</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_composite_utility_class_continued">Composite: Utility Class Continued</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span>
<span class="tok-kd">public</span> <span class="tok-kd">enum</span> <span class="tok-n">Operation</span> <span class="tok-o">{</span>

    <span class="tok-c1">//...</span>

    <span class="tok-kd">private</span> <span class="tok-n">String</span> <span class="tok-n">op</span><span class="tok-o">;</span>

    <span class="tok-kd">private</span> <span class="tok-nf">Operation</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">op</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">op</span> <span class="tok-o">=</span> <span class="tok-n">op</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-kd">abstract</span> <span class="tok-kt">double</span> <span class="tok-nf">calculate</span><span class="tok-o">(</span><span class="tok-n">ArithmeticExpression</span> <span class="tok-n">rhs</span><span class="tok-o">,</span> <span class="tok-n">ArithmeticExpression</span> <span class="tok-n">lhs</span><span class="tok-o">);</span>

    <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">getOp</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-n">op</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2 slide_section">
<h3 id="_decorator_pattern">Decorator Pattern</h3>
<div class="sect3">
<h4 id="_decorator_pattern_purpose">Decorator Pattern Purpose</h4>
<div class="ulist">
<ul>
<li>
<p>Also known as a Wrapper</p>
</li>
<li>
<p>To provide a way to flexibly add or remove component functionality without changing its external appearance or function</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_decorator_canonical_diagram">Decorator Canonical Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="./images/decorator-pattern.png" alt="decorator pattern" width="423" height="459">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_decorator_pattern_advantages">Decorator Pattern Advantages</h4>
<div class="ulist">
<ul>
<li>
<p>"Delegation over Inheritance" - Effective Java Josh Bloch</p>
</li>
<li>
<p>Produce classes with plugin capabilities</p>
</li>
<li>
<p>You want to make dynamic changes that are transparent to users, without the restrictions of subclassing</p>
</li>
<li>
<p>Offers the opportunity to easily adjust and augment the behavior of an object during runtime</p>
</li>
<li>
<p>Can reduce memory by reusing layers</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_decorator_pattern_disadvantages">Decorator Pattern Disadvantages</h4>
<div class="ulist">
<ul>
<li>
<p>Can produce large number of layers</p>
</li>
<li>
<p>Debugging and testing can be difficult</p>
</li>
<li>
<p>Can be slow if done incorrectly</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_decorator_demo_diagram">Decorator Demo Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="./images/decorator_uml.png" alt="decorator uml">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_base_interface">Base Interface</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">Sundae</span> <span class="tok-o">{</span>
    <span class="tok-n">String</span> <span class="tok-nf">describeSundae</span><span class="tok-o">();</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_the_decorator">The Decorator</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">abstract</span> <span class="tok-kd">class</span> <span class="tok-nc">SundaeDecorator</span> <span class="tok-kd">implements</span> <span class="tok-n">Sundae</span> <span class="tok-o">{</span>

    <span class="tok-kd">private</span> <span class="tok-n">Sundae</span> <span class="tok-n">decorated</span><span class="tok-o">;</span>

    <span class="tok-kd">public</span> <span class="tok-nf">SundaeDecorator</span><span class="tok-o">(</span><span class="tok-n">Sundae</span> <span class="tok-n">decorated</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">decorated</span> <span class="tok-o">=</span> <span class="tok-n">decorated</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-n">Sundae</span> <span class="tok-nf">getDecorated</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-n">decorated</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_the_base_class">The Base Class</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">VanillaIceCream</span> <span class="tok-kd">implements</span> <span class="tok-n">Sundae</span> <span class="tok-o">{</span>
    <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">describeSundae</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-s">&quot;Vanilla Ice Cream&quot;</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_sample_decorator_layer">Sample Decorator Layer</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">WhipcreamSundaeDecorator</span> <span class="tok-kd">extends</span> <span class="tok-n">SundaeDecorator</span> <span class="tok-o">{</span>
    <span class="tok-kd">public</span> <span class="tok-nf">WhipcreamSundaeDecorator</span><span class="tok-o">(</span><span class="tok-n">Sundae</span> <span class="tok-n">sundae</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-kd">super</span><span class="tok-o">(</span><span class="tok-n">sundae</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">describeSundae</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-s">&quot;Whipcream &quot;</span> <span class="tok-o">+</span> <span class="tok-n">getDecorated</span><span class="tok-o">().</span><span class="tok-na">describeSundae</span><span class="tok-o">();</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_another_sample_decorator_layer">Another Sample Decorator Layer</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">NutsSundaeDecorator</span> <span class="tok-kd">extends</span> <span class="tok-n">SundaeDecorator</span> <span class="tok-o">{</span>
    <span class="tok-kd">public</span> <span class="tok-nf">NutsSundaeDecorator</span><span class="tok-o">(</span><span class="tok-n">Sundae</span> <span class="tok-n">sundae</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-kd">super</span><span class="tok-o">(</span><span class="tok-n">sundae</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">describeSundae</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-s">&quot;Nuts &quot;</span> <span class="tok-o">+</span> <span class="tok-n">getDecorated</span><span class="tok-o">().</span><span class="tok-na">describeSundae</span><span class="tok-o">();</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_and_yet_another">And Yet, Another</h4>
<div class="paragraph">
<p>Notice this one, this one changes the end result</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">FudgeFilterDecorator</span> <span class="tok-kd">extends</span> <span class="tok-n">SundaeDecorator</span> <span class="tok-o">{</span>
    <span class="tok-kd">public</span> <span class="tok-nf">FudgeFilterDecorator</span><span class="tok-o">(</span><span class="tok-n">Sundae</span> <span class="tok-n">cherryOnTopDecorator</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-kd">super</span><span class="tok-o">(</span><span class="tok-n">cherryOnTopDecorator</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">describeSundae</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-n">getDecorated</span><span class="tok-o">().</span><span class="tok-na">describeSundae</span><span class="tok-o">().</span><span class="tok-na">replaceAll</span><span class="tok-o">(</span><span class="tok-s">&quot;Fudge&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;xxxxx&quot;</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_running_a_decorator">Running a Decorator</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Sundae</span> <span class="tok-n">sundae</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">NutsSundaeDecorator</span><span class="tok-o">(</span>
        <span class="tok-k">new</span> <span class="tok-n">FudgeSundaeDecorator</span><span class="tok-o">(</span>
                <span class="tok-k">new</span> <span class="tok-n">WhipcreamSundaeDecorator</span><span class="tok-o">(</span>
                        <span class="tok-k">new</span> <span class="tok-n">VanillaIceCream</span><span class="tok-o">()</span>
                <span class="tok-o">)</span>
        <span class="tok-o">)</span>
<span class="tok-o">);</span>

<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">sundae</span><span class="tok-o">.</span><span class="tok-na">describeSundae</span><span class="tok-o">());</span>

<span class="tok-c1">//add a cherry</span>

<span class="tok-n">Sundae</span> <span class="tok-n">cherryOnTopDecorator</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">CherryOnTopDecorator</span><span class="tok-o">(</span><span class="tok-n">sundae</span><span class="tok-o">);</span>

<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">cherryOnTopDecorator</span><span class="tok-o">.</span><span class="tok-na">describeSundae</span><span class="tok-o">());</span>

<span class="tok-n">Sundae</span> <span class="tok-n">filteredFudge</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">FudgeFilterDecorator</span><span class="tok-o">(</span><span class="tok-n">cherryOnTopDecorator</span><span class="tok-o">);</span>

<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">filteredFudge</span><span class="tok-o">.</span><span class="tok-na">describeSundae</span><span class="tok-o">());</span></code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2 slide_section">
<h3 id="_facade_pattern">Facade Pattern</h3>
<div class="sect3">
<h4 id="_facade_pattern_properties">Facade Pattern Properties</h4>
<div class="paragraph">
<p><strong>Type:</strong> Structural<br>
<strong>Level:</strong> Component<br></p>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_facade_pattern_canonical_diagram">Facade Pattern Canonical Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="./images/facade-pattern.png" alt="facade pattern" width="766" height="190">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_facade_ingredients">Facade Ingredients</h4>
<div class="paragraph">
<p><strong>Facade</strong> – The class for clients to use. It knows about the subsystems it uses and their respective responsibilities. Normally all client requests will be delegated to the appropriate subsystems.</p>
</div>
<div class="paragraph">
<p><strong>Subsystem</strong> – This is a set of classes. They can be used by clients directly or will do work assigned to them by the <code>Facade</code>. It does not have knowledge of the <code>Facade</code>; for the subsystem the <code>Facade</code> will be just another client.</p>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_facade_purpose">Facade Purpose</h4>
<div class="ulist">
<ul>
<li>
<p>To provide a simplified interface to a group of subsystems or a complex subsystem</p>
</li>
<li>
<p>Reduce coupling between clients and subsystems.</p>
</li>
<li>
<p>Layer subsystems by providing Facades for sets of subsystems.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_facade_advantages">Facade Advantages</h4>
<div class="ulist">
<ul>
<li>
<p>Protects the client with an overabundance of options, parameters, and setup methods</p>
</li>
<li>
<p>One request can be translated to multiple subsystems</p>
</li>
<li>
<p>Promotes low coupling between subsystems</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_facade_disadvantages">Facade Disadvantages</h4>
<div class="ulist">
<ul>
<li>
<p>Can be difficult to debug if subsystems gets too high</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_facade_demo_diagram">Facade Demo Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="./images/facade_uml.png" alt="facade uml">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_facade_the_facades_interface">Facade: The Facade&#8217;s Interface</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">StudentService</span> <span class="tok-o">{</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">registerStudent</span><span class="tok-o">(</span><span class="tok-n">Student</span> <span class="tok-n">student</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_facade_the_facades_implementation">Facade: The Facade&#8217;s Implementation</h4>
<div class="paragraph">
<p>Here, we create a "complication", albeit a small one.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">StandardStudentService</span> <span class="tok-kd">implements</span> <span class="tok-n">StudentService</span> <span class="tok-o">{</span>

    <span class="tok-kd">private</span> <span class="tok-kd">final</span> <span class="tok-n">StudentDAO</span> <span class="tok-n">studentDAO</span><span class="tok-o">;</span>

    <span class="tok-kd">public</span> <span class="tok-nf">StandardStudentService</span><span class="tok-o">(</span><span class="tok-n">StudentDAO</span> <span class="tok-n">studentDAO</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">studentDAO</span> <span class="tok-o">=</span> <span class="tok-n">studentDAO</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">registerStudent</span><span class="tok-o">(</span><span class="tok-n">Student</span> <span class="tok-n">student</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">if</span> <span class="tok-o">(!</span><span class="tok-n">studentDAO</span><span class="tok-o">.</span><span class="tok-na">isAlreadyRegistered</span><span class="tok-o">(</span><span class="tok-n">student</span><span class="tok-o">))</span> <span class="tok-o">{</span>
            <span class="tok-n">studentDAO</span><span class="tok-o">.</span><span class="tok-na">persist</span><span class="tok-o">(</span><span class="tok-n">student</span><span class="tok-o">);</span>
        <span class="tok-o">}</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_facade_the_facades_dependency_interface">Facade: The Facade&#8217;s Dependency Interface</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">StudentDAO</span> <span class="tok-o">{</span>
    <span class="tok-kd">public</span> <span class="tok-n">Long</span> <span class="tok-nf">persist</span><span class="tok-o">(</span><span class="tok-n">Student</span> <span class="tok-n">student</span><span class="tok-o">);</span>
    <span class="tok-kd">public</span> <span class="tok-n">Student</span> <span class="tok-nf">findById</span><span class="tok-o">(</span><span class="tok-n">Long</span> <span class="tok-n">id</span><span class="tok-o">);</span>
    <span class="tok-kd">public</span> <span class="tok-kt">boolean</span> <span class="tok-nf">isAlreadyRegistered</span><span class="tok-o">(</span><span class="tok-n">Student</span> <span class="tok-n">student</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_facade_the_facades_dependency_implementation">Facade: The Facade&#8217;s Dependency Implementation</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">OracleStudentDAO</span> <span class="tok-kd">implements</span> <span class="tok-n">StudentDAO</span> <span class="tok-o">{</span>
    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-n">Long</span> <span class="tok-nf">persist</span><span class="tok-o">(</span><span class="tok-n">Student</span> <span class="tok-n">student</span><span class="tok-o">)</span> <span class="tok-o">{</span>
      <span class="tok-c1">//insert lots of database code</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-n">Student</span> <span class="tok-nf">findById</span><span class="tok-o">(</span><span class="tok-n">Long</span> <span class="tok-n">id</span><span class="tok-o">)</span> <span class="tok-o">{</span>
      <span class="tok-c1">//insert lots of database code</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-kt">boolean</span> <span class="tok-nf">isAlreadyRegistered</span><span class="tok-o">(</span><span class="tok-n">Student</span> <span class="tok-n">student</span><span class="tok-o">)</span> <span class="tok-o">{</span>
      <span class="tok-c1">//insert lots of database code</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2 slide_section">
<h3 id="_proxy_pattern">Proxy Pattern</h3>
<div class="sect3">
<h4 id="_proxy_pattern_properties">Proxy Pattern Properties</h4>
<div class="paragraph">
<p><strong>Type:</strong> Structural<br>
<strong>Level:</strong> Component<br></p>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_proxy_purpose">Proxy Purpose</h4>
<div class="paragraph">
<p>To provide a representative of another object, for reasons such as access, speed, or security.</p>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_proxy_canonical_diagram">Proxy Canonical Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="./images/proxy-pattern.png" alt="proxy pattern" width="268" height="174">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_proxy_ingredients">Proxy Ingredients</h4>
<div class="paragraph">
<p><strong>Service</strong> – The interface that both the proxy and the real object will implement.</p>
</div>
<div class="paragraph">
<p><strong>ServiceProxy</strong> – ServiceProxy implements <code>Service</code> and forwards method calls
 to the real object (<code>ServiceImpl</code>) when appropriate.</p>
</div>
<div class="paragraph">
<p><strong>ServiceImpl</strong> – The real, full implementation of the interface. This object
will be represented by the Proxy object.</p>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_proxy_advantages">Proxy Advantages</h4>
<div class="ulist">
<ul>
<li>
<p>Kind of an adapter pattern, but for complex, remote, or both objects</p>
</li>
<li>
<p>Delays creation of those expensive objects</p>
</li>
<li>
<p>Can be used to constrain access based on access control</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_proxy_disadvantages">Proxy Disadvantages</h4>
<div class="ulist">
<ul>
<li>
<p>Complicated setup</p>
</li>
<li>
<p>Unnecessary for simple local reference</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_proxy_demo_diagram">Proxy Demo Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="./images/proxy_uml.png" alt="proxy uml">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_proxy_target_interface">Proxy: Target Interface</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">Target</span> <span class="tok-o">{</span>
    <span class="tok-kt">void</span> <span class="tok-nf">callMe</span><span class="tok-o">();</span>
    <span class="tok-kt">void</span> <span class="tok-nf">takeSomeTime</span><span class="tok-o">();</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_proxy_target_implementation">Proxy: Target Implementation</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">TargetImpl</span> <span class="tok-kd">implements</span> <span class="tok-n">Target</span> <span class="tok-o">{</span>

    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">callMe</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Called&quot;</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">takeSomeTime</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">try</span> <span class="tok-o">{</span>
            <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">sleep</span><span class="tok-o">(</span><span class="tok-mi">1000</span><span class="tok-o">);</span>
            <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Took some time&quot;</span><span class="tok-o">);</span>
        <span class="tok-o">}</span> <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">InterruptedException</span> <span class="tok-n">e</span><span class="tok-o">)</span> <span class="tok-o">{</span>
            <span class="tok-n">e</span><span class="tok-o">.</span><span class="tok-na">printStackTrace</span><span class="tok-o">();</span>
        <span class="tok-o">}</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_proxy_the_proxy">Proxy: The Proxy</h4>
<div class="paragraph">
<p>The difference between a Proxy and an Adapter is that the Adapter can have a
different interface, a Proxy must have the same interface and perhaps some supporting methods</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">LoggingProxy</span> <span class="tok-kd">implements</span> <span class="tok-n">Target</span> <span class="tok-o">{</span>

    <span class="tok-kd">private</span> <span class="tok-n">Target</span> <span class="tok-n">proxied</span><span class="tok-o">;</span>

    <span class="tok-kd">public</span> <span class="tok-nf">LoggingProxy</span><span class="tok-o">(</span><span class="tok-n">Target</span> <span class="tok-n">proxied</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">proxied</span> <span class="tok-o">=</span> <span class="tok-n">proxied</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">callMe</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-kt">long</span> <span class="tok-n">start</span> <span class="tok-o">=</span> <span class="tok-n">before</span><span class="tok-o">(</span><span class="tok-s">&quot;callMe()&quot;</span><span class="tok-o">);</span>
        <span class="tok-n">proxied</span><span class="tok-o">.</span><span class="tok-na">callMe</span><span class="tok-o">();</span>
        <span class="tok-n">after</span><span class="tok-o">(</span><span class="tok-s">&quot;callMe()&quot;</span><span class="tok-o">,</span> <span class="tok-n">start</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">takeSomeTime</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-kt">long</span> <span class="tok-n">start</span> <span class="tok-o">=</span> <span class="tok-n">before</span><span class="tok-o">(</span><span class="tok-s">&quot;takeSomeTime()&quot;</span><span class="tok-o">);</span>
        <span class="tok-n">proxied</span><span class="tok-o">.</span><span class="tok-na">takeSomeTime</span><span class="tok-o">();</span>
        <span class="tok-n">after</span><span class="tok-o">(</span><span class="tok-s">&quot;takeSomeTime()&quot;</span><span class="tok-o">,</span> <span class="tok-n">start</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">private</span> <span class="tok-kt">long</span> <span class="tok-nf">before</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">name</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Before &quot;</span> <span class="tok-o">+</span> <span class="tok-n">name</span><span class="tok-o">);</span>
        <span class="tok-k">return</span> <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">currentTimeMillis</span><span class="tok-o">();</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">private</span> <span class="tok-kt">void</span> <span class="tok-nf">after</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">name</span><span class="tok-o">,</span> <span class="tok-kt">long</span> <span class="tok-n">start</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;After: &quot;</span> <span class="tok-o">+</span> <span class="tok-n">name</span> <span class="tok-o">+</span> <span class="tok-s">&quot; took: &quot;</span> <span class="tok-o">+</span> <span class="tok-o">(</span><span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">currentTimeMillis</span><span class="tok-o">()</span> <span class="tok-o">-</span> <span class="tok-n">start</span><span class="tok-o">));</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_proxy_use_of_a_proxy">Proxy: Use of a Proxy</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Target</span> <span class="tok-n">target</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">TargetImpl</span><span class="tok-o">();</span>

<span class="tok-n">target</span><span class="tok-o">.</span><span class="tok-na">callMe</span><span class="tok-o">();</span>
<span class="tok-n">target</span><span class="tok-o">.</span><span class="tok-na">takeSomeTime</span><span class="tok-o">();</span>

<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Added Proxy&quot;</span><span class="tok-o">);</span>
<span class="tok-n">Target</span> <span class="tok-n">targetProxy</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">LoggingProxy</span><span class="tok-o">(</span><span class="tok-n">target</span><span class="tok-o">);</span>

<span class="tok-n">targetProxy</span><span class="tok-o">.</span><span class="tok-na">callMe</span><span class="tok-o">();</span>
<span class="tok-n">targetProxy</span><span class="tok-o">.</span><span class="tok-na">takeSomeTime</span><span class="tok-o">();</span></code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2 slide_section">
<h3 id="_flyweight_pattern">Flyweight Pattern</h3>
<div class="sect3">
<h4 id="_flyweight_pattern_properties">Flyweight Pattern Properties</h4>
<div class="paragraph">
<p><strong>Type:</strong> Structural<br>
<strong>Level:</strong> Component<br></p>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_flyweight_purpose">Flyweight Purpose</h4>
<div class="ulist">
<ul>
<li>
<p>Provides for sharing an object between clients</p>
</li>
<li>
<p>Creating a responsibility for the shared object that normal objects do not need to consider</p>
</li>
<li>
<p>An ordinary object doesn&#8217;t have to worry much about shared responsibility</p>
</li>
<li>
<p>Most often, only one client will hold a reference to an object at any one time</p>
</li>
<li>
<p>When the object’s state changes, it’s because the client changed it, and the object does not have any responsibility to inform any other clients</p>
</li>
<li>
<p>Sometimes, though, you will want to arrange for multiple clients to share access to an object</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_flyweight_canonical_diagram">Flyweight Canonical Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="./images/flyweight-pattern.png" alt="flyweight pattern" width="331" height="215">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_flyweight_ingredients">Flyweight Ingredients</h4>
<div class="paragraph">
<p><strong>Flyweight</strong> – The interface defines the methods clients can use to pass external state into the flyweight objects.</p>
</div>
<div class="paragraph">
<p><strong>ConcreteFlyweight</strong> – This implements the <code>Flyweight</code> interface, and implements the ability to store
internal data. The internal data has to be representative for all the instances where you need the Flyweight.</p>
</div>
<div class="paragraph">
<p><strong>FlyweightFactory</strong> – This factory is responsible for creating and managing the Flyweights. Providing
 access to Flyweight creation through the factory ensures proper sharing. The factory can create all
  the flyweights at the start of the application, or wait until they are needed.</p>
</div>
<div class="paragraph">
<p><strong>Client</strong> – The client is responsible for creating and providing the context for the flyweights.
 The only way to get a reference to a flyweight is through <code>FlyweightFactory</code>.</p>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_flyweight_advantages">Flyweight Advantages</h4>
<div class="ulist">
<ul>
<li>
<p>Sharing an object among multiple clients occurs when you must manage thousands</p>
</li>
<li>
<p>Provides for sharing an object between clients</p>
</li>
<li>
<p>Save in memory</p>
</li>
<li>
<p>Runtime can be efficient</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="small">Source: Applied Java Patterns By Stephen Stelting, Olav Massen</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_flyweight_disadvantages">Flyweight Disadvantages</h4>
<div class="ulist">
<ul>
<li>
<p>None</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_flyweight_demo_diagram">Flyweight Demo Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="./images/flyweight_uml.png" alt="flyweight uml">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_flyweight_factory">Flyweight Factory</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kn">import</span> <span class="tok-nn">java.util.HashMap</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">StarWarsActionFigureFactory</span> <span class="tok-o">{</span>
    <span class="tok-kd">private</span> <span class="tok-n">HashMap</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">,</span> <span class="tok-n">StarWarsActionFigure</span><span class="tok-o">&gt;</span> <span class="tok-n">flyweights</span><span class="tok-o">;</span>

    <span class="tok-kd">public</span> <span class="tok-nf">StarWarsActionFigureFactory</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">flyweights</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">HashMap</span><span class="tok-o">&lt;&gt;();</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-n">StarWarsActionFigure</span> <span class="tok-nf">getInstance</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">name</span><span class="tok-o">)</span> <span class="tok-o">{</span>
         <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">flyweights</span><span class="tok-o">.</span><span class="tok-na">containsKey</span><span class="tok-o">(</span><span class="tok-n">name</span><span class="tok-o">))</span> <span class="tok-k">return</span> <span class="tok-n">flyweights</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-n">name</span><span class="tok-o">);</span>
         <span class="tok-k">else</span> <span class="tok-o">{</span>
             <span class="tok-n">StarWarsActionFigure</span> <span class="tok-n">starWarsActionFigure</span> <span class="tok-o">=</span>
                <span class="tok-k">new</span> <span class="tok-n">StarWarsActionFigure</span><span class="tok-o">(</span><span class="tok-n">name</span><span class="tok-o">);</span>
             <span class="tok-n">flyweights</span><span class="tok-o">.</span><span class="tok-na">put</span><span class="tok-o">(</span><span class="tok-n">name</span><span class="tok-o">,</span> <span class="tok-n">starWarsActionFigure</span><span class="tok-o">);</span>
             <span class="tok-k">return</span> <span class="tok-n">starWarsActionFigure</span><span class="tok-o">;</span>
         <span class="tok-o">}</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_flyweight_objects">Flyweight Objects</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">StarWarsActionFigure</span> <span class="tok-o">{</span>
    <span class="tok-kd">private</span> <span class="tok-n">String</span> <span class="tok-n">name</span><span class="tok-o">;</span>

    <span class="tok-kd">protected</span> <span class="tok-nf">StarWarsActionFigure</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">name</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">name</span> <span class="tok-o">=</span> <span class="tok-n">name</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">getName</span><span class="tok-o">()</span> <span class="tok-o">{</span><span class="tok-k">return</span> <span class="tok-n">name</span><span class="tok-o">;}</span>

    <span class="tok-c1">//toString, equals, hashCode</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_what_is_new_in_java">What is new in Java</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_jdk_9">JDK 9</h3>
<div class="ulist">
<ul>
<li>
<p>JShell</p>
</li>
<li>
<p>Immutable Collection Creation:</p>
</li>
<li>
<p>Module System</p>
</li>
<li>
<p>Process Handles</p>
</li>
<li>
<p>Flow API</p>
</li>
<li>
<p>Functional and Stream Additions</p>
</li>
<li>
<p>HTTP2 Client</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_immutable_collection_api">Immutable Collection API</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">3</span><span class="tok-o">,</span><span class="tok-mi">1</span><span class="tok-o">,</span><span class="tok-mi">2</span><span class="tok-o">,</span><span class="tok-mi">4</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_module_systems">Module Systems</h4>
<div class="ulist">
<ul>
<li>
<p>Java Platform Module System (JPMS), or “Modules” for short</p>
</li>
<li>
<p>Module - Group of closely related packages and resources along with a new module descriptor file</p>
</li>
<li>
<p>Java Required Modules for "componentizing" Java and having a small JDK footprint</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_process_handles">Process Handles</h4>
<div class="paragraph">
<p>Ability to query system information like PID</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">printf</span><span class="tok-o">(</span><span class="tok-s">&quot;Process Starting on %s%n&quot;</span><span class="tok-o">,</span> <span class="tok-n">ProcessHandle</span><span class="tok-o">.</span><span class="tok-na">current</span><span class="tok-o">().</span><span class="tok-na">pid</span><span class="tok-o">());</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_flow_api_2">Flow API</h4>
<div class="ulist">
<ul>
<li>
<p>Reactive Extensions based on Interfaces</p>
</li>
<li>
<p>Alleviates Backpressure, Request Based</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_functional_additions">Functional Additions</h4>
<div class="ulist">
<ul>
<li>
<p><code>Optional:stream</code></p>
</li>
<li>
<p><code>takeWhile</code> and <code>dropWhile</code> for <code>Streams</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Stream</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span><span class="tok-mi">2</span><span class="tok-o">,</span><span class="tok-mi">3</span><span class="tok-o">,</span><span class="tok-mi">4</span><span class="tok-o">,</span><span class="tok-mi">5</span><span class="tok-o">,</span><span class="tok-mi">6</span><span class="tok-o">,</span><span class="tok-mi">7</span><span class="tok-o">,</span><span class="tok-mi">8</span><span class="tok-o">,</span><span class="tok-mi">9</span><span class="tok-o">,</span><span class="tok-mi">10</span><span class="tok-o">).</span><span class="tok-na">takeWhile</span><span class="tok-o">(</span><span class="tok-n">i</span> <span class="tok-o">-&gt;</span> <span class="tok-n">i</span> <span class="tok-o">&lt;</span> <span class="tok-mi">5</span> <span class="tok-o">).</span><span class="tok-na">forEach</span><span class="tok-o">(</span><span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">::</span><span class="tok-n">println</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_http2_client">HTTP2 Client</h4>
<div class="ulist">
<ul>
<li>
<p>Client supporting HTTP2 and some of its new features</p>
<div class="ulist">
<ul>
<li>
<p>HTTP/2 Multiplexing</p>
</li>
<li>
<p>HTTP/2 Header Compression</p>
</li>
<li>
<p>HTTP/2 Push</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">HttpClient</span> <span class="tok-n">client</span> <span class="tok-o">=</span> <span class="tok-n">HttpClient</span>
    <span class="tok-o">.</span><span class="tok-na">newBuilder</span><span class="tok-o">()</span>
    <span class="tok-o">.</span><span class="tok-na">version</span><span class="tok-o">(</span><span class="tok-n">Version</span><span class="tok-o">.</span><span class="tok-na">HTTP_2</span><span class="tok-o">)</span>
    <span class="tok-o">.</span><span class="tok-na">build</span><span class="tok-o">();</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">HttpResponse</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">response</span> <span class="tok-o">=</span> <span class="tok-n">client</span><span class="tok-o">.</span><span class="tok-na">send</span><span class="tok-o">(</span>
    <span class="tok-n">HttpRequest</span>
        <span class="tok-o">.</span><span class="tok-na">newBuilder</span><span class="tok-o">(</span><span class="tok-n">TEST_URI</span><span class="tok-o">)</span>
        <span class="tok-o">.</span><span class="tok-na">POST</span><span class="tok-o">(</span><span class="tok-n">BodyProcessor</span><span class="tok-o">.</span><span class="tok-na">fromString</span><span class="tok-o">(</span><span class="tok-s">&quot;Hello world&quot;</span><span class="tok-o">))</span>
        <span class="tok-o">.</span><span class="tok-na">build</span><span class="tok-o">(),</span>
    <span class="tok-n">BodyHandler</span><span class="tok-o">.</span><span class="tok-na">asString</span><span class="tok-o">()</span>
<span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jdk_10">JDK 10</h3>
<div class="ulist">
<ul>
<li>
<p>Type inference</p>
</li>
<li>
<p><code>Collectors</code> changes</p>
</li>
<li>
<p><code>copyOf</code></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_type_inference">Type Inference</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">var</span> <span class="tok-n">list</span> <span class="tok-o">=</span> <span class="tok-n">List</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">12</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">50</span><span class="tok-o">,</span> <span class="tok-mi">103</span><span class="tok-o">)</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_collectors_changes"><code>Collectors</code> Changes</h4>
<div class="paragraph">
<p>Additional methods to collect a Stream into <code>unmodifiable</code> <code>List</code>, <code>Map</code> or <code>Set</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">evenList</span> <span class="tok-o">=</span> <span class="tok-n">someIntList</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">()</span>
      <span class="tok-o">.</span><span class="tok-na">filter</span><span class="tok-o">(</span><span class="tok-n">i</span> <span class="tok-o">-&gt;</span> <span class="tok-n">i</span> <span class="tok-o">%</span> <span class="tok-mi">2</span> <span class="tok-o">==</span> <span class="tok-mi">0</span><span class="tok-o">)</span>
      <span class="tok-o">.</span><span class="tok-na">collect</span><span class="tok-o">(</span><span class="tok-n">Collectors</span><span class="tok-o">.</span><span class="tok-na">toUnmodifiableList</span><span class="tok-o">());</span>
    <span class="tok-n">evenList</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-mi">4</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_copyof"><code>copyOf</code></h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">copyList</span> <span class="tok-o">=</span> <span class="tok-n">List</span><span class="tok-o">.</span><span class="tok-na">copyOf</span><span class="tok-o">(</span><span class="tok-n">someIntList</span><span class="tok-o">);</span>
<span class="tok-n">copyList</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-mi">4</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_optional_orelsethrow"><code>Optional.orElseThrow</code></h4>
<div class="paragraph">
<p><code>orElseThrow</code> implementation for all <code>Optional</code> variants
* <code>java.util.Optional</code>
* <code>java.util.OptionalDouble</code>
* <code>java.util.OptionalInt</code>
* <code>java.util.OptionalLong</code></p>
</div>
<div class="paragraph">
<p><code>orElseThrow()</code>
* doesn&#8217;t take any argument
* <code>throws NoSuchElementException</code> if no value is present:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Integer</span> <span class="tok-n">firstEven</span> <span class="tok-o">=</span> <span class="tok-n">someIntList</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">()</span>
      <span class="tok-o">.</span><span class="tok-na">filter</span><span class="tok-o">(</span><span class="tok-n">i</span> <span class="tok-o">-&gt;</span> <span class="tok-n">i</span> <span class="tok-o">%</span> <span class="tok-mi">2</span> <span class="tok-o">==</span> <span class="tok-mi">0</span><span class="tok-o">)</span>
      <span class="tok-o">.</span><span class="tok-na">findFirst</span><span class="tok-o">()</span>
      <span class="tok-o">.</span><span class="tok-na">orElseThrow</span><span class="tok-o">();</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jdk_11">JDK 11</h3>
<div class="ulist">
<ul>
<li>
<p><code>String</code> class additions</p>
</li>
<li>
<p>Type inference lambda variables</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_string_class_additions"><code>String</code> class additions</h4>
<div class="paragraph">
<p><code>repeat</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">String</span> <span class="tok-n">output</span> <span class="tok-o">=</span> <span class="tok-s">&quot;La &quot;</span><span class="tok-o">.</span><span class="tok-na">repeat</span><span class="tok-o">(</span><span class="tok-mi">2</span><span class="tok-o">)</span> <span class="tok-o">+</span> <span class="tok-s">&quot;Land&quot;</span><span class="tok-o">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>strip</code> - strip leading and trailing spaces
* <code>stripLeading</code> - remove all leading spaces
* <code>stripTrailing</code> - remove all trailing spaces</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-s">&quot;\n\t  hello   \u2005&quot;</span><span class="tok-o">.</span><span class="tok-na">strip</span><span class="tok-o">()</span> <span class="tok-c1">//Hello</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Takes into account Unicode blank values
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>isBlank</code> - Determines if a <code>String</code> is indeed blank</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-s">&quot;\n\t\u2005  &quot;</span><span class="tok-o">.</span><span class="tok-na">isBlank</span><span class="tok-o">()</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Takes into account Unicode blank values
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>lines</code> - Break a String by line terminators into a Stream of <code>String</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">String</span> <span class="tok-n">multilineStr</span> <span class="tok-o">=</span> <span class="tok-s">&quot;This is\n \n a multiline\n string.&quot;</span><span class="tok-o">;</span>

<span class="tok-kt">long</span> <span class="tok-n">lineCount</span> <span class="tok-o">=</span> <span class="tok-n">multilineStr</span><span class="tok-o">.</span><span class="tok-na">lines</span><span class="tok-o">()</span>
  <span class="tok-o">.</span><span class="tok-na">filter</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">::</span><span class="tok-n">isBlank</span><span class="tok-o">)</span>
  <span class="tok-o">.</span><span class="tok-na">count</span><span class="tok-o">();</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_type_inference_lambda_expressions">Type Inference Lambda Expressions</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Function</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">,</span> <span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">append</span> <span class="tok-o">=</span> <span class="tok-o">(</span><span class="tok-n">var</span> <span class="tok-n">string</span><span class="tok-o">)</span> <span class="tok-o">-&gt;</span> <span class="tok-n">string</span> <span class="tok-o">+</span> <span class="tok-s">&quot; World&quot;</span><span class="tok-o">;</span>
<span class="tok-n">String</span> <span class="tok-n">appendedString</span> <span class="tok-o">=</span> <span class="tok-n">append</span><span class="tok-o">.</span><span class="tok-na">apply</span><span class="tok-o">(</span><span class="tok-s">&quot;Hello&quot;</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_null_output_stream">Null Output Stream</h4>
<div class="ulist">
<ul>
<li>
<p>Similar to <code>/dev/null</code></p>
</li>
<li>
<p>Useful for a connection that doesn&#8217;t go anywhere</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">InputStream</span> <span class="tok-n">inputStream</span> <span class="tok-o">=</span> <span class="tok-n">InputStream</span><span class="tok-o">.</span><span class="tok-na">nullInputStream</span><span class="tok-o">();</span>
<span class="tok-n">OutputStream</span> <span class="tok-n">outputStream</span> <span class="tok-o">=</span> <span class="tok-n">OutputStream</span><span class="tok-o">.</span><span class="tok-na">nullOutputStream</span><span class="tok-o">();</span>
<span class="tok-n">Reader</span> <span class="tok-n">reader</span> <span class="tok-o">=</span> <span class="tok-n">Reader</span><span class="tok-o">.</span><span class="tok-na">nullReader</span><span class="tok-o">();</span>
<span class="tok-n">Writer</span> <span class="tok-n">writer</span> <span class="tok-o">=</span> <span class="tok-n">Writer</span><span class="tok-o">.</span><span class="tok-na">nullWriter</span><span class="tok-o">();</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jdk_12">JDK 12</h3>
<div class="ulist">
<ul>
<li>
<p>Switch Statement Preview</p>
</li>
<li>
<p><code>teeing</code> <code>Collector</code></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_switch_expressions"><code>switch</code> Expressions</h4>
<div class="ulist">
<ul>
<li>
<p>Switch expressions (JEP 325)</p>
</li>
<li>
<p>A preview language feature</p>
<div class="ulist">
<ul>
<li>
<p>The idea of preview language features was introduced at the start of 2018, under JEP 12.</p>
</li>
<li>
<p>Essentially, this is a way of including beta versions of new features.</p>
</li>
<li>
<p>By doing this, it is still possible to make changes based on user feedback and, in an extreme case, remove the feature altogether if it is not well received.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kt">int</span> <span class="tok-n">numLetters</span><span class="tok-o">;</span>
<span class="tok-k">switch</span> <span class="tok-o">(</span><span class="tok-n">day</span><span class="tok-o">)</span> <span class="tok-o">{</span>
   <span class="tok-k">case</span> <span class="tok-n">MONDAY</span><span class="tok-o">:</span>
   <span class="tok-k">case</span> <span class="tok-n">FRIDAY</span><span class="tok-o">:</span>
   <span class="tok-k">case</span> <span class="tok-n">SUNDAY</span><span class="tok-o">:</span>
       <span class="tok-n">numLetters</span> <span class="tok-o">=</span> <span class="tok-mi">6</span><span class="tok-o">;</span>
       <span class="tok-k">break</span><span class="tok-o">;</span>
   <span class="tok-k">case</span> <span class="tok-n">TUESDAY</span><span class="tok-o">:</span>
       <span class="tok-n">numLetters</span> <span class="tok-o">=</span> <span class="tok-mi">7</span><span class="tok-o">;</span>
       <span class="tok-k">break</span><span class="tok-o">;</span>
   <span class="tok-k">case</span> <span class="tok-n">THURSDAY</span><span class="tok-o">:</span>
   <span class="tok-k">case</span> <span class="tok-n">SATURDAY</span><span class="tok-o">:</span>
       <span class="tok-n">numLetters</span> <span class="tok-o">=</span> <span class="tok-mi">8</span><span class="tok-o">;</span>
       <span class="tok-k">break</span><span class="tok-o">;</span>
   <span class="tok-k">case</span> <span class="tok-n">WEDNESDAY</span><span class="tok-o">:</span>
       <span class="tok-n">numLetters</span> <span class="tok-o">=</span> <span class="tok-mi">9</span><span class="tok-o">;</span>
       <span class="tok-k">break</span><span class="tok-o">;</span>
   <span class="tok-k">default</span><span class="tok-o">:</span>
       <span class="tok-k">throw</span> <span class="tok-k">new</span> <span class="tok-n">IllegalStateException</span><span class="tok-o">(</span><span class="tok-s">&quot;Huh? &quot;</span> <span class="tok-o">+</span> <span class="tok-n">day</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kt">int</span> <span class="tok-n">numLetters</span> <span class="tok-o">=</span> <span class="tok-k">switch</span> <span class="tok-o">(</span><span class="tok-n">day</span><span class="tok-o">)</span> <span class="tok-o">{</span>
   <span class="tok-k">case</span> <span class="tok-n">MONDAY</span><span class="tok-o">,</span> <span class="tok-n">FRIDAY</span><span class="tok-o">,</span> <span class="tok-n">SUNDAY</span> <span class="tok-o">-&gt;</span> <span class="tok-mi">6</span><span class="tok-o">;</span>
   <span class="tok-k">case</span> <span class="tok-n">TUESDAY</span> <span class="tok-o">-&gt;</span> <span class="tok-mi">7</span><span class="tok-o">;</span>
   <span class="tok-k">case</span> <span class="tok-n">THURSDAY</span><span class="tok-o">,</span> <span class="tok-n">SATURDAY</span> <span class="tok-o">-&gt;</span> <span class="tok-mi">8</span><span class="tok-o">;</span>
   <span class="tok-k">case</span> <span class="tok-n">WEDNESDAY</span> <span class="tok-o">-&gt;</span> <span class="tok-mi">9</span><span class="tok-o">;</span>
   <span class="tok-k">default</span> <span class="tok-o">-&gt;</span> <span class="tok-k">throw</span> <span class="tok-k">new</span> <span class="tok-n">IllegalStateException</span><span class="tok-o">(</span><span class="tok-s">&quot;Huh? &quot;</span> <span class="tok-o">+</span> <span class="tok-n">day</span><span class="tok-o">);</span>
<span class="tok-o">};</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_teeing_collector"><code>teeing</code> Collector</h4>
<div class="paragraph">
<p>Take three arguments:
* Three Collectors
* BiFunction</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/teeing.jpg" alt="teeing">
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kt">double</span> <span class="tok-n">average</span> <span class="tok-o">=</span> <span class="tok-n">Stream</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">7</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">6</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">)</span>
    <span class="tok-o">.</span><span class="tok-na">collect</span><span class="tok-o">(</span><span class="tok-n">teeing</span><span class="tok-o">(</span>
        <span class="tok-n">summingDouble</span><span class="tok-o">(</span><span class="tok-n">i</span> <span class="tok-o">-&gt;</span> <span class="tok-n">i</span><span class="tok-o">),</span>
        <span class="tok-n">counting</span><span class="tok-o">(),</span>
        <span class="tok-o">(</span><span class="tok-n">sum</span><span class="tok-o">,</span> <span class="tok-n">n</span><span class="tok-o">)</span> <span class="tok-o">-&gt;</span> <span class="tok-n">sum</span> <span class="tok-o">/</span> <span class="tok-n">n</span><span class="tok-o">));</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jdk_13">JDK 13</h3>
<div class="paragraph">
<p>Text Blocks Preview</p>
</div>
<div class="listingblock">
<div class="title">Sample HTML in a Text Block</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">String</span> <span class="tok-n">html</span> <span class="tok-o">=</span> <span class="tok-s">&quot;&quot;&quot;</span>
<span class="tok-s">              &lt;html&gt;</span>
<span class="tok-s">                  &lt;body&gt;</span>
<span class="tok-s">                      &lt;p&gt;Hello, world&lt;/p&gt;</span>
<span class="tok-s">                  &lt;/body&gt;</span>
<span class="tok-s">              &lt;/html&gt;</span>
<span class="tok-s">              &quot;&quot;&quot;</span><span class="tok-o">;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Sample SQL</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">String</span> <span class="tok-n">query</span> <span class="tok-o">=</span> <span class="tok-s">&quot;&quot;&quot;</span>
<span class="tok-s">               SELECT &lt;code&gt;EMP_ID&lt;/code&gt;, &lt;code&gt;LAST_NAME&lt;/code&gt; FROM &lt;code&gt;EMPLOYEE_TB&lt;/code&gt;</span>
<span class="tok-s">               WHERE &lt;code&gt;CITY&lt;/code&gt; = &#39;INDIANAPOLIS&#39;</span>
<span class="tok-s">               ORDER BY &lt;code&gt;EMP_ID&lt;/code&gt;, &lt;code&gt;LAST_NAME&lt;/code&gt;;</span>
<span class="tok-s">               &quot;&quot;&quot;</span><span class="tok-o">;</span></code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_project_loom">Project Loom</h4>
<div class="ulist">
<ul>
<li>
<p>High-throughput and lightweight concurrency in Java to help simplify writing scalable software</p>
</li>
<li>
<p>In Java, each thread is mapped to an operating system thread by the JVM</p>
</li>
<li>
<p>Currently Java uses Context Switching</p>
<div class="ulist">
<ul>
<li>
<p>A bunch of CPU time is allocated to schedule the threads on the core.</p>
</li>
<li>
<p>If a thread goes to wait state (e.g., waiting for a database call to respond), the thread will be marked as <em>paused</em> and a separate thread is allocated to the CPU resource.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Instead of allocating one OS thread per Java thread (current JVM model)</p>
</li>
<li>
<p>Project Loom provides additional schedulers that schedule the multiple lightweight threads on the same OS thread.</p>
</li>
<li>
<p>This approach provides better usage (OS threads are always working and not waiting) and much less context switching.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_fibers">Fibers</h4>
<div class="ulist">
<ul>
<li>
<p>Lightweight, user-mode threads, scheduled by the Java virtual machine, not the operating system.</p>
</li>
<li>
<p>Fibers are low footprint and have negligible task-switching overhead. You can have millions of them!</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_running_a_fiber">Running a <code>Fiber</code></h4>
<div class="paragraph">
<p>Running a <code>Fiber</code> would just be sending a <code>Runnable</code> to a <code>Fiber</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Fiber</span><span class="tok-o">.</span><span class="tok-na">schedule</span><span class="tok-o">(</span><span class="tok-n">runnable</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_showing_the_difference">Showing the difference</h4>
<div class="paragraph">
<p>Before Using Loom:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/before_loom.png" alt="before loom">
</div>
</div>
<div class="paragraph">
<p>After Using Loom:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/after_loom.png" alt="after loom">
</div>
</div>
<div class="paragraph">
<p>Source: <a href="https://developers.redhat.com/blog/2019/06/19/project-loom-lightweight-java-threads/">RedHat Project Loom Blog</a></p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_thank_you">Thank You</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Email: <a href="mailto:dhinojosa@evolutionnext.com">dhinojosa@evolutionnext.com</a></p>
</li>
<li>
<p>Github: <a href="https://www.github.com/dhinojosa" class="bare">https://www.github.com/dhinojosa</a></p>
</li>
<li>
<p>Twitter: <a href="http://twitter.com/dhinojosa" class="bare">http://twitter.com/dhinojosa</a></p>
</li>
<li>
<p>Linked In: <a href="http://www.linkedin.com/in/dhevolutionnext" class="bare">http://www.linkedin.com/in/dhevolutionnext</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2019-10-10 03:36:52 -0600
</div>
</div>
<style>
pre.pygments .hll { background-color: #ffffcc }
pre.pygments  { background: #f0f0f0; }
pre.pygments .tok-c { color: #60a0b0; font-style: italic } /* Comment */
pre.pygments .tok-err { border: 1px solid #FF0000 } /* Error */
pre.pygments .tok-k { color: #007020; font-weight: bold } /* Keyword */
pre.pygments .tok-o { color: #666666 } /* Operator */
pre.pygments .tok-ch { color: #60a0b0; font-style: italic } /* Comment.Hashbang */
pre.pygments .tok-cm { color: #60a0b0; font-style: italic } /* Comment.Multiline */
pre.pygments .tok-cp { color: #007020 } /* Comment.Preproc */
pre.pygments .tok-cpf { color: #60a0b0; font-style: italic } /* Comment.PreprocFile */
pre.pygments .tok-c1 { color: #60a0b0; font-style: italic } /* Comment.Single */
pre.pygments .tok-cs { color: #60a0b0; background-color: #fff0f0 } /* Comment.Special */
pre.pygments .tok-gd { color: #A00000 } /* Generic.Deleted */
pre.pygments .tok-ge { font-style: italic } /* Generic.Emph */
pre.pygments .tok-gr { color: #FF0000 } /* Generic.Error */
pre.pygments .tok-gh { color: #000080; font-weight: bold } /* Generic.Heading */
pre.pygments .tok-gi { color: #00A000 } /* Generic.Inserted */
pre.pygments .tok-go { color: #888888 } /* Generic.Output */
pre.pygments .tok-gp { color: #c65d09; font-weight: bold } /* Generic.Prompt */
pre.pygments .tok-gs { font-weight: bold } /* Generic.Strong */
pre.pygments .tok-gu { color: #800080; font-weight: bold } /* Generic.Subheading */
pre.pygments .tok-gt { color: #0044DD } /* Generic.Traceback */
pre.pygments .tok-kc { color: #007020; font-weight: bold } /* Keyword.Constant */
pre.pygments .tok-kd { color: #007020; font-weight: bold } /* Keyword.Declaration */
pre.pygments .tok-kn { color: #007020; font-weight: bold } /* Keyword.Namespace */
pre.pygments .tok-kp { color: #007020 } /* Keyword.Pseudo */
pre.pygments .tok-kr { color: #007020; font-weight: bold } /* Keyword.Reserved */
pre.pygments .tok-kt { color: #902000 } /* Keyword.Type */
pre.pygments .tok-m { color: #40a070 } /* Literal.Number */
pre.pygments .tok-s { color: #4070a0 } /* Literal.String */
pre.pygments .tok-na { color: #4070a0 } /* Name.Attribute */
pre.pygments .tok-nb { color: #007020 } /* Name.Builtin */
pre.pygments .tok-nc { color: #0e84b5; font-weight: bold } /* Name.Class */
pre.pygments .tok-no { color: #60add5 } /* Name.Constant */
pre.pygments .tok-nd { color: #555555; font-weight: bold } /* Name.Decorator */
pre.pygments .tok-ni { color: #d55537; font-weight: bold } /* Name.Entity */
pre.pygments .tok-ne { color: #007020 } /* Name.Exception */
pre.pygments .tok-nf { color: #06287e } /* Name.Function */
pre.pygments .tok-nl { color: #002070; font-weight: bold } /* Name.Label */
pre.pygments .tok-nn { color: #0e84b5; font-weight: bold } /* Name.Namespace */
pre.pygments .tok-nt { color: #062873; font-weight: bold } /* Name.Tag */
pre.pygments .tok-nv { color: #bb60d5 } /* Name.Variable */
pre.pygments .tok-ow { color: #007020; font-weight: bold } /* Operator.Word */
pre.pygments .tok-w { color: #bbbbbb } /* Text.Whitespace */
pre.pygments .tok-mb { color: #40a070 } /* Literal.Number.Bin */
pre.pygments .tok-mf { color: #40a070 } /* Literal.Number.Float */
pre.pygments .tok-mh { color: #40a070 } /* Literal.Number.Hex */
pre.pygments .tok-mi { color: #40a070 } /* Literal.Number.Integer */
pre.pygments .tok-mo { color: #40a070 } /* Literal.Number.Oct */
pre.pygments .tok-sa { color: #4070a0 } /* Literal.String.Affix */
pre.pygments .tok-sb { color: #4070a0 } /* Literal.String.Backtick */
pre.pygments .tok-sc { color: #4070a0 } /* Literal.String.Char */
pre.pygments .tok-dl { color: #4070a0 } /* Literal.String.Delimiter */
pre.pygments .tok-sd { color: #4070a0; font-style: italic } /* Literal.String.Doc */
pre.pygments .tok-s2 { color: #4070a0 } /* Literal.String.Double */
pre.pygments .tok-se { color: #4070a0; font-weight: bold } /* Literal.String.Escape */
pre.pygments .tok-sh { color: #4070a0 } /* Literal.String.Heredoc */
pre.pygments .tok-si { color: #70a0d0; font-style: italic } /* Literal.String.Interpol */
pre.pygments .tok-sx { color: #c65d09 } /* Literal.String.Other */
pre.pygments .tok-sr { color: #235388 } /* Literal.String.Regex */
pre.pygments .tok-s1 { color: #4070a0 } /* Literal.String.Single */
pre.pygments .tok-ss { color: #517918 } /* Literal.String.Symbol */
pre.pygments .tok-bp { color: #007020 } /* Name.Builtin.Pseudo */
pre.pygments .tok-fm { color: #06287e } /* Name.Function.Magic */
pre.pygments .tok-vc { color: #bb60d5 } /* Name.Variable.Class */
pre.pygments .tok-vg { color: #bb60d5 } /* Name.Variable.Global */
pre.pygments .tok-vi { color: #bb60d5 } /* Name.Variable.Instance */
pre.pygments .tok-vm { color: #bb60d5 } /* Name.Variable.Magic */
pre.pygments .tok-il { color: #40a070 } /* Literal.Number.Integer.Long */
</style>
</body>
</html>